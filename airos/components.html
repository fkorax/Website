<html><head><meta charset="utf-8"><title>airOS Components - ATPC</title><link rel="canonical" href="http://www.atpc.one/airos/components.html"><meta name="author" content="ATPC"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" type="text/css" href="../font.css"><link rel="stylesheet" type="text/css" href="../style.css"><link rel="stylesheet" type="text/css" href="style.css"><link rel="shortcut icon" type="image/x-icon" href="../favicon.ico"></head><body><div id="header"><iframe id="backlink" src="http://atpc.one/widget/" frameborder="0" scrolling="no" height="48" width="140"></iframe></div><div id="title"><h1>airOS Components</h1><div class="separator"></div></div></div><div id="components"><p></p><br><p><h2>airOS</h2></p><p align="center"><br><a href="http://atpc.one/airos/"><img src="http://www.atpc.one/airos/airOS-Transparent-Dark.svg" height="160" alt="airOS" /></a><br></p><br>![platforms](https://img.shields.io/badge/platforms-arm-lightgrey.svg)<br><h1> airOS</h1>airOS is a new, high-level operating system for ARM computers.<br><h2> Cloning, Building, and Running</h2><h3> Requirements</h3>To build airOS, these programs must be **installed** on your system, since airOS' software management is based on packages.<br><code>General requirements:<br>zsh<br>make<br><br>For ARM systems:<br>gcc<br><br>For non-ARM systems (cross-compiling):<br>gcc-arm-linux-gnueabi<br>gcc-arm-linux-gnueabihf<br>binutils-arm-linux-gnueabi<br></code><br>To install the cross-compiling toolchain on Debian-based systems, just run<br><code>$> sudo apt-get install gcc-arm-linux-gnueabi<br>$> sudo apt-get install gcc-arm-linux-gnueabihf<br></code><br>which will install all the necessary tools.<br><h3> Quick Setup</h3><code>$> cd path/to/your/projects/folder/<br><br># Update your repository<br>$> ./update<br><br># Configure for your system<br>$> ./configure<br><br># Build airOS<br>$> make<br></code><br><h3> Testing in a VM</h3>We're using QEMU for virtualization, so make sure QEMU is installed on your<br>host system.<br>To run airOS in QEMU after a successful build, run<br><code>$> make qemu<br></code><br>to launch airOS in QEMU.<br><h3> Testing on Hardware</h3>Our target hardware is the Raspberry Pi, but airOS might work on other platforms,<br>too. Just install the built image on your testing hardware and start debugging.<br><h2> Credits</h2>Copyright (c) 2017 by ATPC<br>[Open Source Licenses](http://www.atpc.one/airos/components.html)<br>Throughout the hole project, "corresponding README" is defined as the nearest<br>README information file containing a legal notice, relative to the file referencing it, whereas "nearest"<br>means "in the same directory" or "in the nearest directory above".<br><h3> License Files</h3><code>GNU  GPL v3:   gpl-3.0.txt<br>GNU AGPL v3:  agpl-3.0.txt<br>GNU LGPL v3:  lgpl-3.0.txt<br></code><br><p></p><div class="separator"></div><br><p><h2>linux</h2></p>        Linux kernel release 4.x &lt;http://kernel.org/&gt;
<br>
<br>These are the release notes for Linux version 4.  Read them carefully,
<br>as they tell you what this is all about, explain how to install the
<br>kernel, and what to do if something goes wrong.
<br>
<br>WHAT IS LINUX?
<br>
<br>  Linux is a clone of the operating system Unix, written from scratch by
<br>  Linus Torvalds with assistance from a loosely-knit team of hackers across
<br>  the Net. It aims towards POSIX and Single UNIX Specification compliance.
<br>
<br>  It has all the features you would expect in a modern fully-fledged Unix,
<br>  including true multitasking, virtual memory, shared libraries, demand
<br>  loading, shared copy-on-write executables, proper memory management,
<br>  and multistack networking including IPv4 and IPv6.
<br>
<br>  It is distributed under the GNU General Public License - see the
<br>  accompanying COPYING file for more details.
<br>
<br>ON WHAT HARDWARE DOES IT RUN?
<br>
<br>  Although originally developed first for 32-bit x86-based PCs (386 or higher),
<br>  today Linux also runs on (at least) the Compaq Alpha AXP, Sun SPARC and
<br>  UltraSPARC, Motorola 68000, PowerPC, PowerPC64, ARM, Hitachi SuperH, Cell,
<br>  IBM S/390, MIPS, HP PA-RISC, Intel IA-64, DEC VAX, AMD x86-64, AXIS CRIS,
<br>  Xtensa, Tilera TILE, AVR32, ARC and Renesas M32R architectures.
<br>
<br>  Linux is easily portable to most general-purpose 32- or 64-bit architectures
<br>  as long as they have a paged memory management unit (PMMU) and a port of the
<br>  GNU C compiler (gcc) (part of The GNU Compiler Collection, GCC). Linux has
<br>  also been ported to a number of architectures without a PMMU, although
<br>  functionality is then obviously somewhat limited.
<br>  Linux has also been ported to itself. You can now run the kernel as a
<br>  userspace application - this is called UserMode Linux (UML).
<br>
<br>DOCUMENTATION:
<br>
<br> - There is a lot of documentation available both in electronic form on
<br>   the Internet and in books, both Linux-specific and pertaining to
<br>   general UNIX questions.  I'd recommend looking into the documentation
<br>   subdirectories on any Linux FTP site for the LDP (Linux Documentation
<br>   Project) books.  This README is not meant to be documentation on the
<br>   system: there are much better sources available.
<br>
<br> - There are various README files in the Documentation/ subdirectory:
<br>   these typically contain kernel-specific installation notes for some
<br>   drivers for example. See Documentation/00-INDEX for a list of what
<br>   is contained in each file.  Please read the Changes file, as it
<br>   contains information about the problems, which may result by upgrading
<br>   your kernel.
<br>
<br> - The Documentation/DocBook/ subdirectory contains several guides for
<br>   kernel developers and users.  These guides can be rendered in a
<br>   number of formats:  PostScript (.ps), PDF, HTML, & man-pages, among others.
<br>   After installation, "make psdocs", "make pdfdocs", "make htmldocs",
<br>   or "make mandocs" will render the documentation in the requested format.
<br>
<br>INSTALLING the kernel source:
<br>
<br> - If you install the full sources, put the kernel tarball in a
<br>   directory where you have permissions (e.g. your home directory) and
<br>   unpack it:
<br>
<br>     xz -cd linux-4.X.tar.xz | tar xvf -
<br>
<br>   Replace "X" with the version number of the latest kernel.
<br>
<br>   Do NOT use the /usr/src/linux area! This area has a (usually
<br>   incomplete) set of kernel headers that are used by the library header
<br>   files.  They should match the library, and not get messed up by
<br>   whatever the kernel-du-jour happens to be.
<br>
<br> - You can also upgrade between 4.x releases by patching.  Patches are
<br>   distributed in the xz format.  To install by patching, get all the
<br>   newer patch files, enter the top level directory of the kernel source
<br>   (linux-4.X) and execute:
<br>
<br>     xz -cd ../patch-4.x.xz | patch -p1
<br>
<br>   Replace "x" for all versions bigger than the version "X" of your current
<br>   source tree, _in_order_, and you should be ok.  You may want to remove
<br>   the backup files (some-file-name~ or some-file-name.orig), and make sure
<br>   that there are no failed patches (some-file-name# or some-file-name.rej).
<br>   If there are, either you or I have made a mistake.
<br>
<br>   Unlike patches for the 4.x kernels, patches for the 4.x.y kernels
<br>   (also known as the -stable kernels) are not incremental but instead apply
<br>   directly to the base 4.x kernel.  For example, if your base kernel is 4.0
<br>   and you want to apply the 4.0.3 patch, you must not first apply the 4.0.1
<br>   and 4.0.2 patches. Similarly, if you are running kernel version 4.0.2 and
<br>   want to jump to 4.0.3, you must first reverse the 4.0.2 patch (that is,
<br>   patch -R) _before_ applying the 4.0.3 patch. You can read more on this in
<br>   Documentation/applying-patches.txt
<br>
<br>   Alternatively, the script patch-kernel can be used to automate this
<br>   process.  It determines the current kernel version and applies any
<br>   patches found.
<br>
<br>     linux/scripts/patch-kernel linux
<br>
<br>   The first argument in the command above is the location of the
<br>   kernel source.  Patches are applied from the current directory, but
<br>   an alternative directory can be specified as the second argument.
<br>
<br> - Make sure you have no stale .o files and dependencies lying around:
<br>
<br>     cd linux
<br>     make mrproper
<br>
<br>   You should now have the sources correctly installed.
<br>
<br>SOFTWARE REQUIREMENTS
<br>
<br>   Compiling and running the 4.x kernels requires up-to-date
<br>   versions of various software packages.  Consult
<br>   Documentation/Changes for the minimum version numbers required
<br>   and how to get updates for these packages.  Beware that using
<br>   excessively old versions of these packages can cause indirect
<br>   errors that are very difficult to track down, so don't assume that
<br>   you can just update packages when obvious problems arise during
<br>   build or operation.
<br>
<br>BUILD directory for the kernel:
<br>
<br>   When compiling the kernel, all output files will per default be
<br>   stored together with the kernel source code.
<br>   Using the option "make O=output/dir" allows you to specify an alternate
<br>   place for the output files (including .config).
<br>   Example:
<br>
<br>     kernel source code: /usr/src/linux-4.X
<br>     build directory:    /home/name/build/kernel
<br>
<br>   To configure and build the kernel, use:
<br>
<br>     cd /usr/src/linux-4.X
<br>     make O=/home/name/build/kernel menuconfig
<br>     make O=/home/name/build/kernel
<br>     sudo make O=/home/name/build/kernel modules_install install
<br>
<br>   Please note: If the 'O=output/dir' option is used, then it must be
<br>   used for all invocations of make.
<br>
<br>CONFIGURING the kernel:
<br>
<br>   Do not skip this step even if you are only upgrading one minor
<br>   version.  New configuration options are added in each release, and
<br>   odd problems will turn up if the configuration files are not set up
<br>   as expected.  If you want to carry your existing configuration to a
<br>   new version with minimal work, use "make oldconfig", which will
<br>   only ask you for the answers to new questions.
<br>
<br> - Alternative configuration commands are:
<br>
<br>     "make config"      Plain text interface.
<br>
<br>     "make menuconfig"  Text based color menus, radiolists & dialogs.
<br>
<br>     "make nconfig"     Enhanced text based color menus.
<br>
<br>     "make xconfig"     Qt based configuration tool.
<br>
<br>     "make gconfig"     GTK+ based configuration tool.
<br>
<br>     "make oldconfig"   Default all questions based on the contents of
<br>                        your existing ./.config file and asking about
<br>                        new config symbols.
<br>
<br>     "make silentoldconfig"
<br>                        Like above, but avoids cluttering the screen
<br>                        with questions already answered.
<br>                        Additionally updates the dependencies.
<br>
<br>     "make olddefconfig"
<br>                        Like above, but sets new symbols to their default
<br>                        values without prompting.
<br>
<br>     "make defconfig"   Create a ./.config file by using the default
<br>                        symbol values from either arch/$ARCH/defconfig
<br>                        or arch/$ARCH/configs/${PLATFORM}_defconfig,
<br>                        depending on the architecture.
<br>
<br>     "make ${PLATFORM}_defconfig"
<br>                        Create a ./.config file by using the default
<br>                        symbol values from
<br>                        arch/$ARCH/configs/${PLATFORM}_defconfig.
<br>                        Use "make help" to get a list of all available
<br>                        platforms of your architecture.
<br>
<br>     "make allyesconfig"
<br>                        Create a ./.config file by setting symbol
<br>                        values to 'y' as much as possible.
<br>
<br>     "make allmodconfig"
<br>                        Create a ./.config file by setting symbol
<br>                        values to 'm' as much as possible.
<br>
<br>     "make allnoconfig" Create a ./.config file by setting symbol
<br>                        values to 'n' as much as possible.
<br>
<br>     "make randconfig"  Create a ./.config file by setting symbol
<br>                        values to random values.
<br>
<br>     "make localmodconfig" Create a config based on current config and
<br>                           loaded modules (lsmod). Disables any module
<br>                           option that is not needed for the loaded modules.
<br>
<br>                           To create a localmodconfig for another machine,
<br>                           store the lsmod of that machine into a file
<br>                           and pass it in as a LSMOD parameter.
<br>
<br>                   target$ lsmod &gt; /tmp/mylsmod
<br>                   target$ scp /tmp/mylsmod host:/tmp
<br>
<br>                   host$ make LSMOD=/tmp/mylsmod localmodconfig
<br>
<br>                           The above also works when cross compiling.
<br>
<br>     "make localyesconfig" Similar to localmodconfig, except it will convert
<br>                           all module options to built in (=y) options.
<br>
<br>   You can find more information on using the Linux kernel config tools
<br>   in Documentation/kbuild/kconfig.txt.
<br>
<br> - NOTES on "make config":
<br>
<br>    - Having unnecessary drivers will make the kernel bigger, and can
<br>      under some circumstances lead to problems: probing for a
<br>      nonexistent controller card may confuse your other controllers
<br>
<br>    - A kernel with math-emulation compiled in will still use the
<br>      coprocessor if one is present: the math emulation will just
<br>      never get used in that case.  The kernel will be slightly larger,
<br>      but will work on different machines regardless of whether they
<br>      have a math coprocessor or not.
<br>
<br>    - The "kernel hacking" configuration details usually result in a
<br>      bigger or slower kernel (or both), and can even make the kernel
<br>      less stable by configuring some routines to actively try to
<br>      break bad code to find kernel problems (kmalloc()).  Thus you
<br>      should probably answer 'n' to the questions for "development",
<br>      "experimental", or "debugging" features.
<br>
<br>COMPILING the kernel:
<br>
<br> - Make sure you have at least gcc 3.2 available.
<br>   For more information, refer to Documentation/Changes.
<br>
<br>   Please note that you can still run a.out user programs with this kernel.
<br>
<br> - Do a "make" to create a compressed kernel image. It is also
<br>   possible to do "make install" if you have lilo installed to suit the
<br>   kernel makefiles, but you may want to check your particular lilo setup first.
<br>
<br>   To do the actual install, you have to be root, but none of the normal
<br>   build should require that. Don't take the name of root in vain.
<br>
<br> - If you configured any of the parts of the kernel as `modules', you
<br>   will also have to do "make modules_install".
<br>
<br> - Verbose kernel compile/build output:
<br>
<br>   Normally, the kernel build system runs in a fairly quiet mode (but not
<br>   totally silent).  However, sometimes you or other kernel developers need
<br>   to see compile, link, or other commands exactly as they are executed.
<br>   For this, use "verbose" build mode.  This is done by passing
<br>   "V=1" to the "make" command, e.g.
<br>
<br>     make V=1 all
<br>
<br>   To have the build system also tell the reason for the rebuild of each
<br>   target, use "V=2".  The default is "V=0".
<br>
<br> - Keep a backup kernel handy in case something goes wrong.  This is
<br>   especially true for the development releases, since each new release
<br>   contains new code which has not been debugged.  Make sure you keep a
<br>   backup of the modules corresponding to that kernel, as well.  If you
<br>   are installing a new kernel with the same version number as your
<br>   working kernel, make a backup of your modules directory before you
<br>   do a "make modules_install".
<br>
<br>   Alternatively, before compiling, use the kernel config option
<br>   "LOCALVERSION" to append a unique suffix to the regular kernel version.
<br>   LOCALVERSION can be set in the "General Setup" menu.
<br>
<br> - In order to boot your new kernel, you'll need to copy the kernel
<br>   image (e.g. .../linux/arch/x86/boot/bzImage after compilation)
<br>   to the place where your regular bootable kernel is found.
<br>
<br> - Booting a kernel directly from a floppy without the assistance of a
<br>   bootloader such as LILO, is no longer supported.
<br>
<br>   If you boot Linux from the hard drive, chances are you use LILO, which
<br>   uses the kernel image as specified in the file /etc/lilo.conf.  The
<br>   kernel image file is usually /vmlinuz, /boot/vmlinuz, /bzImage or
<br>   /boot/bzImage.  To use the new kernel, save a copy of the old image
<br>   and copy the new image over the old one.  Then, you MUST RERUN LILO
<br>   to update the loading map! If you don't, you won't be able to boot
<br>   the new kernel image.
<br>
<br>   Reinstalling LILO is usually a matter of running /sbin/lilo.
<br>   You may wish to edit /etc/lilo.conf to specify an entry for your
<br>   old kernel image (say, /vmlinux.old) in case the new one does not
<br>   work.  See the LILO docs for more information.
<br>
<br>   After reinstalling LILO, you should be all set.  Shutdown the system,
<br>   reboot, and enjoy!
<br>
<br>   If you ever need to change the default root device, video mode,
<br>   ramdisk size, etc.  in the kernel image, use the 'rdev' program (or
<br>   alternatively the LILO boot options when appropriate).  No need to
<br>   recompile the kernel to change these parameters.
<br>
<br> - Reboot with the new kernel and enjoy.
<br>
<br>IF SOMETHING GOES WRONG:
<br>
<br> - If you have problems that seem to be due to kernel bugs, please check
<br>   the file MAINTAINERS to see if there is a particular person associated
<br>   with the part of the kernel that you are having trouble with. If there
<br>   isn't anyone listed there, then the second best thing is to mail
<br>   them to me (torvalds@linux-foundation.org), and possibly to any other
<br>   relevant mailing-list or to the newsgroup.
<br>
<br> - In all bug-reports, *please* tell what kernel you are talking about,
<br>   how to duplicate the problem, and what your setup is (use your common
<br>   sense).  If the problem is new, tell me so, and if the problem is
<br>   old, please try to tell me when you first noticed it.
<br>
<br> - If the bug results in a message like
<br>
<br>     unable to handle kernel paging request at address C0000010
<br>     Oops: 0002
<br>     EIP:   0010:XXXXXXXX
<br>     eax: xxxxxxxx   ebx: xxxxxxxx   ecx: xxxxxxxx   edx: xxxxxxxx
<br>     esi: xxxxxxxx   edi: xxxxxxxx   ebp: xxxxxxxx
<br>     ds: xxxx  es: xxxx  fs: xxxx  gs: xxxx
<br>     Pid: xx, process nr: xx
<br>     xx xx xx xx xx xx xx xx xx xx
<br>
<br>   or similar kernel debugging information on your screen or in your
<br>   system log, please duplicate it *exactly*.  The dump may look
<br>   incomprehensible to you, but it does contain information that may
<br>   help debugging the problem.  The text above the dump is also
<br>   important: it tells something about why the kernel dumped code (in
<br>   the above example, it's due to a bad kernel pointer). More information
<br>   on making sense of the dump is in Documentation/oops-tracing.txt
<br>
<br> - If you compiled the kernel with CONFIG_KALLSYMS you can send the dump
<br>   as is, otherwise you will have to use the "ksymoops" program to make
<br>   sense of the dump (but compiling with CONFIG_KALLSYMS is usually preferred).
<br>   This utility can be downloaded from
<br>   ftp://ftp.&lt;country&gt;.kernel.org/pub/linux/utils/kernel/ksymoops/ .
<br>   Alternatively, you can do the dump lookup by hand:
<br>
<br> - In debugging dumps like the above, it helps enormously if you can
<br>   look up what the EIP value means.  The hex value as such doesn't help
<br>   me or anybody else very much: it will depend on your particular
<br>   kernel setup.  What you should do is take the hex value from the EIP
<br>   line (ignore the "0010:"), and look it up in the kernel namelist to
<br>   see which kernel function contains the offending address.
<br>
<br>   To find out the kernel function name, you'll need to find the system
<br>   binary associated with the kernel that exhibited the symptom.  This is
<br>   the file 'linux/vmlinux'.  To extract the namelist and match it against
<br>   the EIP from the kernel crash, do:
<br>
<br>     nm vmlinux | sort | less
<br>
<br>   This will give you a list of kernel addresses sorted in ascending
<br>   order, from which it is simple to find the function that contains the
<br>   offending address.  Note that the address given by the kernel
<br>   debugging messages will not necessarily match exactly with the
<br>   function addresses (in fact, that is very unlikely), so you can't
<br>   just 'grep' the list: the list will, however, give you the starting
<br>   point of each kernel function, so by looking for the function that
<br>   has a starting address lower than the one you are searching for but
<br>   is followed by a function with a higher address you will find the one
<br>   you want.  In fact, it may be a good idea to include a bit of
<br>   "context" in your problem report, giving a few lines around the
<br>   interesting one.
<br>
<br>   If you for some reason cannot do the above (you have a pre-compiled
<br>   kernel image or similar), telling me as much about your setup as
<br>   possible will help.  Please read the REPORTING-BUGS document for details.
<br>
<br> - Alternatively, you can use gdb on a running kernel. (read-only; i.e. you
<br>   cannot change values or set break points.) To do this, first compile the
<br>   kernel with -g; edit arch/x86/Makefile appropriately, then do a "make
<br>   clean". You'll also need to enable CONFIG_PROC_FS (via "make config").
<br>
<br>   After you've rebooted with the new kernel, do "gdb vmlinux /proc/kcore".
<br>   You can now use all the usual gdb commands. The command to look up the
<br>   point where your system crashed is "l *0xXXXXXXXX". (Replace the XXXes
<br>   with the EIP value.)
<br>
<br>   gdb'ing a non-running kernel currently fails because gdb (wrongly)
<br>   disregards the starting offset for which the kernel is compiled.
<br>
<br><p></p><div class="separator"></div><br><p><h2>selinux</h2></p>Please see Documentation/security/SELinux.txt for information on
<br>installing a dummy SELinux policy.
<br><p></p><div class="separator"></div><br><p><h2>ksymoops</h2></p>ksymoops has been removed from the kernel.  It was always meant to be a
<br>free standing utility, not linked to any particular kernel version.
<br>The latest version can be found in
<br>ftp://ftp.&lt;country&gt;.kernel.org/pub/linux/utils/kernel/ksymoops together
<br>with patches to other utilities in order to give more accurate Oops
<br>debugging.
<br>
<br>Keith Owens &lt;kaos@ocs.com.au&gt; Sat Jun 19 10:30:34 EST 1999
<br><p></p><div class="separator"></div><br><p><h2>cramfs</h2></p>Notes on Filesystem Layout
<br>--------------------------
<br>
<br>These notes describe what mkcramfs generates.  Kernel requirements are
<br>a bit looser, e.g. it doesn't care if the &lt;file_data&gt; items are
<br>swapped around (though it does care that directory entries (inodes) in
<br>a given directory are contiguous, as this is used by readdir).
<br>
<br>All data is currently in host-endian format; neither mkcramfs nor the
<br>kernel ever do swabbing.  (See section `Block Size' below.)
<br>
<br>&lt;filesystem&gt;:
<br>	&lt;superblock&gt;
<br>	&lt;directory_structure&gt;
<br>	&lt;data&gt;
<br>
<br>&lt;superblock&gt;: struct cramfs_super (see cramfs_fs.h).
<br>
<br>&lt;directory_structure&gt;:
<br>	For each file:
<br>		struct cramfs_inode (see cramfs_fs.h).
<br>		Filename.  Not generally null-terminated, but it is
<br>		 null-padded to a multiple of 4 bytes.
<br>
<br>The order of inode traversal is described as "width-first" (not to be
<br>confused with breadth-first); i.e. like depth-first but listing all of
<br>a directory's entries before recursing down its subdirectories: the
<br>same order as `ls -AUR' (but without the /^\..*:$/ directory header
<br>lines); put another way, the same order as `find -type d -exec
<br>ls -AU1 {} \;'.
<br>
<br>Beginning in 2.4.7, directory entries are sorted.  This optimization
<br>allows cramfs_lookup to return more quickly when a filename does not
<br>exist, speeds up user-space directory sorts, etc.
<br>
<br>&lt;data&gt;:
<br>	One &lt;file_data&gt; for each file that's either a symlink or a
<br>	 regular file of non-zero st_size.
<br>
<br>&lt;file_data&gt;:
<br>	nblocks * &lt;block_pointer&gt;
<br>	 (where nblocks = (st_size - 1) / blksize + 1)
<br>	nblocks * &lt;block&gt;
<br>	padding to multiple of 4 bytes
<br>
<br>The i'th &lt;block_pointer&gt; for a file stores the byte offset of the
<br>*end* of the i'th &lt;block&gt; (i.e. one past the last byte, which is the
<br>same as the start of the (i+1)'th &lt;block&gt; if there is one).  The first
<br>&lt;block&gt; immediately follows the last &lt;block_pointer&gt; for the file.
<br>&lt;block_pointer&gt;s are each 32 bits long.
<br>
<br>The order of &lt;file_data&gt;'s is a depth-first descent of the directory
<br>tree, i.e. the same order as `find -size +0 \( -type f -o -type l \)
<br>-print'.
<br>
<br>
<br>&lt;block&gt;: The i'th &lt;block&gt; is the output of zlib's compress function
<br>applied to the i'th blksize-sized chunk of the input data.
<br>(For the last &lt;block&gt; of the file, the input may of course be smaller.)
<br>Each &lt;block&gt; may be a different size.  (See &lt;block_pointer&gt; above.)
<br>&lt;block&gt;s are merely byte-aligned, not generally u32-aligned.
<br>
<br>
<br>Holes
<br>-----
<br>
<br>This kernel supports cramfs holes (i.e. [efficient representation of]
<br>blocks in uncompressed data consisting entirely of NUL bytes), but by
<br>default mkcramfs doesn't test for & create holes, since cramfs in
<br>kernels up to at least 2.3.39 didn't support holes.  Run mkcramfs
<br>with -z if you want it to create files that can have holes in them.
<br>
<br>
<br>Tools
<br>-----
<br>
<br>The cramfs user-space tools, including mkcramfs and cramfsck, are
<br>located at &lt;http://sourceforge.net/projects/cramfs/&gt;.
<br>
<br>
<br>Future Development
<br>==================
<br>
<br>Block Size
<br>----------
<br>
<br>(Block size in cramfs refers to the size of input data that is
<br>compressed at a time.  It's intended to be somewhere around
<br>PAGE_SIZE for cramfs_readpage's convenience.)
<br>
<br>The superblock ought to indicate the block size that the fs was
<br>written for, since comments in &lt;linux/pagemap.h&gt; indicate that
<br>PAGE_SIZE may grow in future (if I interpret the comment
<br>correctly).
<br>
<br>Currently, mkcramfs #define's PAGE_SIZE as 4096 and uses that
<br>for blksize, whereas Linux-2.3.39 uses its PAGE_SIZE, which in
<br>turn is defined as PAGE_SIZE (which can be as large as 32KB on arm).
<br>This discrepancy is a bug, though it's not clear which should be
<br>changed.
<br>
<br>One option is to change mkcramfs to take its PAGE_SIZE from
<br>&lt;asm/page.h&gt;.  Personally I don't like this option, but it does
<br>require the least amount of change: just change `#define
<br>PAGE_SIZE (4096)' to `#include &lt;asm/page.h&gt;'.  The disadvantage
<br>is that the generated cramfs cannot always be shared between different
<br>kernels, not even necessarily kernels of the same architecture if
<br>PAGE_SIZE is subject to change between kernel versions
<br>(currently possible with arm and ia64).
<br>
<br>The remaining options try to make cramfs more sharable.
<br>
<br>One part of that is addressing endianness.  The two options here are
<br>`always use little-endian' (like ext2fs) or `writer chooses
<br>endianness; kernel adapts at runtime'.  Little-endian wins because of
<br>code simplicity and little CPU overhead even on big-endian machines.
<br>
<br>The cost of swabbing is changing the code to use the le32_to_cpu
<br>etc. macros as used by ext2fs.  We don't need to swab the compressed
<br>data, only the superblock, inodes and block pointers.
<br>
<br>
<br>The other part of making cramfs more sharable is choosing a block
<br>size.  The options are:
<br>
<br>  1. Always 4096 bytes.
<br>
<br>  2. Writer chooses blocksize; kernel adapts but rejects blocksize &gt;
<br>     PAGE_SIZE.
<br>
<br>  3. Writer chooses blocksize; kernel adapts even to blocksize &gt;
<br>     PAGE_SIZE.
<br>
<br>It's easy enough to change the kernel to use a smaller value than
<br>PAGE_SIZE: just make cramfs_readpage read multiple blocks.
<br>
<br>The cost of option 1 is that kernels with a larger PAGE_SIZE
<br>value don't get as good compression as they can.
<br>
<br>The cost of option 2 relative to option 1 is that the code uses
<br>variables instead of #define'd constants.  The gain is that people
<br>with kernels having larger PAGE_SIZE can make use of that if
<br>they don't mind their cramfs being inaccessible to kernels with
<br>smaller PAGE_SIZE values.
<br>
<br>Option 3 is easy to implement if we don't mind being CPU-inefficient:
<br>e.g. get readpage to decompress to a buffer of size MAX_BLKSIZE (which
<br>must be no larger than 32KB) and discard what it doesn't need.
<br>Getting readpage to read into all the covered pages is harder.
<br>
<br>The main advantage of option 3 over 1, 2, is better compression.  The
<br>cost is greater complexity.  Probably not worth it, but I hope someone
<br>will disagree.  (If it is implemented, then I'll re-use that code in
<br>e2compr.)
<br>
<br>
<br>Another cost of 2 and 3 over 1 is making mkcramfs use a different
<br>block size, but that just means adding and parsing a -b option.
<br>
<br>
<br>Inode Size
<br>----------
<br>
<br>Given that cramfs will probably be used for CDs etc. as well as just
<br>silicon ROMs, it might make sense to expand the inode a little from
<br>its current 12 bytes.  Inodes other than the root inode are followed
<br>by filename, so the expansion doesn't even have to be a multiple of 4
<br>bytes.
<br><p></p><div class="separator"></div><br><p><h2>qnx4</h2></p>
<br>  This is a snapshot of the QNX4 filesystem for Linux.
<br>  Please send diffs and remarks to &lt;al@alarsen.net&gt; .
<br>  
<br>Credits :
<br>
<br>Richard "Scuba" A. Frowijn     &lt;scuba@wxs.nl&gt;
<br>Frank "Jedi/Sector One" Denis  &lt;j@pureftpd.org&gt;
<br>Anders Larsen                  &lt;al@alarsen.net&gt; (Maintainer)
<br><p></p><div class="separator"></div><br><p><h2>jffs2</h2></p>
<br>	JFFS2 LOCKING DOCUMENTATION
<br>	---------------------------
<br>
<br>This document attempts to describe the existing locking rules for
<br>JFFS2. It is not expected to remain perfectly up to date, but ought to
<br>be fairly close.
<br>
<br>
<br>	alloc_sem
<br>	---------
<br>
<br>The alloc_sem is a per-filesystem mutex, used primarily to ensure
<br>contiguous allocation of space on the medium. It is automatically
<br>obtained during space allocations (jffs2_reserve_space()) and freed
<br>upon write completion (jffs2_complete_reservation()). Note that
<br>the garbage collector will obtain this right at the beginning of
<br>jffs2_garbage_collect_pass() and release it at the end, thereby
<br>preventing any other write activity on the file system during a
<br>garbage collect pass.
<br>
<br>When writing new nodes, the alloc_sem must be held until the new nodes
<br>have been properly linked into the data structures for the inode to
<br>which they belong. This is for the benefit of NAND flash - adding new
<br>nodes to an inode may obsolete old ones, and by holding the alloc_sem
<br>until this happens we ensure that any data in the write-buffer at the
<br>time this happens are part of the new node, not just something that
<br>was written afterwards. Hence, we can ensure the newly-obsoleted nodes
<br>don't actually get erased until the write-buffer has been flushed to
<br>the medium.
<br>
<br>With the introduction of NAND flash support and the write-buffer, 
<br>the alloc_sem is also used to protect the wbuf-related members of the
<br>jffs2_sb_info structure. Atomically reading the wbuf_len member to see
<br>if the wbuf is currently holding any data is permitted, though.
<br>
<br>Ordering constraints: See f-&gt;sem.
<br>
<br>
<br>	File Mutex f-&gt;sem
<br>	---------------------
<br>
<br>This is the JFFS2-internal equivalent of the inode mutex i-&gt;i_sem.
<br>It protects the contents of the jffs2_inode_info private inode data,
<br>including the linked list of node fragments (but see the notes below on
<br>erase_completion_lock), etc.
<br>
<br>The reason that the i_sem itself isn't used for this purpose is to
<br>avoid deadlocks with garbage collection -- the VFS will lock the i_sem
<br>before calling a function which may need to allocate space. The
<br>allocation may trigger garbage-collection, which may need to move a
<br>node belonging to the inode which was locked in the first place by the
<br>VFS. If the garbage collection code were to attempt to lock the i_sem
<br>of the inode from which it's garbage-collecting a physical node, this
<br>lead to deadlock, unless we played games with unlocking the i_sem
<br>before calling the space allocation functions.
<br>
<br>Instead of playing such games, we just have an extra internal
<br>mutex, which is obtained by the garbage collection code and also
<br>by the normal file system code _after_ allocation of space.
<br>
<br>Ordering constraints: 
<br>
<br>	1. Never attempt to allocate space or lock alloc_sem with 
<br>	   any f-&gt;sem held.
<br>	2. Never attempt to lock two file mutexes in one thread.
<br>	   No ordering rules have been made for doing so.
<br>	3. Never lock a page cache page with f-&gt;sem held.
<br>
<br>
<br>	erase_completion_lock spinlock
<br>	------------------------------
<br>
<br>This is used to serialise access to the eraseblock lists, to the
<br>per-eraseblock lists of physical jffs2_raw_node_ref structures, and
<br>(NB) the per-inode list of physical nodes. The latter is a special
<br>case - see below.
<br>
<br>As the MTD API no longer permits erase-completion callback functions
<br>to be called from bottom-half (timer) context (on the basis that nobody
<br>ever actually implemented such a thing), it's now sufficient to use
<br>a simple spin_lock() rather than spin_lock_bh().
<br>
<br>Note that the per-inode list of physical nodes (f-&gt;nodes) is a special
<br>case. Any changes to _valid_ nodes (i.e. -&gt;flash_offset & 1 == 0) in
<br>the list are protected by the file mutex f-&gt;sem. But the erase code
<br>may remove _obsolete_ nodes from the list while holding only the
<br>erase_completion_lock. So you can walk the list only while holding the
<br>erase_completion_lock, and can drop the lock temporarily mid-walk as
<br>long as the pointer you're holding is to a _valid_ node, not an
<br>obsolete one.
<br>
<br>The erase_completion_lock is also used to protect the c-&gt;gc_task
<br>pointer when the garbage collection thread exits. The code to kill the
<br>GC thread locks it, sends the signal, then unlocks it - while the GC
<br>thread itself locks it, zeroes c-&gt;gc_task, then unlocks on the exit path.
<br>
<br>
<br>	inocache_lock spinlock
<br>	----------------------
<br>
<br>This spinlock protects the hashed list (c-&gt;inocache_list) of the
<br>in-core jffs2_inode_cache objects (each inode in JFFS2 has the
<br>correspondent jffs2_inode_cache object). So, the inocache_lock
<br>has to be locked while walking the c-&gt;inocache_list hash buckets.
<br>
<br>This spinlock also covers allocation of new inode numbers, which is
<br>currently just '++-&gt;highest_ino++', but might one day get more complicated
<br>if we need to deal with wrapping after 4 milliard inode numbers are used.
<br>
<br>Note, the f-&gt;sem guarantees that the correspondent jffs2_inode_cache
<br>will not be removed. So, it is allowed to access it without locking
<br>the inocache_lock spinlock. 
<br>
<br>Ordering constraints: 
<br>
<br>	If both erase_completion_lock and inocache_lock are needed, the
<br>	c-&gt;erase_completion has to be acquired first.
<br>
<br>
<br>	erase_free_sem
<br>	--------------
<br>
<br>This mutex is only used by the erase code which frees obsolete node
<br>references and the jffs2_garbage_collect_deletion_dirent() function.
<br>The latter function on NAND flash must read _obsolete_ nodes to
<br>determine whether the 'deletion dirent' under consideration can be
<br>discarded or whether it is still required to show that an inode has
<br>been unlinked. Because reading from the flash may sleep, the
<br>erase_completion_lock cannot be held, so an alternative, more
<br>heavyweight lock was required to prevent the erase code from freeing
<br>the jffs2_raw_node_ref structures in question while the garbage
<br>collection code is looking at them.
<br>
<br>Suggestions for alternative solutions to this problem would be welcomed.
<br>
<br>
<br>	wbuf_sem
<br>	--------
<br>
<br>This read/write semaphore protects against concurrent access to the
<br>write-behind buffer ('wbuf') used for flash chips where we must write
<br>in blocks. It protects both the contents of the wbuf and the metadata
<br>which indicates which flash region (if any) is currently covered by 
<br>the buffer.
<br>
<br>Ordering constraints:
<br>	Lock wbuf_sem last, after the alloc_sem or and f-&gt;sem.
<br>
<br>
<br>	c-&gt;xattr_sem
<br>	------------
<br>
<br>This read/write semaphore protects against concurrent access to the
<br>xattr related objects which include stuff in superblock and ic-&gt;xref.
<br>In read-only path, write-semaphore is too much exclusion. It's enough
<br>by read-semaphore. But you must hold write-semaphore when updating,
<br>creating or deleting any xattr related object.
<br>
<br>Once xattr_sem released, there would be no assurance for the existence
<br>of those objects. Thus, a series of processes is often required to retry,
<br>when updating such a object is necessary under holding read semaphore.
<br>For example, do_jffs2_getxattr() holds read-semaphore to scan xref and
<br>xdatum at first. But it retries this process with holding write-semaphore
<br>after release read-semaphore, if it's necessary to load name/value pair
<br>from medium.
<br>
<br>Ordering constraints:
<br>	Lock xattr_sem last, after the alloc_sem.
<br><p></p><div class="separator"></div><br><p><h2>reiserfs</h2></p>[LICENSING]
<br>
<br>ReiserFS is hereby licensed under the GNU General
<br>Public License version 2.
<br>
<br>Source code files that contain the phrase "licensing governed by
<br>reiserfs/README" are "governed files" throughout this file.  Governed
<br>files are licensed under the GPL.  The portions of them owned by Hans
<br>Reiser, or authorized to be licensed by him, have been in the past,
<br>and likely will be in the future, licensed to other parties under
<br>other licenses.  If you add your code to governed files, and don't
<br>want it to be owned by Hans Reiser, put your copyright label on that
<br>code so the poor blight and his customers can keep things straight.
<br>All portions of governed files not labeled otherwise are owned by Hans
<br>Reiser, and by adding your code to it, widely distributing it to
<br>others or sending us a patch, and leaving the sentence in stating that
<br>licensing is governed by the statement in this file, you accept this.
<br>It will be a kindness if you identify whether Hans Reiser is allowed
<br>to license code labeled as owned by you on your behalf other than
<br>under the GPL, because he wants to know if it is okay to do so and put
<br>a check in the mail to you (for non-trivial improvements) when he
<br>makes his next sale.  He makes no guarantees as to the amount if any,
<br>though he feels motivated to motivate contributors, and you can surely
<br>discuss this with him before or after contributing.  You have the
<br>right to decline to allow him to license your code contribution other
<br>than under the GPL.
<br>
<br>Further licensing options are available for commercial and/or other
<br>interests directly from Hans Reiser: hans@reiser.to.  If you interpret
<br>the GPL as not allowing those additional licensing options, you read
<br>it wrongly, and Richard Stallman agrees with me, when carefully read
<br>you can see that those restrictions on additional terms do not apply
<br>to the owner of the copyright, and my interpretation of this shall
<br>govern for this license.
<br>
<br>Finally, nothing in this license shall be interpreted to allow you to
<br>fail to fairly credit me, or to remove my credits, without my
<br>permission, unless you are an end user not redistributing to others.
<br>If you have doubts about how to properly do that, or about what is
<br>fair, ask.  (Last I spoke with him Richard was contemplating how best
<br>to address the fair crediting issue in the next GPL version.)
<br>
<br>[END LICENSING]
<br>
<br>Reiserfs is a file system based on balanced tree algorithms, which is
<br>described at https://reiser4.wiki.kernel.org/index.php/Main_Page 
<br>
<br>Stop reading here.  Go there, then return.
<br>
<br>Send bug reports to yura@namesys.botik.ru.
<br>
<br>mkreiserfs and other utilities are in reiserfs/utils, or wherever your
<br>Linux provider put them.  There is some disagreement about how useful
<br>it is for users to get their fsck and mkreiserfs out of sync with the
<br>version of reiserfs that is in their kernel, with many important
<br>distributors wanting them out of sync.:-) Please try to remember to
<br>recompile and reinstall fsck and mkreiserfs with every update of
<br>reiserfs, this is a common source of confusion.  Note that some of the
<br>utilities cannot be compiled without accessing the balancing code
<br>which is in the kernel code, and relocating the utilities may require
<br>you to specify where that code can be found.
<br>
<br>Yes, if you update your reiserfs kernel module you do have to
<br>recompile your kernel, most of the time.  The errors you get will be
<br>quite cryptic if your forget to do so.
<br>
<br>Real users, as opposed to folks who want to hack and then understand
<br>what went wrong, will want REISERFS_CHECK off.
<br>
<br>Hideous Commercial Pitch: Spread your development costs across other OS
<br>vendors.  Select from the best in the world, not the best in your
<br>building, by buying from third party OS component suppliers.  Leverage
<br>the software component development power of the internet.  Be the most
<br>aggressive in taking advantage of the commercial possibilities of
<br>decentralized internet development, and add value through your branded
<br>integration that you sell as an operating system.  Let your competitors
<br>be the ones to compete against the entire internet by themselves.  Be
<br>hip, get with the new economic trend, before your competitors do.  Send
<br>email to hans@reiser.to.
<br>
<br>To understand the code, after reading the website, start reading the
<br>code by reading reiserfs_fs.h first.
<br>
<br>Hans Reiser was the project initiator, primary architect, source of all
<br>funding for the first 5.5 years, and one of the programmers.  He owns
<br>the copyright.
<br>
<br>Vladimir Saveljev was one of the programmers, and he worked long hours
<br>writing the cleanest code.  He always made the effort to be the best he
<br>could be, and to make his code the best that it could be.  What resulted
<br>was quite remarkable. I don't think that money can ever motivate someone
<br>to work the way he did, he is one of the most selfless men I know.
<br>
<br>Yura helps with benchmarking, coding hashes, and block pre-allocation
<br>code.
<br>
<br>Anatoly Pinchuk is a former member of our team who worked closely with
<br>Vladimir throughout the project's development.  He wrote a quite
<br>substantial portion of the total code.  He realized that there was a
<br>space problem with packing tails of files for files larger than a node
<br>that start on a node aligned boundary (there are reasons to want to node
<br>align files), and he invented and implemented indirect items and
<br>unformatted nodes as the solution.
<br>
<br>Konstantin Shvachko, with the help of the Russian version of a VC,
<br>tried to put me in a position where I was forced into giving control
<br>of the project to him.  (Fortunately, as the person paying the money
<br>for all salaries from my dayjob I owned all copyrights, and you can't
<br>really force takeovers of sole proprietorships.)  This was something
<br>curious, because he never really understood the value of our project,
<br>why we should do what we do, or why innovation was possible in
<br>general, but he was sure that he ought to be controlling it.  Every
<br>innovation had to be forced past him while he was with us.  He added
<br>two years to the time required to complete reiserfs, and was a net
<br>loss for me.  Mikhail Gilula was a brilliant innovator who also left
<br>in a destructive way that erased the value of his contributions, and
<br>that he was shown much generosity just makes it more painful.
<br>
<br>Grigory Zaigralin was an extremely effective system administrator for
<br>our group.
<br>
<br>Igor Krasheninnikov was wonderful at hardware procurement, repair, and
<br>network installation.
<br>
<br>Jeremy Fitzhardinge wrote the teahash.c code, and he gives credit to a
<br>textbook he got the algorithm from in the code.  Note that his analysis
<br>of how we could use the hashing code in making 32 bit NFS cookies work
<br>was probably more important than the actual algorithm.  Colin Plumb also
<br>contributed to it.
<br>
<br>Chris Mason dived right into our code, and in just a few months produced
<br>the journaling code that dramatically increased the value of ReiserFS.
<br>He is just an amazing programmer.
<br>
<br>Igor Zagorovsky is writing much of the new item handler and extent code
<br>for our next major release.
<br>
<br>Alexander Zarochentcev (sometimes known as zam, or sasha), wrote the
<br>resizer, and is hard at work on implementing allocate on flush.  SGI
<br>implemented allocate on flush before us for XFS, and generously took
<br>the time to convince me we should do it also.  They are great people,
<br>and a great company.
<br>
<br>Yuri Shevchuk and Nikita Danilov are doing squid cache optimization.
<br>
<br>Vitaly Fertman is doing fsck.
<br>
<br>Jeff Mahoney, of SuSE, contributed a few cleanup fixes, most notably
<br>the endian safe patches which allow ReiserFS to run on any platform
<br>supported by the Linux kernel.
<br>
<br>SuSE, IntegratedLinux.com, Ecila, MP3.com, bigstorage.com, and the
<br>Alpha PC Company made it possible for me to not have a day job
<br>anymore, and to dramatically increase our staffing.  Ecila funded
<br>hypertext feature development, MP3.com funded journaling, SuSE funded
<br>core development, IntegratedLinux.com funded squid web cache
<br>appliances, bigstorage.com funded HSM, and the alpha PC company funded
<br>the alpha port.  Many of these tasks were helped by sponsors other
<br>than the ones just named.  SuSE has helped in much more than just
<br>funding....
<br>
<br><p></p><div class="separator"></div><br><p><h2>qnx6</h2></p>
<br>  This is a snapshot of the QNX6 filesystem for Linux.
<br>  Please send diffs and remarks to &lt;chaosman@ontika.net&gt; .
<br>
<br>Credits :
<br>
<br>Al Viro		&lt;viro@ZenIV.linux.org.uk&gt; (endless patience with me & support ;))
<br>Kai Bankett	&lt;chaosman@ontika.net&gt; (Maintainer)
<br><p></p><div class="separator"></div><br><p><h2>firmware</h2></p>
<br>	DO NOT ADD FIRMWARE TO THIS DIRECTORY.
<br>	======================================
<br>
<br>This directory is only here to contain firmware images extracted from old
<br>device drivers which predate the common use of request_firmware().
<br>
<br>As we update those drivers to use request_firmware() and keep a clean
<br>separation between code and firmware, we put the extracted firmware
<br>here.
<br>
<br>This directory is _NOT_ for adding arbitrary new firmware images. The
<br>place to add those is the separate linux-firmware repository:
<br>
<br>    git://git.kernel.org/pub/scm/linux/kernel/git/firmware/linux-firmware.git
<br>
<br>That repository contains all these firmware images which have been
<br>extracted from older drivers, as well various new firmware images which
<br>we were never permitted to include in a GPL'd work, but which we _have_
<br>been permitted to redistribute under separate cover.
<br>
<br>To submit firmware to that repository, please send either a git binary
<br>diff or preferably a git pull request to:
<br>      linux-firmware@kernel.org
<br>and also cc: to related mailing lists.
<br>
<br>Your commit should include an update to the WHENCE file clearly
<br>identifying the licence under which the firmware is available, and
<br>that it is redistributable. If the licence is long and involved, it's
<br>permitted to include it in a separate file and refer to it from the
<br>WHENCE file.
<br>And if it were possible, a changelog of the firmware itself.
<br>
<br>Ideally, your commit should contain a Signed-Off-By: from someone
<br>authoritative on the licensing of the firmware in question (i.e. from
<br>within the company that owns the code).
<br>
<br>
<br>WARNING:
<br>=======
<br>
<br>Don't send any "CONFIDENTIALITY STATEMENT" in your e-mail, patch or
<br>request. Otherwise your firmware _will never be accepted_.
<br>
<br>Maintainers are really busy, so don't expect a prompt reply.
<br><p></p><div class="separator"></div><br><p><h2>oss</h2></p>The modular sound driver patches were funded by Red Hat Software 
<br>(www.redhat.com). The sound driver here is thus a modified version of 
<br>Hannu's code. Please bear that in mind when considering the appropriate
<br>forums for bug reporting. 
<br>
<br>Alan Cox
<br><p></p><div class="separator"></div><br><p><h2>usbip</h2></p>#
<br># README for usbip-utils
<br>#
<br># Copyright (C) 2011 matt mooney &lt;mfm@muteddisk.com&gt;
<br>#               2005-2008 Takahiro Hirofuchi
<br>
<br>
<br>[Requirements]
<br>    - USB/IP device drivers
<br>	Found in the staging directory of the Linux kernel.
<br>
<br>    - libudev &gt;= 2.0
<br>	libudev library
<br>
<br>    - libwrap0-dev
<br>	tcp wrapper library
<br>
<br>    - gcc &gt;= 4.0
<br>
<br>    - libtool, automake &gt;= 1.9, autoconf &gt;= 2.5.0, pkg-config
<br>
<br>[Optional]
<br>    - hwdata
<br>        Contains USB device identification data.
<br>
<br>
<br>[Install]
<br>    0. Generate configuration scripts.
<br>	$ ./autogen.sh
<br>
<br>    1. Compile & install the userspace utilities.
<br>	$ ./configure [--with-tcp-wrappers=no] [--with-usbids-dir=&lt;dir&gt;]
<br>	$ make install
<br>
<br>    2. Compile & install USB/IP drivers.
<br>
<br>
<br>[Usage]
<br>    server:# (Physically attach your USB device.)
<br>
<br>    server:# insmod usbip-core.ko
<br>    server:# insmod usbip-host.ko
<br>
<br>    server:# usbipd -D
<br>	- Start usbip daemon.
<br>
<br>    server:# usbip list -l
<br>	- List driver assignments for USB devices.
<br>
<br>    server:# usbip bind --busid 1-2
<br>	- Bind usbip-host.ko to the device with busid 1-2.
<br>	- The USB device 1-2 is now exportable to other hosts!
<br>	- Use `usbip unbind --busid 1-2' to stop exporting the device.
<br>
<br>    client:# insmod usbip-core.ko
<br>    client:# insmod vhci-hcd.ko
<br>
<br>    client:# usbip list --remote &lt;host&gt;
<br>	- List exported USB devices on the &lt;host&gt;.
<br>
<br>    client:# usbip attach --remote &lt;host&gt; --busid 1-2
<br>	- Connect the remote USB device.
<br>
<br>    client:# usbip port
<br>	- Show virtual port status.
<br>
<br>    client:# usbip detach --port &lt;port&gt;
<br>	- Detach the USB device.
<br>
<br>
<br>[Example]
<br>---------------------------
<br>	SERVER SIDE
<br>---------------------------
<br>Physically attach your USB devices to this host.
<br>
<br>    trois:# insmod path/to/usbip-core.ko
<br>    trois:# insmod path/to/usbip-host.ko
<br>    trois:# usbipd -D
<br>
<br>In another terminal, let's look up what USB devices are physically
<br>attached to this host.
<br>
<br>    trois:# usbip list -l
<br>    Local USB devices
<br>    =================
<br>     - busid 1-1 (05a9:a511)
<br>	     1-1:1.0 -&gt; ov511
<br>
<br>     - busid 3-2 (0711:0902)
<br>	     3-2:1.0 -&gt; none
<br>
<br>     - busid 3-3.1 (08bb:2702)
<br>	     3-3.1:1.0 -&gt; snd-usb-audio
<br>	     3-3.1:1.1 -&gt; snd-usb-audio
<br>
<br>     - busid 3-3.2 (04bb:0206)
<br>	     3-3.2:1.0 -&gt; usb-storage
<br>
<br>     - busid 3-3 (0409:0058)
<br>	     3-3:1.0 -&gt; hub
<br>
<br>     - busid 4-1 (046d:08b2)
<br>	     4-1:1.0 -&gt; none
<br>	     4-1:1.1 -&gt; none
<br>	     4-1:1.2 -&gt; none
<br>
<br>     - busid 5-2 (058f:9254)
<br>	     5-2:1.0 -&gt; hub
<br>
<br>A USB storage device of busid 3-3.2 is now bound to the usb-storage
<br>driver. To export this device, we first mark the device as
<br>"exportable"; the device is bound to the usbip-host driver. Please
<br>remember you can not export a USB hub.
<br>
<br>Mark the device of busid 3-3.2 as exportable:
<br>
<br>    trois:# usbip --debug bind --busid 3-3.2
<br>    ...
<br>    usbip debug: usbip_bind.c:162:[unbind_other] 3-3.2:1.0 -&gt; usb-storage
<br>    ...
<br>    bind device on busid 3-3.2: complete
<br>
<br>    trois:# usbip list -l
<br>    Local USB devices
<br>    =================
<br>    ...
<br>
<br>     - busid 3-3.2 (04bb:0206)
<br>	     3-3.2:1.0 -&gt; usbip-host
<br>    ...
<br>
<br>---------------------------
<br>	CLIENT SIDE
<br>---------------------------
<br>First, let's list available remote devices that are marked as
<br>exportable on the host.
<br>
<br>    deux:# insmod path/to/usbip-core.ko
<br>    deux:# insmod path/to/vhci-hcd.ko
<br>
<br>    deux:# usbip list --remote 10.0.0.3
<br>    Exportable USB devices
<br>    ======================
<br>     - 10.0.0.3
<br>	    1-1: Prolific Technology, Inc. : unknown product (067b:3507)
<br>	       : /sys/devices/pci0000:00/0000:00:1f.2/usb1/1-1
<br>	       : (Defined at Interface level) / unknown subclass / unknown protocol (00/00/00)
<br>	       :  0 - Mass Storage / SCSI / Bulk (Zip) (08/06/50)
<br>
<br>	1-2.2.1: Apple Computer, Inc. : unknown product (05ac:0203)
<br>	       : /sys/devices/pci0000:00/0000:00:1f.2/usb1/1-2/1-2.2/1-2.2.1
<br>	       : (Defined at Interface level) / unknown subclass / unknown protocol (00/00/00)
<br>	       :  0 - Human Interface Devices / Boot Interface Subclass / Keyboard (03/01/01)
<br>
<br>	1-2.2.3: OmniVision Technologies, Inc. : OV511+ WebCam (05a9:a511)
<br>	       : /sys/devices/pci0000:00/0000:00:1f.2/usb1/1-2/1-2.2/1-2.2.3
<br>	       : (Defined at Interface level) / unknown subclass / unknown protocol (00/00/00)
<br>	       :  0 - Vendor Specific Class / unknown subclass / unknown protocol (ff/00/00)
<br>
<br>	    3-1: Logitech, Inc. : QuickCam Pro 4000 (046d:08b2)
<br>	       : /sys/devices/pci0000:00/0000:00:1e.0/0000:02:0a.0/usb3/3-1
<br>	       : (Defined at Interface level) / unknown subclass / unknown protocol (00/00/00)
<br>	       :  0 - Data / unknown subclass / unknown protocol (0a/ff/00)
<br>	       :  1 - Audio / Control Device / unknown protocol (01/01/00)
<br>	       :  2 - Audio / Streaming / unknown protocol (01/02/00)
<br>
<br>Attach a remote USB device:
<br>
<br>    deux:# usbip attach --remote 10.0.0.3 --busid 1-1
<br>    port 0 attached
<br>
<br>Show the devices attached to this client:
<br>
<br>    deux:# usbip port
<br>    Port 00: &lt;Port in Use&gt; at Full Speed(12Mbps)
<br>	   Prolific Technology, Inc. : unknown product (067b:3507)
<br>	   6-1 -&gt; usbip://10.0.0.3:3240/1-1  (remote bus/dev 001/004)
<br>	   6-1:1.0 used by usb-storage
<br>			  /sys/class/scsi_device/0:0:0:0/device
<br>			  /sys/class/scsi_host/host0/device
<br>			  /sys/block/sda/device
<br>
<br>Detach the imported device:
<br>
<br>    deux:# usbip detach --port 0
<br>    port 0 detached
<br>
<br>
<br>[Checklist]
<br>    - See 'Debug Tips' on the project wiki.
<br>	- http://usbip.wiki.sourceforge.net/how-to-debug-usbip
<br>    - usbip-host.ko must be bound to the target device.
<br>	- See /proc/bus/usb/devices and find "Driver=..." lines of the device.
<br>    - Shutdown firewall.
<br>	- usbip now uses TCP port 3240.
<br>    - Disable SELinux.
<br>    - Check the kernel and daemon messages.
<br>
<br>
<br>[Contact]
<br>    Mailing List: linux-usb@vger.kernel.org
<br><p></p><div class="separator"></div><br><p><h2>empty2</h2></p>This directory is left intentionally without Build file
<br>to test proper nesting into Build-less directories.
<br><p></p><div class="separator"></div><br><p><h2>cpupower</h2></p>The cpupower package consists of the following elements:
<br>
<br>requirements
<br>------------
<br>
<br>On x86 pciutils is needed at runtime (-lpci).
<br>For compilation pciutils-devel (pci/pci.h) and a gcc version
<br>providing cpuid.h is needed.
<br>For both it's not explicitly checked for (yet).
<br>
<br>
<br>libcpupower
<br>----------
<br>
<br>"libcpupower" is a library which offers a unified access method for userspace
<br>tools and programs to the cpufreq core and drivers in the Linux kernel. This
<br>allows for code reduction in userspace tools, a clean implementation of
<br>the interaction to the cpufreq core, and support for both the sysfs and proc
<br>interfaces [depending on configuration, see below].
<br>
<br>
<br>compilation and installation
<br>----------------------------
<br>
<br>make
<br>su
<br>make install
<br>
<br>should suffice on most systems. It builds libcpupower to put in
<br>/usr/lib; cpupower, cpufreq-bench_plot.sh to put in /usr/bin; and
<br>cpufreq-bench to put in /usr/sbin. If you want to set up the paths
<br>differently and/or want to configure the package to your specific
<br>needs, you need to open "Makefile" with an editor of your choice and
<br>edit the block marked CONFIGURATION.
<br>
<br>
<br>THANKS
<br>------
<br>Many thanks to Mattia Dongili who wrote the autotoolization and
<br>libtoolization, the manpages and the italian language file for cpupower;
<br>to Dave Jones for his feedback and his dump_psb tool; to Bruno Ducrot for his
<br>powernow-k8-decode and intel_gsic tools as well as the french language file;
<br>and to various others commenting on the previous (pre-)releases of 
<br>cpupower.
<br>
<br>
<br>        Dominik Brodowski
<br><p></p><div class="separator"></div><br><p><h2>bench</h2></p>This is cpufreq-bench, a microbenchmark for the cpufreq framework.
<br>
<br>Purpose
<br>=======
<br>
<br>What is this benchmark for:
<br>  - Identify worst case performance loss when doing dynamic frequency
<br>    scaling using Linux kernel governors
<br>  - Identify average reaction time of a governor to CPU load changes
<br>  - (Stress) Testing whether a cpufreq low level driver or governor works
<br>    as expected
<br>  - Identify cpufreq related performance regressions between kernels
<br>  - Possibly Real time priority testing? -&gt; what happens if there are
<br>    processes with a higher prio than the governor's kernel thread
<br>  - ...
<br>
<br>What this benchmark does *not* cover:
<br>  - Power saving related regressions (In fact as better the performance
<br>    throughput is, the worse the power savings will be, but the first should
<br>    mostly count more...)
<br>  - Real world (workloads)
<br>
<br>
<br>Description
<br>===========
<br>
<br>cpufreq-bench helps to test the condition of a given cpufreq governor.
<br>For that purpose, it compares the performance governor to a configured
<br>powersave module.
<br>
<br>
<br>How it works
<br>============
<br>You can specify load (100% CPU load) and sleep (0% CPU load) times in us which
<br>will be run X time in a row (cycles):
<br>
<br>         sleep=25000
<br>         load=25000
<br>         cycles=20
<br>
<br>This part of the configuration file will create 25ms load/sleep turns,
<br>repeated 20 times.
<br>
<br>Adding this:
<br>         sleep_step=25000
<br>         load_step=25000
<br>         rounds=5
<br>Will increase load and sleep time by 25ms 5 times.
<br>Together you get following test:
<br>25ms  load/sleep time repeated 20 times (cycles).
<br>50ms  load/sleep time repeated 20 times (cycles).
<br>..
<br>100ms load/sleep time repeated 20 times (cycles).
<br>
<br>First it is calibrated how long a specific CPU intensive calculation
<br>takes on this machine and needs to be run in a loop using the performance
<br>governor.
<br>Then the above test runs are processed using the performance governor
<br>and the governor to test. The time the calculation really needed
<br>with the dynamic freq scaling governor is compared with the time needed
<br>on full performance and you get the overall performance loss.
<br>
<br>
<br>Example of expected results with ondemand governor:
<br>
<br>This shows expected results of the first two test run rounds from
<br>above config, you there have:
<br>
<br>100% CPU load (load) | 0 % CPU load (sleep)  | round
<br>   25 ms             |    25 ms              |   1
<br>   50 ms             |    50 ms              |   2
<br>
<br>For example if ondemand governor is configured to have a 50ms
<br>sampling rate you get:
<br>
<br>In round 1, ondemand should have rather static 50% load and probably
<br>won't ever switch up (as long as up_threshold is above).
<br>
<br>In round 2, if the ondemand sampling times exactly match the load/sleep
<br>trigger of the cpufreq-bench, you will see no performance loss (compare with
<br>below possible ondemand sample kick ins (1)):
<br>
<br>But if ondemand always kicks in in the middle of the load sleep cycles, it
<br>will always see 50% loads and you get worst performance impact never
<br>switching up (compare with below possible ondemand sample kick ins (2))::
<br>
<br>      50     50   50   50ms -&gt;time
<br>load -----|     |-----|     |-----|     |-----|
<br>          |     |     |     |     |     |     |
<br>sleep     |-----|     |-----|     |-----|     |----
<br>    |-----|-----|-----|-----|-----|-----|-----|----  ondemand sampling (1)
<br>         100    0    100    0    100    0    100     load seen by ondemand(%)
<br>       |-----|-----|-----|-----|-----|-----|-----|--   ondemand sampling (2)
<br>      50     50    50    50    50    50    50        load seen by ondemand(%)
<br>
<br>You can easily test all kind of load/sleep times and check whether your
<br>governor in average behaves as expected.
<br>
<br>
<br>ToDo
<br>====
<br>
<br>Provide a gnuplot utility script for easy generation of plots to present
<br>the outcome nicely.
<br>
<br>
<br>cpufreq-bench Command Usage
<br>===========================
<br>-l, --load=&lt;long int&gt;           initial load time in us
<br>-s, --sleep=&lt;long int&gt;          initial sleep time in us
<br>-x, --load-step=&lt;long int&gt;      time to be added to load time, in us
<br>-y, --sleep-step=&lt;long int&gt;     time to be added to sleep time, in us
<br>-c, --cpu=&lt;unsigned int&gt;        CPU Number to use, starting at 0
<br>-p, --prio=&lt;priority&gt;           scheduler priority, HIGH, LOW or DEFAULT
<br>-g, --governor=&lt;governor&gt;       cpufreq governor to test
<br>-n, --cycles=&lt;int&gt;              load/sleep cycles to get an average value to compare
<br>-r, --rounds&lt;int&gt;               load/sleep rounds
<br>-f, --file=&lt;configfile&gt;         config file to use
<br>-o, --output=&lt;dir&gt;              output dir, must exist
<br>-v, --verbose                   verbose output on/off
<br>
<br>Due to the high priority, the application may not be responsible for some time.
<br>After the benchmark, the logfile is saved in OUTPUTDIR/benchmark_TIMESTAMP.log
<br>
<br><p></p><div class="separator"></div><br><p><h2>futex</h2></p>Futex Test
<br>==========
<br>Futex Test is intended to thoroughly test the Linux kernel futex system call
<br>API.
<br>
<br>Functional tests shall test the documented behavior of the futex operation
<br>code under test. This includes checking for proper behavior under normal use,
<br>odd corner cases, regression tests, and abject abuse and misuse.
<br>
<br>Futextest will also provide example implementation of mutual exclusion
<br>primitives. These can be used as is in user applications or can serve as
<br>examples for system libraries. These will likely be added to either a new lib/
<br>directory or purely as header files under include/, I'm leaning toward the
<br>latter.
<br>
<br>Quick Start
<br>-----------
<br># make
<br># ./run.sh
<br>
<br>Design and Implementation Goals
<br>-------------------------------
<br>o Tests should be as self contained as is practical so as to facilitate sharing
<br>  the individual tests on mailing list discussions and bug reports.
<br>o The build system shall remain as simple as possible, avoiding any archive or
<br>  shared object building and linking.
<br>o Where possible, any helper functions or other package-wide code shall be
<br>  implemented in header files, avoiding the need to compile intermediate object
<br>  files.
<br>o External dependencies shall remain as minimal as possible. Currently gcc
<br>  and glibc are the only dependencies.
<br>o Tests return 0 for success and &lt; 0 for failure.
<br>
<br>Output Formatting
<br>-----------------
<br>Test output shall be easily parsable by both human and machine. Title and
<br>results are printed to stdout, while intermediate ERROR or FAIL messages are
<br>sent to stderr. Tests shall support the -c option to print PASS, FAIL, and
<br>ERROR strings in color for easy visual parsing. Output shall conform to the
<br>following format:
<br>
<br>test_name: Description of the test
<br>	Arguments: arg1=val1 #units specified for clarity where appropriate
<br>	ERROR: Description of unexpected error
<br>	 FAIL: Reason for test failure
<br>	# FIXME: Perhaps an " INFO: informational message" option would be
<br>	#        useful here. Using -v to toggle it them on and off, as with -c.
<br>	# there may be multiple ERROR or FAIL messages
<br>Result: (PASS|FAIL|ERROR)
<br>
<br>Naming
<br>------
<br>o FIXME: decide on a sane test naming scheme.  Currently the tests are named
<br>  based on the primary futex operation they test. Eventually this will become a
<br>  problem as we intend to write multiple tests which collide in this namespace.
<br>  Perhaps something like "wait-wake-1" "wait-wake-2" is adequate, leaving the
<br>  detailed description in the test source and the output.
<br>
<br>Coding Style
<br>------------
<br>o The Futex Test project adheres to the coding standards set forth by Linux
<br>  kernel as defined in the Linux source Documentation/CodingStyle.
<br><p></p><div class="separator"></div><br><p><h2>ftrace</h2></p>Linux Ftrace Testcases
<br>
<br>This is a collection of testcases for ftrace tracing feature in the Linux
<br>kernel. Since ftrace exports interfaces via the debugfs, we just need
<br>shell scripts for testing. Feel free to add new test cases.
<br>
<br>Running the ftrace testcases
<br>============================
<br>
<br>At first, you need to be the root user to run this script.
<br>To run all testcases:
<br>
<br>  $ sudo ./ftracetest
<br>
<br>To run specific testcases:
<br>
<br>  # ./ftracetest test.d/basic3.tc
<br>
<br>Or you can also run testcases under given directory:
<br>
<br>  # ./ftracetest test.d/kprobe/
<br>
<br>Contributing new testcases
<br>==========================
<br>
<br>Copy test.d/template to your testcase (whose filename must have *.tc
<br>extension) and rewrite the test description line.
<br>
<br> * The working directory of the script is &lt;debugfs&gt;/tracing/.
<br>
<br> * Take care with side effects as the tests are run with root privilege.
<br>
<br> * The tests should not run for a long period of time (more than 1 min.)
<br>   These are to be unit tests.
<br>
<br> * You can add a directory for your testcases under test.d/ if needed.
<br>
<br> * The test cases should run on dash (busybox shell) for testing on
<br>   minimal cross-build environments.
<br>
<br> * Note that the tests are run with "set -e" (errexit) option. If any
<br>   command fails, the test will be terminated immediately.
<br>
<br> * The tests can return some result codes instead of pass or fail by
<br>   using exit_unresolved, exit_untested, exit_unsupported and exit_xfail.
<br>
<br>Result code
<br>===========
<br>
<br>Ftracetest supports following result codes.
<br>
<br> * PASS: The test succeeded as expected. The test which exits with 0 is
<br>         counted as passed test.
<br>
<br> * FAIL: The test failed, but was expected to succeed. The test which exits
<br>         with !0 is counted as failed test.
<br>
<br> * UNRESOLVED: The test produced unclear or intermidiate results.
<br>             for example, the test was interrupted
<br>                       or the test depends on a previous test, which failed.
<br>                       or the test was set up incorrectly
<br>             The test which is in above situation, must call exit_unresolved.
<br>
<br> * UNTESTED: The test was not run, currently just a placeholder.
<br>             In this case, the test must call exit_untested.
<br>
<br> * UNSUPPORTED: The test failed because of lack of feature.
<br>               In this case, the test must call exit_unsupported.
<br>
<br> * XFAIL: The test failed, and was expected to fail.
<br>          To return XFAIL, call exit_xfail from the test.
<br>
<br>There are some sample test scripts for result code under samples/.
<br>You can also run samples as below:
<br>
<br>  # ./ftracetest samples/
<br>
<br>TODO
<br>====
<br>
<br> * Fancy colored output :)
<br>
<br><p></p><div class="separator"></div><br><p><h2>zram</h2></p>zram: Compressed RAM based block devices
<br>----------------------------------------
<br>* Introduction
<br>
<br>The zram module creates RAM based block devices named /dev/zram&lt;id&gt;
<br>(&lt;id&gt; = 0, 1, ...). Pages written to these disks are compressed and stored
<br>in memory itself. These disks allow very fast I/O and compression provides
<br>good amounts of memory savings. Some of the usecases include /tmp storage,
<br>use as swap disks, various caches under /var and maybe many more :)
<br>
<br>Statistics for individual zram devices are exported through sysfs nodes at
<br>/sys/block/zram&lt;id&gt;/
<br>
<br>Kconfig required:
<br>CONFIG_ZRAM=y
<br>CONFIG_CRYPTO_LZ4=y
<br>CONFIG_ZPOOL=y
<br>CONFIG_ZSMALLOC=y
<br>
<br>ZRAM Testcases
<br>--------------
<br>zram_lib.sh: create library with initialization/cleanup functions
<br>zram.sh: For sanity check of CONFIG_ZRAM and to run zram01 and zram02
<br>
<br>Two functional tests: zram01 and zram02:
<br>zram01.sh: creates general purpose ram disks with ext4 filesystems
<br>zram02.sh: creates block device for swap
<br>
<br>Commands required for testing:
<br> - bc
<br> - dd
<br> - free
<br> - awk
<br> - mkswap
<br> - swapon
<br> - swapoff
<br> - mkfs/ mkfs.ext4
<br>
<br>For more information please refer:
<br>kernel-source-tree/Documentation/blockdev/zram.txt
<br><p></p><div class="separator"></div><br><p><h2>examples</h2></p>This directory contains example configs to use ktest for various tasks.
<br>The configs still need to be customized for your environment, but it
<br>is broken up by task which makes it easier to understand how to set up
<br>ktest.
<br>
<br>The configs are based off of real working configs but have been modified
<br>and commented to show more generic use cases that are more helpful for
<br>developers.
<br>
<br>crosstests.conf - this config shows an example of testing a git repo against
<br>    lots of different architectures. It only does build tests, but makes
<br>    it easy to compile test different archs. You can download the arch
<br>    cross compilers from:
<br>  http://kernel.org/pub/tools/crosstool/files/bin/x86_64/
<br>
<br>test.conf - A generic example of a config. This is based on an actual config
<br>     used to perform real testing.
<br>
<br>kvm.conf - A example of a config that is used to test a virtual guest running
<br>     on a host.
<br>
<br>snowball.conf - An example config that was used to demo ktest.pl against
<br>     a snowball ARM board.
<br>
<br>include/  -  The include directory holds default configs that can be
<br>    included into other configs. This is a real use example that shows how
<br>    to reuse configs for various machines or set ups. The files here
<br>    are included by other config files, where the other config files define
<br>    options and variables that will make the included config work for the
<br>    given environment.
<br>
<br>
<br><p></p><div class="separator"></div><br><p><h2>ringtest</h2></p>Partial implementation of various ring layouts, useful to tune virtio design.
<br>Uses shared memory heavily.
<br>
<br>Typical use:
<br>
<br># sh run-on-all.sh perf stat -r 10 --log-fd 1 -- ./ring
<br><p></p><div class="separator"></div><br><p><h2>virtio-trace</h2></p>Trace Agent for virtio-trace
<br>============================
<br>
<br>Trace agent is a user tool for sending trace data of a guest to a Host in low
<br>overhead. Trace agent has the following functions:
<br> - splice a page of ring-buffer to read_pipe without memory copying
<br> - splice the page from write_pipe to virtio-console without memory copying
<br> - write trace data to stdout by using -o option
<br> - controlled by start/stop orders from a Host
<br>
<br>The trace agent operates as follows:
<br> 1) Initialize all structures.
<br> 2) Create a read/write thread per CPU. Each thread is bound to a CPU.
<br>    The read/write threads hold it.
<br> 3) A controller thread does poll() for a start order of a host.
<br> 4) After the controller of the trace agent receives a start order from a host,
<br>    the controller wake read/write threads.
<br> 5) The read/write threads start to read trace data from ring-buffers and
<br>    write the data to virtio-serial.
<br> 6) If the controller receives a stop order from a host, the read/write threads
<br>    stop to read trace data.
<br>
<br>
<br>Files
<br>=====
<br>
<br>README: this file
<br>Makefile: Makefile of trace agent for virtio-trace
<br>trace-agent.c: includes main function, sets up for operating trace agent
<br>trace-agent.h: includes all structures and some macros
<br>trace-agent-ctl.c: includes controller function for read/write threads
<br>trace-agent-rw.c: includes read/write threads function
<br>
<br>
<br>Setup
<br>=====
<br>
<br>To use this trace agent for virtio-trace, we need to prepare some virtio-serial
<br>I/Fs.
<br>
<br>1) Make FIFO in a host
<br> virtio-trace uses virtio-serial pipe as trace data paths as to the number
<br>of CPUs and a control path, so FIFO (named pipe) should be created as follows:
<br>	# mkdir /tmp/virtio-trace/
<br>	# mkfifo /tmp/virtio-trace/trace-path-cpu{0,1,2,...,X}.{in,out}
<br>	# mkfifo /tmp/virtio-trace/agent-ctl-path.{in,out}
<br>
<br>For example, if a guest use three CPUs, the names are
<br>	trace-path-cpu{0,1,2}.{in.out}
<br>and
<br>	agent-ctl-path.{in,out}.
<br>
<br>2) Set up of virtio-serial pipe in a host
<br> Add qemu option to use virtio-serial pipe.
<br>
<br> ##virtio-serial device##
<br>     -device virtio-serial-pci,id=virtio-serial0\
<br> ##control path##
<br>     -chardev pipe,id=charchannel0,path=/tmp/virtio-trace/agent-ctl-path\
<br>     -device virtserialport,bus=virtio-serial0.0,nr=1,chardev=charchannel0,\
<br>      id=channel0,name=agent-ctl-path\
<br> ##data path##
<br>     -chardev pipe,id=charchannel1,path=/tmp/virtio-trace/trace-path-cpu0\
<br>     -device virtserialport,bus=virtio-serial0.0,nr=2,chardev=charchannel0,\
<br>      id=channel1,name=trace-path-cpu0\
<br>      ...
<br>
<br>If you manage guests with libvirt, add the following tags to domain XML files.
<br>Then, libvirt passes the same command option to qemu.
<br>
<br>	&lt;channel type='pipe'&gt;
<br>	   &lt;source path='/tmp/virtio-trace/agent-ctl-path'/&gt;
<br>	   &lt;target type='virtio' name='agent-ctl-path'/&gt;
<br>	   &lt;address type='virtio-serial' controller='0' bus='0' port='0'/&gt;
<br>	&lt;/channel&gt;
<br>	&lt;channel type='pipe'&gt;
<br>	   &lt;source path='/tmp/virtio-trace/trace-path-cpu0'/&gt;
<br>	   &lt;target type='virtio' name='trace-path-cpu0'/&gt;
<br>	   &lt;address type='virtio-serial' controller='0' bus='0' port='1'/&gt;
<br>	&lt;/channel&gt;
<br>	...
<br>Here, chardev names are restricted to trace-path-cpuX and agent-ctl-path. For
<br>example, if a guest use three CPUs, chardev names should be trace-path-cpu0,
<br>trace-path-cpu1, trace-path-cpu2, and agent-ctl-path.
<br>
<br>3) Boot the guest
<br> You can find some chardev in /dev/virtio-ports/ in the guest.
<br>
<br>
<br>Run
<br>===
<br>
<br>0) Build trace agent in a guest
<br>	$ make
<br>
<br>1) Enable ftrace in the guest
<br> &lt;Example&gt;
<br>	# echo 1 &gt; /sys/kernel/debug/tracing/events/sched/enable
<br>
<br>2) Run trace agent in the guest
<br> This agent must be operated as root.
<br>	# ./trace-agent
<br>read/write threads in the agent wait for start order from host. If you add -o
<br>option, trace data are output via stdout in the guest.
<br>
<br>3) Open FIFO in a host
<br>	# cat /tmp/virtio-trace/trace-path-cpu0.out
<br>If a host does not open these, trace data get stuck in buffers of virtio. Then,
<br>the guest will stop by specification of chardev in QEMU. This blocking mode may
<br>be solved in the future.
<br>
<br>4) Start to read trace data by ordering from a host
<br> A host injects read start order to the guest via virtio-serial.
<br>	# echo 1 &gt; /tmp/virtio-trace/agent-ctl-path.in
<br>
<br>5) Stop to read trace data by ordering from a host
<br> A host injects read stop order to the guest via virtio-serial.
<br>	# echo 0 &gt; /tmp/virtio-trace/agent-ctl-path.in
<br><p></p><div class="separator"></div><br><p><h2>tmon</h2></p>TMON - A Monitoring and Testing Tool for Linux kernel thermal subsystem
<br>
<br>Why TMON?
<br>==========
<br>Increasingly, Linux is running on thermally constrained devices. The simple
<br>thermal relationship between processor and fan has become past for modern
<br>computers.
<br>
<br>As hardware vendors cope with the thermal constraints on their products, more
<br>and more sensors are added, new cooling capabilities are introduced. The
<br>complexity of the thermal relationship can grow exponentially among cooling
<br>devices, zones, sensors, and trip points. They can also change dynamically.
<br>
<br>To expose such relationship to the userspace, Linux generic thermal layer
<br>introduced sysfs entry at /sys/class/thermal with a matrix of symbolic
<br>links, trip point bindings, and device instances. To traverse such
<br>matrix by hand is not a trivial task. Testing is also difficult in that
<br>thermal conditions are often exception cases that hard to reach in
<br>normal operations.
<br>
<br>TMON is conceived as a tool to help visualize, tune, and test the
<br>complex thermal subsystem.
<br>
<br>Files
<br>=====
<br>	tmon.c : main function for set up and configurations.
<br>	tui.c : handles ncurses based user interface
<br>	sysfs.c : access to the generic thermal sysfs
<br>	pid.c : a proportional-integral-derivative (PID) controller
<br>	that can be used for thermal relationship training.
<br>
<br>Requirements
<br>============
<br>Depends on ncurses
<br>
<br>Build
<br>=========
<br>$ make
<br>$ sudo ./tmon -h
<br>Usage: tmon [OPTION...]
<br>  -c, --control         cooling device in control
<br>  -d, --daemon          run as daemon, no TUI
<br>  -l, --log             log data to /var/tmp/tmon.log
<br>  -h, --help            show this help message
<br>  -t, --time-interval   set time interval for sampling
<br>  -v, --version         show version
<br>  -g, --debug           debug message in syslog
<br>
<br>1. For monitoring only:
<br>$ sudo ./tmon
<br><p></p><div class="separator"></div><br><p><h2>pmu-events</h2></p>
<br>The contents of this directory allow users to specify PMU events in their
<br>CPUs by their symbolic names rather than raw event codes (see example below).
<br>
<br>The main program in this directory, is the 'jevents', which is built and
<br>executed _BEFORE_ the perf binary itself is built.
<br>
<br>The 'jevents' program tries to locate and process JSON files in the directory
<br>tree tools/perf/pmu-events/arch/foo.
<br>
<br>	- Regular files with '.json' extension in the name are assumed to be
<br>	  JSON files, each of which describes a set of PMU events.
<br>
<br>	- Regular files with basename starting with 'mapfile.csv' are assumed
<br>	  to be a CSV file that maps a specific CPU to its set of PMU events.
<br>	  (see below for mapfile format)
<br>
<br>	- Directories are traversed, but all other files are ignored.
<br>
<br>The PMU events supported by a CPU model are expected to grouped into topics
<br>such as Pipelining, Cache, Memory, Floating-point etc. All events for a topic
<br>should be placed in a separate JSON file - where the file name identifies
<br>the topic. Eg: "Floating-point.json".
<br>
<br>All the topic JSON files for a CPU model/family should be in a separate
<br>sub directory. Thus for the Silvermont X86 CPU:
<br>
<br>	$ ls tools/perf/pmu-events/arch/x86/Silvermont_core
<br>	Cache.json 	Memory.json 	Virtual-Memory.json
<br>	Frontend.json 	Pipeline.json
<br>
<br>Using the JSON files and the mapfile, 'jevents' generates the C source file,
<br>'pmu-events.c', which encodes the two sets of tables:
<br>
<br>	- Set of 'PMU events tables' for all known CPUs in the architecture,
<br>	  (one table like the following, per JSON file; table name 'pme_power8'
<br>	  is derived from JSON file name, 'power8.json').
<br>
<br>		struct pmu_event pme_power8[] = {
<br>
<br>			...
<br>
<br>			{
<br>				.name = "pm_1plus_ppc_cmpl",
<br>				.event = "event=0x100f2",
<br>				.desc = "1 or more ppc insts finished,",
<br>			},
<br>
<br>			...
<br>		}
<br>
<br>	- A 'mapping table' that maps each CPU of the architecture, to its
<br>	  'PMU events table'
<br>
<br>		struct pmu_events_map pmu_events_map[] = {
<br>		{
<br>			.cpuid = "004b0000",
<br>			.version = "1",
<br>			.type = "core",
<br>			.table = pme_power8
<br>		},
<br>			...
<br>
<br>		};
<br>
<br>After the 'pmu-events.c' is generated, it is compiled and the resulting
<br>'pmu-events.o' is added to 'libperf.a' which is then used to build perf.
<br>
<br>NOTES:
<br>	1. Several CPUs can support same set of events and hence use a common
<br>	   JSON file. Hence several entries in the pmu_events_map[] could map
<br>	   to a single 'PMU events table'.
<br>
<br>	2. The 'pmu-events.h' has an extern declaration for the mapping table
<br>	   and the generated 'pmu-events.c' defines this table.
<br>
<br>	3. _All_ known CPU tables for architecture are included in the perf
<br>	   binary.
<br>
<br>At run time, perf determines the actual CPU it is running on, finds the
<br>matching events table and builds aliases for those events. This allows
<br>users to specify events by their name:
<br>
<br>	$ perf stat -e pm_1plus_ppc_cmpl sleep 1
<br>
<br>where 'pm_1plus_ppc_cmpl' is a Power8 PMU event.
<br>
<br>In case of errors when processing files in the tools/perf/pmu-events/arch
<br>directory, 'jevents' tries to create an empty mapping file to allow the perf
<br>build to succeed even if the PMU event aliases cannot be used.
<br>
<br>However some errors in processing may cause the perf build to fail.
<br>
<br>Mapfile format
<br>===============
<br>
<br>The mapfile enables multiple CPU models to share a single set of PMU events.
<br>It is required even if such mapping is 1:1.
<br>
<br>The mapfile.csv format is expected to be:
<br>
<br>	Header line
<br>	CPUID,Version,Dir/path/name,Type
<br>
<br>where:
<br>
<br>	Comma:
<br>		is the required field delimiter (i.e other fields cannot
<br>		have commas within them).
<br>
<br>	Comments:
<br>		Lines in which the first character is either '\n' or '#'
<br>		are ignored.
<br>
<br>	Header line
<br>		The header line is the first line in the file, which is
<br>		always _IGNORED_. It can empty.
<br>
<br>	CPUID:
<br>		CPUID is an arch-specific char string, that can be used
<br>		to identify CPU (and associate it with a set of PMU events
<br>		it supports). Multiple CPUIDS can point to the same
<br>		File/path/name.json.
<br>
<br>		Example:
<br>			CPUID == 'GenuineIntel-6-2E' (on x86).
<br>			CPUID == '004b0100' (PVR value in Powerpc)
<br>	Version:
<br>		is the Version of the mapfile.
<br>
<br>	Dir/path/name:
<br>		is the pathname to the directory containing the CPU's JSON
<br>		files, relative to the directory containing the mapfile.csv
<br>
<br>	Type:
<br>		indicates whether the events or "core" or "uncore" events.
<br>
<br>
<br>	Eg:
<br>
<br>	$ grep Silvermont tools/perf/pmu-events/arch/x86/mapfile.csv
<br>	GenuineIntel-6-37,V13,Silvermont_core,core
<br>	GenuineIntel-6-4D,V13,Silvermont_core,core
<br>	GenuineIntel-6-4C,V13,Silvermont_core,core
<br>
<br>	i.e the three CPU models use the JSON files (i.e PMU events) listed
<br>	in the directory 'tools/perf/pmu-events/arch/x86/Silvermont_core'.
<br><p></p><div class="separator"></div><br><p><h2>Perf-Trace-Util</h2></p>Perf-Trace-Util version 0.01
<br>============================
<br>
<br>This module contains utility functions for use with perf script.
<br>
<br>Core.pm and Util.pm are pure Perl modules; Core.pm contains routines
<br>that the core perf support for Perl calls on and should always be
<br>'used', while Util.pm contains useful but optional utility functions
<br>that scripts may want to use.  Context.pm contains the Perl-&gt;C
<br>interface that allows scripts to access data in the embedding perf
<br>executable; scripts wishing to do that should 'use Context.pm'.
<br>
<br>The Perl-&gt;C perf interface is completely driven by Context.xs.  If you
<br>want to add new Perl functions that end up accessing C data in the
<br>perf executable, you add desciptions of the new functions here.
<br>scripting_context is a pointer to the perf data in the perf executable
<br>that you want to access - it's passed as the second parameter,
<br>$context, to all handler functions.
<br>
<br>After you do that:
<br>
<br>  perl Makefile.PL   # to create a Makefile for the next step
<br>  make               # to create Context.c
<br>
<br>  edit Context.c to add const to the char* file = __FILE__ line in
<br>  XS(boot_Perf__Trace__Context) to silence a warning/error.
<br>
<br>  You can delete the Makefile, object files and anything else that was
<br>  generated e.g. blib and shared library, etc, except for of course
<br>  Context.c
<br>
<br>  You should then be able to run the normal perf make as usual.
<br>
<br>INSTALLATION
<br>
<br>Building perf with perf script Perl scripting should install this
<br>module in the right place.
<br>
<br>You should make sure libperl and ExtUtils/Embed.pm are installed first
<br>e.g. apt-get install libperl-dev or yum install perl-ExtUtils-Embed.
<br>
<br>DEPENDENCIES
<br>
<br>This module requires these other modules and libraries:
<br>
<br>  None
<br>
<br>COPYRIGHT AND LICENCE
<br>
<br>Copyright (C) 2009 by Tom Zanussi &lt;tzanussi@gmail.com&gt;
<br>
<br>This library is free software; you can redistribute it and/or modify
<br>it under the same terms as Perl itself, either Perl version 5.10.0 or,
<br>at your option, any later version of Perl 5 you may have available.
<br>
<br>Alternatively, this software may be distributed under the terms of the
<br>GNU General Public License ("GPL") version 2 as published by the Free
<br>Software Foundation.
<br>
<br><p></p><div class="separator"></div><br><p><h2>attr</h2></p>The struct perf_event_attr test (attr tests) support
<br>====================================================
<br>This testing support is embedded into perf directly and is governed
<br>by the PERF_TEST_ATTR environment variable and hook inside the
<br>sys_perf_event_open function.
<br>
<br>The general idea is to store 'struct perf_event_attr' details for
<br>each event created within single perf command. Each event details
<br>are stored into separate text file. Once perf command is finished
<br>these files are checked for values we expect for command.
<br>
<br>The attr tests consist of following parts:
<br>
<br>tests/attr.c
<br>------------
<br>This is the sys_perf_event_open hook implementation. The hook
<br>is triggered when the PERF_TEST_ATTR environment variable is
<br>defined. It must contain name of existing directory with access
<br>and write permissions.
<br>
<br>For each sys_perf_event_open call event details are stored in
<br>separate file. Besides 'struct perf_event_attr' values we also
<br>store 'fd' and 'group_fd' values to allow checking for groups.
<br>
<br>tests/attr.py
<br>-------------
<br>This is the python script that does all the hard work. It reads
<br>the test definition, executes it and checks results.
<br>
<br>tests/attr/
<br>-----------
<br>Directory containing all attr test definitions.
<br>Following tests are defined (with perf commands):
<br>
<br>  perf record kill                              (test-record-basic)
<br>  perf record -b kill                           (test-record-branch-any)
<br>  perf record -j any kill                       (test-record-branch-filter-any)
<br>  perf record -j any_call kill                  (test-record-branch-filter-any_call)
<br>  perf record -j any_ret kill                   (test-record-branch-filter-any_ret)
<br>  perf record -j hv kill                        (test-record-branch-filter-hv)
<br>  perf record -j ind_call kill                  (test-record-branch-filter-ind_call)
<br>  perf record -j k kill                         (test-record-branch-filter-k)
<br>  perf record -j u kill                         (test-record-branch-filter-u)
<br>  perf record -c 123 kill                       (test-record-count)
<br>  perf record -d kill                           (test-record-data)
<br>  perf record -F 100 kill                       (test-record-freq)
<br>  perf record -g kill                           (test-record-graph-default)
<br>  perf record --call-graph dwarf kill		(test-record-graph-dwarf)
<br>  perf record --call-graph fp kill              (test-record-graph-fp)
<br>  perf record --group -e cycles,instructions kill (test-record-group)
<br>  perf record -e '{cycles,instructions}' kill   (test-record-group1)
<br>  perf record -D kill                           (test-record-no-delay)
<br>  perf record -i kill                           (test-record-no-inherit)
<br>  perf record -n kill                           (test-record-no-samples)
<br>  perf record -c 100 -P kill                    (test-record-period)
<br>  perf record -R kill                           (test-record-raw)
<br>  perf stat -e cycles kill                      (test-stat-basic)
<br>  perf stat kill                                (test-stat-default)
<br>  perf stat -d kill                             (test-stat-detailed-1)
<br>  perf stat -dd kill                            (test-stat-detailed-2)
<br>  perf stat -ddd kill                           (test-stat-detailed-3)
<br>  perf stat --group -e cycles,instructions kill (test-stat-group)
<br>  perf stat -e '{cycles,instructions}' kill     (test-stat-group1)
<br>  perf stat -i -e cycles kill                   (test-stat-no-inherit)
<br><p></p><div class="separator"></div><br><p><h2>bpf</h2></p>eBPF sample programs
<br>====================
<br>
<br>This directory contains a mini eBPF library, test stubs, verifier
<br>test-suite and examples for using eBPF.
<br>
<br>Build dependencies
<br>==================
<br>
<br>Compiling requires having installed:
<br> * clang &gt;= version 3.4.0
<br> * llvm &gt;= version 3.7.1
<br>
<br>Note that LLVM's tool 'llc' must support target 'bpf', list version
<br>and supported targets with command: ``llc --version``
<br>
<br>Kernel headers
<br>--------------
<br>
<br>There are usually dependencies to header files of the current kernel.
<br>To avoid installing devel kernel headers system wide, as a normal
<br>user, simply call::
<br>
<br> make headers_install
<br>
<br>This will creates a local "usr/include" directory in the git/build top
<br>level directory, that the make system automatically pickup first.
<br>
<br>Compiling
<br>=========
<br>
<br>For building the BPF samples, issue the below command from the kernel
<br>top level directory::
<br>
<br> make samples/bpf/
<br>
<br>Do notice the "/" slash after the directory name.
<br>
<br>It is also possible to call make from this directory.  This will just
<br>hide the the invocation of make as above with the appended "/".
<br>
<br>Manually compiling LLVM with 'bpf' support
<br>------------------------------------------
<br>
<br>Since version 3.7.0, LLVM adds a proper LLVM backend target for the
<br>BPF bytecode architecture.
<br>
<br>By default llvm will build all non-experimental backends including bpf.
<br>To generate a smaller llc binary one can use::
<br>
<br> -DLLVM_TARGETS_TO_BUILD="BPF"
<br>
<br>Quick sniplet for manually compiling LLVM and clang
<br>(build dependencies are cmake and gcc-c++)::
<br>
<br> $ git clone http://llvm.org/git/llvm.git
<br> $ cd llvm/tools
<br> $ git clone --depth 1 http://llvm.org/git/clang.git
<br> $ cd ..; mkdir build; cd build
<br> $ cmake .. -DLLVM_TARGETS_TO_BUILD="BPF;X86"
<br> $ make -j $(getconf _NPROCESSORS_ONLN)
<br>
<br>It is also possible to point make to the newly compiled 'llc' or
<br>'clang' command via redefining LLC or CLANG on the make command line::
<br>
<br> make samples/bpf/ LLC=~/git/llvm/build/bin/llc CLANG=~/git/llvm/build/bin/clang
<br><p></p><div class="separator"></div><br><p><h2>pktgen</h2></p>Sample and benchmark scripts for pktgen (packet generator)
<br>==========================================================
<br>This directory contains some pktgen sample and benchmark scripts, that
<br>can easily be copied and adjusted for your own use-case.
<br>
<br>General doc is located in kernel: Documentation/networking/pktgen.txt
<br>
<br>Helper include files
<br>====================
<br>This directory contains two helper shell files, that can be "included"
<br>by shell source'ing.  Namely "functions.sh" and "parameters.sh".
<br>
<br>Common parameters
<br>-----------------
<br>The parameters.sh file support easy and consistant parameter parsing
<br>across the sample scripts.  Usage example is printed on errors::
<br>
<br> Usage: ./pktgen_sample01_simple.sh [-vx] -i ethX
<br>  -i : ($DEV)       output interface/device (required)
<br>  -s : ($PKT_SIZE)  packet size
<br>  -d : ($DEST_IP)   destination IP
<br>  -m : ($DST_MAC)   destination MAC-addr
<br>  -t : ($THREADS)   threads to start
<br>  -c : ($SKB_CLONE) SKB clones send before alloc new SKB
<br>  -b : ($BURST)     HW level bursting of SKBs
<br>  -v : ($VERBOSE)   verbose
<br>  -x : ($DEBUG)     debug
<br>
<br>The global variable being set is also listed.  E.g. the required
<br>interface/device parameter "-i" sets variable $DEV.
<br>
<br>Common functions
<br>----------------
<br>The functions.sh file provides; Three different shell functions for
<br>configuring the different components of pktgen: pg_ctrl(), pg_thread()
<br>and pg_set().
<br>
<br>These functions correspond to pktgens different components.
<br> * pg_ctrl()   control "pgctrl" (/proc/net/pktgen/pgctrl)
<br> * pg_thread() control the kernel threads and binding to devices
<br> * pg_set()    control setup of individual devices
<br>
<br>See sample scripts for usage examples.
<br><p></p><div class="separator"></div><br><p><h2>fpsp040</h2></p>
<br>MOTOROLA MICROPROCESSOR & MEMORY TECHNOLOGY GROUP
<br>M68000 Hi-Performance Microprocessor Division
<br>M68040 Software Package
<br>
<br>M68040 Software Package Copyright (c) 1993, 1994 Motorola Inc.
<br>All rights reserved.
<br>
<br>THE SOFTWARE is provided on an "AS IS" basis and without warranty.
<br>To the maximum extent permitted by applicable law,
<br>MOTOROLA DISCLAIMS ALL WARRANTIES WHETHER EXPRESS OR IMPLIED,
<br>INCLUDING IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A
<br>PARTICULAR PURPOSE and any warranty against infringement with
<br>regard to the SOFTWARE (INCLUDING ANY MODIFIED VERSIONS THEREOF)
<br>and any accompanying written materials.
<br>
<br>To the maximum extent permitted by applicable law,
<br>IN NO EVENT SHALL MOTOROLA BE LIABLE FOR ANY DAMAGES WHATSOEVER
<br>(INCLUDING WITHOUT LIMITATION, DAMAGES FOR LOSS OF BUSINESS
<br>PROFITS, BUSINESS INTERRUPTION, LOSS OF BUSINESS INFORMATION, OR
<br>OTHER PECUNIARY LOSS) ARISING OF THE USE OR INABILITY TO USE THE
<br>SOFTWARE.  Motorola assumes no responsibility for the maintenance
<br>and support of the SOFTWARE.
<br>
<br>You are hereby granted a copyright license to use, modify, and
<br>distribute the SOFTWARE so long as this entire notice is retained
<br>without alteration in any modified and/or redistributed versions,
<br>and that such modified versions are clearly identified as such.
<br>No licenses are granted by implication, estoppel or otherwise
<br>under any patents or trademarks of Motorola, Inc.
<br><p></p><div class="separator"></div><br><p><h2>ifpsp060</h2></p>~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
<br>MOTOROLA MICROPROCESSOR & MEMORY TECHNOLOGY GROUP
<br>M68000 Hi-Performance Microprocessor Division
<br>M68060 Software Package
<br>Production Release P1.00 -- October 10, 1994
<br>
<br>M68060 Software Package Copyright © 1993, 1994 Motorola Inc.  All rights reserved.
<br>
<br>THE SOFTWARE is provided on an "AS IS" basis and without warranty.
<br>To the maximum extent permitted by applicable law,
<br>MOTOROLA DISCLAIMS ALL WARRANTIES WHETHER EXPRESS OR IMPLIED,
<br>INCLUDING IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE
<br>and any warranty against infringement with regard to the SOFTWARE
<br>(INCLUDING ANY MODIFIED VERSIONS THEREOF) and any accompanying written materials.
<br>
<br>To the maximum extent permitted by applicable law,
<br>IN NO EVENT SHALL MOTOROLA BE LIABLE FOR ANY DAMAGES WHATSOEVER
<br>(INCLUDING WITHOUT LIMITATION, DAMAGES FOR LOSS OF BUSINESS PROFITS,
<br>BUSINESS INTERRUPTION, LOSS OF BUSINESS INFORMATION, OR OTHER PECUNIARY LOSS)
<br>ARISING OF THE USE OR INABILITY TO USE THE SOFTWARE.
<br>Motorola assumes no responsibility for the maintenance and support of the SOFTWARE.
<br>
<br>You are hereby granted a copyright license to use, modify, and distribute the SOFTWARE
<br>so long as this entire notice is retained without alteration in any modified and/or
<br>redistributed versions, and that such modified versions are clearly identified as such.
<br>No licenses are granted by implication, estoppel or otherwise under any patents
<br>or trademarks of Motorola, Inc.
<br>~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
<br>Files in this directory:
<br>-------------------------
<br>
<br>fpsp.sa		Full FP Kernel Module - hex image
<br>fpsp.s		Full FP Kernel Module - source code
<br>fpsp.doc	Full FP Kernel Module - on-line documentation
<br>
<br>pfpsp.sa	Partial FP Kernel Module - hex image
<br>pfpsp.s		Partial FP Kernel Module - source code
<br>
<br>fplsp.sa	FP Library Module - hex image
<br>fplsp.s		FP Library Module - source code
<br>fplsp.doc	FP Library Module - on-line documentation
<br>
<br>isp.sa		Integer Unimplemented Kernel Module - hex image
<br>isp.s		Integer Unimplemented Kernel Module - source code
<br>isp.doc		Integer Unimplemented Kernel Module - on-line doc
<br>
<br>ilsp.sa		Integer Unimplemented Library Module - hex image
<br>ilsp.s		Integer Unimplemented Library Module - source code
<br>ilsp.doc	Integer Unimplemented Library Module - on-line doc
<br>
<br>fskeleton.s	Sample Call-outs needed by fpsp.sa and pfpsp.sa
<br>
<br>iskeleton.s	Sample Call-outs needed by isp.sa
<br>
<br>os.s		Sample Call-outs needed by fpsp.sa, pfpsp.sa, and isp.sa
<br>
<br>ftest.sa	Simple test program to test that {p}fpsp.sa
<br>		was connected properly; hex image
<br>ftest.s		above test; source code
<br>
<br>itest.sa	Simple test program to test that isp.sa was
<br>		connected properly; hex image
<br>itest.s		above test; source code
<br>
<br>test.doc	on-line documentation for {i,f}test.sa
<br>
<br>README		This file
<br>
<br>ERRATA		Known errata for this release
<br>
<br>MISC		Release file version numbers
<br><p></p><div class="separator"></div><br><p><h2>src</h2></p>This is the original source code from Motorola for the 68060 processor
<br>support code, providing emulation for rarely used m68k instructions
<br>not implemented in the 68060 silicon.
<br>
<br>The code provided here will not assemble out of the box using the GNU
<br>assembler, however it is being included in order to comply with the
<br>GNU General Public License.
<br>
<br>You don't need to actually assemble these files in order to compile a
<br>workin m68k kernel, the precompiled .sa files in arch/m68k/ifpsp060
<br>are sufficient and were generated from these source files by
<br>Motorola.
<br><p></p><div class="separator"></div><br><p><h2>q40</h2></p>Linux for the Q40
<br>=================
<br>
<br>You may try http://www.geocities.com/SiliconValley/Bay/2602/ for
<br>some up to date information. Booter and other tools will be also
<br>available from this place or http://ftp.uni-erlangen.de/pub/unix/Linux/680x0/q40/
<br>and mirrors.
<br>
<br>Hints to documentation usually refer to the linux source tree in
<br>/usr/src/linux/Documentation unless URL given.
<br>
<br>It seems IRQ unmasking can't be safely done on a Q40. IRQ probing
<br>is not implemented - do not try it! (See below)
<br>
<br>For a list of kernel command-line options read the documentation for the
<br>particular device drivers.
<br>
<br>The floppy imposes a very high interrupt load on the CPU, approx 30K/s.
<br>When something blocks interrupts (HD) it will lose some of them, so far
<br>this is not known to have caused any data loss. On highly loaded systems
<br>it can make the floppy very slow or practically stop. Other Q40 OS' simply
<br>poll the floppy for this reason - something that can't be done in Linux.
<br>Only possible cure is getting a 82072 controller with fifo instead of
<br>the 8272A.
<br>
<br>drivers used by the Q40, apart from the very obvious (console etc.):
<br>	drivers/char/q40_keyb.c		# use PC keymaps for national keyboards
<br>		     serial.c		# normal PC driver - any speed
<br>	             lp.c		# printer driver
<br>		     genrtc.c		# RTC
<br>		char/joystick/*		# most of this should work, not
<br>				        # in default config.in
<br>	        block/q40ide.c		# startup for ide
<br>		      ide*		# see Documentation/ide/ide.txt
<br>		      floppy.c		# normal PC driver, DMA emu in asm/floppy.h
<br>					# and arch/m68k/kernel/entry.S
<br>					# see drivers/block/README.fd
<br>		net/ne.c
<br>		video/q40fb.c
<br>		parport/*
<br>		sound/dmasound_core.c
<br>		      dmasound_q40.c
<br>
<br>Various other PC drivers can be enabled simply by adding them to
<br>arch/m68k/config.in, especially 8 bit devices should be without any
<br>problems. For cards using 16bit io/mem more care is required, like
<br>checking byte order issues, hacking memcpy_*_io etc.
<br>
<br>
<br>Debugging
<br>=========
<br>
<br>Upon startup the kernel will usually output "ABCQGHIJ" into the SRAM,
<br>preceded by the booter signature. This is a trace just in case something
<br>went wrong during earliest setup stages of head.S.
<br>**Changed** to preserve SRAM contents by default, this is only done when
<br>requested - SRAM must start with '%LX$' signature to do this. '-d' option
<br>to 'lxx' loader enables this.
<br>
<br>SRAM can also be used as additional console device, use debug=mem.
<br>This will save kernel startup msgs into SRAM, the screen will display
<br>only the penguin - and shell prompt if it gets that far..
<br>Unfortunately only 2000 bytes are available.
<br>
<br>Serial console works and can also be used for debugging, see loader_txt
<br>
<br>Most problems seem to be caused by fawlty or badly configured io-cards or
<br>hard drives anyway.
<br>Make sure to configure the parallel port as SPP and remove IRQ/DMA jumpers
<br>for first testing. The Q40 does not support DMA and may have trouble with
<br>parallel ports version of interrupts.
<br>
<br>
<br>Q40 Hardware Description
<br>========================
<br>
<br>This is just an overview, see asm-m68k/* for details ask if you have any
<br>questions.
<br>
<br>The Q40 consists of a 68040@40 MHz, 1MB video RAM, up to 32MB RAM, AT-style
<br>keyboard interface, 1 Programmable LED, 2x8bit DACs and up to 1MB ROM, 1MB
<br>shadow ROM.
<br>The Q60 has any of 68060 or 68LC060 and up to 128 MB RAM.
<br>
<br>Most interfacing like floppy, IDE, serial and parallel ports is done via ISA
<br>slots. The ISA io and mem range is mapped (sparse&byteswapped!) into separate
<br>regions of the memory.
<br>The main interrupt register IIRQ_REG will indicate whether an IRQ was internal
<br>or from some ISA devices, EIRQ_REG can distinguish up to 8 ISA IRQs.
<br>
<br>The Q40 custom chip is programmable to provide 2 periodic timers:
<br>	- 50 or 200 Hz - level 2, !!THIS CAN'T BE DISABLED!!
<br>	- 10 or 20 KHz - level 4, used for dma-sound
<br>
<br>Linux uses the 200 Hz interrupt for timer and beep by default.
<br>
<br>
<br>Interrupts
<br>==========
<br>
<br>q40 master chip handles only a subset of level triggered interrupts.
<br>
<br>Linux has some requirements wrt interrupt architecture, these are
<br>to my knowledge:
<br>	(a) interrupt handler must not be reentered even when sti() is called
<br>	    from within handler
<br>	(b) working enable/disable_irq
<br>
<br>Luckily these requirements are only important for drivers shared
<br>with other architectures - ide,serial,parallel, ethernet.
<br>q40ints.c now contains a trivial hack for (a), (b) is more difficult
<br>because only irq's 4-15 can be disabled - and only all of them at once.
<br>Thus disable_irq() can effectively block the machine if the driver goes
<br>asleep.
<br>One thing to keep in mind when hacking around the interrupt code is
<br>that there is no way to find out which IRQ caused a request, [EI]IRQ_REG
<br>displays current state of the various IRQ lines.
<br>
<br>Keyboard
<br>========
<br>
<br>q40 receives AT make/break codes from the keyboard, these are translated to
<br>the PC scancodes x86 Linux uses. So by theory every national keyboard should
<br>work just by loading the appropriate x86 keytable - see any national-HOWTO.
<br>
<br>Unfortunately the AT-&gt;PC translation isn't quite trivial and even worse, my
<br>documentation of it is absolutely minimal - thus some exotic keys may not
<br>behave exactly as expected.
<br>
<br>There is still hope that it can be fixed completely though. If you encounter
<br>problems, email me ideally this:
<br>	- exact keypress/release sequence
<br>	- 'showkey -s' run on q40, non-X session
<br>	- 'showkey -s' run on a PC, non-X session
<br>	- AT codes as displayed by the q40 debugging ROM
<br>btw if the showkey output from PC and Q40 doesn't differ then you have some
<br>classic configuration problem - don't send me anything in this case
<br>
<br><p></p><div class="separator"></div><br><p><h2>hp300</h2></p>HP300 notes
<br>-----------
<br>
<br>The Linux/HP web page is at &lt;http://www.tazenda.demon.co.uk/phil/linux-hp/&gt;
<br>
<br>Currently only 9000/340 machines have been tested.  Any amount of RAM should
<br>work now but I've only tried 16MB and 12MB.
<br>
<br>The serial console is probably broken at the moment but the Topcat/HIL keyboard
<br>combination seems to work for me.  Your mileage may vary.
<br>
<br>The LANCE driver works after a fashion but only if you reset the chip before
<br>every packet.  This doesn't make for very speedy operation.
<br>
<br><p></p><div class="separator"></div><br><p><h2>math-emu</h2></p> +---------------------------------------------------------------------------+
<br> |  wm-FPU-emu   an FPU emulator for 80386 and 80486SX microprocessors.      |
<br> |                                                                           |
<br> | Copyright (C) 1992,1993,1994,1995,1996,1997,1999                          |
<br> |                       W. Metzenthen, 22 Parker St, Ormond, Vic 3163,      |
<br> |                       Australia.  E-mail billm@melbpc.org.au              |
<br> |                                                                           |
<br> |    This program is free software; you can redistribute it and/or modify   |
<br> |    it under the terms of the GNU General Public License version 2 as      |
<br> |    published by the Free Software Foundation.                             |
<br> |                                                                           |
<br> |    This program is distributed in the hope that it will be useful,        |
<br> |    but WITHOUT ANY WARRANTY; without even the implied warranty of         |
<br> |    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the          |
<br> |    GNU General Public License for more details.                           |
<br> |                                                                           |
<br> |    You should have received a copy of the GNU General Public License      |
<br> |    along with this program; if not, write to the Free Software            |
<br> |    Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.              |
<br> |                                                                           |
<br> +---------------------------------------------------------------------------+
<br>
<br>
<br>
<br>wm-FPU-emu is an FPU emulator for Linux. It is derived from wm-emu387
<br>which was my 80387 emulator for early versions of djgpp (gcc under
<br>msdos); wm-emu387 was in turn based upon emu387 which was written by
<br>DJ Delorie for djgpp.  The interface to the Linux kernel is based upon
<br>the original Linux math emulator by Linus Torvalds.
<br>
<br>My target FPU for wm-FPU-emu is that described in the Intel486
<br>Programmer's Reference Manual (1992 edition). Unfortunately, numerous
<br>facets of the functioning of the FPU are not well covered in the
<br>Reference Manual. The information in the manual has been supplemented
<br>with measurements on real 80486's. Unfortunately, it is simply not
<br>possible to be sure that all of the peculiarities of the 80486 have
<br>been discovered, so there is always likely to be obscure differences
<br>in the detailed behaviour of the emulator and a real 80486.
<br>
<br>wm-FPU-emu does not implement all of the behaviour of the 80486 FPU,
<br>but is very close.  See "Limitations" later in this file for a list of
<br>some differences.
<br>
<br>Please report bugs, etc to me at:
<br>       billm@melbpc.org.au
<br>or     b.metzenthen@medoto.unimelb.edu.au
<br>
<br>For more information on the emulator and on floating point topics, see
<br>my web pages, currently at  http://www.suburbia.net/~billm/
<br>
<br>
<br>--Bill Metzenthen
<br>  December 1999
<br>
<br>
<br>----------------------- Internals of wm-FPU-emu -----------------------
<br>
<br>Numeric algorithms:
<br>(1) Add, subtract, and multiply. Nothing remarkable in these.
<br>(2) Divide has been tuned to get reasonable performance. The algorithm
<br>    is not the obvious one which most people seem to use, but is designed
<br>    to take advantage of the characteristics of the 80386. I expect that
<br>    it has been invented many times before I discovered it, but I have not
<br>    seen it. It is based upon one of those ideas which one carries around
<br>    for years without ever bothering to check it out.
<br>(3) The sqrt function has been tuned to get good performance. It is based
<br>    upon Newton's classic method. Performance was improved by capitalizing
<br>    upon the properties of Newton's method, and the code is once again
<br>    structured taking account of the 80386 characteristics.
<br>(4) The trig, log, and exp functions are based in each case upon quasi-
<br>    "optimal" polynomial approximations. My definition of "optimal" was
<br>    based upon getting good accuracy with reasonable speed.
<br>(5) The argument reducing code for the trig function effectively uses
<br>    a value of pi which is accurate to more than 128 bits. As a consequence,
<br>    the reduced argument is accurate to more than 64 bits for arguments up
<br>    to a few pi, and accurate to more than 64 bits for most arguments,
<br>    even for arguments approaching 2^63. This is far superior to an
<br>    80486, which uses a value of pi which is accurate to 66 bits.
<br>
<br>The code of the emulator is complicated slightly by the need to
<br>account for a limited form of re-entrancy. Normally, the emulator will
<br>emulate each FPU instruction to completion without interruption.
<br>However, it may happen that when the emulator is accessing the user
<br>memory space, swapping may be needed. In this case the emulator may be
<br>temporarily suspended while disk i/o takes place. During this time
<br>another process may use the emulator, thereby perhaps changing static
<br>variables. The code which accesses user memory is confined to five
<br>files:
<br>    fpu_entry.c
<br>    reg_ld_str.c
<br>    load_store.c
<br>    get_address.c
<br>    errors.c
<br>As from version 1.12 of the emulator, no static variables are used
<br>(apart from those in the kernel's per-process tables). The emulator is
<br>therefore now fully re-entrant, rather than having just the restricted
<br>form of re-entrancy which is required by the Linux kernel.
<br>
<br>----------------------- Limitations of wm-FPU-emu -----------------------
<br>
<br>There are a number of differences between the current wm-FPU-emu
<br>(version 2.01) and the 80486 FPU (apart from bugs).  The differences
<br>are fewer than those which applied to the 1.xx series of the emulator.
<br>Some of the more important differences are listed below:
<br>
<br>The Roundup flag does not have much meaning for the transcendental
<br>functions and its 80486 value with these functions is likely to differ
<br>from its emulator value.
<br>
<br>In a few rare cases the Underflow flag obtained with the emulator will
<br>be different from that obtained with an 80486. This occurs when the
<br>following conditions apply simultaneously:
<br>(a) the operands have a higher precision than the current setting of the
<br>    precision control (PC) flags.
<br>(b) the underflow exception is masked.
<br>(c) the magnitude of the exact result (before rounding) is less than 2^-16382.
<br>(d) the magnitude of the final result (after rounding) is exactly 2^-16382.
<br>(e) the magnitude of the exact result would be exactly 2^-16382 if the
<br>    operands were rounded to the current precision before the arithmetic
<br>    operation was performed.
<br>If all of these apply, the emulator will set the Underflow flag but a real
<br>80486 will not.
<br>
<br>NOTE: Certain formats of Extended Real are UNSUPPORTED. They are
<br>unsupported by the 80486. They are the Pseudo-NaNs, Pseudoinfinities,
<br>and Unnormals. None of these will be generated by an 80486 or by the
<br>emulator. Do not use them. The emulator treats them differently in
<br>detail from the way an 80486 does.
<br>
<br>Self modifying code can cause the emulator to fail. An example of such
<br>code is:
<br>          movl %esp,[%ebx]
<br>	  fld1
<br>The FPU instruction may be (usually will be) loaded into the pre-fetch
<br>queue of the CPU before the mov instruction is executed. If the
<br>destination of the 'movl' overlaps the FPU instruction then the bytes
<br>in the prefetch queue and memory will be inconsistent when the FPU
<br>instruction is executed. The emulator will be invoked but will not be
<br>able to find the instruction which caused the device-not-present
<br>exception. For this case, the emulator cannot emulate the behaviour of
<br>an 80486DX.
<br>
<br>Handling of the address size override prefix byte (0x67) has not been
<br>extensively tested yet. A major problem exists because using it in
<br>vm86 mode can cause a general protection fault. Address offsets
<br>greater than 0xffff appear to be illegal in vm86 mode but are quite
<br>acceptable (and work) in real mode. A small test program developed to
<br>check the addressing, and which runs successfully in real mode,
<br>crashes dosemu under Linux and also brings Windows down with a general
<br>protection fault message when run under the MS-DOS prompt of Windows
<br>3.1. (The program simply reads data from a valid address).
<br>
<br>The emulator supports 16-bit protected mode, with one difference from
<br>an 80486DX.  A 80486DX will allow some floating point instructions to
<br>write a few bytes below the lowest address of the stack.  The emulator
<br>will not allow this in 16-bit protected mode: no instructions are
<br>allowed to write outside the bounds set by the protection.
<br>
<br>----------------------- Performance of wm-FPU-emu -----------------------
<br>
<br>Speed.
<br>-----
<br>
<br>The speed of floating point computation with the emulator will depend
<br>upon instruction mix. Relative performance is best for the instructions
<br>which require most computation. The simple instructions are adversely
<br>affected by the FPU instruction trap overhead.
<br>
<br>
<br>Timing: Some simple timing tests have been made on the emulator functions.
<br>The times include load/store instructions. All times are in microseconds
<br>measured on a 33MHz 386 with 64k cache. The Turbo C tests were under
<br>ms-dos, the next two columns are for emulators running with the djgpp
<br>ms-dos extender. The final column is for wm-FPU-emu in Linux 0.97,
<br>using libm4.0 (hard).
<br>
<br>function      Turbo C        djgpp 1.06        WM-emu387     wm-FPU-emu
<br>
<br>   +          60.5           154.8              76.5          139.4
<br>   -          61.1-65.5      157.3-160.8        76.2-79.5     142.9-144.7
<br>   *          71.0           190.8              79.6          146.6
<br>   /          61.2-75.0      261.4-266.9        75.3-91.6     142.2-158.1
<br>
<br> sin()        310.8          4692.0            319.0          398.5
<br> cos()        284.4          4855.2            308.0          388.7
<br> tan()        495.0          8807.1            394.9          504.7
<br> atan()       328.9          4866.4            601.1          419.5-491.9
<br>
<br> sqrt()       128.7          crashed           145.2          227.0
<br> log()        413.1-419.1    5103.4-5354.21    254.7-282.2    409.4-437.1
<br> exp()        479.1          6619.2            469.1          850.8
<br>
<br>
<br>The performance under Linux is improved by the use of look-ahead code.
<br>The following results show the improvement which is obtained under
<br>Linux due to the look-ahead code. Also given are the times for the
<br>original Linux emulator with the 4.1 'soft' lib.
<br>
<br> [ Linus' note: I changed look-ahead to be the default under linux, as
<br>   there was no reason not to use it after I had edited it to be
<br>   disabled during tracing ]
<br>
<br>            wm-FPU-emu w     original w
<br>            look-ahead       'soft' lib
<br>   +         106.4             190.2
<br>   -         108.6-111.6      192.4-216.2
<br>   *         113.4             193.1
<br>   /         108.8-124.4      700.1-706.2
<br>
<br> sin()       390.5            2642.0
<br> cos()       381.5            2767.4
<br> tan()       496.5            3153.3
<br> atan()      367.2-435.5     2439.4-3396.8
<br>
<br> sqrt()      195.1            4732.5
<br> log()       358.0-387.5     3359.2-3390.3
<br> exp()       619.3            4046.4
<br>
<br>
<br>These figures are now somewhat out-of-date. The emulator has become
<br>progressively slower for most functions as more of the 80486 features
<br>have been implemented.
<br>
<br>
<br>----------------------- Accuracy of wm-FPU-emu -----------------------
<br>
<br>
<br>The accuracy of the emulator is in almost all cases equal to or better
<br>than that of an Intel 80486 FPU.
<br>
<br>The results of the basic arithmetic functions (+,-,*,/), and fsqrt
<br>match those of an 80486 FPU. They are the best possible; the error for
<br>these never exceeds 1/2 an lsb. The fprem and fprem1 instructions
<br>return exact results; they have no error.
<br>
<br>
<br>The following table compares the emulator accuracy for the sqrt(),
<br>trig and log functions against the Turbo C "emulator". For this table,
<br>each function was tested at about 400 points. Ideal worst-case results
<br>would be 64 bits. The reduced Turbo C accuracy of cos() and tan() for
<br>arguments greater than pi/4 can be thought of as being related to the
<br>precision of the argument x; e.g. an argument of pi/2-(1e-10) which is
<br>accurate to 64 bits can result in a relative accuracy in cos() of
<br>about 64 + log2(cos(x)) = 31 bits.
<br>
<br>
<br>Function      Tested x range            Worst result                Turbo C
<br>                                        (relative bits)
<br>
<br>sqrt(x)       1 .. 2                    64.1                         63.2
<br>atan(x)       1e-10 .. 200              64.2                         62.8
<br>cos(x)        0 .. pi/2-(1e-10)         64.4 (x &lt;= pi/4)             62.4
<br>                                        64.1 (x = pi/2-(1e-10))      31.9
<br>sin(x)        1e-10 .. pi/2             64.0                         62.8
<br>tan(x)        1e-10 .. pi/2-(1e-10)     64.0 (x &lt;= pi/4)             62.1
<br>                                        64.1 (x = pi/2-(1e-10))      31.9
<br>exp(x)        0 .. 1                    63.1 **                      62.9
<br>log(x)        1+1e-6 .. 2               63.8 **                      62.1
<br>
<br>** The accuracy for exp() and log() is low because the FPU (emulator)
<br>does not compute them directly; two operations are required.
<br>
<br>
<br>The emulator passes the "paranoia" tests (compiled with gcc 2.3.3 or
<br>later) for 'float' variables (24 bit precision numbers) when precision
<br>control is set to 24, 53 or 64 bits, and for 'double' variables (53
<br>bit precision numbers) when precision control is set to 53 bits (a
<br>properly performing FPU cannot pass the 'paranoia' tests for 'double'
<br>variables when precision control is set to 64 bits).
<br>
<br>The code for reducing the argument for the trig functions (fsin, fcos,
<br>fptan and fsincos) has been improved and now effectively uses a value
<br>for pi which is accurate to more than 128 bits precision. As a
<br>consequence, the accuracy of these functions for large arguments has
<br>been dramatically improved (and is now very much better than an 80486
<br>FPU). There is also now no degradation of accuracy for fcos and fptan
<br>for operands close to pi/2. Measured results are (note that the
<br>definition of accuracy has changed slightly from that used for the
<br>above table):
<br>
<br>Function      Tested x range          Worst result
<br>                                     (absolute bits)
<br>
<br>cos(x)        0 .. 9.22e+18              62.0
<br>sin(x)        1e-16 .. 9.22e+18          62.1
<br>tan(x)        1e-16 .. 9.22e+18          61.8
<br>
<br>It is possible with some effort to find very large arguments which
<br>give much degraded precision. For example, the integer number
<br>           8227740058411162616.0
<br>is within about 10e-7 of a multiple of pi. To find the tan (for
<br>example) of this number to 64 bits precision it would be necessary to
<br>have a value of pi which had about 150 bits precision. The FPU
<br>emulator computes the result to about 42.6 bits precision (the correct
<br>result is about -9.739715e-8). On the other hand, an 80486 FPU returns
<br>0.01059, which in relative terms is hopelessly inaccurate.
<br>
<br>For arguments close to critical angles (which occur at multiples of
<br>pi/2) the emulator is more accurate than an 80486 FPU. For very large
<br>arguments, the emulator is far more accurate.
<br>
<br>
<br>Prior to version 1.20 of the emulator, the accuracy of the results for
<br>the transcendental functions (in their principal range) was not as
<br>good as the results from an 80486 FPU. From version 1.20, the accuracy
<br>has been considerably improved and these functions now give measured
<br>worst-case results which are better than the worst-case results given
<br>by an 80486 FPU.
<br>
<br>The following table gives the measured results for the emulator. The
<br>number of randomly selected arguments in each case is about half a
<br>million.  The group of three columns gives the frequency of the given
<br>accuracy in number of times per million, thus the second of these
<br>columns shows that an accuracy of between 63.80 and 63.89 bits was
<br>found at a rate of 133 times per one million measurements for fsin.
<br>The results show that the fsin, fcos and fptan instructions return
<br>results which are in error (i.e. less accurate than the best possible
<br>result (which is 64 bits)) for about one per cent of all arguments
<br>between -pi/2 and +pi/2.  The other instructions have a lower
<br>frequency of results which are in error.  The last two columns give
<br>the worst accuracy which was found (in bits) and the approximate value
<br>of the argument which produced it.
<br>
<br>                                frequency (per M)
<br>                               -------------------   ---------------
<br>instr   arg range    # tests   63.7   63.8    63.9   worst   at arg
<br>                               bits   bits    bits    bits
<br>-----  ------------  -------   ----   ----   -----   -----  --------
<br>fsin     (0,pi/2)     547756      0    133   10673   63.89  0.451317
<br>fcos     (0,pi/2)     547563      0    126   10532   63.85  0.700801
<br>fptan    (0,pi/2)     536274     11    267   10059   63.74  0.784876
<br>fpatan  4 quadrants   517087      0      8    1855   63.88  0.435121 (4q)
<br>fyl2x     (0,20)      541861      0      0    1323   63.94  1.40923  (x)
<br>fyl2xp1 (-.293,.414)  520256      0      0    5678   63.93  0.408542 (x)
<br>f2xm1     (-1,1)      538847      4    481    6488   63.79  0.167709
<br>
<br>
<br>Tests performed on an 80486 FPU showed results of lower accuracy. The
<br>following table gives the results which were obtained with an AMD
<br>486DX2/66 (other tests indicate that an Intel 486DX produces
<br>identical results).  The tests were basically the same as those used
<br>to measure the emulator (the values, being random, were in general not
<br>the same).  The total number of tests for each instruction are given
<br>at the end of the table, in case each about 100k tests were performed.
<br>Another line of figures at the end of the table shows that most of the
<br>instructions return results which are in error for more than 10
<br>percent of the arguments tested.
<br>
<br>The numbers in the body of the table give the approx number of times a
<br>result of the given accuracy in bits (given in the left-most column)
<br>was obtained per one million arguments. For three of the instructions,
<br>two columns of results are given: * The second column for f2xm1 gives
<br>the number cases where the results of the first column were for a
<br>positive argument, this shows that this instruction gives better
<br>results for positive arguments than it does for negative.  * In the
<br>cases of fcos and fptan, the first column gives the results when all
<br>cases where arguments greater than 1.5 were removed from the results
<br>given in the second column. Unlike the emulator, an 80486 FPU returns
<br>results of relatively poor accuracy for these instructions when the
<br>argument approaches pi/2. The table does not show those cases when the
<br>accuracy of the results were less than 62 bits, which occurs quite
<br>often for fsin and fptan when the argument approaches pi/2. This poor
<br>accuracy is discussed above in relation to the Turbo C "emulator", and
<br>the accuracy of the value of pi.
<br>
<br>
<br>bits   f2xm1  f2xm1 fpatan   fcos   fcos  fyl2x fyl2xp1  fsin  fptan  fptan
<br>62.0       0      0      0      0    437      0      0      0      0    925
<br>62.1       0      0     10      0    894      0      0      0      0   1023
<br>62.2      14      0      0      0   1033      0      0      0      0    945
<br>62.3      57      0      0      0   1202      0      0      0      0   1023
<br>62.4     385      0      0     10   1292      0     23      0      0   1178
<br>62.5    1140      0      0    119   1649      0     39      0      0   1149
<br>62.6    2037      0      0    189   1620      0     16      0      0   1169
<br>62.7    5086     14      0    646   2315     10    101     35     39   1402
<br>62.8    8818     86      0    984   3050     59    287    131    224   2036
<br>62.9   11340   1355      0   2126   4153     79    605    357    321   1948
<br>63.0   15557   4750      0   3319   5376    246   1281    862    808   2688
<br>63.1   20016   8288      0   4620   6628    511   2569   1723   1510   3302
<br>63.2   24945  11127     10   6588   8098   1120   4470   2968   2990   4724
<br>63.3   25686  12382     69   8774  10682   1906   6775   4482   5474   7236
<br>63.4   29219  14722     79  11109  12311   3094   9414   7259   8912  10587
<br>63.5   30458  14936    393  13802  15014   5874  12666   9609  13762  15262
<br>63.6   32439  16448   1277  17945  19028  10226  15537  14657  19158  20346
<br>63.7   35031  16805   4067  23003  23947  18910  20116  21333  25001  26209
<br>63.8   33251  15820   7673  24781  25675  24617  25354  24440  29433  30329
<br>63.9   33293  16833  18529  28318  29233  31267  31470  27748  29676  30601
<br>
<br>Per cent with error:
<br>        30.9           3.2          18.5    9.8   13.1   11.6          17.4
<br>Total arguments tested:
<br>       70194  70099 101784 100641 100641 101799 128853 114893 102675 102675
<br>
<br>
<br>------------------------- Contributors -------------------------------
<br>
<br>A number of people have contributed to the development of the
<br>emulator, often by just reporting bugs, sometimes with suggested
<br>fixes, and a few kind people have provided me with access in one way
<br>or another to an 80486 machine. Contributors include (to those people
<br>who I may have forgotten, please forgive me):
<br>
<br>Linus Torvalds
<br>Tommy.Thorn@daimi.aau.dk
<br>Andrew.Tridgell@anu.edu.au
<br>Nick Holloway, alfie@dcs.warwick.ac.uk
<br>Hermano Moura, moura@dcs.gla.ac.uk
<br>Jon Jagger, J.Jagger@scp.ac.uk
<br>Lennart Benschop
<br>Brian Gallew, geek+@CMU.EDU
<br>Thomas Staniszewski, ts3v+@andrew.cmu.edu
<br>Martin Howell, mph@plasma.apana.org.au
<br>M Saggaf, alsaggaf@athena.mit.edu
<br>Peter Barker, PETER@socpsy.sci.fau.edu
<br>tom@vlsivie.tuwien.ac.at
<br>Dan Russel, russed@rpi.edu
<br>Daniel Carosone, danielce@ee.mu.oz.au
<br>cae@jpmorgan.com
<br>Hamish Coleman, t933093@minyos.xx.rmit.oz.au
<br>Bruce Evans, bde@kralizec.zeta.org.au
<br>Timo Korvola, Timo.Korvola@hut.fi
<br>Rick Lyons, rick@razorback.brisnet.org.au
<br>Rick, jrs@world.std.com
<br> 
<br>...and numerous others who responded to my request for help with
<br>a real 80486.
<br>
<br><p></p><div class="separator"></div><br><p><h2>math-emu</h2></p>All files except driver.c are snapshots from the HP-UX kernel.  They've
<br>been modified as little as possible.  Even though they don't fit the
<br>Linux coding style, please leave them in their funny format just in case
<br>someone in the future, with access to HP-UX source code, is generous
<br>enough to update our copies with later changes from HP-UX -- it'll
<br>make their 'diff' job easier if our code is relatively unmodified.
<br>
<br>Required Disclaimer: Hewlett-Packard makes no implied or expressed
<br>warranties about this code nor any promises to maintain or test it
<br>in any way.  This copy of this snapshot is no longer the property
<br>of Hewlett-Packard.
<br><p></p><div class="separator"></div><br><p><h2>boot</h2></p>
<br>To extract the kernel vmlinux, System.map, .config or initrd from the zImage binary:
<br>
<br>objcopy -j .kernel:vmlinux -O binary zImage vmlinux.gz
<br>objcopy -j .kernel:System.map -O binary zImage System.map.gz
<br>objcopy -j .kernel:.config -O binary zImage config.gz
<br>objcopy -j .kernel:initrd -O binary zImage.initrd initrd.gz
<br>
<br>
<br>	Peter
<br>
<br><p></p><div class="separator"></div><br><p><h2>overlays</h2></p>Introduction
<br>============
<br>
<br>This directory contains Device Tree overlays. Device Tree makes it possible
<br>to support many hardware configurations with a single kernel and without the
<br>need to explicitly load or blacklist kernel modules. Note that this isn't a
<br>"pure" Device Tree configuration (c.f. MACH_BCM2835) - some on-board devices
<br>are still configured by the board support code, but the intention is to
<br>eventually reach that goal.
<br>
<br>On Raspberry Pi, Device Tree usage is controlled from /boot/config.txt. By
<br>default, the Raspberry Pi kernel boots with device tree enabled. You can
<br>completely disable DT usage (for now) by adding:
<br>
<br>    device_tree=
<br>
<br>to your config.txt, which should cause your Pi to revert to the old way of
<br>doing things after a reboot.
<br>
<br>In /boot you will find a .dtb for each base platform. This describes the
<br>hardware that is part of the Raspberry Pi board. The loader (start.elf and its
<br>siblings) selects the .dtb file appropriate for the platform by name, and reads
<br>it into memory. At this point, all of the optional interfaces (i2c, i2s, spi)
<br>are disabled, but they can be enabled using Device Tree parameters:
<br>
<br>    dtparam=i2c=on,i2s=on,spi=on
<br>
<br>However, this shouldn't be necessary in many use cases because loading an
<br>overlay that requires one of those interfaces will cause it to be enabled
<br>automatically, and it is advisable to only enable interfaces if they are
<br>needed.
<br>
<br>Configuring additional, optional hardware is done using Device Tree overlays
<br>(see below).
<br>
<br>raspi-config
<br>============
<br>
<br>The Advanced Options section of the raspi-config utility can enable and disable
<br>Device Tree use, as well as toggling the I2C and SPI interfaces. Note that it
<br>is possible to both enable an interface and blacklist the driver, if for some
<br>reason you should want to defer the loading.
<br>
<br>Modules
<br>=======
<br>
<br>As well as describing the hardware, Device Tree also gives enough information
<br>to allow suitable driver modules to be located and loaded, with the corollary
<br>that unneeded modules are not loaded. As a result it should be possible to
<br>remove lines from /etc/modules, and /etc/modprobe.d/raspi-blacklist.conf can
<br>have its contents deleted (or commented out).
<br>
<br>Using Overlays
<br>==============
<br>
<br>Overlays are loaded using the "dtoverlay" directive. As an example, consider
<br>the popular lirc-rpi module, the Linux Infrared Remote Control driver. In the
<br>pre-DT world this would be loaded from /etc/modules, with an explicit
<br>"modprobe lirc-rpi" command, or programmatically by lircd. With DT enabled,
<br>this becomes a line in config.txt:
<br>
<br>    dtoverlay=lirc-rpi
<br>
<br>This causes the file /boot/overlays/lirc-rpi.dtbo to be loaded. By
<br>default it will use GPIOs 17 (out) and 18 (in), but this can be modified using
<br>DT parameters:
<br>
<br>    dtoverlay=lirc-rpi,gpio_out_pin=17,gpio_in_pin=13
<br>
<br>Parameters always have default values, although in some cases (e.g. "w1-gpio")
<br>it is necessary to provided multiple overlays in order to get the desired
<br>behaviour. See the list of overlays below for a description of the parameters
<br>and their defaults.
<br>
<br>The Overlay and Parameter Reference
<br>===================================
<br>
<br>N.B. When editing this file, please preserve the indentation levels to make it
<br>simple to parse programmatically. NO HARD TABS.
<br>
<br>
<br>Name:   &lt;The base DTB&gt;
<br>Info:   Configures the base Raspberry Pi hardware
<br>Load:   &lt;loaded automatically&gt;
<br>Params:
<br>        audio                   Set to "on" to enable the onboard ALSA audio
<br>                                interface (default "off")
<br>
<br>        i2c_arm                 Set to "on" to enable the ARM's i2c interface
<br>                                (default "off")
<br>
<br>        i2c_vc                  Set to "on" to enable the i2c interface
<br>                                usually reserved for the VideoCore processor
<br>                                (default "off")
<br>
<br>        i2c                     An alias for i2c_arm
<br>
<br>        i2c_arm_baudrate        Set the baudrate of the ARM's i2c interface
<br>                                (default "100000")
<br>
<br>        i2c_vc_baudrate         Set the baudrate of the VideoCore i2c interface
<br>                                (default "100000")
<br>
<br>        i2c_baudrate            An alias for i2c_arm_baudrate
<br>
<br>        i2s                     Set to "on" to enable the i2s interface
<br>                                (default "off")
<br>
<br>        spi                     Set to "on" to enable the spi interfaces
<br>                                (default "off")
<br>
<br>        random                  Set to "on" to enable the hardware random
<br>                                number generator (default "on")
<br>
<br>        sd_overclock            Clock (in MHz) to use when the MMC framework
<br>                                requests 50MHz
<br>
<br>        sd_force_pio            Disable DMA support for SD driver (default off)
<br>
<br>        sd_pio_limit            Number of blocks above which to use DMA for
<br>                                SD card (default 1)
<br>
<br>        sd_debug                Enable debug output from SD driver (default off)
<br>
<br>        uart0                   Set to "off" to disable uart0 (default "on")
<br>
<br>        uart1                   Set to "on" or "off" to enable or disable uart1
<br>                                (default varies)
<br>
<br>        watchdog                Set to "on" to enable the hardware watchdog
<br>                                (default "off")
<br>
<br>        act_led_trigger         Choose which activity the LED tracks.
<br>                                Use "heartbeat" for a nice load indicator.
<br>                                (default "mmc")
<br>
<br>        act_led_activelow       Set to "on" to invert the sense of the LED
<br>                                (default "off")
<br>                                N.B. For Pi3 see pi3-act-led overlay.
<br>
<br>        act_led_gpio            Set which GPIO to use for the activity LED
<br>                                (in case you want to connect it to an external
<br>                                device)
<br>                                (default "16" on a non-Plus board, "47" on a
<br>                                Plus or Pi 2)
<br>                                N.B. For Pi3 see pi3-act-led overlay.
<br>
<br>        pwr_led_trigger
<br>        pwr_led_activelow
<br>        pwr_led_gpio
<br>                                As for act_led_*, but using the PWR LED.
<br>                                Not available on Model A/B boards.
<br>
<br>        N.B. It is recommended to only enable those interfaces that are needed.
<br>        Leaving all interfaces enabled can lead to unwanted behaviour (i2c_vc
<br>        interfering with Pi Camera, I2S and SPI hogging GPIO pins, etc.)
<br>        Note also that i2c, i2c_arm and i2c_vc are aliases for the physical
<br>        interfaces i2c0 and i2c1. Use of the numeric variants is still possible
<br>        but deprecated because the ARM/VC assignments differ between board
<br>        revisions. The same board-specific mapping applies to i2c_baudrate,
<br>        and the other i2c baudrate parameters.
<br>
<br>
<br>Name:   adau1977-adc
<br>Info:   Overlay for activation of ADAU1977 ADC codec over I2C for control
<br>        and I2S for data.
<br>Load:   dtoverlay=adau1977-adc
<br>Params: &lt;None&gt;
<br>
<br>
<br>Name:   adau7002-simple
<br>Info:   Overlay for the activation of ADAU7002 stereo PDM to I2S converter.
<br>Load:   dtoverlay=adau7002-simple,&lt;param&gt;=&lt;val&gt;
<br>Params: card-name               Override the default, "adau7002", card name.
<br>
<br>
<br>Name:   ads1015
<br>Info:   Overlay for activation of Texas Instruments ADS1015 ADC over I2C
<br>Load:   dtoverlay=ads1015,&lt;param&gt;=&lt;val&gt;
<br>Params: addr                    I2C bus address of device. Set based on how the
<br>                                addr pin is wired. (default=0x48 assumes addr
<br>                                is pulled to GND)
<br>        cha_enable              Enable virtual channel a. (default=true)
<br>        cha_cfg                 Set the configuration for virtual channel a.
<br>                                (default=4 configures this channel for the
<br>                                voltage at A0 with respect to GND)
<br>        cha_datarate            Set the datarate (samples/sec) for this channel.
<br>                                (default=4 sets 1600 sps)
<br>        cha_gain                Set the gain of the Programmable Gain
<br>                                Amplifier for this channel. (default=2 sets the
<br>                                full scale of the channel to 2.048 Volts)
<br>
<br>        Channel (ch) parameters can be set for each enabled channel.
<br>        A maximum of 4 channels can be enabled (letters a thru d).
<br>        For more information refer to the device datasheet at:
<br>        http://www.ti.com/lit/ds/symlink/ads1015.pdf
<br>
<br>
<br>Name:   ads1115
<br>Info:   Texas Instruments ADS1115 ADC
<br>Load:   dtoverlay=ads1115,&lt;param&gt;[=&lt;val&gt;]
<br>Params: addr                    I2C bus address of device. Set based on how the
<br>                                addr pin is wired. (default=0x48 assumes addr
<br>                                is pulled to GND)
<br>        cha_enable              Enable virtual channel a.
<br>        cha_cfg                 Set the configuration for virtual channel a.
<br>                                (default=4 configures this channel for the
<br>                                voltage at A0 with respect to GND)
<br>        cha_datarate            Set the datarate (samples/sec) for this channel.
<br>                                (default=7 sets 860 sps)
<br>        cha_gain                Set the gain of the Programmable Gain
<br>                                Amplifier for this channel. (Default 1 sets the
<br>                                full scale of the channel to 4.096 Volts)
<br>
<br>        Channel parameters can be set for each enabled channel.
<br>        A maximum of 4 channels can be enabled (letters a thru d).
<br>        For more information refer to the device datasheet at:
<br>        http://www.ti.com/lit/ds/symlink/ads1115.pdf
<br>
<br>
<br>Name:   ads7846
<br>Info:   ADS7846 Touch controller
<br>Load:   dtoverlay=ads7846,&lt;param&gt;=&lt;val&gt;
<br>Params: cs                      SPI bus Chip Select (default 1)
<br>        speed                   SPI bus speed (default 2MHz, max 3.25MHz)
<br>        penirq                  GPIO used for PENIRQ. REQUIRED
<br>        penirq_pull             Set GPIO pull (default 0=none, 2=pullup)
<br>        swapxy                  Swap x and y axis
<br>        xmin                    Minimum value on the X axis (default 0)
<br>        ymin                    Minimum value on the Y axis (default 0)
<br>        xmax                    Maximum value on the X axis (default 4095)
<br>        ymax                    Maximum value on the Y axis (default 4095)
<br>        pmin                    Minimum reported pressure value (default 0)
<br>        pmax                    Maximum reported pressure value (default 65535)
<br>        xohms                   Touchpanel sensitivity (X-plate resistance)
<br>                                (default 400)
<br>
<br>        penirq is required and usually xohms (60-100) has to be set as well.
<br>        Apart from that, pmax (255) and swapxy are also common.
<br>        The rest of the calibration can be done with xinput-calibrator.
<br>        See: github.com/notro/fbtft/wiki/FBTFT-on-Raspian
<br>        Device Tree binding document:
<br>        www.kernel.org/doc/Documentation/devicetree/bindings/input/ads7846.txt
<br>
<br>
<br>Name:   akkordion-iqdacplus
<br>Info:   Configures the Digital Dreamtime Akkordion Music Player (based on the
<br>        OEM IQAudIO DAC+ or DAC Zero module).
<br>Load:   dtoverlay=akkordion-iqdacplus,&lt;param&gt;=&lt;val&gt;
<br>Params: 24db_digital_gain       Allow gain to be applied via the PCM512x codec
<br>                                Digital volume control. Enable with
<br>                                dtoverlay=akkordion-iqdacplus,24db_digital_gain
<br>                                (The default behaviour is that the Digital
<br>                                volume control is limited to a maximum of
<br>                                0dB. ie. it can attenuate but not provide
<br>                                gain. For most users, this will be desired
<br>                                as it will prevent clipping. By appending
<br>                                the 24db_digital_gain parameter, the Digital
<br>                                volume control will allow up to 24dB of
<br>                                gain. If this parameter is enabled, it is the
<br>                                responsibility of the user to ensure that
<br>                                the Digital volume control is set to a value
<br>                                that does not result in clipping/distortion!)
<br>
<br>
<br>Name:   allo-piano-dac-pcm512x-audio
<br>Info:   Configures the Allo Piano DAC (2.0/2.1) audio cards.
<br>        (NB. This initial support is for 2.0 channel audio ONLY! ie. stereo.
<br>        The subwoofer outputs on the Piano 2.1 are not currently supported!)
<br>Load:   dtoverlay=allo-piano-dac-pcm512x-audio,&lt;param&gt;
<br>Params: 24db_digital_gain       Allow gain to be applied via the PCM512x codec
<br>                                Digital volume control.
<br>                                (The default behaviour is that the Digital
<br>                                volume control is limited to a maximum of
<br>                                0dB. ie. it can attenuate but not provide
<br>                                gain. For most users, this will be desired
<br>                                as it will prevent clipping. By appending
<br>                                the 24db_digital_gain parameter, the Digital
<br>                                volume control will allow up to 24dB of
<br>                                gain. If this parameter is enabled, it is the
<br>                                responsibility of the user to ensure that
<br>                                the Digital volume control is set to a value
<br>                                that does not result in clipping/distortion!)
<br>
<br>
<br>Name:   at86rf233
<br>Info:   Configures the Atmel AT86RF233 802.15.4 low-power WPAN transceiver,
<br>        connected to spi0.0
<br>Load:   dtoverlay=at86rf233,&lt;param&gt;=&lt;val&gt;
<br>Params: interrupt               GPIO used for INT (default 23)
<br>        reset                   GPIO used for Reset (default 24)
<br>        sleep                   GPIO used for Sleep (default 25)
<br>        speed                   SPI bus speed in Hz (default 3000000)
<br>        trim                    Fine tuning of the internal capacitance
<br>                                arrays (0=+0pF, 15=+4.5pF, default 15)
<br>
<br>
<br>Name:   audioinjector-addons
<br>Info:   Configures the audioinjector.net audio add on soundcards
<br>Load:   dtoverlay=audioinjector-addons
<br>Params: &lt;None&gt;
<br>
<br>
<br>Name:   audioinjector-wm8731-audio
<br>Info:   Configures the audioinjector.net audio add on soundcard
<br>Load:   dtoverlay=audioinjector-wm8731-audio
<br>Params: &lt;None&gt;
<br>
<br>
<br>Name:   audremap
<br>Info:   Switches PWM sound output to pins 12 (Right) & 13 (Left)
<br>Load:   dtoverlay=audremap,&lt;param&gt;=&lt;val&gt;
<br>Params: swap_lr                 Reverse the channel allocation, which will also
<br>                                swap the audio jack outputs (default off)
<br>        enable_jack             Don't switch off the audio jack output
<br>                                (default off)
<br>
<br>
<br>Name:   bmp085_i2c-sensor
<br>Info:   This overlay is now deprecated - see i2c-sensor
<br>Load:   dtoverlay=bmp085_i2c-sensor
<br>Params: &lt;None&gt;
<br>
<br>
<br>Name:   dht11
<br>Info:   Overlay for the DHT11/DHT21/DHT22 humidity/temperature sensors
<br>        Also sometimes found with the part number(s) AM230x.
<br>Load:   dtoverlay=dht11,&lt;param&gt;=&lt;val&gt;
<br>Params: gpiopin                 GPIO connected to the sensor's DATA output.
<br>                                (default 4)
<br>
<br>
<br>Name:   dionaudio-loco
<br>Info:   Configures the Dion Audio LOCO DAC-AMP
<br>Load:   dtoverlay=dionaudio-loco
<br>Params: &lt;None&gt;
<br>
<br>
<br>Name:   dionaudio-loco-v2
<br>Info:   Configures the Dion Audio LOCO-V2 DAC-AMP
<br>Load:   dtoverlay=dionaudio-loco-v2,&lt;param&gt;=&lt;val&gt;
<br>Params: 24db_digital_gain       Allow gain to be applied via the PCM512x codec
<br>                                Digital volume control. Enable with
<br>                                "dtoverlay=hifiberry-dacplus,24db_digital_gain"
<br>                                (The default behaviour is that the Digital
<br>                                volume control is limited to a maximum of
<br>                                0dB. ie. it can attenuate but not provide
<br>                                gain. For most users, this will be desired
<br>                                as it will prevent clipping. By appending
<br>                                the 24dB_digital_gain parameter, the Digital
<br>                                volume control will allow up to 24dB of
<br>                                gain. If this parameter is enabled, it is the
<br>                                responsibility of the user to ensure that
<br>                                the Digital volume control is set to a value
<br>                                that does not result in clipping/distortion!)
<br>
<br>
<br>Name:   dpi18
<br>Info:   Overlay for a generic 18-bit DPI display
<br>        This uses GPIOs 0-21 (so no I2C, uart etc.), and activates the output
<br>        2-3 seconds after the kernel has started.
<br>Load:   dtoverlay=dpi18
<br>Params: &lt;None&gt;
<br>
<br>
<br>Name:   dpi24
<br>Info:   Overlay for a generic 24-bit DPI display
<br>        This uses GPIOs 0-27 (so no I2C, uart etc.), and activates the output
<br>        2-3 seconds after the kernel has started.
<br>Load:   dtoverlay=dpi24
<br>Params: &lt;None&gt;
<br>
<br>
<br>Name:   dwc-otg
<br>Info:   Selects the dwc_otg USB controller driver which has fiq support. This
<br>        is the default on all except the Pi Zero which defaults to dwc2.
<br>Load:   dtoverlay=dwc-otg
<br>Params: &lt;None&gt;
<br>
<br>
<br>Name:   dwc2
<br>Info:   Selects the dwc2 USB controller driver
<br>Load:   dtoverlay=dwc2,&lt;param&gt;=&lt;val&gt;
<br>Params: dr_mode                 Dual role mode: "host", "peripheral" or "otg"
<br>
<br>        g-rx-fifo-size          Size of rx fifo size in gadget mode
<br>
<br>        g-np-tx-fifo-size       Size of non-periodic tx fifo size in gadget
<br>                                mode
<br>
<br>
<br>[ The ds1307-rtc overlay has been deleted. See i2c-rtc. ]
<br>
<br>
<br>Name:   enc28j60
<br>Info:   Overlay for the Microchip ENC28J60 Ethernet Controller on SPI0
<br>Load:   dtoverlay=enc28j60,&lt;param&gt;=&lt;val&gt;
<br>Params: int_pin                 GPIO used for INT (default 25)
<br>
<br>        speed                   SPI bus speed (default 12000000)
<br>
<br>
<br>Name:   enc28j60-spi2
<br>Info:   Overlay for the Microchip ENC28J60 Ethernet Controller on SPI2
<br>Load:   dtoverlay=enc28j60-spi2,&lt;param&gt;=&lt;val&gt;
<br>Params: int_pin                 GPIO used for INT (default 39)
<br>
<br>        speed                   SPI bus speed (default 12000000)
<br>
<br>
<br>Name:   fe-pi-audio
<br>Info:   Configures the Fe-Pi Audio Sound Card
<br>Load:   dtoverlay=fe-pi-audio
<br>Params: &lt;None&gt;
<br>
<br>
<br>Name:   gpio-ir
<br>Info:   Use GPIO pin as rc-core style infrared receiver input. The rc-core-
<br>        based gpio_ir_recv driver maps received keys directly to a
<br>        /dev/input/event* device, all decoding is done by the kernel - LIRC is
<br>        not required! The key mapping and other decoding parameters can be
<br>        configured by "ir-keytable" tool.
<br>Load:   dtoverlay=gpio-ir,&lt;param&gt;=&lt;val&gt;
<br>Params: gpio_pin                Input pin number. Default is 18.
<br>
<br>        gpio_pull               Desired pull-up/down state (off, down, up)
<br>                                Default is "down".
<br>
<br>        rc-map-name             Default rc keymap (can also be changed by
<br>                                ir-keytable), defaults to "rc-rc6-mce"
<br>
<br>
<br>Name:   gpio-poweroff
<br>Info:   Drives a GPIO high or low on poweroff (including halt)
<br>Load:   dtoverlay=gpio-poweroff,&lt;param&gt;=&lt;val&gt;
<br>Params: gpiopin                 GPIO for signalling (default 26)
<br>
<br>        active_low              Set if the power control device requires a
<br>                                high-&gt;low transition to trigger a power-down.
<br>                                Note that this will require the support of a
<br>                                custom dt-blob.bin to prevent a power-down
<br>                                during the boot process, and that a reboot
<br>                                will also cause the pin to go low.
<br>
<br>
<br>Name:   hifiberry-amp
<br>Info:   Configures the HifiBerry Amp and Amp+ audio cards
<br>Load:   dtoverlay=hifiberry-amp
<br>Params: &lt;None&gt;
<br>
<br>
<br>Name:   hifiberry-dac
<br>Info:   Configures the HifiBerry DAC audio card
<br>Load:   dtoverlay=hifiberry-dac
<br>Params: &lt;None&gt;
<br>
<br>
<br>Name:   hifiberry-dacplus
<br>Info:   Configures the HifiBerry DAC+ audio card
<br>Load:   dtoverlay=hifiberry-dacplus,&lt;param&gt;=&lt;val&gt;
<br>Params: 24db_digital_gain       Allow gain to be applied via the PCM512x codec
<br>                                Digital volume control. Enable with
<br>                                "dtoverlay=hifiberry-dacplus,24db_digital_gain"
<br>                                (The default behaviour is that the Digital
<br>                                volume control is limited to a maximum of
<br>                                0dB. ie. it can attenuate but not provide
<br>                                gain. For most users, this will be desired
<br>                                as it will prevent clipping. By appending
<br>                                the 24dB_digital_gain parameter, the Digital
<br>                                volume control will allow up to 24dB of
<br>                                gain. If this parameter is enabled, it is the
<br>                                responsibility of the user to ensure that
<br>                                the Digital volume control is set to a value
<br>                                that does not result in clipping/distortion!)
<br>        slave                   Force DAC+ Pro into slave mode, using Pi as
<br>                                master for bit clock and frame clock.
<br>
<br>
<br>Name:   hifiberry-digi
<br>Info:   Configures the HifiBerry Digi and Digi+ audio card
<br>Load:   dtoverlay=hifiberry-digi
<br>Params: &lt;None&gt;
<br>
<br>
<br>Name:   hifiberry-digi-pro
<br>Info:   Configures the HifiBerry Digi+ Pro audio card
<br>Load:   dtoverlay=hifiberry-digi-pro
<br>Params: &lt;None&gt;
<br>
<br>
<br>Name:   hy28a
<br>Info:   HY28A - 2.8" TFT LCD Display Module by HAOYU Electronics
<br>        Default values match Texy's display shield
<br>Load:   dtoverlay=hy28a,&lt;param&gt;=&lt;val&gt;
<br>Params: speed                   Display SPI bus speed
<br>
<br>        rotate                  Display rotation {0,90,180,270}
<br>
<br>        fps                     Delay between frame updates
<br>
<br>        debug                   Debug output level {0-7}
<br>
<br>        xohms                   Touchpanel sensitivity (X-plate resistance)
<br>
<br>        resetgpio               GPIO used to reset controller
<br>
<br>        ledgpio                 GPIO used to control backlight
<br>
<br>
<br>Name:   hy28b
<br>Info:   HY28B - 2.8" TFT LCD Display Module by HAOYU Electronics
<br>        Default values match Texy's display shield
<br>Load:   dtoverlay=hy28b,&lt;param&gt;=&lt;val&gt;
<br>Params: speed                   Display SPI bus speed
<br>
<br>        rotate                  Display rotation {0,90,180,270}
<br>
<br>        fps                     Delay between frame updates
<br>
<br>        debug                   Debug output level {0-7}
<br>
<br>        xohms                   Touchpanel sensitivity (X-plate resistance)
<br>
<br>        resetgpio               GPIO used to reset controller
<br>
<br>        ledgpio                 GPIO used to control backlight
<br>
<br>
<br>Name:   i2c-bcm2708
<br>Info:   Fall back to the i2c_bcm2708 driver for the i2c_arm bus.
<br>Load:   dtoverlay=i2c-bcm2708
<br>Params: &lt;None&gt;
<br>
<br>
<br>Name:   i2c-gpio
<br>Info:   Adds support for software i2c controller on gpio pins
<br>Load:   dtoverlay=i2c-gpio,&lt;param&gt;=&lt;val&gt;
<br>Params: i2c_gpio_sda            GPIO used for I2C data (default "23")
<br>
<br>        i2c_gpio_scl            GPIO used for I2C clock (default "24")
<br>
<br>        i2c_gpio_delay_us       Clock delay in microseconds
<br>                                (default "2" = ~100kHz)
<br>
<br>
<br>Name:   i2c-mux
<br>Info:   Adds support for a number of I2C bus multiplexers on i2c_arm
<br>Load:   dtoverlay=i2c-mux,&lt;param&gt;=&lt;val&gt;
<br>Params: pca9542                 Select the NXP PCA9542 device
<br>
<br>        pca9545                 Select the NXP PCA9545 device
<br>
<br>        pca9548                 Select the NXP PCA9548 device
<br>
<br>        addr                    Change I2C address of the device (default 0x70)
<br>
<br>
<br>[ The i2c-mux-pca9548a overlay has been deleted. See i2c-mux. ]
<br>
<br>
<br>Name:   i2c-pwm-pca9685a
<br>Info:   Adds support for an NXP PCA9685A I2C PWM controller on i2c_arm
<br>Load:   dtoverlay=i2c-pwm-pca9685a,&lt;param&gt;=&lt;val&gt;
<br>Params: addr                    I2C address of PCA9685A (default 0x40)
<br>
<br>
<br>Name:   i2c-rtc
<br>Info:   Adds support for a number of I2C Real Time Clock devices
<br>Load:   dtoverlay=i2c-rtc,&lt;param&gt;=&lt;val&gt;
<br>Params: abx80x                  Select one of the ABx80x family:
<br>                                  AB0801, AB0803, AB0804, AB0805,
<br>                                  AB1801, AB1803, AB1804, AB1805
<br>
<br>        ds1307                  Select the DS1307 device
<br>
<br>        ds1339                  Select the DS1339 device
<br>
<br>        ds3231                  Select the DS3231 device
<br>
<br>        mcp7940x                Select the MCP7940x device
<br>
<br>        mcp7941x                Select the MCP7941x device
<br>
<br>        pcf2127                 Select the PCF2127 device
<br>
<br>        pcf8523                 Select the PCF8523 device
<br>
<br>        pcf8563                 Select the PCF8563 device
<br>
<br>        trickle-diode-type      Diode type for trickle charge - "standard" or
<br>                                "schottky" (ABx80x only)
<br>
<br>        trickle-resistor-ohms   Resistor value for trickle charge (DS1339,
<br>                                ABx80x)
<br>
<br>        wakeup-source           Specify that the RTC can be used as a wakeup
<br>                                source
<br>
<br>
<br>Name:   i2c-sensor
<br>Info:   Adds support for a number of I2C barometric pressure and temperature
<br>        sensors on i2c_arm
<br>Load:   dtoverlay=i2c-sensor,&lt;param&gt;=&lt;val&gt;
<br>Params: bmp085                  Select the Bosch sensortronic BMP085
<br>
<br>        bmp280                  Select the Bosch sensortronic BMP280
<br>
<br>        lm75                    Select the Maxim LM75 temperature sensor
<br>
<br>        lm75addr                Choose the address for the LM75 (0x48-0x4f -
<br>                                default 0x4f)
<br>
<br>        si7020                  Select the Silicon Labs Si7013/20/21 humidity/
<br>                                temperature sensor
<br>
<br>
<br>Name:   i2c0-bcm2708
<br>Info:   Enable the i2c_bcm2708 driver for the i2c0 bus. Not all pin combinations
<br>        are usable on all platforms.
<br>Load:   dtoverlay=i2c0-bcm2708,&lt;param&gt;=&lt;val&gt;
<br>Params: sda0_pin                GPIO pin for SDA0 (deprecated - use pins_*)
<br>        scl0_pin                GPIO pin for SCL0 (deprecated - use pins_*)
<br>        pins_0_1                Use pins 0 and 1 (default)
<br>        pins_28_29              Use pins 28 and 29
<br>        pins_44_45              Use pins 44 and 45
<br>        pins_46_47              Use pins 46 and 47
<br>
<br>
<br>Name:   i2c1-bcm2708
<br>Info:   Enable the i2c_bcm2708 driver for the i2c1 bus
<br>Load:   dtoverlay=i2c1-bcm2708,&lt;param&gt;=&lt;val&gt;
<br>Params: sda1_pin                GPIO pin for SDA1 (2 or 44 - default 2)
<br>        scl1_pin                GPIO pin for SCL1 (3 or 45 - default 3)
<br>        pin_func                Alternative pin function (4 (alt0), 6 (alt2) -
<br>                                default 4)
<br>
<br>
<br>Name:   i2s-gpio28-31
<br>Info:   move I2S function block to GPIO 28 to 31
<br>Load:   dtoverlay=i2s-gpio28-31
<br>Params: &lt;None&gt;
<br>
<br>
<br>Name:   iqaudio-dac
<br>Info:   Configures the IQaudio DAC audio card
<br>Load:   dtoverlay=iqaudio-dac,&lt;param&gt;
<br>Params: 24db_digital_gain       Allow gain to be applied via the PCM512x codec
<br>                                Digital volume control. Enable with
<br>                                "dtoverlay=iqaudio-dac,24db_digital_gain"
<br>                                (The default behaviour is that the Digital
<br>                                volume control is limited to a maximum of
<br>                                0dB. ie. it can attenuate but not provide
<br>                                gain. For most users, this will be desired
<br>                                as it will prevent clipping. By appending
<br>                                the 24db_digital_gain parameter, the Digital
<br>                                volume control will allow up to 24dB of
<br>                                gain. If this parameter is enabled, it is the
<br>                                responsibility of the user to ensure that
<br>                                the Digital volume control is set to a value
<br>                                that does not result in clipping/distortion!)
<br>
<br>
<br>Name:   iqaudio-dacplus
<br>Info:   Configures the IQaudio DAC+ audio card
<br>Load:   dtoverlay=iqaudio-dacplus,&lt;param&gt;=&lt;val&gt;
<br>Params: 24db_digital_gain       Allow gain to be applied via the PCM512x codec
<br>                                Digital volume control. Enable with
<br>                                "dtoverlay=iqaudio-dacplus,24db_digital_gain"
<br>                                (The default behaviour is that the Digital
<br>                                volume control is limited to a maximum of
<br>                                0dB. ie. it can attenuate but not provide
<br>                                gain. For most users, this will be desired
<br>                                as it will prevent clipping. By appending
<br>                                the 24db_digital_gain parameter, the Digital
<br>                                volume control will allow up to 24dB of
<br>                                gain. If this parameter is enabled, it is the
<br>                                responsibility of the user to ensure that
<br>                                the Digital volume control is set to a value
<br>                                that does not result in clipping/distortion!)
<br>        auto_mute_amp           If specified, unmute/mute the IQaudIO amp when
<br>                                starting/stopping audio playback.
<br>        unmute_amp              If specified, unmute the IQaudIO amp once when
<br>                                the DAC driver module loads.
<br>
<br>
<br>Name:   iqaudio-digi-wm8804-audio
<br>Info:   Configures the IQAudIO Digi WM8804 audio card
<br>Load:   dtoverlay=iqaudio-digi-wm8804-audio,&lt;param&gt;=&lt;val&gt;
<br>Params: card_name               Override the default, "IQAudIODigi", card name.
<br>        dai_name                Override the default, "IQAudIO Digi", dai name.
<br>        dai_stream_name         Override the default, "IQAudIO Digi HiFi",
<br>                                dai stream name.
<br>
<br>
<br>Name:   justboom-dac
<br>Info:   Configures the JustBoom DAC HAT, Amp HAT, DAC Zero and Amp Zero audio
<br>        cards
<br>Load:   dtoverlay=justboom-dac,&lt;param&gt;=&lt;val&gt;
<br>Params: 24db_digital_gain       Allow gain to be applied via the PCM512x codec
<br>                                Digital volume control. Enable with
<br>                                "dtoverlay=justboom-dac,24db_digital_gain"
<br>                                (The default behaviour is that the Digital
<br>                                volume control is limited to a maximum of
<br>                                0dB. ie. it can attenuate but not provide
<br>                                gain. For most users, this will be desired
<br>                                as it will prevent clipping. By appending
<br>                                the 24dB_digital_gain parameter, the Digital
<br>                                volume control will allow up to 24dB of
<br>                                gain. If this parameter is enabled, it is the
<br>                                responsibility of the user to ensure that
<br>                                the Digital volume control is set to a value
<br>                                that does not result in clipping/distortion!)
<br>
<br>
<br>Name:   justboom-digi
<br>Info:   Configures the JustBoom Digi HAT and Digi Zero audio cards
<br>Load:   dtoverlay=justboom-digi
<br>Params: &lt;None&gt;
<br>
<br>
<br>Name:   lirc-rpi
<br>Info:   Configures lirc-rpi (Linux Infrared Remote Control for Raspberry Pi)
<br>        Consult the module documentation for more details.
<br>Load:   dtoverlay=lirc-rpi,&lt;param&gt;=&lt;val&gt;
<br>Params: gpio_out_pin            GPIO for output (default "17")
<br>
<br>        gpio_in_pin             GPIO for input (default "18")
<br>
<br>        gpio_in_pull            Pull up/down/off on the input pin
<br>                                (default "down")
<br>
<br>        sense                   Override the IR receive auto-detection logic:
<br>                                 "0" = force active-high
<br>                                 "1" = force active-low
<br>                                 "-1" = use auto-detection
<br>                                (default "-1")
<br>
<br>        softcarrier             Turn the software carrier "on" or "off"
<br>                                (default "on")
<br>
<br>        invert                  "on" = invert the output pin (default "off")
<br>
<br>        debug                   "on" = enable additional debug messages
<br>                                (default "off")
<br>
<br>
<br>Name:   mcp23017
<br>Info:   Configures the MCP23017 I2C GPIO expander
<br>Load:   dtoverlay=mcp23017,&lt;param&gt;=&lt;val&gt;
<br>Params: gpiopin                 Gpio pin connected to the INTA output of the
<br>                                MCP23017 (default: 4)
<br>
<br>        addr                    I2C address of the MCP23017 (default: 0x20)
<br>
<br>
<br>Name:   mcp23s17
<br>Info:   Configures the MCP23S08/17 SPI GPIO expanders.
<br>        If devices are present on SPI1 or SPI2, those interfaces must be enabled
<br>        with one of the spi1-1/2/3cs and/or spi2-1/2/3cs overlays.
<br>        If interrupts are enabled for a device on a given CS# on a SPI bus, that
<br>        device must be the only one present on that SPI bus/CS#.
<br>Load:   dtoverlay=mcp23s17,&lt;param&gt;=&lt;val&gt;
<br>Params: s08-spi&lt;n&gt;-&lt;m&gt;-present  4-bit integer, bitmap indicating MCP23S08
<br>                                devices present on SPI&lt;n&gt;, CS#&lt;m&gt;
<br>
<br>        s17-spi&lt;n&gt;-&lt;m&gt;-present  8-bit integer, bitmap indicating MCP23S17
<br>                                devices present on SPI&lt;n&gt;, CS#&lt;m&gt;
<br>
<br>        s08-spi&lt;n&gt;-&lt;m&gt;-int-gpio integer, enables interrupts on a single
<br>                                MCP23S08 device on SPI&lt;n&gt;, CS#&lt;m&gt;, specifies
<br>                                the GPIO pin to which INT output of MCP23S08
<br>                                is connected.
<br>
<br>        s17-spi&lt;n&gt;-&lt;m&gt;-int-gpio integer, enables mirrored interrupts on a
<br>                                single MCP23S17 device on SPI&lt;n&gt;, CS#&lt;m&gt;,
<br>                                specifies the GPIO pin to which either INTA
<br>                                or INTB output of MCP23S17 is connected.
<br>
<br>
<br>Name:   mcp2515-can0
<br>Info:   Configures the MCP2515 CAN controller on spi0.0
<br>Load:   dtoverlay=mcp2515-can0,&lt;param&gt;=&lt;val&gt;
<br>Params: oscillator              Clock frequency for the CAN controller (Hz)
<br>
<br>        spimaxfrequency         Maximum SPI frequence (Hz)
<br>
<br>        interrupt               GPIO for interrupt signal
<br>
<br>
<br>Name:   mcp2515-can1
<br>Info:   Configures the MCP2515 CAN controller on spi0.1
<br>Load:   dtoverlay=mcp2515-can1,&lt;param&gt;=&lt;val&gt;
<br>Params: oscillator              Clock frequency for the CAN controller (Hz)
<br>
<br>        spimaxfrequency         Maximum SPI frequence (Hz)
<br>
<br>        interrupt               GPIO for interrupt signal
<br>
<br>
<br>Name:   mcp3008
<br>Info:   Configures MCP3008 A/D converters
<br>        For devices on spi1 or spi2, the interfaces should be enabled
<br>        with one of the spi1-1/2/3cs and/or spi2-1/2/3cs overlays.
<br>Load:   dtoverlay=mcp3008,&lt;param&gt;[=&lt;val&gt;]
<br>Params: spi&lt;n&gt;-&lt;m&gt;-present      boolean, configure device at spi&lt;n&gt;, cs&lt;m&gt;
<br>        spi&lt;n&gt;-&lt;m&gt;-speed        integer, set the spi bus speed for this device
<br>
<br>
<br>Name:   midi-uart0
<br>Info:   Configures UART0 (ttyAMA0) so that a requested 38.4kbaud actually gets
<br>        31.25kbaud, the frequency required for MIDI
<br>Load:   dtoverlay=midi-uart0
<br>Params: &lt;None&gt;
<br>
<br>
<br>Name:   mmc
<br>Info:   Selects the bcm2835-mmc SD/MMC driver, optionally with overclock
<br>Load:   dtoverlay=mmc,&lt;param&gt;=&lt;val&gt;
<br>Params: overclock_50            Clock (in MHz) to use when the MMC framework
<br>                                requests 50MHz
<br>
<br>
<br>Name:   mz61581
<br>Info:   MZ61581 display by Tontec
<br>Load:   dtoverlay=mz61581,&lt;param&gt;=&lt;val&gt;
<br>Params: speed                   Display SPI bus speed
<br>
<br>        rotate                  Display rotation {0,90,180,270}
<br>
<br>        fps                     Delay between frame updates
<br>
<br>        txbuflen                Transmit buffer length (default 32768)
<br>
<br>        debug                   Debug output level {0-7}
<br>
<br>        xohms                   Touchpanel sensitivity (X-plate resistance)
<br>
<br>
<br>[ The pcf2127-rtc overlay has been deleted. See i2c-rtc. ]
<br>
<br>
<br>[ The pcf8523-rtc overlay has been deleted. See i2c-rtc. ]
<br>
<br>
<br>[ The pcf8563-rtc overlay has been deleted. See i2c-rtc. ]
<br>
<br>
<br>Name:   pi3-act-led
<br>Info:   Pi3 uses a GPIO expander to drive the LEDs which can only be accessed
<br>        from the VPU. There is a special driver for this with a separate DT
<br>        node, which has the unfortunate consequence of breaking the
<br>        act_led_gpio and act_led_activelow dtparams.
<br>        This overlay changes the GPIO controller back to the standard one and
<br>        restores the dtparams.
<br>Load:   dtoverlay=pi3-act-led,&lt;param&gt;=&lt;val&gt;
<br>Params: activelow               Set to "on" to invert the sense of the LED
<br>                                (default "off")
<br>
<br>        gpio                    Set which GPIO to use for the activity LED
<br>                                (in case you want to connect it to an external
<br>                                device)
<br>                                REQUIRED
<br>
<br>
<br>Name:   pi3-disable-bt
<br>Info:   Disable Pi3 Bluetooth and restore UART0/ttyAMA0 over GPIOs 14 & 15
<br>        N.B. To disable the systemd service that initialises the modem so it
<br>        doesn't use the UART, use 'sudo systemctl disable hciuart'.
<br>Load:   dtoverlay=pi3-disable-bt
<br>Params: &lt;None&gt;
<br>
<br>
<br>Name:   pi3-disable-wifi
<br>Info:   Disable Pi3 onboard WiFi
<br>Load:   dtoverlay=pi3-disable-wifi
<br>Params: &lt;None&gt;
<br>
<br>
<br>Name:   pi3-miniuart-bt
<br>Info:   Switch Pi3 Bluetooth function to use the mini-UART (ttyS0) and restore
<br>        UART0/ttyAMA0 over GPIOs 14 & 15. Note that this may reduce the maximum
<br>        usable baudrate.
<br>        N.B. It is also necessary to edit /lib/systemd/system/hciuart.service
<br>        and replace ttyAMA0 with ttyS0, unless you have a system with udev rules
<br>        that create /dev/serial0 and /dev/serial1, in which case use
<br>        /dev/serial1 instead because it will always be correct. Furthermore,
<br>        you must also set core_freq=250 in config.txt or the miniuart will not
<br>        work.
<br>Load:   dtoverlay=pi3-miniuart-bt
<br>Params: &lt;None&gt;
<br>
<br>
<br>Name:   piscreen
<br>Info:   PiScreen display by OzzMaker.com
<br>Load:   dtoverlay=piscreen,&lt;param&gt;=&lt;val&gt;
<br>Params: speed                   Display SPI bus speed
<br>
<br>        rotate                  Display rotation {0,90,180,270}
<br>
<br>        fps                     Delay between frame updates
<br>
<br>        debug                   Debug output level {0-7}
<br>
<br>        xohms                   Touchpanel sensitivity (X-plate resistance)
<br>
<br>
<br>Name:   piscreen2r
<br>Info:   PiScreen 2 with resistive TP display by OzzMaker.com
<br>Load:   dtoverlay=piscreen2r,&lt;param&gt;=&lt;val&gt;
<br>Params: speed                   Display SPI bus speed
<br>
<br>        rotate                  Display rotation {0,90,180,270}
<br>
<br>        fps                     Delay between frame updates
<br>
<br>        debug                   Debug output level {0-7}
<br>
<br>        xohms                   Touchpanel sensitivity (X-plate resistance)
<br>
<br>
<br>Name:   pisound
<br>Info:   Configures the Blokas Labs pisound card
<br>Load:   dtoverlay=pisound
<br>Params: &lt;None&gt;
<br>
<br>
<br>Name:   pitft22
<br>Info:   Adafruit PiTFT 2.2" screen
<br>Load:   dtoverlay=pitft22,&lt;param&gt;=&lt;val&gt;
<br>Params: speed                   Display SPI bus speed
<br>
<br>        rotate                  Display rotation {0,90,180,270}
<br>
<br>        fps                     Delay between frame updates
<br>
<br>        debug                   Debug output level {0-7}
<br>
<br>
<br>Name:   pitft28-capacitive
<br>Info:   Adafruit PiTFT 2.8" capacitive touch screen
<br>Load:   dtoverlay=pitft28-capacitive,&lt;param&gt;=&lt;val&gt;
<br>Params: speed                   Display SPI bus speed
<br>
<br>        rotate                  Display rotation {0,90,180,270}
<br>
<br>        fps                     Delay between frame updates
<br>
<br>        debug                   Debug output level {0-7}
<br>
<br>        touch-sizex             Touchscreen size x (default 240)
<br>
<br>        touch-sizey             Touchscreen size y (default 320)
<br>
<br>        touch-invx              Touchscreen inverted x axis
<br>
<br>        touch-invy              Touchscreen inverted y axis
<br>
<br>        touch-swapxy            Touchscreen swapped x y axis
<br>
<br>
<br>Name:   pitft28-resistive
<br>Info:   Adafruit PiTFT 2.8" resistive touch screen
<br>Load:   dtoverlay=pitft28-resistive,&lt;param&gt;=&lt;val&gt;
<br>Params: speed                   Display SPI bus speed
<br>
<br>        rotate                  Display rotation {0,90,180,270}
<br>
<br>        fps                     Delay between frame updates
<br>
<br>        debug                   Debug output level {0-7}
<br>
<br>
<br>Name:   pitft35-resistive
<br>Info:   Adafruit PiTFT 3.5" resistive touch screen
<br>Load:   dtoverlay=pitft35-resistive,&lt;param&gt;=&lt;val&gt;
<br>Params: speed                   Display SPI bus speed
<br>
<br>        rotate                  Display rotation {0,90,180,270}
<br>
<br>        fps                     Delay between frame updates
<br>
<br>        debug                   Debug output level {0-7}
<br>
<br>
<br>Name:   pps-gpio
<br>Info:   Configures the pps-gpio (pulse-per-second time signal via GPIO).
<br>Load:   dtoverlay=pps-gpio,&lt;param&gt;=&lt;val&gt;
<br>Params: gpiopin                 Input GPIO (default "18")
<br>        assert_falling_edge     When present, assert is indicated by a falling
<br>                                edge, rather than by a rising edge
<br>
<br>
<br>Name:   pwm
<br>Info:   Configures a single PWM channel
<br>        Legal pin,function combinations for each channel:
<br>          PWM0: 12,4(Alt0) 18,2(Alt5) 40,4(Alt0)            52,5(Alt1)
<br>          PWM1: 13,4(Alt0) 19,2(Alt5) 41,4(Alt0) 45,4(Alt0) 53,5(Alt1)
<br>        N.B.:
<br>          1) Pin 18 is the only one available on all platforms, and
<br>             it is the one used by the I2S audio interface.
<br>             Pins 12 and 13 might be better choices on an A+, B+ or Pi2.
<br>          2) The onboard analogue audio output uses both PWM channels.
<br>          3) So be careful mixing audio and PWM.
<br>          4) Currently the clock must have been enabled and configured
<br>             by other means.
<br>Load:   dtoverlay=pwm,&lt;param&gt;=&lt;val&gt;
<br>Params: pin                     Output pin (default 18) - see table
<br>        func                    Pin function (default 2 = Alt5) - see above
<br>        clock                   PWM clock frequency (informational)
<br>
<br>
<br>Name:   pwm-2chan
<br>Info:   Configures both PWM channels
<br>        Legal pin,function combinations for each channel:
<br>          PWM0: 12,4(Alt0) 18,2(Alt5) 40,4(Alt0)            52,5(Alt1)
<br>          PWM1: 13,4(Alt0) 19,2(Alt5) 41,4(Alt0) 45,4(Alt0) 53,5(Alt1)
<br>        N.B.:
<br>          1) Pin 18 is the only one available on all platforms, and
<br>             it is the one used by the I2S audio interface.
<br>             Pins 12 and 13 might be better choices on an A+, B+ or Pi2.
<br>          2) The onboard analogue audio output uses both PWM channels.
<br>          3) So be careful mixing audio and PWM.
<br>          4) Currently the clock must have been enabled and configured
<br>             by other means.
<br>Load:   dtoverlay=pwm-2chan,&lt;param&gt;=&lt;val&gt;
<br>Params: pin                     Output pin (default 18) - see table
<br>        pin2                    Output pin for other channel (default 19)
<br>        func                    Pin function (default 2 = Alt5) - see above
<br>        func2                   Function for pin2 (default 2 = Alt5)
<br>        clock                   PWM clock frequency (informational)
<br>
<br>
<br>Name:   qca7000
<br>Info:   I2SE's Evaluation Board for PLC Stamp micro
<br>Load:   dtoverlay=qca7000,&lt;param&gt;=&lt;val&gt;
<br>Params: int_pin                 GPIO pin for interrupt signal (default 23)
<br>
<br>        speed                   SPI bus speed (default 12 MHz)
<br>
<br>
<br>Name:   raspidac3
<br>Info:   Configures the RaspiDAV Rev.3x audio card
<br>Load:   dtoverlay=raspidac3
<br>Params: &lt;None&gt;
<br>
<br>
<br>Name:   rpi-backlight
<br>Info:   Raspberry Pi official display backlight driver
<br>Load:   dtoverlay=rpi-backlight
<br>Params: &lt;None&gt;
<br>
<br>
<br>Name:   rpi-cirrus-wm5102
<br>Info:   Configures the Cirrus Logic Audio Card
<br>Load:   dtoverlay=rpi-cirrus-wm5102
<br>Params: &lt;None&gt;
<br>
<br>
<br>Name:   rpi-dac
<br>Info:   Configures the RPi DAC audio card
<br>Load:   dtoverlay=rpi-dac
<br>Params: &lt;None&gt;
<br>
<br>
<br>Name:   rpi-display
<br>Info:   RPi-Display - 2.8" Touch Display by Watterott
<br>Load:   dtoverlay=rpi-display,&lt;param&gt;=&lt;val&gt;
<br>Params: speed                   Display SPI bus speed
<br>        rotate                  Display rotation {0,90,180,270}
<br>        fps                     Delay between frame updates
<br>        debug                   Debug output level {0-7}
<br>        xohms                   Touchpanel sensitivity (X-plate resistance)
<br>        swapxy                  Swap x and y axis
<br>
<br>
<br>Name:   rpi-ft5406
<br>Info:   Official Raspberry Pi display touchscreen
<br>Load:   dtoverlay=rpi-ft5406
<br>Params: &lt;None&gt;
<br>
<br>
<br>Name:   rpi-proto
<br>Info:   Configures the RPi Proto audio card
<br>Load:   dtoverlay=rpi-proto
<br>Params: &lt;None&gt;
<br>
<br>
<br>Name:   rpi-sense
<br>Info:   Raspberry Pi Sense HAT
<br>Load:   dtoverlay=rpi-sense
<br>Params: &lt;None&gt;
<br>
<br>
<br>Name:   rra-digidac1-wm8741-audio
<br>Info:   Configures the Red Rocks Audio DigiDAC1 soundcard
<br>Load:   dtoverlay=rra-digidac1-wm8741-audio
<br>Params: &lt;None&gt;
<br>
<br>
<br>Name:   sc16is750-i2c
<br>Info:   Overlay for the NXP SC16IS750 UART with I2C Interface
<br>        Enables the chip on I2C1 at 0x48. To select another address,
<br>        please refer to table 10 in reference manual.
<br>
<br>Load:   dtoverlay=sc16is750-i2c,&lt;param&gt;=&lt;val&gt;
<br>Params: int_pin                 GPIO used for IRQ (default 24)
<br>        addr                    Address (default 0x48)
<br>
<br>
<br>Name:   sc16is752-spi1
<br>Info:   Overlay for the NXP SC16IS752 Dual UART with SPI Interface
<br>        Enables the chip on SPI1.
<br>        N.B.: spi1 is only accessible on devices with a 40pin header, eg:
<br>              A+, B+, Zero and PI2 B; as well as the Compute Module.
<br>
<br>Load:   dtoverlay=sc16is752-spi1,&lt;param&gt;=&lt;val&gt;
<br>Params: int_pin                 GPIO used for IRQ (default 24)
<br>
<br>
<br>Name:   sdhost
<br>Info:   Selects the bcm2835-sdhost SD/MMC driver, optionally with overclock.
<br>        N.B. This overlay is designed for situations where the mmc driver is
<br>        the default, so it disables the other (mmc) interface - this will kill
<br>        WiFi on a Pi3. If this isn't what you want, either use the sdtweak
<br>        overlay or the new sd_* dtparams of the base DTBs.
<br>Load:   dtoverlay=sdhost,&lt;param&gt;=&lt;val&gt;
<br>Params: overclock_50            Clock (in MHz) to use when the MMC framework
<br>                                requests 50MHz
<br>
<br>        force_pio               Disable DMA support (default off)
<br>
<br>        pio_limit               Number of blocks above which to use DMA
<br>                                (default 1)
<br>
<br>        debug                   Enable debug output (default off)
<br>
<br>
<br>Name:   sdio
<br>Info:   Selects the bcm2835-sdhost SD/MMC driver, optionally with overclock,
<br>        and enables SDIO via GPIOs 22-27.
<br>Load:   dtoverlay=sdio,&lt;param&gt;=&lt;val&gt;
<br>Params: overclock_50            SD Clock (in MHz) to use when the MMC framework
<br>                                requests 50MHz
<br>
<br>        sdio_overclock          SDIO Clock (in MHz) to use when the MMC
<br>                                framework requests 50MHz
<br>
<br>        force_pio               Disable DMA support (default off)
<br>
<br>        pio_limit               Number of blocks above which to use DMA
<br>                                (default 1)
<br>
<br>        debug                   Enable debug output (default off)
<br>
<br>        poll_once               Disable SDIO-device polling every second
<br>                                (default on: polling once at boot-time)
<br>
<br>        bus_width               Set the SDIO host bus width (default 4 bits)
<br>
<br>
<br>Name:   sdio-1bit
<br>Info:   Selects the bcm2835-sdhost SD/MMC driver, optionally with overclock,
<br>        and enables 1-bit SDIO via GPIOs 22-25.
<br>Load:   dtoverlay=sdio-1bit,&lt;param&gt;=&lt;val&gt;
<br>Params: overclock_50            SD Clock (in MHz) to use when the MMC framework
<br>                                requests 50MHz
<br>
<br>        sdio_overclock          SDIO Clock (in MHz) to use when the MMC
<br>                                framework requests 50MHz
<br>
<br>        force_pio               Disable DMA support (default off)
<br>
<br>        pio_limit               Number of blocks above which to use DMA
<br>                                (default 1)
<br>
<br>        debug                   Enable debug output (default off)
<br>
<br>        poll_once               Disable SDIO-device polling every second
<br>                                (default on: polling once at boot-time)
<br>
<br>
<br>Name:   sdtweak
<br>Info:   Tunes the bcm2835-sdhost SD/MMC driver
<br>        N.B. This functionality is now available via the sd_* dtparams in the
<br>        base DTB.
<br>Load:   dtoverlay=sdtweak,&lt;param&gt;=&lt;val&gt;
<br>Params: overclock_50            Clock (in MHz) to use when the MMC framework
<br>                                requests 50MHz
<br>
<br>        force_pio               Disable DMA support (default off)
<br>
<br>        pio_limit               Number of blocks above which to use DMA
<br>                                (default 1)
<br>
<br>        debug                   Enable debug output (default off)
<br>
<br>
<br>Name:   smi
<br>Info:   Enables the Secondary Memory Interface peripheral. Uses GPIOs 2-25!
<br>Load:   dtoverlay=smi
<br>Params: &lt;None&gt;
<br>
<br>
<br>Name:   smi-dev
<br>Info:   Enables the userspace interface for the SMI driver
<br>Load:   dtoverlay=smi-dev
<br>Params: &lt;None&gt;
<br>
<br>
<br>Name:   smi-nand
<br>Info:   Enables access to NAND flash via the SMI interface
<br>Load:   dtoverlay=smi-nand
<br>Params: &lt;None&gt;
<br>
<br>
<br>Name:   spi-gpio35-39
<br>Info:   Move SPI function block to GPIO 35 to 39
<br>Load:   dtoverlay=spi-gpio35-39
<br>Params: &lt;None&gt;
<br>
<br>
<br>Name:   spi-rtc
<br>Info:   Adds support for a number of SPI Real Time Clock devices
<br>Load:   dtoverlay=spi-rtc,&lt;param&gt;=&lt;val&gt;
<br>Params: pcf2123                 Select the PCF2123 device
<br>
<br>
<br>Name:   spi0-cs
<br>Info:   Allows the (software) CS pins for SPI0 to be changed
<br>Load:   dtoverlay=spi0-cs,&lt;param&gt;=&lt;val&gt;
<br>Params: cs0_pin                 GPIO pin for CS0 (default 8)
<br>        cs1_pin                 GPIO pin for CS1 (default 7)
<br>
<br>
<br>Name:   spi0-hw-cs
<br>Info:   Re-enables hardware CS/CE (chip selects) for SPI0
<br>Load:   dtoverlay=spi0-hw-cs
<br>Params: &lt;None&gt;
<br>
<br>
<br>Name:   spi1-1cs
<br>Info:   Enables spi1 with a single chip select (CS) line and associated spidev
<br>        dev node. The gpio pin number for the CS line and spidev device node
<br>        creation are configurable.
<br>        N.B.: spi1 is only accessible on devices with a 40pin header, eg:
<br>              A+, B+, Zero and PI2 B; as well as the Compute Module.
<br>Load:   dtoverlay=spi1-1cs,&lt;param&gt;=&lt;val&gt;
<br>Params: cs0_pin                 GPIO pin for CS0 (default 18 - BCM SPI1_CE0).
<br>        cs0_spidev              Set to 'disabled' to stop the creation of a
<br>                                userspace device node /dev/spidev1.0 (default
<br>                                is 'okay' or enabled).
<br>
<br>
<br>Name:   spi1-2cs
<br>Info:   Enables spi1 with two chip select (CS) lines and associated spidev
<br>        dev nodes. The gpio pin numbers for the CS lines and spidev device node
<br>        creation are configurable.
<br>        N.B.: spi1 is only accessible on devices with a 40pin header, eg:
<br>              A+, B+, Zero and PI2 B; as well as the Compute Module.
<br>Load:   dtoverlay=spi1-2cs,&lt;param&gt;=&lt;val&gt;
<br>Params: cs0_pin                 GPIO pin for CS0 (default 18 - BCM SPI1_CE0).
<br>        cs1_pin                 GPIO pin for CS1 (default 17 - BCM SPI1_CE1).
<br>        cs0_spidev              Set to 'disabled' to stop the creation of a
<br>                                userspace device node /dev/spidev1.0 (default
<br>                                is 'okay' or enabled).
<br>        cs1_spidev              Set to 'disabled' to stop the creation of a
<br>                                userspace device node /dev/spidev1.1 (default
<br>                                is 'okay' or enabled).
<br>
<br>
<br>Name:   spi1-3cs
<br>Info:   Enables spi1 with three chip select (CS) lines and associated spidev
<br>        dev nodes. The gpio pin numbers for the CS lines and spidev device node
<br>        creation are configurable.
<br>        N.B.: spi1 is only accessible on devices with a 40pin header, eg:
<br>              A+, B+, Zero and PI2 B; as well as the Compute Module.
<br>Load:   dtoverlay=spi1-3cs,&lt;param&gt;=&lt;val&gt;
<br>Params: cs0_pin                 GPIO pin for CS0 (default 18 - BCM SPI1_CE0).
<br>        cs1_pin                 GPIO pin for CS1 (default 17 - BCM SPI1_CE1).
<br>        cs2_pin                 GPIO pin for CS2 (default 16 - BCM SPI1_CE2).
<br>        cs0_spidev              Set to 'disabled' to stop the creation of a
<br>                                userspace device node /dev/spidev1.0 (default
<br>                                is 'okay' or enabled).
<br>        cs1_spidev              Set to 'disabled' to stop the creation of a
<br>                                userspace device node /dev/spidev1.1 (default
<br>                                is 'okay' or enabled).
<br>        cs2_spidev              Set to 'disabled' to stop the creation of a
<br>                                userspace device node /dev/spidev1.2 (default
<br>                                is 'okay' or enabled).
<br>
<br>
<br>Name:   spi2-1cs
<br>Info:   Enables spi2 with a single chip select (CS) line and associated spidev
<br>        dev node. The gpio pin number for the CS line and spidev device node
<br>        creation are configurable.
<br>        N.B.: spi2 is only accessible with the Compute Module.
<br>Load:   dtoverlay=spi2-1cs,&lt;param&gt;=&lt;val&gt;
<br>Params: cs0_pin                 GPIO pin for CS0 (default 43 - BCM SPI2_CE0).
<br>        cs0_spidev              Set to 'disabled' to stop the creation of a
<br>                                userspace device node /dev/spidev2.0 (default
<br>                                is 'okay' or enabled).
<br>
<br>
<br>Name:   spi2-2cs
<br>Info:   Enables spi2 with two chip select (CS) lines and associated spidev
<br>        dev nodes. The gpio pin numbers for the CS lines and spidev device node
<br>        creation are configurable.
<br>        N.B.: spi2 is only accessible with the Compute Module.
<br>Load:   dtoverlay=spi2-2cs,&lt;param&gt;=&lt;val&gt;
<br>Params: cs0_pin                 GPIO pin for CS0 (default 43 - BCM SPI2_CE0).
<br>        cs1_pin                 GPIO pin for CS1 (default 44 - BCM SPI2_CE1).
<br>        cs0_spidev              Set to 'disabled' to stop the creation of a
<br>                                userspace device node /dev/spidev2.0 (default
<br>                                is 'okay' or enabled).
<br>        cs1_spidev              Set to 'disabled' to stop the creation of a
<br>                                userspace device node /dev/spidev2.1 (default
<br>                                is 'okay' or enabled).
<br>
<br>
<br>Name:   spi2-3cs
<br>Info:   Enables spi2 with three chip select (CS) lines and associated spidev
<br>        dev nodes. The gpio pin numbers for the CS lines and spidev device node
<br>        creation are configurable.
<br>        N.B.: spi2 is only accessible with the Compute Module.
<br>Load:   dtoverlay=spi2-3cs,&lt;param&gt;=&lt;val&gt;
<br>Params: cs0_pin                 GPIO pin for CS0 (default 43 - BCM SPI2_CE0).
<br>        cs1_pin                 GPIO pin for CS1 (default 44 - BCM SPI2_CE1).
<br>        cs2_pin                 GPIO pin for CS2 (default 45 - BCM SPI2_CE2).
<br>        cs0_spidev              Set to 'disabled' to stop the creation of a
<br>                                userspace device node /dev/spidev2.0 (default
<br>                                is 'okay' or enabled).
<br>        cs1_spidev              Set to 'disabled' to stop the creation of a
<br>                                userspace device node /dev/spidev2.1 (default
<br>                                is 'okay' or enabled).
<br>        cs2_spidev              Set to 'disabled' to stop the creation of a
<br>                                userspace device node /dev/spidev2.2 (default
<br>                                is 'okay' or enabled).
<br>
<br>
<br>Name:   tinylcd35
<br>Info:   3.5" Color TFT Display by www.tinylcd.com
<br>        Options: Touch, RTC, keypad
<br>Load:   dtoverlay=tinylcd35,&lt;param&gt;=&lt;val&gt;
<br>Params: speed                   Display SPI bus speed
<br>
<br>        rotate                  Display rotation {0,90,180,270}
<br>
<br>        fps                     Delay between frame updates
<br>
<br>        debug                   Debug output level {0-7}
<br>
<br>        touch                   Enable touch panel
<br>
<br>        touchgpio               Touch controller IRQ GPIO
<br>
<br>        xohms                   Touchpanel: Resistance of X-plate in ohms
<br>
<br>        rtc-pcf                 PCF8563 Real Time Clock
<br>
<br>        rtc-ds                  DS1307 Real Time Clock
<br>
<br>        keypad                  Enable keypad
<br>
<br>        Examples:
<br>            Display with touchpanel, PCF8563 RTC and keypad:
<br>                dtoverlay=tinylcd35,touch,rtc-pcf,keypad
<br>            Old touch display:
<br>                dtoverlay=tinylcd35,touch,touchgpio=3
<br>
<br>
<br>Name:   uart1
<br>Info:   Enable uart1 in place of uart0
<br>Load:   dtoverlay=uart1,&lt;param&gt;=&lt;val&gt;
<br>Params: txd1_pin                GPIO pin for TXD1 (14, 32 or 40 - default 14)
<br>
<br>        rxd1_pin                GPIO pin for RXD1 (15, 33 or 41 - default 15)
<br>
<br>
<br>Name:   vc4-fkms-v3d
<br>Info:   Enable Eric Anholt's DRM VC4 V3D driver on top of the dispmanx
<br>        display stack.
<br>Load:   dtoverlay=vc4-fkms-v3d,&lt;param&gt;
<br>Params: cma-256                 CMA is 256MB, 256MB-aligned (needs 1GB)
<br>        cma-192                 CMA is 192MB, 256MB-aligned (needs 1GB)
<br>        cma-128                 CMA is 128MB, 128MB-aligned
<br>        cma-96                  CMA is 96MB, 128MB-aligned
<br>        cma-64                  CMA is 64MB, 64MB-aligned
<br>
<br>
<br>Name:   vc4-kms-v3d
<br>Info:   Enable Eric Anholt's DRM VC4 HDMI/HVS/V3D driver. Running startx or
<br>        booting to GUI while this overlay is in use will cause interesting
<br>        lockups.
<br>Load:   dtoverlay=vc4-kms-v3d,&lt;param&gt;
<br>Params: cma-256                 CMA is 256MB, 256MB-aligned (needs 1GB)
<br>        cma-192                 CMA is 192MB, 256MB-aligned (needs 1GB)
<br>        cma-128                 CMA is 128MB, 128MB-aligned
<br>        cma-96                  CMA is 96MB, 128MB-aligned
<br>        cma-64                  CMA is 64MB, 64MB-aligned
<br>
<br>
<br>Name:   vga666
<br>Info:   Overlay for the Fen Logic VGA666 board
<br>        This uses GPIOs 2-21 (so no I2C), and activates the output 2-3 seconds
<br>        after the kernel has started.
<br>Load:   dtoverlay=vga666
<br>Params: &lt;None&gt;
<br>
<br>
<br>Name:   w1-gpio
<br>Info:   Configures the w1-gpio Onewire interface module.
<br>        Use this overlay if you *don't* need a GPIO to drive an external pullup.
<br>Load:   dtoverlay=w1-gpio,&lt;param&gt;=&lt;val&gt;
<br>Params: gpiopin                 GPIO for I/O (default "4")
<br>
<br>        pullup                  Non-zero, "on", or "y" to enable the parasitic
<br>                                power (2-wire, power-on-data) feature
<br>
<br>
<br>Name:   w1-gpio-pullup
<br>Info:   Configures the w1-gpio Onewire interface module.
<br>        Use this overlay if you *do* need a GPIO to drive an external pullup.
<br>Load:   dtoverlay=w1-gpio-pullup,&lt;param&gt;=&lt;val&gt;
<br>Params: gpiopin                 GPIO for I/O (default "4")
<br>
<br>        pullup                  Non-zero, "on", or "y" to enable the parasitic
<br>                                power (2-wire, power-on-data) feature
<br>
<br>        extpullup               GPIO for external pullup (default "5")
<br>
<br>
<br>Name:   wittypi
<br>Info:   Configures the wittypi RTC module.
<br>Load:   dtoverlay=wittypi,&lt;param&gt;=&lt;val&gt;
<br>Params: led_gpio                GPIO for LED (default "17")
<br>        led_trigger             Choose which activity the LED tracks (default
<br>                                "default-on")
<br>
<br>
<br>Troubleshooting
<br>===============
<br>
<br>If you are experiencing problems that you think are DT-related, enable DT
<br>diagnostic output by adding this to /boot/config.txt:
<br>
<br>    dtdebug=on
<br>
<br>and rebooting. Then run:
<br>
<br>    sudo vcdbg log msg
<br>
<br>and look for relevant messages.
<br>
<br>Further reading
<br>===============
<br>
<br>This is only meant to be a quick introduction to the subject of Device Tree on
<br>Raspberry Pi. There is a more complete explanation here:
<br>
<br>http://www.raspberrypi.org/documentation/configuration/device-tree.md
<br><p></p><div class="separator"></div><br><p><h2>kvm</h2></p>KVM/MIPS Trap & Emulate Release Notes
<br>=====================================
<br>
<br>(1) KVM/MIPS should support MIPS32R2 and beyond. It has been tested on the following platforms:
<br>    Malta Board with FPGA based 34K
<br>    Sigma Designs TangoX board with a 24K based 8654 SoC.
<br>    Malta Board with 74K @ 1GHz
<br>
<br>(2) Both Guest kernel and Guest Userspace execute in UM.
<br>    Guest User address space:   0x00000000 -&gt; 0x40000000
<br>    Guest Kernel Unmapped:      0x40000000 -&gt; 0x60000000
<br>    Guest Kernel Mapped:        0x60000000 -&gt; 0x80000000
<br>
<br>    Guest Usermode virtual memory is limited to 1GB.
<br>
<br>(2) 16K Page Sizes: Both Host Kernel and Guest Kernel should have the same page size, currently at least 16K.
<br>    Note that due to cache aliasing issues, 4K page sizes are NOT supported.
<br>
<br>(3) No HugeTLB Support
<br>    Both the host kernel and Guest kernel should have the page size set to 16K.
<br>    This will be implemented in a future release.
<br>
<br>(4) KVM/MIPS does not have support for SMP Guests
<br>    Linux-3.7-rc2 based SMP guest hangs due to the following code sequence in the generated TLB handlers:
<br>	LL/TLBP/SC.  Since the TLBP instruction causes a trap the reservation gets cleared
<br>	when we ERET back to the guest. This causes the guest to hang in an infinite loop.
<br>	This will be fixed in a future release.
<br>
<br>(5) Use Host FPU
<br>    Currently KVM/MIPS emulates a 24K CPU without a FPU.
<br>    This will be fixed in a future release
<br><p></p><div class="separator"></div><br><p><h2>compressed</h2></p>Creation of the self-extracting compressed kernel image (vmlinuz)
<br>-----------------------------------------------------------------
<br>
<br>This can be slightly confusing because it's a process with many steps.
<br>
<br>The kernel object built by the arch/etrax100/Makefile, vmlinux, is split
<br>by that makefile into text and data binary files, vmlinux.text and
<br>vmlinux.data.
<br>
<br>Those files together with a ROM filesystem can be catted together and
<br>burned into a flash or executed directly at the DRAM origin.
<br>
<br>They can also be catted together and compressed with gzip, which is what
<br>happens in this makefile. Together they make up piggy.img.
<br>
<br>The decompressor is built into the file decompress.o. It is turned into
<br>the binary file decompress.bin, which is catted together with piggy.img
<br>into the file vmlinuz. It can be executed in an arbitrary place in flash.
<br>
<br>Be careful - it assumes some things about free locations in DRAM. It
<br>assumes the DRAM starts at 0x40000000 and that it is at least 8 MB,
<br>so it puts its code at 0x40700000, and initial stack at 0x40800000.
<br>
<br>-Bjorn
<br><p></p><div class="separator"></div><br><p><h2>arch-v10</h2></p>Memory management for CRIS/MMU
<br>------------------------------
<br>HISTORY:
<br>
<br>$Log: README.mm,v $
<br>Revision 1.1  2001/12/17 13:59:27  bjornw
<br>Initial revision
<br>
<br>Revision 1.1  2000/07/10 16:25:21  bjornw
<br>Initial revision
<br>
<br>Revision 1.4  2000/01/17 02:31:59  bjornw
<br>Added discussion of paging and VM.
<br>
<br>Revision 1.3  1999/12/03 16:43:23  hp
<br>Blurb about that the 3.5G-limitation is not a MMU limitation
<br>
<br>Revision 1.2  1999/12/03 16:04:21  hp
<br>Picky comment about not mapping the first page
<br>
<br>Revision 1.1  1999/12/03 15:41:30  bjornw
<br>First version of CRIS/MMU memory layout specification.
<br>
<br>
<br>
<br>
<br>
<br>------------------------------
<br>
<br>See the ETRAX-NG HSDD for reference.
<br>
<br>We use the page-size of 8 kbytes, as opposed to the i386 page-size of 4 kbytes.
<br>
<br>The MMU can, apart from the normal mapping of pages, also do a top-level
<br>segmentation of the kernel memory space. We use this feature to avoid having
<br>to use page-tables to map the physical memory into the kernel's address
<br>space. We also use it to keep the user-mode virtual mapping in the same
<br>map during kernel-mode, so that the kernel easily can access the corresponding
<br>user-mode process' data.
<br>
<br>As a comparison, the Linux/i386 2.0 puts the kernel and physical RAM at
<br>address 0, overlapping with the user-mode virtual space, so that descriptor
<br>registers are needed for each memory access to specify which MMU space to
<br>map through. That changed in 2.2, putting the kernel/physical RAM at 
<br>0xc0000000, to co-exist with the user-mode mapping. We will do something
<br>quite similar, but with the additional complexity of having to map the
<br>internal chip I/O registers and the flash memory area (including SRAM
<br>and peripherial chip-selets).
<br>
<br>The kernel-mode segmentation map:
<br>
<br>        ------------------------                ------------------------
<br>FFFFFFFF|                      | =&gt; cached      |                      | 
<br>        |    kernel seg_f      |    flash       |                      |
<br>F0000000|______________________|                |                      |
<br>EFFFFFFF|                      | =&gt; uncached    |                      | 
<br>        |    kernel seg_e      |    flash       |                      |
<br>E0000000|______________________|                |        DRAM          |
<br>DFFFFFFF|                      |  paged to any  |      Un-cached       | 
<br>        |    kernel seg_d      |    =======&gt;    |                      |
<br>D0000000|______________________|                |                      |
<br>CFFFFFFF|                      |                |                      | 
<br>        |    kernel seg_c      |==\             |                      |
<br>C0000000|______________________|   \            |______________________|
<br>BFFFFFFF|                      |  uncached      |                      |
<br>        |    kernel seg_b      |=====\=========&gt;|       Registers      |
<br>B0000000|______________________|      \c        |______________________|
<br>AFFFFFFF|                      |       \a       |                      |
<br>        |                      |        \c      | FLASH/SRAM/Peripheral|
<br>        |                      |         \h     |______________________|
<br>        |                      |          \e    |                      |
<br>        |                      |           \d   |                      |
<br>        | kernel seg_0 - seg_a |            \==&gt;|         DRAM         | 
<br>        |                      |                |        Cached        |
<br>        |                      |  paged to any  |                      |
<br>        |                      |    =======&gt;    |______________________| 
<br>        |                      |                |                      |
<br>        |                      |                |        Illegal       |
<br>        |                      |                |______________________|
<br>        |                      |                |                      |      
<br>        |                      |                | FLASH/SRAM/Peripheral|
<br>00000000|______________________|                |______________________|
<br>
<br>In user-mode it looks the same except that only the space 0-AFFFFFFF is
<br>available. Therefore, in this model, the virtual address space per process
<br>is limited to 0xb0000000 bytes (minus 8192 bytes, since the first page,
<br>0..8191, is never mapped, in order to trap NULL references).
<br>
<br>It also means that the total physical RAM that can be mapped is 256 MB
<br>(kseg_c above). More RAM can be mapped by choosing a different segmentation
<br>and shrinking the user-mode memory space.
<br>
<br>The MMU can map all 4 GB in user mode, but doing that would mean that a
<br>few extra instructions would be needed for each access to user mode
<br>memory.
<br>
<br>The kernel needs access to both cached and uncached flash. Uncached is
<br>necessary because of the special write/erase sequences. Also, the 
<br>peripherial chip-selects are decoded from that region.
<br>
<br>The kernel also needs its own virtual memory space. That is kseg_d. It
<br>is used by the vmalloc() kernel function to allocate virtual contiguous
<br>chunks of memory not possible using the normal kmalloc physical RAM 
<br>allocator.
<br>
<br>The setting of the actual MMU control registers to use this layout would
<br>be something like this:
<br>
<br>R_MMU_KSEG = ( ( seg_f, seg     ) |   // Flash cached
<br>               ( seg_e, seg     ) |   // Flash uncached
<br>               ( seg_d, page    ) |   // kernel vmalloc area    
<br>               ( seg_c, seg     ) |   // kernel linear segment
<br>               ( seg_b, seg     ) |   // kernel linear segment
<br>               ( seg_a, page    ) |
<br>               ( seg_9, page    ) |
<br>               ( seg_8, page    ) |
<br>               ( seg_7, page    ) |
<br>               ( seg_6, page    ) |
<br>               ( seg_5, page    ) |
<br>               ( seg_4, page    ) |
<br>               ( seg_3, page    ) |
<br>               ( seg_2, page    ) |
<br>               ( seg_1, page    ) |
<br>               ( seg_0, page    ) );
<br>
<br>R_MMU_KBASE_HI = ( ( base_f, 0x0 ) |   // flash/sram/periph cached
<br>                   ( base_e, 0x8 ) |   // flash/sram/periph uncached
<br>                   ( base_d, 0x0 ) |   // don't care
<br>                   ( base_c, 0x4 ) |   // physical RAM cached area
<br>                   ( base_b, 0xb ) |   // uncached on-chip registers
<br>                   ( base_a, 0x0 ) |   // don't care
<br>                   ( base_9, 0x0 ) |   // don't care
<br>                   ( base_8, 0x0 ) );  // don't care
<br>
<br>R_MMU_KBASE_LO = ( ( base_7, 0x0 ) |   // don't care
<br>                   ( base_6, 0x0 ) |   // don't care
<br>                   ( base_5, 0x0 ) |   // don't care
<br>                   ( base_4, 0x0 ) |   // don't care
<br>                   ( base_3, 0x0 ) |   // don't care
<br>                   ( base_2, 0x0 ) |   // don't care
<br>                   ( base_1, 0x0 ) |   // don't care
<br>                   ( base_0, 0x0 ) );  // don't care
<br>
<br>NOTE: while setting up the MMU, we run in a non-mapped mode in the DRAM (0x40
<br>segment) and need to setup the seg_4 to a unity mapping, so that we don't get
<br>a fault before we have had time to jump into the real kernel segment (0xc0). This
<br>is done in head.S temporarily, but fixed by the kernel later in paging_init.
<br>
<br>
<br>Paging - PTE's, PMD's and PGD's
<br>-------------------------------
<br>
<br>[ References: asm/pgtable.h, asm/page.h, asm/mmu.h ]
<br>
<br>The paging mechanism uses virtual addresses to split a process memory-space into
<br>pages, a page being the smallest unit that can be freely remapped in memory. On
<br>Linux/CRIS, a page is 8192 bytes (for technical reasons not equal to 4096 as in 
<br>most other 32-bit architectures). It would be inefficient to let a virtual memory
<br>mapping be controlled by a long table of page mappings, so it is broken down into
<br>a 2-level structure with a Page Directory containing pointers to Page Tables which
<br>each have maps of up to 2048 pages (8192 / sizeof(void *)). Linux can actually
<br>handle 3-level structures as well, with a Page Middle Directory in between, but
<br>in many cases, this is folded into a two-level structure by excluding the Middle
<br>Directory.
<br>
<br>We'll take a look at how an address is translated while we discuss how it's handled
<br>in the Linux kernel.
<br>
<br>The example address is 0xd004000c; in binary this is:
<br>
<br>31       23       15       7      0
<br>11010000 00000100 00000000 00001100
<br>
<br>|______| |__________||____________|
<br>  PGD        PTE       page offset
<br>
<br>Given the top-level Page Directory, the offset in that directory is calculated
<br>using the upper 8 bits:
<br>
<br>static inline pgd_t * pgd_offset(struct mm_struct * mm, unsigned long address)
<br>{
<br>	return mm-&gt;pgd + (address &gt;&gt; PGDIR_SHIFT);
<br>}
<br>
<br>PGDIR_SHIFT is the log2 of the amount of memory an entry in the PGD can map; in our
<br>case it is 24, corresponding to 16 MB. This means that each entry in the PGD 
<br>corresponds to 16 MB of virtual memory.
<br>
<br>The pgd_t from our example will therefore be the 208'th (0xd0) entry in mm-&gt;pgd.
<br>
<br>Since the Middle Directory does not exist, it is a unity mapping:
<br>
<br>static inline pmd_t * pmd_offset(pgd_t * dir, unsigned long address)
<br>{
<br>	return (pmd_t *) dir;
<br>}
<br>
<br>The Page Table provides the final lookup by using bits 13 to 23 as index:
<br>
<br>static inline pte_t * pte_offset(pmd_t * dir, unsigned long address)
<br>{
<br>	return (pte_t *) pmd_page(*dir) + ((address &gt;&gt; PAGE_SHIFT) &
<br>					   (PTRS_PER_PTE - 1));
<br>}
<br>
<br>PAGE_SHIFT is the log2 of the size of a page; 13 in our case. PTRS_PER_PTE is
<br>the number of pointers that fit in a Page Table and is used to mask off the 
<br>PGD-part of the address.
<br>
<br>The so-far unused bits 0 to 12 are used to index inside a page linearily.
<br>
<br>The VM system
<br>-------------
<br>
<br>The kernels own page-directory is the swapper_pg_dir, cleared in paging_init, 
<br>and contains the kernels virtual mappings (the kernel itself is not paged - it
<br>is mapped linearily using kseg_c as described above). Architectures without
<br>kernel segments like the i386, need to setup swapper_pg_dir directly in head.S
<br>to map the kernel itself. swapper_pg_dir is pointed to by init_mm.pgd as the
<br>init-task's PGD.
<br>
<br>To see what support functions are used to setup a page-table, let's look at the
<br>kernel's internal paged memory system, vmalloc/vfree.
<br>
<br>void * vmalloc(unsigned long size)
<br>
<br>The vmalloc-system keeps a paged segment in kernel-space at 0xd0000000. What
<br>happens first is that a virtual address chunk is allocated to the request using
<br>get_vm_area(size). After that, physical RAM pages are allocated and put into
<br>the kernel's page-table using alloc_area_pages(addr, size). 
<br>
<br>static int alloc_area_pages(unsigned long address, unsigned long size)
<br>
<br>First the PGD entry is found using init_mm.pgd. This is passed to
<br>alloc_area_pmd (remember the 3-&gt;2 folding). It uses pte_alloc_kernel to
<br>check if the PGD entry points anywhere - if not, a page table page is
<br>allocated and the PGD entry updated. Then the alloc_area_pte function is
<br>used just like alloc_area_pmd to check which page table entry is desired, 
<br>and a physical page is allocated and the table entry updated. All of this
<br>is repeated at the top-level until the entire address range specified has 
<br>been mapped.
<br>
<br>
<br>
<br><p></p><div class="separator"></div><br><p><h2>openrisc</h2></p>OpenRISC Linux
<br>==============
<br>
<br>This is a port of Linux to the OpenRISC class of microprocessors; the initial
<br>target architecture, specifically, is the 32-bit OpenRISC 1000 family (or1k).
<br>
<br>For information about OpenRISC processors and ongoing development:
<br>
<br>	website		http://openrisc.net
<br>
<br>For more information about Linux on OpenRISC, please contact South Pole AB.
<br>
<br>	email:		info@southpole.se
<br>
<br>	website:	http://southpole.se
<br>			http://southpoleconsulting.com
<br>
<br>---------------------------------------------------------------------
<br>
<br>Build instructions for OpenRISC toolchain and Linux
<br>===================================================
<br>
<br>In order to build and run Linux for OpenRISC, you'll need at least a basic
<br>toolchain and, perhaps, the architectural simulator.  Steps to get these bits
<br>in place are outlined here.
<br>
<br>1)  The toolchain can be obtained from openrisc.net.  Instructions for building
<br>a toolchain can be found at:
<br>
<br>http://openrisc.net/toolchain-build.html
<br>
<br>2) or1ksim (optional)
<br>
<br>or1ksim is the architectural simulator which will allow you to actually run
<br>your OpenRISC Linux kernel if you don't have an OpenRISC processor at hand.
<br>
<br>	git clone git://openrisc.net/jonas/or1ksim-svn
<br>
<br>	cd or1ksim
<br>	./configure --prefix=$OPENRISC_PREFIX
<br>	make
<br>	make install
<br>
<br>3)  Linux kernel
<br>
<br>Build the kernel as usual
<br>
<br>	make ARCH=openrisc defconfig
<br>	make ARCH=openrisc
<br>
<br>4)  Run in architectural simulator
<br>
<br>Grab the or1ksim platform configuration file (from the or1ksim source) and
<br>together with your freshly built vmlinux, run your kernel with the following
<br>incantation:
<br>
<br>	sim -f arch/openrisc/or1ksim.cfg vmlinux
<br>
<br>---------------------------------------------------------------------
<br>
<br>Terminology
<br>===========
<br>
<br>In the code, the following particles are used on symbols to limit the scope
<br>to more or less specific processor implementations:
<br>
<br>openrisc: the OpenRISC class of processors
<br>or1k:     the OpenRISC 1000 family of processors
<br>or1200:   the OpenRISC 1200 processor
<br>
<br>---------------------------------------------------------------------
<br>
<br>History
<br>========
<br>
<br>18. 11. 2003	Matjaz Breskvar (phoenix@bsemi.com)
<br>	initial port of linux to OpenRISC/or32 architecture.
<br>        all the core stuff is implemented and seams usable.
<br>
<br>08. 12. 2003	Matjaz Breskvar (phoenix@bsemi.com)
<br>	complete change of TLB miss handling.
<br>	rewrite of exceptions handling.
<br>	fully functional sash-3.6 in default initrd.
<br>	a much improved version with changes all around.
<br>
<br>10. 04. 2004	Matjaz Breskvar (phoenix@bsemi.com)
<br>	alot of bugfixes all over.
<br>	ethernet support, functional http and telnet servers.
<br>	running many standard linux apps.
<br>
<br>26. 06. 2004	Matjaz Breskvar (phoenix@bsemi.com)
<br>	port to 2.6.x
<br>
<br>30. 11. 2004	Matjaz Breskvar (phoenix@bsemi.com)
<br>	lots of bugfixes and enhancments.
<br>	added opencores framebuffer driver.
<br>
<br>09. 10. 2010    Jonas Bonn (jonas@southpole.se)
<br>	major rewrite to bring up to par with upstream Linux 2.6.36
<br><p></p><div class="separator"></div><br><p><h2>mwave</h2></p>Module options
<br>--------------
<br>
<br>The mwave module takes the following options.  Note that these options
<br>are not saved by the BIOS and so do not persist after unload and reload.
<br>
<br>  mwave_debug=value, where value is bitwise OR of trace flags:
<br>	0x0001 mwavedd api tracing
<br>	0x0002 smapi api tracing
<br>	0x0004 3780i tracing
<br>	0x0008 tp3780i tracing
<br>
<br>        Tracing only occurs if the driver has been compiled with the
<br>        MW_TRACE macro #defined  (i.e. let ccflags-y := -DMW_TRACE
<br>        in the Makefile).
<br>
<br>  mwave_3780i_irq=5/7/10/11/15
<br>	If the dsp irq has not been setup and stored in bios by the 
<br>	thinkpad configuration utility then this parameter allows the
<br>	irq used by the dsp to be configured.
<br>
<br>  mwave_3780i_io=0x130/0x350/0x0070/0xDB0
<br>	If the dsp io range has not been setup and stored in bios by the 
<br>	thinkpad configuration utility then this parameter allows the
<br>	io range used by the dsp to be configured.
<br>
<br>  mwave_uart_irq=3/4
<br>	If the mwave's uart irq has not been setup and stored in bios by the 
<br>	thinkpad configuration utility then this parameter allows the
<br>	irq used by the mwave uart to be configured.
<br>
<br>  mwave_uart_io=0x3f8/0x2f8/0x3E8/0x2E8
<br>	If the uart io range has not been setup and stored in bios by the 
<br>	thinkpad configuration utility then this parameter allows the
<br>	io range used by the mwave uart to be configured.
<br>
<br>Example to enable the 3780i DSP using ttyS1 resources:
<br>	
<br>  insmod mwave mwave_3780i_irq=10 mwave_3780i_io=0x0130 mwave_uart_irq=3 mwave_uart_io=0x2f8
<br>
<br>Accessing the driver
<br>--------------------
<br>
<br>You must also create a node for the driver:
<br>  mkdir -p /dev/modems
<br>  mknod --mode=660 /dev/modems/mwave c 10 219
<br>
<br><p></p><div class="separator"></div><br><p><h2>parisc</h2></p>/*
<br>** HP VISUALIZE Workstation PCI Bus Defect
<br>**
<br>** "HP has discovered a potential system defect that can affect
<br>** the behavior of five models of HP VISUALIZE workstations when
<br>** equipped with third-party or customer-installed PCI I/O expansion
<br>** cards. The defect is limited to the HP C180, C160, C160L, B160L,
<br>** and B132L VISUALIZE workstations, and will only be encountered
<br>** when data is transmitted through PCI I/O expansion cards on the
<br>** PCI bus. HP-supplied graphics cards that utilize the PCI bus are
<br>** not affected."
<br>**
<br>** http://h20000.www2.hp.com/bizsupport/TechSupport/Home.jsp?locale=en_US&prodTypeId=12454&prodSeriesId=44443
<br>**
<br>**	Product		First Good Serial Number
<br>**  C200/C240 (US)	US67350000
<br>**B132L+/B180 (US)	US67390000
<br>**   C200 (Europe)	3713G01000
<br>**  B180L (Europe)	3720G01000
<br>**
<br>** Note that many boards were fixed/replaced under a free replacement
<br>** program. Assume a machine is only "suspect" until proven otherwise.
<br>**
<br>** "The pci_check program will also be available as application
<br>**  patch PHSS_12295"
<br>*/
<br>
<br><p></p><div class="separator"></div><br><p><h2>usb</h2></p>To understand all the Linux-USB framework, you'll use these resources:
<br>
<br>    * This source code.  This is necessarily an evolving work, and
<br>      includes kerneldoc that should help you get a current overview.
<br>      ("make pdfdocs", and then look at "usb.pdf" for host side and
<br>      "gadget.pdf" for peripheral side.)  Also, Documentation/usb has
<br>      more information.
<br>
<br>    * The USB 2.0 specification (from www.usb.org), with supplements
<br>      such as those for USB OTG and the various device classes.
<br>      The USB specification has a good overview chapter, and USB
<br>      peripherals conform to the widely known "Chapter 9".
<br>
<br>    * Chip specifications for USB controllers.  Examples include
<br>      host controllers (on PCs, servers, and more); peripheral
<br>      controllers (in devices with Linux firmware, like printers or
<br>      cell phones); and hard-wired peripherals like Ethernet adapters.
<br>
<br>    * Specifications for other protocols implemented by USB peripheral
<br>      functions.  Some are vendor-specific; others are vendor-neutral
<br>      but just standardized outside of the www.usb.org team.
<br>
<br>Here is a list of what each subdirectory here is, and what is contained in
<br>them.
<br>
<br>core/		- This is for the core USB host code, including the
<br>		  usbfs files and the hub class driver ("hub_wq").
<br>
<br>host/		- This is for USB host controller drivers.  This
<br>		  includes UHCI, OHCI, EHCI, and others that might
<br>		  be used with more specialized "embedded" systems.
<br>
<br>gadget/		- This is for USB peripheral controller drivers and
<br>		  the various gadget drivers which talk to them.
<br>
<br>
<br>Individual USB driver directories.  A new driver should be added to the
<br>first subdirectory in the list below that it fits into.
<br>
<br>image/		- This is for still image drivers, like scanners or
<br>		  digital cameras.
<br>../input/	- This is for any driver that uses the input subsystem,
<br>		  like keyboard, mice, touchscreens, tablets, etc.
<br>../media/	- This is for multimedia drivers, like video cameras,
<br>		  radios, and any other drivers that talk to the v4l
<br>		  subsystem.
<br>../net/		- This is for network drivers.
<br>serial/		- This is for USB to serial drivers.
<br>storage/	- This is for USB mass-storage drivers.
<br>class/		- This is for all USB device drivers that do not fit
<br>		  into any of the above categories, and work for a range
<br>		  of USB Class specified devices. 
<br>misc/		- This is for all USB device drivers that do not fit
<br>		  into any of the above categories.
<br><p></p><div class="separator"></div><br><p><h2>usbip</h2></p>TODO:
<br>	- more discussion about the protocol
<br>	- testing
<br>	- review of the userspace interface
<br>	- document the protocol
<br>
<br>Please send patches for this code to Greg Kroah-Hartman &lt;greg@kroah.com&gt;
<br><p></p><div class="separator"></div><br><p><h2>lustre</h2></p>Lustre Parallel Filesystem Client
<br>=================================
<br>
<br>The Lustre file system is an open-source, parallel file system
<br>that supports many requirements of leadership class HPC simulation
<br>environments.
<br>Born from from a research project at Carnegie Mellon University,
<br>the Lustre file system is a widely-used option in HPC.
<br>The Lustre file system provides a POSIX compliant file system interface,
<br>can scale to thousands of clients, petabytes of storage and
<br>hundreds of gigabytes per second of I/O bandwidth.
<br>
<br>Unlike shared disk storage cluster filesystems (e.g. OCFS2, GFS, GPFS),
<br>Lustre has independent Metadata and Data servers that clients can access
<br>in parallel to maximize performance.
<br>
<br>In order to use Lustre client you will need to download the "lustre-client"
<br>package that contains the userspace tools from http://lustre.org/download/
<br>
<br>You will need to install and configure your Lustre servers separately.
<br>
<br>Mount Syntax
<br>============
<br>After you installed the lustre-client tools including mount.lustre binary
<br>you can mount your Lustre filesystem with:
<br>
<br>mount -t lustre mgs:/fsname mnt
<br>
<br>where mgs is the host name or ip address of your Lustre MGS(management service)
<br>fsname is the name of the filesystem you would like to mount.
<br>
<br>
<br>Mount Options
<br>=============
<br>
<br>  noflock
<br>	Disable posix file locking (Applications trying to use
<br>	the functionality will get ENOSYS)
<br>
<br>  localflock
<br>	Enable local flock support, using only client-local flock
<br>	(faster, for applications that require flock but do not run
<br>	 on multiple nodes).
<br>
<br>  flock
<br>	Enable cluster-global posix file locking coherent across all
<br>	client nodes.
<br>
<br>  user_xattr, nouser_xattr
<br>	Support "user." extended attributes (or not)
<br>
<br>  user_fid2path, nouser_fid2path
<br>	Enable FID to path translation by regular users (or not)
<br>
<br>  checksum, nochecksum
<br>	Verify data consistency on the wire and in memory as it passes
<br>	between the layers (or not).
<br>
<br>  lruresize, nolruresize
<br>	Allow lock LRU to be controlled by memory pressure on the server
<br>	(or only 100 (default, controlled by lru_size proc parameter) locks
<br>	 per CPU per server on this client).
<br>
<br>  lazystatfs, nolazystatfs
<br>	Do not block in statfs() if some of the servers are down.
<br>
<br>  32bitapi
<br>	Shrink inode numbers to fit into 32 bits. This is necessary
<br>	if you plan to reexport Lustre filesystem from this client via
<br>	NFSv4.
<br>
<br>  verbose, noverbose
<br>	Enable mount/umount console messages (or not)
<br>
<br>More Information
<br>================
<br>You can get more information at the Lustre website: http://wiki.lustre.org/
<br>
<br>Source for the userspace tools and out-of-tree client and server code
<br>is available at: http://git.hpdd.intel.com/fs/lustre-release.git
<br>
<br>Latest binary packages:
<br>http://lustre.org/download/
<br><p></p><div class="separator"></div><br><p><h2>nvec</h2></p>NVEC: An NVidia compliant Embedded Controller Protocol Implementation
<br>
<br>This is an implementation of the NVEC protocol used to communicate with an
<br>embedded controller (EC) via I2C bus. The EC is an I2C master while the host
<br>processor is the I2C slave. Requests from the host processor to the EC are
<br>started by triggering a gpio line.
<br>
<br>There is no written documentation of the protocol available to the public,
<br>but the source code[1] of the published nvec reference drivers can be a guide.
<br>This driver is currently only used by the AC100 project[2], but it is likely,
<br>that other Tegra boards (not yet mainlined, if ever) also use it.
<br>
<br>[1] e.g. http://nv-tegra.nvidia.com/gitweb/?p=linux-2.6.git;a=tree;f=arch/arm/mach-tegra/nvec;hb=android-tegra-2.6.32
<br>[2] http://gitorious.org/ac100, http://launchpad.net/ac100
<br><p></p><div class="separator"></div><br><p><h2>slicoss</h2></p>This driver is supposed to support:
<br>
<br>	Mojave cards (single port PCI Gigabit) both copper and fiber
<br>	Oasis cards (single and dual port PCI-x Gigabit) copper and fiber
<br>	Kalahari cards (dual and quad port PCI-e Gigabit) copper and fiber
<br>
<br>The driver was actually tested on Oasis and Kalahari cards.
<br><p></p><div class="separator"></div><br><p><h2>wlan-ng</h2></p>TODO:
<br>	- checkpatch.pl cleanups
<br>	- sparse warnings
<br>	- move to use the in-kernel wireless stack
<br>
<br>Please send any patches or complaints about this driver to Greg
<br>Kroah-Hartman &lt;greg@kroah.com&gt; and don't bother the upstream wireless
<br>kernel developers about it, they want nothing to do with it.
<br><p></p><div class="separator"></div><br><p><h2>fbtft</h2></p>  FBTFT
<br>=========
<br>
<br>Linux Framebuffer drivers for small TFT LCD display modules.
<br>The module 'fbtft' makes writing drivers for some of these displays very easy.
<br>
<br>Development is done on a Raspberry Pi running the Raspbian "wheezy" distribution.
<br>
<br>INSTALLATION
<br>  Download kernel sources
<br>
<br>  From Linux 3.15
<br>    cd drivers/video/fbdev/fbtft
<br>    git clone https://github.com/notro/fbtft.git
<br>
<br>    Add to drivers/video/fbdev/Kconfig:   source "drivers/video/fbdev/fbtft/Kconfig"
<br>    Add to drivers/video/fbdev/Makefile:  obj-y += fbtft/
<br>
<br>  Before Linux 3.15
<br>    cd drivers/video
<br>    git clone https://github.com/notro/fbtft.git
<br>
<br>    Add to drivers/video/Kconfig:   source "drivers/video/fbtft/Kconfig"
<br>    Add to drivers/video/Makefile:  obj-y += fbtft/
<br>
<br>  Enable driver(s) in menuconfig and build the kernel
<br>
<br>
<br>See wiki for more information: https://github.com/notro/fbtft/wiki
<br>
<br>
<br>Source: https://github.com/notro/fbtft/
<br><p></p><div class="separator"></div><br><p><h2>tools</h2></p>
<br>
<br>        1 - LOOPBACK DRIVER
<br>
<br>The driver implements the main logic of the loopback test and provides
<br>sysfs files to configure the test and retrieve the results.
<br>A user could run a test without the need of the test application given
<br>that he understands the sysfs interface of the loopback driver.
<br>
<br>The loopback kernel driver needs to be loaded and at least one module
<br>with the loopback feature enabled must be present for the sysfs files to be
<br>created and for the loopback test application to be able to run.
<br>
<br>To load the module:
<br># modprobe gb-loopback
<br>
<br>
<br>When the module is probed,  New files are available on the sysfs
<br>directory of the detected loopback device.
<br>(typically under "/sys/bus/graybus/devices").
<br>
<br>Here is a short summary of the sysfs interface files that should be visible:
<br>
<br>* Loopback Configuration Files:
<br>    async - Use asynchronous operations.
<br>    iteration_max - Number of tests iterations to perform.
<br>    size - payload size of the transfer.
<br>    timeout - The number of microseconds to give an individual
<br>              asynchronous request before timing out.
<br>    us_wait - Time to wait between 2 messages
<br>    type - By writing the test type to this file, the test starts.
<br>           Valid tests are:
<br>             0 stop the test
<br>             2 - ping
<br>             3 - transfer
<br>             4 - sink
<br>
<br>* Loopback feedback files:
<br>    error - number of errors that have occurred.
<br>    iteration_count - Number of iterations performed.
<br>    requests_completed - Number of requests successfully completed.
<br>    requests_timedout - Number of requests that have timed out.
<br>    timeout_max - Max allowed timeout
<br>    timeout_min - Min allowed timeout.
<br>
<br>* Loopback result files:
<br>    apbridge_unipro_latency_avg
<br>    apbridge_unipro_latency_max
<br>    apbridge_unipro_latency_min
<br>    gpbridge_firmware_latency_avg
<br>    gpbridge_firmware_latency_max
<br>    gpbridge_firmware_latency_min
<br>    requests_per_second_avg
<br>    requests_per_second_max
<br>    requests_per_second_min
<br>    latency_avg
<br>    latency_max
<br>    latency_min
<br>    throughput_avg
<br>    throughput_max
<br>    throughput_min
<br>
<br>
<br>
<br>            2 - LOOPBACK TEST APPLICATION
<br>
<br>The loopback test application manages and formats the results provided by
<br>the loopback kernel module. The purpose of this application
<br>is to:
<br>    - Start and manage multiple loopback device tests concurrently.
<br>    - Calculate the aggregate results for multiple devices.
<br>    - Gather and format test results (csv or human readable).
<br>
<br>The best way to get up to date usage information for the application is
<br>usually to pass the "-h" parameter.
<br>Here is the summary of the available options:
<br>
<br> Mandatory arguments
<br>   -t     must be one of the test names - sink, transfer or ping
<br>   -i     iteration count - the number of iterations to run the test over
<br> Optional arguments
<br>   -S     sysfs location - location for greybus 'endo' entires default /sys/bus/greybus/devices/
<br>   -D     debugfs location - location for loopback debugfs entries default /sys/kernel/debug/gb_loopback/
<br>   -s     size of data packet to send during test - defaults to zero
<br>   -m     mask - a bit mask of connections to include example: -m 8 = 4th connection -m 9 = 1st and 4th connection etc
<br>                 default is zero which means broadcast to all connections
<br>   -v     verbose output
<br>   -d     debug output
<br>   -r     raw data output - when specified the full list of latency values are included in the output CSV
<br>   -p     porcelain - when specified printout is in a user-friendly non-CSV format. This option suppresses writing to CSV file
<br>   -a     aggregate - show aggregation of all enabled devies
<br>   -l     list found loopback devices and exit.
<br>   -x     Async - Enable async transfers.
<br>   -o     Timeout - Timeout in microseconds for async operations.
<br>
<br>
<br>
<br>             3 - REAL WORLD EXAMPLE USAGES
<br>
<br> 3.1 - Using the driver sysfs files to run a test on a single device:
<br>
<br>* Run a 1000 transfers of a 100 byte packet. Each transfer is started only
<br>after the previous one finished successfully:
<br>    echo 0 &gt; /sys/bus/greybus/devices/1-2.17/type
<br>    echo 0 &gt; /sys/bus/greybus/devices/1-2.17/async
<br>    echo 2000 &gt; /sys/bus/greybus/devices/1-2.17/us_wait
<br>    echo 100 &gt; /sys/bus/greybus/devices/1-2.17/size
<br>    echo 1000 &gt; /sys/bus/greybus/devices/1-2.17/iteration_max
<br>    echo 0 &gt; /sys/bus/greybus/devices/1-2.17/mask
<br>    echo 200000 &gt; /sys/bus/greybus/devices/1-2.17/timeout
<br>    echo 3 &gt; /sys/bus/greybus/devices/1-2.17/type
<br>
<br>* Run a 1000 transfers of a 100 byte packet. Transfers are started without
<br>waiting for the previous one to finish:
<br>    echo 0 &gt; /sys/bus/greybus/devices/1-2.17/type
<br>    echo 3 &gt; /sys/bus/greybus/devices/1-2.17/async
<br>    echo 0 &gt; /sys/bus/greybus/devices/1-2.17/us_wait
<br>    echo 100 &gt; /sys/bus/greybus/devices/1-2.17/size
<br>    echo 1000 &gt; /sys/bus/greybus/devices/1-2.17/iteration_max
<br>    echo 0 &gt; /sys/bus/greybus/devices/1-2.17/mask
<br>    echo 200000 &gt; /sys/bus/greybus/devices/1-2.17/timeout
<br>    echo 3 &gt; /sys/bus/greybus/devices/1-2.17/type
<br>
<br>* Read the results from sysfs:
<br>    cat /sys/bus/greybus/devices/1-2.17/requests_per_second_min
<br>    cat /sys/bus/greybus/devices/1-2.17/requests_per_second_max
<br>    cat /sys/bus/greybus/devices/1-2.17/requests_per_second_avg
<br>
<br>    cat /sys/bus/greybus/devices/1-2.17/latency_min
<br>    cat /sys/bus/greybus/devices/1-2.17/latency_max
<br>    cat /sys/bus/greybus/devices/1-2.17/latency_avg
<br>
<br>    cat /sys/bus/greybus/devices/1-2.17/apbridge_unipro_latency_min
<br>    cat /sys/bus/greybus/devices/1-2.17/apbridge_unipro_latency_max
<br>    cat /sys/bus/greybus/devices/1-2.17/apbridge_unipro_latency_avg
<br>
<br>    cat /sys/bus/greybus/devices/1-2.17/gpbridge_firmware_latency_min
<br>    cat /sys/bus/greybus/devices/1-2.17/gpbridge_firmware_latency_max
<br>    cat /sys/bus/greybus/devices/1-2.17/gpbridge_firmware_latency_avg
<br>
<br>    cat /sys/bus/greybus/devices/1-2.17/error
<br>    cat /sys/bus/greybus/devices/1-2.17/requests_completed
<br>    cat /sys/bus/greybus/devices/1-2.17/requests_timedout
<br>
<br>
<br>3.2 - using the test application:
<br>
<br>* Run a transfer test 10 iterations of size 100 bytes on all available devices
<br>    #/loopback_test -t transfer -i 10 -s 100
<br>    1970-1-1 0:10:7,transfer,1-4.17,100,10,0,443,509,471.700012,66,1963,2256,2124.600098,293,102776,118088,109318.898438,15312,1620,1998,1894.099976,378,56,57,56.799999,1
<br>    1970-1-1 0:10:7,transfer,1-5.17,100,10,0,399,542,463.399994,143,1845,2505,2175.800049,660,92568,125744,107393.296875,33176,1469,2305,1806.500000,836,56,57,56.799999,1
<br>
<br>
<br>* Show the aggregate results of both devices. ("-a")
<br>    #/loopback_test -t transfer -i 10 -s 100  -a
<br>    1970-1-1 0:10:35,transfer,1-4.17,100,10,0,448,580,494.100006,132,1722,2230,2039.400024,508,103936,134560,114515.703125,30624,1513,1980,1806.900024,467,56,57,57.299999,1
<br>    1970-1-1 0:10:35,transfer,1-5.17,100,10,0,383,558,478.600006,175,1791,2606,2115.199951,815,88856,129456,110919.703125,40600,1457,2246,1773.599976,789,56,57,57.099998,1
<br>    1970-1-1 0:10:35,transfer,aggregate,100,10,0,383,580,486.000000,197,1722,2606,2077.000000,884,88856,134560,112717.000000,45704,1457,2246,1789.000000,789,56,57,57.000000,1
<br>
<br>* Example usage of the mask option to select which devices will
<br>  run the test (1st, 2nd, or both devices):
<br>    # /loopback_test -t transfer -i 10 -s 100 -m 1
<br>    1970-1-1 0:11:56,transfer,1-4.17,100,10,0,514,558,544.900024,44,1791,1943,1836.599976,152,119248,129456,126301.296875,10208,1600,1001609,101613.601562,1000009,56,57,56.900002,1
<br>    # /loopback_test -t transfer -i 10 -s 100 -m 2
<br>    1970-1-1 0:12:0,transfer,1-5.17,100,10,0,468,554,539.000000,86,1804,2134,1859.500000,330,108576,128528,124932.500000,19952,1606,1626,1619.300049,20,56,57,57.400002,1
<br>    # /loopback_test -t transfer -i 10 -s 100 -m 3
<br>    1970-1-1 0:12:3,transfer,1-4.17,100,10,0,432,510,469.399994,78,1959,2313,2135.800049,354,100224,118320,108785.296875,18096,1610,2024,1893.500000,414,56,57,57.200001,1
<br>    1970-1-1 0:12:3,transfer,1-5.17,100,10,0,404,542,468.799988,138,1843,2472,2152.500000,629,93728,125744,108646.101562,32016,1504,2247,1853.099976,743,56,57,57.099998,1
<br>
<br>* Show output in human readable format ("-p")
<br>    # /loopback_test -t transfer -i 10 -s 100 -m 3 -p
<br>
<br>    1970-1-1 0:12:37
<br>    test:                       transfer
<br>    path:                       1-4.17
<br>    size:                       100
<br>    iterations:                 10
<br>    errors:                     0
<br>    async:                      Disabled
<br>    requests per-sec:           min=390, max=547, average=469.299988, jitter=157
<br>    ap-throughput B/s:          min=90480 max=126904 average=108762.101562 jitter=36424
<br>    ap-latency usec:            min=1826 max=2560 average=2146.000000 jitter=734
<br>    apbridge-latency usec:      min=1620 max=1982 average=1882.099976 jitter=362
<br>    gpbridge-latency usec:      min=56 max=57 average=57.099998 jitter=1
<br>
<br>
<br>    1970-1-1 0:12:37
<br>    test:                       transfer
<br>    path:                       1-5.17
<br>    size:                       100
<br>    iterations:                 10
<br>    errors:                     0
<br>    async:                      Disabled
<br>    requests per-sec:           min=397, max=538, average=461.700012, jitter=141
<br>    ap-throughput B/s:          min=92104 max=124816 average=106998.898438 jitter=32712
<br>    ap-latency usec:            min=1856 max=2514 average=2185.699951 jitter=658
<br>    apbridge-latency usec:      min=1460 max=2296 average=1828.599976 jitter=836
<br>    gpbridge-latency usec:      min=56 max=57 average=57.099998 jitter=1
<br><p></p><div class="separator"></div><br><p><h2>goldfish</h2></p>Audio
<br>-----
<br>- Move to using the ALSA framework not faking it
<br>- Fix the wrong user page DMA (moving to ALSA may fix that too)
<br>
<br>NAND
<br>----
<br>- Remove excess checking of parameters in calls
<br>- Use dma coherent memory not kmalloc/__pa for the memory (this is just
<br>  a cleanliness issue not a correctness one)
<br>
<br><p></p><div class="separator"></div><br><p><h2>Documentation</h2></p>$Id: README.act2000,v 1.3 2000/08/06 09:22:51 armin Exp $
<br>
<br>This document describes the ACT2000 driver for the
<br>IBM Active 2000 ISDN card.
<br>
<br>There are 3 Types of this card available. A ISA-, MCA-, and PCMCIA-Bus
<br>Version. Currently, only the ISA-Bus version of the card is supported.
<br>However MCA and PCMCIA will follow soon.
<br>
<br>The ISA-Bus Version uses 8 IO-ports. The base port address has to be set
<br>manually using the DIP switches.
<br>
<br>Setting up the DIP switches for the IBM Active 2000 ISDN card:
<br>
<br>	 Note: S5 and S6 always set off!
<br>
<br>     S1  S2  S3  S4  Base-port
<br>     on  on  on  on  0x0200 (Factory default)
<br>     off on  on  on  0x0240 
<br>     on  off on  on  0x0280 
<br>     off off on  on  0x02c0 
<br>     on  on  off on  0x0300 
<br>     off on  off on  0x0340 
<br>     on  off off on  0x0380 
<br>     on  on  on  off 0xcfe0
<br>     off on  on  off 0xcfa0 
<br>     on  off on  off 0xcf60 
<br>     off off on  off 0xcf20 
<br>     on  on  off off 0xcee0 
<br>     off on  off off 0xcea0 
<br>     on  off off off 0xce60 
<br>     off off off off Card disabled 
<br>
<br>IRQ is configured by software. Possible values are:
<br>
<br>  3, 5, 7, 10, 11, 12, 15 and none (polled mode)
<br>
<br>
<br>The ACT2000 driver may either be built into the kernel or as a module.
<br>Initialization depends on how the driver is built:
<br>
<br>Driver built into the kernel:
<br>
<br>  The ACT2000 driver can be configured using the commandline-feature while
<br>  loading the kernel with LILO or LOADLIN. It accepts the following syntax:
<br>
<br>  act2000=b,p,i[,idstring]
<br>
<br>  where
<br>
<br>    b = Bus-Type      (1=ISA, 2=MCA, 3=PCMCIA)
<br>    p = portbase      (-1 means autoprobe)
<br>    i = Interrupt     (-1 means use next free IRQ, 0 means polled mode)
<br>
<br>  The idstring is an arbitrary string used for referencing the card
<br>  by the actctrl tool later.
<br>
<br>  Defaults used, when no parameters given at all:
<br>
<br>    1,-1,-1,""
<br>
<br>  which means: Autoprobe for an ISA card, use next free IRQ, let the
<br>  ISDN linklevel fill the IdString (usually "line0" for the first card).
<br> 
<br>  If you like to use more than one card, you can use the program
<br>  "actctrl" from the utility-package to configure additional cards.
<br>
<br>  Using the "actctrl"-utility, portbase and irq can also be changed
<br>  during runtime. The D-channel protocol is configured by the "dproto"
<br>  option of the "actctrl"-utility after loading the firmware into the
<br>  card's memory using the "actctrl"-utility.
<br>
<br>Driver built as module:
<br>
<br>  The module act2000.o can be configured during modprobe (insmod) by
<br>  appending its parameters to the modprobe resp. insmod commandline.
<br>  The following syntax is accepted:
<br>
<br>    act_bus=b act_port=p act_irq=i act_id=idstring
<br>
<br>  where b, p, i and idstring have the same meanings as the parameters
<br>  described for the builtin version above.
<br>
<br>  Using the "actctrl"-utility, the same features apply to the modularized
<br>  version as to the kernel-builtin one. (i.e. loading of firmware and
<br>  configuring the D-channel protocol)
<br>
<br>Loading the firmware into the card:
<br>
<br>  The firmware is supplied together with the isdn4k-utils package. It
<br>  can be found in the subdirectory act2000/firmware/
<br>
<br>  Assuming you have installed the utility-package correctly, the firmware
<br>  will be downloaded into the card using the following command:
<br>
<br>    actctrl -d idstring load /etc/isdn/bip11.btl
<br>
<br>  where idstring is the Name of the card, given during insmod-time or
<br>  (for kernel-builtin driver) on the kernel commandline. If only one
<br>  ISDN card is used, the -d isdstrin may be omitted.
<br>
<br>  For further documentation (adding more IBM Active 2000 cards), refer to
<br>  the manpage actctrl.8 which is included in the isdn4k-utils package.
<br>
<br><p></p><div class="separator"></div><br><p><h2>Documentation</h2></p>------------------------------------------------------------------------------
<br> README file for the PCBIT-D Device Driver.
<br>------------------------------------------------------------------------------
<br>
<br>The PCBIT is a Euro ISDN adapter manufactured in Portugal by Octal and
<br>developed in cooperation with Portugal Telecom and Inesc.
<br>The driver interfaces with the standard kernel isdn facilities
<br>originally developed by Fritz Elfert in the isdn4linux project.
<br>
<br>The common versions of the pcbit board require a firmware that is 
<br>distributed (and copyrighted) by the manufacturer. To load this
<br>firmware you need "pcbitctl" available on the standard isdn4k-utils
<br>package or in the pcbit package available in:
<br>
<br>ftp://ftp.di.fc.ul.pt/pub/systems/Linux/isdn
<br>
<br>Known Limitations:
<br>
<br>- The board reset procedure is at the moment incorrect and will only
<br>allow you to load the firmware after a hard reset.
<br>
<br>- Only HDLC in B-channels is supported at the moment. There is no
<br>current support for X.25 in B or D channels nor LAPD in B
<br>channels. The main reason is that these two other protocol modes have,
<br>to my knowledge, very little use. If you want to see them implemented
<br>*do* send me a mail.
<br>
<br>- The driver often triggers errors in the board that I and the
<br>manufacturer believe to be caused by bugs in the firmware. The current
<br>version includes several procedures for error recovery that should
<br>allow normal operation. Plans for the future include cooperation with
<br>the manufacturer in order to solve this problem.
<br>
<br>Information/hints/help can be obtained in the linux isdn
<br>mailing list (isdn4linux@listserv.isdn4linux.de) or directly from me.
<br>
<br>regards,
<br>  Pedro.
<br>		
<br>&lt;roque@di.fc.ul.pt&gt;
<br><p></p><div class="separator"></div><br><p><h2>Documentation</h2></p>Welcome to Beta Release 2 of the combination ISDN driver for SpellCaster's
<br>ISA ISDN adapters. Please note this release 2 includes support for the
<br>DataCommute/BRI and TeleCommute/BRI adapters only and any other use is 
<br>guaranteed to fail. If you have a DataCommute/PRI installed in the test
<br>computer, we recommend removing it as it will be detected but will not
<br>be usable.  To see what we have done to Beta Release 2, see section 3.
<br>
<br>Speaking of guarantees, THIS IS BETA SOFTWARE and as such contains
<br>bugs and defects either known or unknown. Use this software at your own
<br>risk. There is NO SUPPORT for this software. Some help may be available
<br>through the web site or the mailing list but such support is totally at
<br>our own option and without warranty. If you choose to assume all and
<br>total risk by using this driver, we encourage you to join the beta
<br>mailing list.
<br>
<br>To join the Linux beta mailing list, send a message to:
<br>majordomo@spellcast.com with the words "subscribe linux-beta" as the only
<br>contents of the message. Do not include a signature. If you choose to
<br>remove yourself from this list at a later date, send another message to
<br>the same address with the words "unsubscribe linux-beta" as its only
<br>contents.
<br>
<br>TABLE OF CONTENTS
<br>-----------------
<br>	1. Introduction
<br>	 1.1 What is ISDN4Linux?
<br>	 1.2 What is different between this driver and previous drivers?
<br>	 1.3 How do I setup my system with the correct software to use
<br>	     this driver release?
<br>	
<br>	2. Basic Operations
<br>	 2.1 Unpacking and installing the driver
<br>	 2.2 Read the man pages!!!
<br>	 2.3 Installing the driver
<br>	 2.4 Removing the driver
<br>	 2.5 What to do if it doesn't load
<br>	 2.6 How to setup ISDN4Linux with the driver
<br>
<br>	3. Beta Change Summaries and Miscellaneous Notes
<br>
<br>1. Introduction
<br>---------------
<br>
<br>The revision 2 Linux driver for SpellCaster ISA ISDN adapters is built
<br>upon ISDN4Linux available separately or as included in Linux 2.0 and later.
<br>The driver will support a maximum of 4 adapters in any one system of any
<br>type including DataCommute/BRI, DataCommute/PRI and TeleCommute/BRI for a
<br>maximum of 92 channels for host. The driver is supplied as a module in
<br>source form and needs to be complied before it can be used. It has been
<br>tested on Linux 2.0.20.
<br>
<br>1.1 What Is ISDN4Linux
<br>
<br>ISDN4Linux is a driver and set of tools used to access and use ISDN devices
<br>on a Linux platform in a common and standard way. It supports HDLC and PPP
<br>protocols and offers channel bundling and MLPPP support. To use ISDN4Linux
<br>you need to configure your kernel for ISDN support and get the ISDN4Linux
<br>tool kit from our web site.
<br>
<br>ISDN4Linux creates a channel pool from all of the available ISDN channels
<br>and therefore can function across adapters. When an ISDN4Linux compliant
<br>driver (such as ours) is loaded, all of the channels go into a pool and
<br>are used on a first-come first-served basis. In addition, individual
<br>channels can be specifically bound to particular interfaces.
<br>
<br>1.2 What is different between this driver and previous drivers?
<br>
<br>The revision 2 driver besides adopting the ISDN4Linux architecture has many
<br>subtle and not so subtle functional differences from previous releases. These
<br>include:
<br>	- More efficient shared memory management combined with a simpler
<br>	  configuration. All adapters now use only 16Kbytes of shared RAM
<br>	  versus between 16K and 64K. New methods for using the shared RAM
<br>	  allow us to utilize all of the available RAM on the adapter through
<br>	  only one 16K page.
<br>	- Better detection of available upper memory. The probing routines
<br>	  have been improved to better detect available shared RAM pages and
<br>	  used pages are now locked.
<br>	- Decreased loading time and a wider range of I/O ports probed.
<br>	  We have significantly reduced the amount of time it takes to load
<br>	  the driver and at the same time doubled the number of I/O ports
<br>	  probed increasing the likelihood of finding an adapter.
<br>	- We now support all ISA adapter models with a single driver instead
<br>	  of separate drivers for each model. The revision 2 driver supports
<br>	  the DataCommute/BRI, DataCommute/PRI and TeleCommute/BRI in any
<br>	  combination up to a maximum of four adapters per system.
<br>	- On board PPP protocol support has been removed in favour of the
<br>	  sync-PPP support used in ISDN4Linux. This means more control of
<br>	  the protocol parameters, faster negotiation time and a more
<br>	  familiar interface.
<br>
<br>1.3 How do I setup my system with the correct software to use
<br>    this driver release?
<br>
<br>Before you can compile, install and use the SpellCaster ISA ISDN driver, you
<br>must ensure that the following software is installed, configured and running:
<br>
<br>	- Linux kernel 2.0.20 or later with the required init and ps
<br>	  versions. Please see your distribution vendor for the correct
<br>	  utility packages. The latest kernel is available from
<br>	  ftp://sunsite.unc.edu/pub/Linux/kernel/v2.0/
<br>
<br>	- The latest modules package (modules-2.0.0.tar.gz) from
<br>	  ftp://sunsite.unc.edu/pub/Linux/kernel/modules-2.0.0.tar.gz
<br>
<br>	- The ISDN4Linux tools available from 
<br>	  ftp://ftp.franken.de/pub/isdn4linux/v2.0/isdn4k-utils-2.0.tar.gz
<br>	  This package may fail to compile for you so you can alternatively
<br>	  get a pre-compiled version from
<br>	  ftp://ftp.spellcast.com/pub/drivers/isdn4linux/isdn4k-bin-2.0.tar.gz
<br>
<br>
<br>2. Basic Operations
<br>-------------------
<br>
<br>2.1 Unpacking and installing the driver
<br>
<br>	1. As root, create a directory in a convenient place. We suggest
<br>	   /usr/src/spellcaster.
<br>	
<br>	2. Unpack the archive with :
<br>		tar xzf sc-n.nn.tar.gz -C /usr/src/spellcaster
<br>	
<br>	3. Change directory to /usr/src/spellcaster
<br>
<br>	4. Read the README and RELNOTES files.
<br>
<br>	5. Run 'make' and if all goes well, run 'make install'.
<br>
<br>2.2 Read the man pages!!!
<br>
<br>Make sure you read the scctrl(8) and sc(4) manual pages before continuing
<br>any further. Type 'man 8 scctrl' and 'man 4 sc'.
<br>
<br>2.3 Installing the driver
<br>
<br>To install the driver, type '/sbin/insmod sc' as root. sc(4) details options
<br>you can specify but you shouldn't need to use any unless this doesn't work.
<br>
<br>Make sure the driver loaded and detected all of the adapters by typing
<br>'dmesg'.
<br>
<br>The driver can be configured so that it is loaded upon startup.  To do this, 
<br>edit the file "/etc/modules/'uname -f'/'uname -v'" and insert the driver name
<br>"sc" into this file.
<br>
<br>2.4 Removing the driver
<br>
<br>To remove the driver, delete any interfaces that may exist (see isdnctrl(8)
<br>for more on this) and then type '/sbin/rmmod sc'.
<br>
<br>2.5 What to do if it doesn't load
<br>
<br>If, when you try to install the driver, you get a message mentioning
<br>'register_isdn' then you do not have the ISDN4Linux system installed. Please
<br>make sure that ISDN support is configured in the kernel.
<br>
<br>If you get a message that says 'initialization of sc failed', then the
<br>driver failed to detect an adapter or failed to find resources needed such
<br>as a free IRQ line or shared memory segment. If you are sure there are free
<br>resources available, use the insmod options detailed in sc(4) to override
<br>the probing function.  
<br>
<br>Upon testing, the following problem was noted, the driver would load without
<br>problems, but the board would not respond beyond that point.  When a check was 
<br>done with 'cat /proc/interrupts' the interrupt count for sc was 0.  In the event 
<br>of this problem, change the BIOS settings so that the interrupts in question are
<br>reserved for ISA use only.   
<br>
<br>
<br>2.6 How to setup ISDN4Linux with the driver
<br>
<br>There are three main configurations which you can use with the driver:
<br>
<br>A)	Basic HDLC connection
<br>B)	PPP connection
<br>C)	MLPPP connection
<br>
<br>It should be mentioned here that you may also use a tty connection if you
<br>desire. The Documentation directory of the isdn4linux subsystem offers good
<br>documentation on this feature.
<br>
<br>A) 10 steps to the establishment of a basic HDLC connection
<br>-----------------------------------------------------------
<br>
<br>- please open the isdn-hdlc file in the examples directory and follow along...
<br>	
<br>	This file is a script used to configure a BRI ISDN TA to establish a 
<br>	basic HDLC connection between its two channels.  Two network 
<br>	interfaces are created and two routes added between the channels.
<br>
<br>	i)   using the isdnctrl utility, add an interface with "addif" and 
<br>	     name it "isdn0"
<br>	ii)  add the outgoing and inbound telephone numbers
<br>	iii) set the Layer 2 protocol to hdlc
<br>	iv)  set the eaz of the interface to be the phone number of that 
<br>	     specific channel
<br>	v)   to turn the callback features off, set the callback to "off" and
<br>	     the callback delay (cbdelay) to 0.
<br>	vi)  the hangup timeout can be set to a specified number of seconds
<br>	vii) the hangup upon incoming call can be set on or off 
<br>	viii) use the ifconfig command to bring up the network interface with 
<br>	      a specific IP address and point to point address
<br>	ix)  add a route to the IP address through the isdn0 interface
<br>	x)   a ping should result in the establishment of the connection
<br>
<br>	
<br>B) Establishment of a PPP connection
<br>------------------------------------
<br>
<br>- please open the isdn-ppp file in the examples directory and follow along...
<br>	
<br>	This file is a script used to configure a BRI ISDN TA to establish a 
<br>	PPP connection 	between the two channels.  The file is almost 
<br>	identical to the HDLC connection example except that the packet 
<br>	encapsulation type has to be set.
<br>	
<br>	use the same procedure as in the HDLC connection from steps i) to 
<br>	iii) then, after the Layer 2 protocol is set, set the encapsulation 
<br>	"encap" to syncppp. With this done, the rest of the steps, iv) to x) 
<br>	can be followed from above.
<br>
<br>	Then, the ipppd (ippp daemon) must be setup:
<br>	
<br>	xi)   use the ipppd function found in /sbin/ipppd to set the following:
<br>	xii)  take out (minus) VJ compression and bsd compression
<br>	xiii) set the mru size to 2000
<br>	xiv)  link the two /dev interfaces to the daemon
<br>
<br>NOTE:  A "*" in the inbound telephone number specifies that a call can be 
<br>accepted on any number.
<br>
<br>C) Establishment of a MLPPP connection
<br>--------------------------------------
<br>
<br>- please open the isdn-mppp file in the examples directory and follow along...
<br>	
<br>	This file is a script used to configure a BRI ISDN TA to accept a 
<br>	Multi Link PPP connection. 
<br>	
<br>	i)   using the isdnctrl utility, add an interface with "addif" and 
<br>	     name it "ippp0"
<br>	ii)  add the inbound telephone number
<br>	iii) set the Layer 2 protocol to hdlc and the Layer 3 protocol to 
<br>	     trans (transparent)
<br>	iv)  set the packet encapsulation to syncppp
<br>	v)   set the eaz of the interface to be the phone number of that 
<br>	     specific channel
<br>	vi)  to turn the callback features off, set the callback to "off" and
<br>	     the callback delay (cbdelay) to 0.
<br>	vi)  the hangup timeout can be set to a specified number of seconds
<br>	vii) the hangup upon incoming call can be set on or off 
<br>	viii) add a slave interface and name it "ippp32" for example
<br>	ix)  set the similar parameters for the ippp32 interface
<br>	x)   use the ifconfig command to bring-up the ippp0 interface with a 
<br>	     specific IP address and point to point address
<br>	xi)  add a route to the IP address through the ippp0 interface
<br>	xii) use the ipppd function found in /sbin/ipppd to set the following:
<br>	xiii) take out (minus) bsd compression
<br>	xiv) set the mru size to 2000
<br>	xv)  add (+) the multi-link function "+mp"
<br>	xvi)  link the two /dev interfaces to the daemon
<br>
<br>NOTE:  To use the MLPPP connection to dial OUT to a MLPPP connection, change 
<br>the inbound telephone numbers to the outgoing telephone numbers of the MLPPP 
<br>host.
<br>
<br>	
<br>3. Beta Change Summaries and Miscellaneous Notes
<br>------------------------------------------------
<br>When using the "scctrl" utility to upload firmware revisions on the board,
<br>please note that the byte count displayed at the end of the operation may be
<br>different from the total number of bytes in the "dcbfwn.nn.sr" file. Please
<br>disregard the displayed byte count.
<br>
<br>It was noted that in Beta Release 1, the module would fail to load and result
<br>in a segmentation fault when 'insmod'ed. This problem was created when one of
<br>the isdn4linux parameters, (isdn_ctrl, data field) was filled in. In some
<br>cases, this data field was NULL, and was left unchecked, so when it was
<br>referenced... segv. The bug has been fixed around line 63-68 of event.c.
<br>
<br><p></p><div class="separator"></div><br><p><h2>Documentation</h2></p>$Id: README.icn,v 1.7 2000/08/06 09:22:51 armin Exp $
<br>
<br>You can get the ICN-ISDN-card from:
<br>
<br>Thinking Objects Software GmbH
<br>Versbacher Röthe 159
<br>97078 Würzburg
<br>Tel: +49 931 2877950
<br>Fax: +49 931 2877951
<br>
<br>email info@think.de
<br>WWW   http:/www.think.de
<br>
<br>
<br>The card communicates with the PC by two interfaces:
<br>  1. A range of 4 successive port-addresses, whose base address can be 
<br>     configured with the switches.
<br>  2. A memory window with 16KB-256KB size, which can be setup in 16k steps
<br>     over the whole range of 16MB. Isdn4linux only uses a 16k window.
<br>     The base address of the window can be configured when loading
<br>     the lowlevel-module (see README). If using more than one card,
<br>     all cards are mapped to the same window and activated as needed.
<br>
<br>Setting up the IO-address dipswitches for the ICN-ISDN-card:
<br>
<br>  Two types of cards exist, one with dip-switches and one with
<br>  hook-switches.
<br>
<br>  1. Setting for the card with hook-switches:
<br>
<br>     (0 = switch closed, 1 = switch open)
<br>
<br>     S3 S2 S1  Base-address
<br>      0  0  0  0x300
<br>      0  0  1  0x310
<br>      0  1  0  0x320 (Default for isdn4linux)
<br>      0  1  1  0x330
<br>      1  0  0  0x340
<br>      1  0  1  0x350
<br>      1  1  0  0x360
<br>      1  1  1  NOT ALLOWED!
<br>    
<br>  2. Setting for the card with dip-switches:
<br>
<br>     (0 = switch closed, 1 = switch open)
<br>
<br>     S1 S2 S3 S4  Base-Address
<br>      0  0  0  0  0x300
<br>      0  0  0  1  0x310
<br>      0  0  1  0  0x320 (Default for isdn4linux)
<br>      0  0  1  1  0x330
<br>      0  1  0  0  0x340
<br>      0  1  0  1  0x350
<br>      0  1  1  0  0x360
<br>      0  1  1  1  NOT ALLOWED!
<br>      1  0  0  0  0x308
<br>      1  0  0  1  0x318
<br>      1  0  1  0  0x328
<br>      1  0  1  1  0x338
<br>      1  1  0  0  0x348
<br>      1  1  0  1  0x358
<br>      1  1  1  0  0x368
<br>      1  1  1  1  NOT ALLOWED!
<br>
<br>The ICN driver may be built into the kernel or as a module. Initialization
<br>depends on how the driver is built:
<br>
<br>Driver built into the kernel:
<br>
<br>  The ICN driver can be configured using the commandline-feature while
<br>  loading the kernel with LILO or LOADLIN. It accepts the following syntax:
<br>
<br>  icn=p,m[,idstring1[,idstring2]]
<br>
<br>  where
<br>
<br>    p = portbase      (default: 0x320)
<br>    m = shared memory (default: 0xd0000)
<br>
<br>  When using the ICN double card (4B), you MUST define TWO idstrings.
<br>  idstring must start with a character! There is no way for the driver
<br>  to distinguish between a 2B and 4B type card. Therefore, by supplying
<br>  TWO idstrings, you tell the driver that you have a 4B installed.
<br>  
<br>  If you like to use more than one card, you can use the program
<br>  "icnctrl" from the utility-package to configure additional cards.
<br>  You need to configure shared memory only once, since the icn-driver
<br>  maps all cards into the same address-space.
<br>
<br>  Using the "icnctrl"-utility, portbase and shared memory can also be
<br>  changed during runtime.
<br>
<br>  The D-channel protocol is configured by loading different firmware
<br>  into the card's memory using the "icnctrl"-utility.
<br>
<br>
<br>Driver built as module:
<br>
<br>  The module icn.o can be configured during "insmod'ing" it by
<br>  appending its parameters to the insmod-commandline. The following
<br>  syntax is accepted:
<br>
<br>    portbase=p membase=m icn_id=idstring [icn_id2=idstring2]
<br>
<br>  where p, m, idstring1 and idstring2 have the same meanings as the
<br>  parameters described for the kernel-version above.
<br>      
<br>  When using the ICN double card (4B), you MUST define TWO idstrings.
<br>  idstring must start with a character! There is no way for the driver
<br>  to distinguish between a 2B and 4B type card. Therefore, by supplying
<br>  TWO idstrings, you tell the driver that you have a 4B installed.
<br>  
<br>  Using the "icnctrl"-utility, the same features apply to the modularized
<br>  version like to the kernel-builtin one.
<br>
<br>  The D-channel protocol is configured by loading different firmware
<br>  into the card's memory using the "icnctrl"-utility.
<br>
<br>Loading the firmware into the card:
<br>
<br>  The firmware is supplied together with the isdn4k-utils package. It
<br>  can be found in the subdirectory icnctrl/firmware/
<br>
<br>  There are 3 files:
<br>
<br>    loadpg.bin   - Image of the bootstrap loader.
<br>    pc_1t_ca.bin - Image of firmware for german 1TR6 protocol.
<br>    pc_eu_ca.bin - Image if firmware for EDSS1 (Euro-ISDN) protocol.
<br>
<br>  Assuming you have installed the utility-package correctly, the firmware
<br>  will be downloaded into the 2B-card using the following command:
<br>
<br>    icnctrl -d Idstring load /etc/isdn/loadpg.bin /etc/isdn/pc_XX_ca.bin
<br>
<br>  where XX is either "1t" or "eu", depending on the D-Channel protocol
<br>  used on your S0-bus and Idstring is the Name of the card, given during
<br>  insmod-time or (for kernel-builtin driver) on the kernel commandline.
<br>
<br>  To load a 4B-card, the same command is used, except a second firmware
<br>  file is appended to the commandline of icnctrl.
<br>
<br>  -&gt; After downloading firmware, the two LEDs at the back cover of the card
<br>     (ICN-4B: 4 LEDs) must be blinking intermittently now. If a connection
<br>     is up, the corresponding led is lit continuously.
<br>
<br>  For further documentation (adding more ICN-cards), refer to the manpage
<br>  icnctrl.8 which is included in the isdn4k-utils package.
<br>
<br><p></p><div class="separator"></div><br><p><h2>fsl-mc</h2></p>Copyright (C) 2015 Freescale Semiconductor Inc.
<br>
<br>DPAA2 (Data Path Acceleration Architecture Gen2)
<br>------------------------------------------------
<br>
<br>This document provides an overview of the Freescale DPAA2 architecture
<br>and how it is integrated into the Linux kernel.
<br>
<br>Contents summary
<br>   -DPAA2 overview
<br>   -Overview of DPAA2 objects
<br>   -DPAA2 Linux driver architecture overview
<br>        -bus driver
<br>        -DPRC driver
<br>        -allocator
<br>        -DPIO driver
<br>        -Ethernet
<br>        -MAC
<br>
<br>DPAA2 Overview
<br>--------------
<br>
<br>DPAA2 is a hardware architecture designed for high-speeed network
<br>packet processing.  DPAA2 consists of sophisticated mechanisms for
<br>processing Ethernet packets, queue management, buffer management,
<br>autonomous L2 switching, virtual Ethernet bridging, and accelerator
<br>(e.g. crypto) sharing.
<br>
<br>A DPAA2 hardware component called the Management Complex (or MC) manages the
<br>DPAA2 hardware resources.  The MC provides an object-based abstraction for
<br>software drivers to use the DPAA2 hardware.
<br>
<br>The MC uses DPAA2 hardware resources such as queues, buffer pools, and
<br>network ports to create functional objects/devices such as network
<br>interfaces, an L2 switch, or accelerator instances.
<br>
<br>The MC provides memory-mapped I/O command interfaces (MC portals)
<br>which DPAA2 software drivers use to operate on DPAA2 objects:
<br>
<br>The diagram below shows an overview of the DPAA2 resource management
<br>architecture:
<br>
<br>         +--------------------------------------+
<br>         |                  OS                  |
<br>         |                        DPAA2 drivers |
<br>         |                             |        |
<br>         +-----------------------------|--------+
<br>                                       |
<br>                                       | (create,discover,connect
<br>                                       |  config,use,destroy)
<br>                                       |
<br>                         DPAA2         |
<br>         +------------------------| mc portal |-+
<br>         |                             |        |
<br>         |   +- - - - - - - - - - - - -V- - -+  |
<br>         |   |                               |  |
<br>         |   |   Management Complex (MC)     |  |
<br>         |   |                               |  |
<br>         |   +- - - - - - - - - - - - - - - -+  |
<br>         |                                      |
<br>         | Hardware                  Hardware   |
<br>         | Resources                 Objects    |
<br>         | ---------                 -------    |
<br>         | -queues                   -DPRC      |
<br>         | -buffer pools             -DPMCP     |
<br>         | -Eth MACs/ports           -DPIO      |
<br>         | -network interface        -DPNI      |
<br>         |  profiles                 -DPMAC     |
<br>         | -queue portals            -DPBP      |
<br>         | -MC portals                ...       |
<br>         |  ...                                 |
<br>         |                                      |
<br>         +--------------------------------------+
<br>
<br>The MC mediates operations such as create, discover,
<br>connect, configuration, and destroy.  Fast-path operations
<br>on data, such as packet transmit/receive, are not mediated by
<br>the MC and are done directly using memory mapped regions in
<br>DPIO objects.
<br>
<br>Overview of DPAA2 Objects
<br>-------------------------
<br>The section provides a brief overview of some key DPAA2 objects.
<br>A simple scenario is described illustrating the objects involved
<br>in creating a network interfaces.
<br>
<br>-DPRC (Datapath Resource Container)
<br>
<br>    A DPRC is a container object that holds all the other
<br>    types of DPAA2 objects.  In the example diagram below there
<br>    are 8 objects of 5 types (DPMCP, DPIO, DPBP, DPNI, and DPMAC)
<br>    in the container.
<br>
<br>    +---------------------------------------------------------+
<br>    | DPRC                                                    |
<br>    |                                                         |
<br>    |  +-------+  +-------+  +-------+  +-------+  +-------+  |
<br>    |  | DPMCP |  | DPIO  |  | DPBP  |  | DPNI  |  | DPMAC |  |
<br>    |  +-------+  +-------+  +-------+  +---+---+  +---+---+  |
<br>    |  | DPMCP |  | DPIO  |                                   |
<br>    |  +-------+  +-------+                                   |
<br>    |  | DPMCP |                                              |
<br>    |  +-------+                                              |
<br>    |                                                         |
<br>    +---------------------------------------------------------+
<br>
<br>    From the point of view of an OS, a DPRC behaves similar to a plug and
<br>    play bus, like PCI.  DPRC commands can be used to enumerate the contents
<br>    of the DPRC, discover the hardware objects present (including mappable
<br>    regions and interrupts).
<br>
<br>     DPRC.1 (bus)
<br>       |
<br>       +--+--------+-------+-------+-------+
<br>          |        |       |       |       |
<br>        DPMCP.1  DPIO.1  DPBP.1  DPNI.1  DPMAC.1
<br>        DPMCP.2  DPIO.2
<br>        DPMCP.3
<br>
<br>    Hardware objects can be created and destroyed dynamically, providing
<br>    the ability to hot plug/unplug objects in and out of the DPRC.
<br>
<br>    A DPRC has a mappable MMIO region (an MC portal) that can be used
<br>    to send MC commands.  It has an interrupt for status events (like
<br>    hotplug).
<br>
<br>    All objects in a container share the same hardware "isolation context".
<br>    This means that with respect to an IOMMU the isolation granularity
<br>    is at the DPRC (container) level, not at the individual object
<br>    level.
<br>
<br>    DPRCs can be defined statically and populated with objects
<br>    via a config file passed to the MC when firmware starts
<br>    it.  There is also a Linux user space tool called "restool"
<br>    that can be used to create/destroy containers and objects
<br>    dynamically.
<br>
<br>-DPAA2 Objects for an Ethernet Network Interface
<br>
<br>    A typical Ethernet NIC is monolithic-- the NIC device contains TX/RX
<br>    queuing mechanisms, configuration mechanisms, buffer management,
<br>    physical ports, and interrupts.  DPAA2 uses a more granular approach
<br>    utilizing multiple hardware objects.  Each object provides specialized
<br>    functions. Groups of these objects are used by software to provide
<br>    Ethernet network interface functionality.  This approach provides
<br>    efficient use of finite hardware resources, flexibility, and
<br>    performance advantages.
<br>
<br>    The diagram below shows the objects needed for a simple
<br>    network interface configuration on a system with 2 CPUs.
<br>
<br>              +---+---+ +---+---+
<br>                 CPU0     CPU1
<br>              +---+---+ +---+---+
<br>                  |         |
<br>              +---+---+ +---+---+
<br>                 DPIO     DPIO
<br>              +---+---+ +---+---+
<br>                    \     /
<br>                     \   /
<br>                      \ /
<br>                   +---+---+
<br>                      DPNI  --- DPBP,DPMCP
<br>                   +---+---+
<br>                       |
<br>                       |
<br>                   +---+---+
<br>                     DPMAC
<br>                   +---+---+
<br>                       |
<br>                    port/PHY
<br>
<br>    Below the objects are described.  For each object a brief description
<br>    is provided along with a summary of the kinds of operations the object
<br>    supports and a summary of key resources of the object (MMIO regions
<br>    and IRQs).
<br>
<br>       -DPMAC (Datapath Ethernet MAC): represents an Ethernet MAC, a
<br>        hardware device that connects to an Ethernet PHY and allows
<br>        physical transmission and reception of Ethernet frames.
<br>           -MMIO regions: none
<br>           -IRQs: DPNI link change
<br>           -commands: set link up/down, link config, get stats,
<br>            IRQ config, enable, reset
<br>
<br>       -DPNI (Datapath Network Interface): contains TX/RX queues,
<br>        network interface configuration, and RX buffer pool configuration
<br>        mechanisms.  The TX/RX queues are in memory and are identified by
<br>        queue number.
<br>           -MMIO regions: none
<br>           -IRQs: link state
<br>           -commands: port config, offload config, queue config,
<br>            parse/classify config, IRQ config, enable, reset
<br>
<br>       -DPIO (Datapath I/O): provides interfaces to enqueue and dequeue
<br>        packets and do hardware buffer pool management operations.  The DPAA2
<br>        architecture separates the mechanism to access queues (the DPIO object)
<br>        from the queues themselves.  The DPIO provides an MMIO interface to
<br>        enqueue/dequeue packets.  To enqueue something a descriptor is written
<br>        to the DPIO MMIO region, which includes the target queue number.
<br>        There will typically be one DPIO assigned to each CPU.  This allows all
<br>        CPUs to simultaneously perform enqueue/dequeued operations.  DPIOs are
<br>        expected to be shared by different DPAA2 drivers.
<br>           -MMIO regions: queue operations, buffer management
<br>           -IRQs: data availability, congestion notification, buffer
<br>                  pool depletion
<br>           -commands: IRQ config, enable, reset
<br>
<br>       -DPBP (Datapath Buffer Pool): represents a hardware buffer
<br>        pool.
<br>           -MMIO regions: none
<br>           -IRQs: none
<br>           -commands: enable, reset
<br>
<br>       -DPMCP (Datapath MC Portal): provides an MC command portal.
<br>        Used by drivers to send commands to the MC to manage
<br>        objects.
<br>           -MMIO regions: MC command portal
<br>           -IRQs: command completion
<br>           -commands: IRQ config, enable, reset
<br>
<br>    Object Connections
<br>    ------------------
<br>    Some objects have explicit relationships that must
<br>    be configured:
<br>
<br>       -DPNI &lt;--&gt; DPMAC
<br>       -DPNI &lt;--&gt; DPNI
<br>       -DPNI &lt;--&gt; L2-switch-port
<br>          A DPNI must be connected to something such as a DPMAC,
<br>          another DPNI, or L2 switch port.  The DPNI connection
<br>          is made via a DPRC command.
<br>
<br>              +-------+  +-------+
<br>              | DPNI  |  | DPMAC |
<br>              +---+---+  +---+---+
<br>                  |          |
<br>                  +==========+
<br>
<br>       -DPNI &lt;--&gt; DPBP
<br>          A network interface requires a 'buffer pool' (DPBP
<br>          object) which provides a list of pointers to memory
<br>          where received Ethernet data is to be copied.  The
<br>          Ethernet driver configures the DPBPs associated with
<br>          the network interface.
<br>
<br>    Interrupts
<br>    ----------
<br>    All interrupts generated by DPAA2 objects are message
<br>    interrupts.  At the hardware level message interrupts
<br>    generated by devices will normally have 3 components--
<br>    1) a non-spoofable 'device-id' expressed on the hardware
<br>    bus, 2) an address, 3) a data value.
<br>
<br>    In the case of DPAA2 devices/objects, all objects in the
<br>    same container/DPRC share the same 'device-id'.
<br>    For ARM-based SoC this is the same as the stream ID.
<br>
<br>
<br>DPAA2 Linux Driver Overview
<br>---------------------------
<br>
<br>This section provides an overview of the Linux kernel drivers for
<br>DPAA2-- 1) the bus driver and associated "DPAA2 infrastructure"
<br>drivers and 2) functional object drivers (such as Ethernet).
<br>
<br>As described previously, a DPRC is a container that holds the other
<br>types of DPAA2 objects.  It is functionally similar to a plug-and-play
<br>bus controller.
<br>
<br>Each object in the DPRC is a Linux "device" and is bound to a driver.
<br>The diagram below shows the Linux drivers involved in a networking
<br>scenario and the objects bound to each driver.  A brief description
<br>of each driver follows.
<br>
<br>                                             +------------+
<br>                                             | OS Network |
<br>                                             |   Stack    |
<br>                 +------------+              +------------+
<br>                 | Allocator  |. . . . . . . |  Ethernet  |
<br>                 |(DPMCP,DPBP)|              |   (DPNI)   |
<br>                 +-.----------+              +---+---+----+
<br>                  .          .                   ^   |
<br>                 .            .     &lt;data avail, |   |&lt;enqueue,
<br>                .              .     tx confirm&gt; |   | dequeue&gt;
<br>    +-------------+             .                |   |
<br>    | DPRC driver |              .           +---+---V----+     +---------+
<br>    |   (DPRC)    |               . . . . . .| DPIO driver|     |   MAC   |
<br>    +----------+--+                          |  (DPIO)    |     | (DPMAC) |
<br>               |                             +------+-----+     +-----+---+
<br>               |&lt;dev add/remove&gt;                    |                 |
<br>               |                                    |                 |
<br>          +----+--------------+                     |              +--+---+
<br>          |   MC-bus driver   |                     |              | PHY  |
<br>          |                   |                     |              |driver|
<br>          | /soc/fsl-mc       |                     |              +--+---+
<br>          +-------------------+                     |                 |
<br>                                                    |                 |
<br> ================================ HARDWARE =========|=================|======
<br>                                                  DPIO                |
<br>                                                    |                 |
<br>                                                  DPNI---DPBP         |
<br>                                                    |                 |
<br>                                                  DPMAC               |
<br>                                                    |                 |
<br>                                                   PHY ---------------+
<br> ===================================================|========================
<br>
<br>A brief description of each driver is provided below.
<br>
<br>    MC-bus driver
<br>    -------------
<br>    The MC-bus driver is a platform driver and is probed from a
<br>    node in the device tree (compatible "fsl,qoriq-mc") passed in by boot
<br>    firmware.  It is responsible for bootstrapping the DPAA2 kernel
<br>    infrastructure.
<br>    Key functions include:
<br>       -registering a new bus type named "fsl-mc" with the kernel,
<br>        and implementing bus call-backs (e.g. match/uevent/dev_groups)
<br>       -implementing APIs for DPAA2 driver registration and for device
<br>        add/remove
<br>       -creates an MSI IRQ domain
<br>       -doing a 'device add' to expose the 'root' DPRC, in turn triggering
<br>        a bind of the root DPRC to the DPRC driver
<br>
<br>    DPRC driver
<br>    -----------
<br>    The DPRC driver is bound to DPRC objects and does runtime management
<br>    of a bus instance.  It performs the initial bus scan of the DPRC
<br>    and handles interrupts for container events such as hot plug by
<br>    re-scanning the DPRC.
<br>
<br>    Allocator
<br>    ----------
<br>    Certain objects such as DPMCP and DPBP are generic and fungible,
<br>    and are intended to be used by other drivers.  For example,
<br>    the DPAA2 Ethernet driver needs:
<br>       -DPMCPs to send MC commands, to configure network interfaces
<br>       -DPBPs for network buffer pools
<br>
<br>    The allocator driver registers for these allocatable object types
<br>    and those objects are bound to the allocator when the bus is probed.
<br>    The allocator maintains a pool of objects that are available for
<br>    allocation by other DPAA2 drivers.
<br>
<br>    DPIO driver
<br>    -----------
<br>    The DPIO driver is bound to DPIO objects and provides services that allow
<br>    other drivers such as the Ethernet driver to enqueue and dequeue data for
<br>    their respective objects.
<br>    Key services include:
<br>        -data availability notifications
<br>        -hardware queuing operations (enqueue and dequeue of data)
<br>        -hardware buffer pool management
<br>
<br>    To transmit a packet the Ethernet driver puts data on a queue and
<br>    invokes a DPIO API.  For receive, the Ethernet driver registers
<br>    a data availability notification callback.  To dequeue a packet
<br>    a DPIO API is used.
<br>
<br>    There is typically one DPIO object per physical CPU for optimum
<br>    performance, allowing different CPUs to simultaneously enqueue
<br>    and dequeue data.
<br>
<br>    The DPIO driver operates on behalf of all DPAA2 drivers
<br>    active in the kernel--  Ethernet, crypto, compression,
<br>    etc.
<br>
<br>    Ethernet
<br>    --------
<br>    The Ethernet driver is bound to a DPNI and implements the kernel
<br>    interfaces needed to connect the DPAA2 network interface to
<br>    the network stack.
<br>
<br>    Each DPNI corresponds to a Linux network interface.
<br>
<br>    MAC driver
<br>    ----------
<br>    An Ethernet PHY is an off-chip, board specific component and is managed
<br>    by the appropriate PHY driver via an mdio bus.  The MAC driver
<br>    plays a role of being a proxy between the PHY driver and the
<br>    MC.  It does this proxy via the MC commands to a DPMAC object.
<br>    If the PHY driver signals a link change, the MAC driver notifies
<br>    the MC via a DPMAC command.  If a network interface is brought
<br>    up or down, the MC notifies the DPMAC driver via an interrupt and
<br>    the driver can take appropriate action.
<br><p></p><div class="separator"></div><br><p><h2>gs_fpgaboot</h2></p>==============================================================================
<br>Linux Driver Source for Xilinx FPGA firmware download
<br>==============================================================================
<br>
<br>
<br>TABLE OF CONTENTS.
<br>
<br>1.  SUMMARY
<br>2.  BACKGROUND
<br>3.  DESIGN
<br>4.  HOW TO USE
<br>5.  REFERENCE
<br>
<br>1. SUMMARY
<br>
<br>	- Download Xilinx FPGA firmware
<br>	- This module downloads Xilinx FPGA firmware using gpio pins.
<br>
<br>2. BACKGROUND
<br>
<br>	An FPGA (Field Programmable Gate Array) is a programmable hardware that is
<br>	used in various applications. Hardware design needs to programmed through
<br>	a dedicated device or CPU assisted way (serial or parallel).
<br>	This driver provides a way to download FPGA firmware.
<br>
<br>3. DESIGN
<br>
<br>	- load Xilinx FPGA bitstream format[1] firmware image file using
<br>	  kernel firmware framework, request_firmware()
<br>	- program the Xilinx FPGA using SelectMAP (parallel) mode [2]
<br>	- FPGA prgram is done by gpio based bit-banging, as an example
<br>	- platform independent file: gs_fpgaboot.c
<br>	- platform dependent file: io.c
<br>
<br>4. HOW TO USE
<br>
<br>	$ insmod gs_fpga.ko file="xlinx_fpga_top_bitstream.bit"
<br>	$ rmmod gs_fpga
<br>
<br>5. USE CASE (from a mailing list discussion with Greg)
<br>
<br>	a. As a FPGA development support tool,
<br>	During FPGA firmware development, you need to download a new FPGA
<br>	image frequently.
<br>	You would do that with a dedicated JTAG, which usually a limited
<br>	resource in the lab.
<br>	However, if you use my driver, you don't have to have a dedicated JTAG.
<br>	This is a real gain :)
<br>
<br>	b. For the FPGA that runs without config after the download, which
<br>	doesn't talk to any of Linux interfaces (such as PCIE).
<br>
<br>	We download FPGA firmware from user triggered or some other way, and that's it.
<br>	Since that FPGA runs on its own, it doesn't require a linux driver
<br>	after the download.
<br>
<br>	c. For the FPGA that requires config after the download, which talk to
<br>	any of linux interfaces (such as PCIE)
<br>
<br>	Then, this type of FPGA config can be put into device tree and have a
<br>	separate driver (pcie or others), then THAT driver calls my driver to
<br>	download FPGA firmware during the Linux boot, the take over the device
<br>	through the interface.
<br>
<br>6. REFERENCE
<br>
<br>	1. Xilinx APP NOTE XAPP583:
<br>	  http://www.xilinx.com/support/documentation/application_notes/xapp583-fpga-configuration.pdf
<br>	2. bitstream file info:
<br>	  http://home.earthlink.net/~davesullins/software/bitinfo.html
<br><p></p><div class="separator"></div><br><p><h2>bcma</h2></p>Broadcom introduced new bus as replacement for older SSB. It is based on AMBA,
<br>however from programming point of view there is nothing AMBA specific we use.
<br>
<br>Standard AMBA drivers are platform specific, have hardcoded addresses and use
<br>AMBA standard fields like CID and PID.
<br>
<br>In case of Broadcom's cards every device consists of:
<br>1) Broadcom specific AMBA device. It is put on AMBA bus, but can not be treated
<br>   as standard AMBA device. Reading it's CID or PID can cause machine lockup.
<br>2) AMBA standard devices called ports or wrappers. They have CIDs (AMBA_CID)
<br>   and PIDs (0x103BB369), but we do not use that info for anything. One of that
<br>   devices is used for managing Broadcom specific core.
<br>
<br>Addresses of AMBA devices are not hardcoded in driver and have to be read from
<br>EPROM.
<br>
<br>In this situation we decided to introduce separated bus. It can contain up to
<br>16 devices identified by Broadcom specific fields: manufacturer, id, revision
<br>and class.
<br><p></p><div class="separator"></div><br><p><h2>lguest</h2></p>Welcome, friend reader, to lguest.
<br>
<br>Lguest is an adventure, with you, the reader, as Hero.  I can't think of many
<br>5000-line projects which offer both such capability and glimpses of future
<br>potential; it is an exciting time to be delving into the source!
<br>
<br>But be warned; this is an arduous journey of several hours or more!  And as we
<br>know, all true Heroes are driven by a Noble Goal.  Thus I offer a Beer (or
<br>equivalent) to anyone I meet who has completed this documentation.
<br>
<br>So get comfortable and keep your wits about you (both quick and humorous).
<br>Along your way to the Noble Goal, you will also gain masterly insight into
<br>lguest, and hypervisors and x86 virtualization in general.
<br>
<br>Our Quest is in seven parts: (best read with C highlighting turned on)
<br>
<br>I) Preparation
<br>	- In which our potential hero is flown quickly over the landscape for a
<br>	  taste of its scope.  Suitable for the armchair coders and other such
<br>	  persons of faint constitution.
<br>
<br>II) Guest
<br>	- Where we encounter the first tantalising wisps of code, and come to
<br>	  understand the details of the life of a Guest kernel.
<br>
<br>III) Drivers
<br>	- Whereby the Guest finds its voice and become useful, and our
<br>	  understanding of the Guest is completed.
<br>
<br>IV) Launcher
<br>	- Where we trace back to the creation of the Guest, and thus begin our
<br>	  understanding of the Host.
<br>
<br>V) Host
<br>	- Where we master the Host code, through a long and tortuous journey.
<br>	  Indeed, it is here that our hero is tested in the Bit of Despair.
<br>
<br>VI) Switcher
<br>	- Where our understanding of the intertwined nature of Guests and Hosts
<br>	  is completed.
<br>
<br>VII) Mastery
<br>	- Where our fully fledged hero grapples with the Great Question:
<br>	  "What next?"
<br>
<br>make Preparation!
<br>Rusty Russell.
<br><p></p><div class="separator"></div><br><p><h2>mwifiex</h2></p># Copyright (C) 2011-2014, Marvell International Ltd.
<br>#
<br># This software file (the "File") is distributed by Marvell International
<br># Ltd. under the terms of the GNU General Public License Version 2, June 1991
<br># (the "License").  You may use, redistribute and/or modify this File in
<br># accordance with the terms and conditions of the License, a copy of which
<br># is available by writing to the Free Software Foundation, Inc.,
<br># 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA or on the
<br># worldwide web at http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt.
<br>#
<br># THE FILE IS DISTRIBUTED AS-IS, WITHOUT WARRANTY OF ANY KIND, AND THE
<br># IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE
<br># ARE EXPRESSLY DISCLAIMED.  The License provides additional details about
<br># this warranty disclaimer.
<br>
<br>
<br>===============================================================================
<br>			U S E R  M A N U A L
<br>
<br>1) FOR DRIVER INSTALL
<br>
<br>	a) Copy sd8787.bin to /lib/firmware/mrvl/ directory,
<br>	   create the directory if it doesn't exist.
<br>	b) Install WLAN driver,
<br>		insmod mwifiex.ko
<br>	c) Uninstall WLAN driver,
<br>		ifconfig mlanX down
<br>		rmmod mwifiex
<br>
<br>
<br>2) FOR DRIVER CONFIGURATION AND INFO
<br>	The configurations can be done either using the 'iw' user space
<br>	utility or debugfs.
<br>
<br>	a) 'iw' utility commands
<br>
<br>	Following are some useful iw commands:-
<br>
<br>iw dev mlan0 scan
<br>
<br>	This command will trigger a scan.
<br>	The command will then display the scan table entries
<br>
<br>iw dev mlan0 connect -w &lt;SSID&gt; [&lt;freq in MHz&gt;] [&lt;bssid&gt;] [key 0:abcde d:1123456789a]
<br>	The above command can be used to connect to an AP with a particular SSID.
<br>	Ap's operating frequency can be specified or even the bssid. If the AP is using
<br>	WEP encryption, wep keys can be specified in the command.
<br>	Note: Every time before connecting to an AP scan command (iw dev mlan0 scan) should be used by user.
<br>
<br>iw dev mlan0 disconnect
<br>	This command will be used to disconnect from an AP.
<br>
<br>
<br>iw dev mlan0 ibss join &lt;SSID&gt; &lt;freq in MHz&gt; [fixed-freq] [fixed-bssid] [key 0:abcde]
<br>	The command will be used to join or create an ibss. Optionally, operating frequency,
<br>	bssid and the security related parameters can be specified while joining/creating
<br>	and ibss.
<br>
<br>iw dev mlan0 ibss leave
<br>	The command will be used to leave an ibss network.
<br>
<br>iw dev mlan0 link
<br>	The command will be used to get the connection status. The command will return parameters
<br>	such as SSID, operating frequency, rx/tx packets, signal strength, tx bitrate.
<br>
<br>	Apart from the iw utility all standard configurations using the 'iwconfig' utility are also supported.
<br>
<br>	b) Debugfs interface
<br>
<br>	The debugfs interface can be used for configurations and for getting
<br>	some useful information from the driver.
<br>	The section below explains the configurations that can be
<br>	done.
<br>
<br>	Mount debugfs to /debugfs mount point:
<br>
<br>		mkdir /debugfs
<br>		mount -t debugfs debugfs /debugfs
<br>
<br>	The information is provided in /debugfs/mwifiex/mlanX/:
<br>
<br>iw reg set &lt;country code&gt;
<br>	The command will be used to change the regulatory domain.
<br>
<br>iw reg get
<br>	The command will be used to get current regulatory domain.
<br>
<br>info
<br>	This command is used to get driver info.
<br>
<br>	Usage:
<br>		cat info
<br>
<br>	driver_name = "mwifiex"
<br>	driver_version = &lt;driver_name, driver_version, (firmware_version)&gt;
<br>	interface_name = "mlanX"
<br>	bss_mode = "Ad-hoc" | "Managed" | "Auto" | "Unknown"
<br>	media_state = "Disconnected" | "Connected"
<br>	mac_address = &lt;6-byte adapter MAC address&gt;
<br>	multicase_count = &lt;multicast address count&gt;
<br>	essid = &lt;current SSID&gt;
<br>	bssid = &lt;current BSSID&gt;
<br>	channel = &lt;current channel&gt;
<br>	region_code = &lt;current region code&gt;
<br>	multicasr_address[n] = &lt;multicast address&gt;
<br>	num_tx_bytes = &lt;number of bytes sent to device&gt;
<br>	num_rx_bytes = &lt;number of bytes received from device and sent to kernel&gt;
<br>	num_tx_pkts = &lt;number of packets sent to device&gt;
<br>	num_rx_pkts = &lt;number of packets received from device and sent to kernel&gt;
<br>	num_tx_pkts_dropped = &lt;number of Tx packets dropped by driver&gt;
<br>	num_rx_pkts_dropped = &lt;number of Rx packets dropped by driver&gt;
<br>	num_tx_pkts_err = &lt;number of Tx packets failed to send to device&gt;
<br>	num_rx_pkts_err = &lt;number of Rx packets failed to receive from device&gt;
<br>	carrier "on" | "off"
<br>	tx queue "stopped" | "started"
<br>
<br>	The following debug info are provided in /debugfs/mwifiex/mlanX/debug:
<br>
<br>	int_counter = &lt;interrupt count, cleared when interrupt handled&gt;
<br>	wmm_ac_vo = &lt;number of packets sent to device from WMM AcVo queue&gt;
<br>	wmm_ac_vi = &lt;number of packets sent to device from WMM AcVi queue&gt;
<br>	wmm_ac_be = &lt;number of packets sent to device from WMM AcBE queue&gt;
<br>	wmm_ac_bk = &lt;number of packets sent to device from WMM AcBK queue&gt;
<br>	tx_buf_size = &lt;current Tx buffer size&gt;
<br>	curr_tx_buf_size = &lt;current Tx buffer size&gt;
<br>	ps_mode = &lt;0/1, CAM mode/PS mode&gt;
<br>	ps_state = &lt;0/1/2/3, full power state/awake state/pre-sleep state/sleep state&gt;
<br>	is_deep_sleep = &lt;0/1, not deep sleep state/deep sleep state&gt;
<br>	wakeup_dev_req = &lt;0/1, wakeup device not required/required&gt;
<br>	wakeup_tries = &lt;wakeup device count, cleared when device awake&gt;
<br>	hs_configured = &lt;0/1, host sleep not configured/configured&gt;
<br>	hs_activated = &lt;0/1, extended host sleep not activated/activated&gt;
<br>	num_tx_timeout = &lt;number of Tx timeout&gt;
<br>	is_cmd_timedout = &lt;0/1 command timeout not occurred/occurred&gt;
<br>	timeout_cmd_id = &lt;command id of the last timeout command&gt;
<br>	timeout_cmd_act = &lt;command action of the last timeout command&gt;
<br>	last_cmd_id = &lt;command id of the last several commands sent to device&gt;
<br>	last_cmd_act = &lt;command action of the last several commands sent to device&gt;
<br>	last_cmd_index = &lt;0 based last command index&gt;
<br>	last_cmd_resp_id = &lt;command id of the last several command responses received from device&gt;
<br>	last_cmd_resp_index = &lt;0 based last command response index&gt;
<br>	last_event = &lt;event id of the last several events received from device&gt;
<br>	last_event_index = &lt;0 based last event index&gt;
<br>	num_cmd_h2c_fail = &lt;number of commands failed to send to device&gt;
<br>	num_cmd_sleep_cfm_fail = &lt;number of sleep confirm failed to send to device&gt;
<br>	num_tx_h2c_fail = &lt;number of data packets failed to send to device&gt;
<br>	num_evt_deauth = &lt;number of deauthenticated events received from device&gt;
<br>	num_evt_disassoc = &lt;number of disassociated events received from device&gt;
<br>	num_evt_link_lost = &lt;number of link lost events received from device&gt;
<br>	num_cmd_deauth = &lt;number of deauthenticate commands sent to device&gt;
<br>	num_cmd_assoc_ok = &lt;number of associate commands with success return&gt;
<br>	num_cmd_assoc_fail = &lt;number of associate commands with failure return&gt;
<br>	cmd_sent = &lt;0/1, send command resources available/sending command to device&gt;
<br>	data_sent = &lt;0/1, send data resources available/sending data to device&gt;
<br>	mp_rd_bitmap = &lt;SDIO multi-port read bitmap&gt;
<br>	mp_wr_bitmap = &lt;SDIO multi-port write bitmap&gt;
<br>	cmd_resp_received = &lt;0/1, no cmd response to process/response received and yet to process&gt;
<br>	event_received = &lt;0/1, no event to process/event received and yet to process&gt;
<br>	cmd_pending = &lt;number of cmd pending&gt;
<br>	tx_pending = &lt;number of Tx packet pending&gt;
<br>	rx_pending = &lt;number of Rx packet pending&gt;
<br>
<br>
<br>3) FOR DRIVER CONFIGURATION
<br>
<br>regrdwr
<br>	This command is used to read/write the adapter register.
<br>
<br>	Usage:
<br>		echo " &lt;type&gt; &lt;offset&gt; [value]" &gt; regrdwr
<br>		cat regrdwr
<br>
<br>	where the parameters are,
<br>		&lt;type&gt;:     1:MAC/SOC, 2:BBP, 3:RF, 4:PMIC, 5:CAU
<br>		&lt;offset&gt;:   offset of register
<br>		[value]:    value to be written
<br>
<br>	Examples:
<br>		echo "1 0xa060" &gt; regrdwr           : Read the MAC register
<br>		echo "1 0xa060 0x12" &gt; regrdwr      : Write the MAC register
<br>		echo "1 0xa794 0x80000000" &gt; regrdwr
<br>		                                    : Write 0x80000000 to MAC register
<br>rdeeprom
<br>	This command is used to read the EEPROM contents of the card.
<br>
<br>	Usage:
<br>		echo "&lt;offset&gt; &lt;length&gt;" &gt; rdeeprom
<br>		cat rdeeprom
<br>
<br>	where the parameters are,
<br>		&lt;offset&gt;:   multiples of 4
<br>		&lt;length&gt;:   4-20, multiples of 4
<br>
<br>	Example:
<br>		echo "0 20" &gt; rdeeprom      : Read 20 bytes of EEPROM data from offset 0
<br>
<br>hscfg
<br>	This command is used to debug/simulate host sleep feature using
<br>	different configuration parameters.
<br>
<br>	Usage:
<br>		echo "&lt;condition&gt; [GPIO# [gap]]]" &gt; hscfg
<br>		cat hscfg
<br>
<br>	where the parameters are,
<br>		&lt;condition&gt;: bit 0 = 1   -- broadcast data
<br>			     bit 1 = 1   -- unicast data
<br>			     bit 2 = 1   -- mac event
<br>			     bit 3 = 1   -- multicast data
<br>		[GPIO#]: pin number of GPIO used to wakeup the host.
<br>			 GPIO pin# (e.g. 0-7) or 0xff (interface, e.g. SDIO
<br>			 will be used instead).
<br>		[gap]:   the gap in milliseconds between wakeup signal and
<br>			 wakeup event or 0xff for special setting (host
<br>			 acknowledge required) when GPIO is used to wakeup host.
<br>
<br>	Examples:
<br>		echo "-1" &gt; hscfg        : Cancel host sleep mode
<br>		echo "3" &gt; hscfg         : Broadcast and unicast data;
<br>					   Use GPIO and gap set previously
<br>		echo "2 3" &gt; hscfg       : Unicast data and GPIO 3;
<br>					   Use gap set previously
<br>		echo "2 1 160" &gt; hscfg   : Unicast data, GPIO 1 and gap 160 ms
<br>		echo "2 1 0xff" &gt; hscfg  : Unicast data, GPIO 1; Wait for host
<br>					   to ack before sending wakeup event
<br>
<br>getlog
<br>        This command is used to get the statistics available in the station.
<br>	Usage:
<br>
<br>	cat getlog
<br>
<br>device_dump
<br>	This command is used to dump driver information and firmware memory
<br>	segments.
<br>	Usage:
<br>
<br>	cat fw_dump
<br>
<br>verext
<br>	This command is used to get extended firmware version string using
<br>	different configuration parameters.
<br>
<br>	Usage:
<br>		echo "[version_str_sel]" &gt; verext
<br>		cat verext
<br>
<br>		[version_str_sel]: firmware support several extend version
<br>				   string cases, include 0/1/10/20/21/99
<br>===============================================================================
<br><p></p><div class="separator"></div><br><p><h2>libertas</h2></p>================================================================================
<br>			README for Libertas
<br>
<br> (c) Copyright © 2003-2006, Marvell International Ltd.
<br> All Rights Reserved
<br>
<br> This software file (the "File") is distributed by Marvell International
<br> Ltd. under the terms of the GNU General Public License Version 2, June 1991
<br> (the "License").  You may use, redistribute and/or modify this File in
<br> accordance with the terms and conditions of the License, a copy of which
<br> is available along with the File in the license.txt file or on the worldwide
<br> web at http://www.gnu.org/licenses/gpl.txt.
<br>
<br> THE FILE IS DISTRIBUTED AS-IS, WITHOUT WARRANTY OF ANY KIND, AND THE
<br> IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE
<br> ARE EXPRESSLY DISCLAIMED.  The License provides additional details about
<br> this warranty disclaimer.
<br>================================================================================
<br>
<br>=====================
<br>DRIVER LOADING
<br>=====================
<br>
<br>	o. Copy the firmware image (e.g. usb8388.bin) to /lib/firmware/
<br>
<br>	o. Load driver by using the following command:
<br>
<br>		insmod usb8388.ko [fw_name=usb8388.bin]
<br>
<br>=========================
<br>ETHTOOL
<br>=========================
<br>
<br>
<br>Use the -i option to retrieve version information from the driver.
<br>
<br># ethtool -i eth0
<br>driver: libertas
<br>version: COMM-USB8388-318.p4
<br>firmware-version: 5.110.7
<br>bus-info:
<br>
<br>Use the -e option to read the EEPROM contents of the card.
<br>
<br>	Usage:
<br>	ethtool -e ethX [raw on|off] [offset N] [length N]
<br>
<br>       -e     retrieves and prints an EEPROM dump for the  specified  ethernet
<br>              device.   When raw is enabled, then it dumps the raw EEPROM data
<br>              to stdout. The length and offset parameters allow  dumping  cer-
<br>              tain portions of the EEPROM.  Default is to dump the entire EEP-
<br>              ROM.
<br>
<br># ethtool -e eth0 offset 0 length 16
<br>Offset          Values
<br>------          ------
<br>0x0000          38 33 30 58 00 00 34 f4 00 00 10 00 00 c4 17 00
<br>
<br>========================
<br>DEBUGFS COMMANDS
<br>========================
<br>
<br>those commands are used via debugfs interface
<br>
<br>===========
<br>rdmac
<br>rdbbp
<br>rdrf
<br>	These commands are used to read the MAC, BBP and RF registers from the
<br>	card.  These commands take one parameter that specifies the offset
<br>	location that is to be read.  This parameter must be specified in
<br>	hexadecimal (its possible to precede preceding the number with a "0x").
<br>
<br>	Path: /sys/kernel/debug/libertas_wireless/ethX/registers/
<br>
<br>	Usage:
<br>		echo "0xa123" &gt; rdmac ; cat rdmac
<br>		echo "0xa123" &gt; rdbbp ; cat rdbbp
<br>		echo "0xa123" &gt; rdrf ; cat rdrf
<br>wrmac
<br>wrbbp
<br>wrrf
<br>	These commands are used to write the MAC, BBP and RF registers in the
<br>	card.  These commands take two parameters that specify the offset
<br>	location and the value that is to be written. This parameters must
<br>	be specified in hexadecimal (its possible to precede the number
<br>	with a "0x").
<br>
<br>	Usage:
<br>		echo "0xa123 0xaa" &gt; wrmac
<br>		echo "0xa123 0xaa" &gt; wrbbp
<br>		echo "0xa123 0xaa" &gt; wrrf
<br>
<br>sleepparams
<br>	This command is used to set the sleepclock configurations
<br>
<br>	Path: /sys/kernel/debug/libertas_wireless/ethX/
<br>
<br>	Usage:
<br>		cat sleepparams: reads the current sleepclock configuration
<br>
<br>		echo "p1 p2 p3 p4 p5 p6" &gt; sleepparams: writes the sleepclock configuration.
<br>
<br>		where:
<br>			p1 is Sleep clock error in ppm (0-65535)
<br>			p2 is Wakeup offset in usec (0-65535)
<br>			p3 is Clock stabilization time in usec (0-65535)
<br>			p4 is Control periodic calibration (0-2)
<br>			p5 is Control the use of external sleep clock (0-2)
<br>			p6 is reserved for debug (0-65535)
<br>
<br>subscribed_events
<br>
<br>	The subscribed_events directory contains the interface for the
<br>	subscribed events API.
<br>
<br>	Path: /sys/kernel/debug/libertas_wireless/ethX/subscribed_events/
<br>
<br>	Each event is represented by a filename. Each filename consists of the
<br>	following three fields:
<br>	Value Frequency Subscribed
<br>
<br>	To read the current values for a given event, do:
<br>		cat event
<br>	To set the current values, do:
<br>		echo "60 2 1" &gt; event
<br>
<br>	Frequency field specifies the reporting frequency for this event.
<br>	If it is set to 0, then the event is reported only once, and then
<br>	automatically unsubscribed. If it is set to 1, then the event is
<br>	reported every time it occurs. If it is set to N, then the event is
<br>	reported every Nth time it occurs.
<br>
<br>	beacon_missed
<br>	Value field specifies the number of consecutive missing beacons which
<br>	triggers the LINK_LOSS event. This event is generated only once after
<br>	which the firmware resets its state. At initialization, the LINK_LOSS
<br>	event is subscribed by default. The default value of MissedBeacons is
<br>	60.
<br>
<br>	failure_count
<br>	Value field specifies the consecutive failure count threshold which
<br>	triggers the generation of the MAX_FAIL event. Once this event is
<br>	generated, the consecutive failure count is reset to 0.
<br>	At initialization, the MAX_FAIL event is NOT subscribed by
<br>	default.
<br>
<br>	high_rssi
<br>	This event is generated when the average received RSSI in beacons goes
<br>	above a threshold, specified by Value.
<br>
<br>	low_rssi
<br>	This event is generated when the average received RSSI in beacons goes
<br>	below a threshold, specified by Value.
<br>
<br>	high_snr
<br>	This event is generated when the average received SNR in beacons goes
<br>	above a threshold, specified by Value.
<br>
<br>	low_snr
<br>	This event is generated when the average received SNR in beacons goes
<br>	below a threshold, specified by Value.
<br>
<br>extscan
<br>	This command is used to do a specific scan.
<br>
<br>	Path: /sys/kernel/debug/libertas_wireless/ethX/
<br>
<br>	Usage: echo "SSID" &gt; extscan
<br>
<br>	Example:
<br>		echo "LINKSYS-AP" &gt; extscan
<br>
<br>	To see the results of use getscantable command.
<br>
<br>getscantable
<br>
<br>	Display the current contents of the driver scan table (ie. get the
<br>	scan results).
<br>
<br>	Path: /sys/kernel/debug/libertas_wireless/ethX/
<br>
<br>	Usage:
<br>		cat getscantable
<br>
<br>setuserscan
<br>	Initiate a customized scan and retrieve the results
<br>
<br>
<br>	Path: /sys/kernel/debug/libertas_wireless/ethX/
<br>
<br>    Usage:
<br>       echo "[ARGS]" &gt; setuserscan
<br>
<br>         where [ARGS]:
<br>
<br>      bssid=xx:xx:xx:xx:xx:xx  specify a BSSID filter for the scan
<br>      ssid="[SSID]"            specify a SSID filter for the scan
<br>      keep=[0 or 1]            keep the previous scan results (1), discard (0)
<br>      dur=[scan time]          time to scan for each channel in milliseconds
<br>      type=[1,2,3]             BSS type: 1 (Infra), 2(Adhoc), 3(Any)
<br>
<br>    Any combination of the above arguments can be supplied on the command
<br>    line. If dur tokens are absent, the driver default setting will be used.
<br>    The bssid and ssid fields, if blank, will produce an unfiltered scan.
<br>    The type field will default to 3 (Any) and the keep field will default
<br>    to 0 (Discard).
<br>
<br>    Examples:
<br>    1) Perform a passive scan on all channels for 20 ms per channel:
<br>            echo "dur=20" &gt; setuserscan
<br>
<br>    2) Perform an active scan for a specific SSID:
<br>            echo "ssid="TestAP"" &gt; setuserscan
<br>
<br>    3) Scan all available channels (B/G, A bands) for a specific BSSID, keep
<br>       the current scan table intact, update existing or append new scan data:
<br>            echo "bssid=00:50:43:20:12:82 keep=1" &gt; setuserscan
<br>
<br>    4) Scan for all infrastructure networks.
<br>       Keep the previous scan table intact. Update any duplicate BSSID/SSID
<br>       matches with the new scan data:
<br>            echo "type=1 keep=1" &gt; setuserscan
<br>
<br>    All entries in the scan table (not just the new scan data when keep=1)
<br>    will be displayed upon completion by use of the getscantable ioctl.
<br>
<br>hostsleep
<br>	This command is used to enable/disable host sleep.
<br>	Note: Host sleep parameters should be configured using
<br>	"ethtool -s ethX wol X" command before enabling host sleep.
<br>
<br>	Path: /sys/kernel/debug/libertas_wireless/ethX/
<br>
<br>	Usage:
<br>		cat hostsleep: reads the current hostsleep state
<br>		echo "1" &gt; hostsleep : enable host sleep.
<br>		echo "0" &gt; hostsleep : disable host sleep
<br>
<br><p></p><div class="separator"></div><br><p><h2>decnet</h2></p>                       Linux DECnet Project
<br>                      ======================
<br>
<br>The documentation for this kernel subsystem is available in the
<br>Documentation/networking subdirectory of this distribution and also
<br>on line at http://www.chygwyn.com/DECnet/
<br>
<br>Steve Whitehouse &lt;SteveW@ACM.org&gt;
<br><p></p><div class="separator"></div><br><p><h2>Caffeine</h2></p>Copyright (C) 2017 by ATPC
<br>
<br>	This program is free software: you can redistribute it and/or modify
<br>	it under the terms of the GNU Lesser General Public License as
<br>	published by the Free Software Foundation, either version 3 of the
<br>	License, or (at your option) any later version.
<br>
<br>	This program is distributed in the hope that it will be useful,
<br>	but WITHOUT ANY WARRANTY; without even the implied warranty of
<br>	MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
<br>	GNU Lesser General Public License for more details.
<br>
<br>	You should have received a copy of the GNU Lesser General Public License
<br>	along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.
<br></div></body></html>
