<html><head><meta charset="utf-8"><title>airOS Components - ATPC</title><meta name="author" content="ATPC"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" type="text/css" href="../font.css"><link rel="stylesheet" type="text/css" href="../style.css"><link rel="stylesheet" type="text/css" href="style.css"><link rel="shortcut icon" type="image/x-icon" href="../favicon.ico"></head><body><div id="header"><iframe id="backlink" src="http://atpc.one/widget/" frameborder="0" scrolling="no" height="48" width="140"></iframe></div><div id="title"><h1>airOS Components</h1><div class="separator"></div></div></div><div id="components"><p></p><br><p><h2>airOS</h2></p><p align="center">
<br>	<a href="http://atpc.one/airos/"><img src="http://www.atpc.one/airos/airOS-Transparent-Dark.svg" height="160" alt="airOS" /></a>
<br></p>
<br>
<br>![platforms](https://img.shields.io/badge/platforms-arm-lightgrey.svg)
<br>
<br># airOS
<br>
<br>airOS is a new, high-level operating system for ARM computers.  
<br>
<br>## Cloning, Building, and Running
<br>### Requirements
<br>To build airOS, these programs must be **installed** on your system, since airOS' software management is based on packages.
<br>```
<br>General requirements:
<br>zsh
<br>make
<br>
<br>For ARM systems:
<br>gcc
<br>
<br>For non-ARM systems (cross-compiling):
<br>gcc-arm-linux-gnueabi
<br>gcc-arm-linux-gnueabihf
<br>binutils-arm-linux-gnueabi
<br>```
<br>To install the cross-compiling toolchain on Debian-based systems, just run
<br>```sh
<br>$> sudo apt-get install gcc-arm-linux-gnueabihf
<br>```
<br>which will install all the necessary tools.
<br>### Quick Setup
<br>```sh
<br>$> cd path/to/your/projects/folder/
<br>
<br># Update your repository
<br>$> ./update
<br>
<br># Configure for your system
<br>$> ./configure
<br>
<br># Build airOS
<br>$> make
<br>```
<br>### Testing in a VM
<br>We're using QEMU for virtualization, so make sure QEMU is installed on your
<br>host system.  
<br>To run airOS in QEMU after a successful build, run
<br>```sh
<br>$> make qemu
<br>```
<br>to launch airOS in QEMU.
<br>### Testing on Hardware
<br>Our target hardware is the Raspberry Pi, but airOS might work on other platforms,
<br>too. Just install the built image on your testing hardware and start debugging.
<br>
<br>## Credits
<br>
<br>Copyright (c) 2017 by ATPC  
<br>[Open Source Licenses](http://www.atpc.one/airos/components.html)  
<br>
<br>Throughout the hole project, "corresponding README" is defined as the nearest
<br>README information file containing a legal notice, relative to the file referencing it, whereas "nearest"
<br>means "in the same directory" or "in the nearest directory above".
<br>
<br>### License Files
<br>```
<br>GNU  GPL v3:   gpl-3.0.txt
<br>GNU AGPL v3:  agpl-3.0.txt
<br>GNU LGPL v3:  lgpl-3.0.txt
<br>```
<br><p></p><div class="separator"></div><br><p><h2>linux</h2></p>        Linux kernel release 4.x <http://kernel.org/>
<br>
<br>These are the release notes for Linux version 4.  Read them carefully,
<br>as they tell you what this is all about, explain how to install the
<br>kernel, and what to do if something goes wrong.
<br>
<br>WHAT IS LINUX?
<br>
<br>  Linux is a clone of the operating system Unix, written from scratch by
<br>  Linus Torvalds with assistance from a loosely-knit team of hackers across
<br>  the Net. It aims towards POSIX and Single UNIX Specification compliance.
<br>
<br>  It has all the features you would expect in a modern fully-fledged Unix,
<br>  including true multitasking, virtual memory, shared libraries, demand
<br>  loading, shared copy-on-write executables, proper memory management,
<br>  and multistack networking including IPv4 and IPv6.
<br>
<br>  It is distributed under the GNU General Public License - see the
<br>  accompanying COPYING file for more details.
<br>
<br>ON WHAT HARDWARE DOES IT RUN?
<br>
<br>  Although originally developed first for 32-bit x86-based PCs (386 or higher),
<br>  today Linux also runs on (at least) the Compaq Alpha AXP, Sun SPARC and
<br>  UltraSPARC, Motorola 68000, PowerPC, PowerPC64, ARM, Hitachi SuperH, Cell,
<br>  IBM S/390, MIPS, HP PA-RISC, Intel IA-64, DEC VAX, AMD x86-64, AXIS CRIS,
<br>  Xtensa, Tilera TILE, AVR32, ARC and Renesas M32R architectures.
<br>
<br>  Linux is easily portable to most general-purpose 32- or 64-bit architectures
<br>  as long as they have a paged memory management unit (PMMU) and a port of the
<br>  GNU C compiler (gcc) (part of The GNU Compiler Collection, GCC). Linux has
<br>  also been ported to a number of architectures without a PMMU, although
<br>  functionality is then obviously somewhat limited.
<br>  Linux has also been ported to itself. You can now run the kernel as a
<br>  userspace application - this is called UserMode Linux (UML).
<br>
<br>DOCUMENTATION:
<br>
<br> - There is a lot of documentation available both in electronic form on
<br>   the Internet and in books, both Linux-specific and pertaining to
<br>   general UNIX questions.  I'd recommend looking into the documentation
<br>   subdirectories on any Linux FTP site for the LDP (Linux Documentation
<br>   Project) books.  This README is not meant to be documentation on the
<br>   system: there are much better sources available.
<br>
<br> - There are various README files in the Documentation/ subdirectory:
<br>   these typically contain kernel-specific installation notes for some
<br>   drivers for example. See Documentation/00-INDEX for a list of what
<br>   is contained in each file.  Please read the Changes file, as it
<br>   contains information about the problems, which may result by upgrading
<br>   your kernel.
<br>
<br> - The Documentation/DocBook/ subdirectory contains several guides for
<br>   kernel developers and users.  These guides can be rendered in a
<br>   number of formats:  PostScript (.ps), PDF, HTML, & man-pages, among others.
<br>   After installation, "make psdocs", "make pdfdocs", "make htmldocs",
<br>   or "make mandocs" will render the documentation in the requested format.
<br>
<br>INSTALLING the kernel source:
<br>
<br> - If you install the full sources, put the kernel tarball in a
<br>   directory where you have permissions (e.g. your home directory) and
<br>   unpack it:
<br>
<br>     xz -cd linux-4.X.tar.xz | tar xvf -
<br>
<br>   Replace "X" with the version number of the latest kernel.
<br>
<br>   Do NOT use the /usr/src/linux area! This area has a (usually
<br>   incomplete) set of kernel headers that are used by the library header
<br>   files.  They should match the library, and not get messed up by
<br>   whatever the kernel-du-jour happens to be.
<br>
<br> - You can also upgrade between 4.x releases by patching.  Patches are
<br>   distributed in the xz format.  To install by patching, get all the
<br>   newer patch files, enter the top level directory of the kernel source
<br>   (linux-4.X) and execute:
<br>
<br>     xz -cd ../patch-4.x.xz | patch -p1
<br>
<br>   Replace "x" for all versions bigger than the version "X" of your current
<br>   source tree, _in_order_, and you should be ok.  You may want to remove
<br>   the backup files (some-file-name~ or some-file-name.orig), and make sure
<br>   that there are no failed patches (some-file-name# or some-file-name.rej).
<br>   If there are, either you or I have made a mistake.
<br>
<br>   Unlike patches for the 4.x kernels, patches for the 4.x.y kernels
<br>   (also known as the -stable kernels) are not incremental but instead apply
<br>   directly to the base 4.x kernel.  For example, if your base kernel is 4.0
<br>   and you want to apply the 4.0.3 patch, you must not first apply the 4.0.1
<br>   and 4.0.2 patches. Similarly, if you are running kernel version 4.0.2 and
<br>   want to jump to 4.0.3, you must first reverse the 4.0.2 patch (that is,
<br>   patch -R) _before_ applying the 4.0.3 patch. You can read more on this in
<br>   Documentation/applying-patches.txt
<br>
<br>   Alternatively, the script patch-kernel can be used to automate this
<br>   process.  It determines the current kernel version and applies any
<br>   patches found.
<br>
<br>     linux/scripts/patch-kernel linux
<br>
<br>   The first argument in the command above is the location of the
<br>   kernel source.  Patches are applied from the current directory, but
<br>   an alternative directory can be specified as the second argument.
<br>
<br> - Make sure you have no stale .o files and dependencies lying around:
<br>
<br>     cd linux
<br>     make mrproper
<br>
<br>   You should now have the sources correctly installed.
<br>
<br>SOFTWARE REQUIREMENTS
<br>
<br>   Compiling and running the 4.x kernels requires up-to-date
<br>   versions of various software packages.  Consult
<br>   Documentation/Changes for the minimum version numbers required
<br>   and how to get updates for these packages.  Beware that using
<br>   excessively old versions of these packages can cause indirect
<br>   errors that are very difficult to track down, so don't assume that
<br>   you can just update packages when obvious problems arise during
<br>   build or operation.
<br>
<br>BUILD directory for the kernel:
<br>
<br>   When compiling the kernel, all output files will per default be
<br>   stored together with the kernel source code.
<br>   Using the option "make O=output/dir" allows you to specify an alternate
<br>   place for the output files (including .config).
<br>   Example:
<br>
<br>     kernel source code: /usr/src/linux-4.X
<br>     build directory:    /home/name/build/kernel
<br>
<br>   To configure and build the kernel, use:
<br>
<br>     cd /usr/src/linux-4.X
<br>     make O=/home/name/build/kernel menuconfig
<br>     make O=/home/name/build/kernel
<br>     sudo make O=/home/name/build/kernel modules_install install
<br>
<br>   Please note: If the 'O=output/dir' option is used, then it must be
<br>   used for all invocations of make.
<br>
<br>CONFIGURING the kernel:
<br>
<br>   Do not skip this step even if you are only upgrading one minor
<br>   version.  New configuration options are added in each release, and
<br>   odd problems will turn up if the configuration files are not set up
<br>   as expected.  If you want to carry your existing configuration to a
<br>   new version with minimal work, use "make oldconfig", which will
<br>   only ask you for the answers to new questions.
<br>
<br> - Alternative configuration commands are:
<br>
<br>     "make config"      Plain text interface.
<br>
<br>     "make menuconfig"  Text based color menus, radiolists & dialogs.
<br>
<br>     "make nconfig"     Enhanced text based color menus.
<br>
<br>     "make xconfig"     Qt based configuration tool.
<br>
<br>     "make gconfig"     GTK+ based configuration tool.
<br>
<br>     "make oldconfig"   Default all questions based on the contents of
<br>                        your existing ./.config file and asking about
<br>                        new config symbols.
<br>
<br>     "make silentoldconfig"
<br>                        Like above, but avoids cluttering the screen
<br>                        with questions already answered.
<br>                        Additionally updates the dependencies.
<br>
<br>     "make olddefconfig"
<br>                        Like above, but sets new symbols to their default
<br>                        values without prompting.
<br>
<br>     "make defconfig"   Create a ./.config file by using the default
<br>                        symbol values from either arch/$ARCH/defconfig
<br>                        or arch/$ARCH/configs/${PLATFORM}_defconfig,
<br>                        depending on the architecture.
<br>
<br>     "make ${PLATFORM}_defconfig"
<br>                        Create a ./.config file by using the default
<br>                        symbol values from
<br>                        arch/$ARCH/configs/${PLATFORM}_defconfig.
<br>                        Use "make help" to get a list of all available
<br>                        platforms of your architecture.
<br>
<br>     "make allyesconfig"
<br>                        Create a ./.config file by setting symbol
<br>                        values to 'y' as much as possible.
<br>
<br>     "make allmodconfig"
<br>                        Create a ./.config file by setting symbol
<br>                        values to 'm' as much as possible.
<br>
<br>     "make allnoconfig" Create a ./.config file by setting symbol
<br>                        values to 'n' as much as possible.
<br>
<br>     "make randconfig"  Create a ./.config file by setting symbol
<br>                        values to random values.
<br>
<br>     "make localmodconfig" Create a config based on current config and
<br>                           loaded modules (lsmod). Disables any module
<br>                           option that is not needed for the loaded modules.
<br>
<br>                           To create a localmodconfig for another machine,
<br>                           store the lsmod of that machine into a file
<br>                           and pass it in as a LSMOD parameter.
<br>
<br>                   target$ lsmod > /tmp/mylsmod
<br>                   target$ scp /tmp/mylsmod host:/tmp
<br>
<br>                   host$ make LSMOD=/tmp/mylsmod localmodconfig
<br>
<br>                           The above also works when cross compiling.
<br>
<br>     "make localyesconfig" Similar to localmodconfig, except it will convert
<br>                           all module options to built in (=y) options.
<br>
<br>   You can find more information on using the Linux kernel config tools
<br>   in Documentation/kbuild/kconfig.txt.
<br>
<br> - NOTES on "make config":
<br>
<br>    - Having unnecessary drivers will make the kernel bigger, and can
<br>      under some circumstances lead to problems: probing for a
<br>      nonexistent controller card may confuse your other controllers
<br>
<br>    - A kernel with math-emulation compiled in will still use the
<br>      coprocessor if one is present: the math emulation will just
<br>      never get used in that case.  The kernel will be slightly larger,
<br>      but will work on different machines regardless of whether they
<br>      have a math coprocessor or not.
<br>
<br>    - The "kernel hacking" configuration details usually result in a
<br>      bigger or slower kernel (or both), and can even make the kernel
<br>      less stable by configuring some routines to actively try to
<br>      break bad code to find kernel problems (kmalloc()).  Thus you
<br>      should probably answer 'n' to the questions for "development",
<br>      "experimental", or "debugging" features.
<br>
<br>COMPILING the kernel:
<br>
<br> - Make sure you have at least gcc 3.2 available.
<br>   For more information, refer to Documentation/Changes.
<br>
<br>   Please note that you can still run a.out user programs with this kernel.
<br>
<br> - Do a "make" to create a compressed kernel image. It is also
<br>   possible to do "make install" if you have lilo installed to suit the
<br>   kernel makefiles, but you may want to check your particular lilo setup first.
<br>
<br>   To do the actual install, you have to be root, but none of the normal
<br>   build should require that. Don't take the name of root in vain.
<br>
<br> - If you configured any of the parts of the kernel as `modules', you
<br>   will also have to do "make modules_install".
<br>
<br> - Verbose kernel compile/build output:
<br>
<br>   Normally, the kernel build system runs in a fairly quiet mode (but not
<br>   totally silent).  However, sometimes you or other kernel developers need
<br>   to see compile, link, or other commands exactly as they are executed.
<br>   For this, use "verbose" build mode.  This is done by passing
<br>   "V=1" to the "make" command, e.g.
<br>
<br>     make V=1 all
<br>
<br>   To have the build system also tell the reason for the rebuild of each
<br>   target, use "V=2".  The default is "V=0".
<br>
<br> - Keep a backup kernel handy in case something goes wrong.  This is
<br>   especially true for the development releases, since each new release
<br>   contains new code which has not been debugged.  Make sure you keep a
<br>   backup of the modules corresponding to that kernel, as well.  If you
<br>   are installing a new kernel with the same version number as your
<br>   working kernel, make a backup of your modules directory before you
<br>   do a "make modules_install".
<br>
<br>   Alternatively, before compiling, use the kernel config option
<br>   "LOCALVERSION" to append a unique suffix to the regular kernel version.
<br>   LOCALVERSION can be set in the "General Setup" menu.
<br>
<br> - In order to boot your new kernel, you'll need to copy the kernel
<br>   image (e.g. .../linux/arch/x86/boot/bzImage after compilation)
<br>   to the place where your regular bootable kernel is found.
<br>
<br> - Booting a kernel directly from a floppy without the assistance of a
<br>   bootloader such as LILO, is no longer supported.
<br>
<br>   If you boot Linux from the hard drive, chances are you use LILO, which
<br>   uses the kernel image as specified in the file /etc/lilo.conf.  The
<br>   kernel image file is usually /vmlinuz, /boot/vmlinuz, /bzImage or
<br>   /boot/bzImage.  To use the new kernel, save a copy of the old image
<br>   and copy the new image over the old one.  Then, you MUST RERUN LILO
<br>   to update the loading map! If you don't, you won't be able to boot
<br>   the new kernel image.
<br>
<br>   Reinstalling LILO is usually a matter of running /sbin/lilo.
<br>   You may wish to edit /etc/lilo.conf to specify an entry for your
<br>   old kernel image (say, /vmlinux.old) in case the new one does not
<br>   work.  See the LILO docs for more information.
<br>
<br>   After reinstalling LILO, you should be all set.  Shutdown the system,
<br>   reboot, and enjoy!
<br>
<br>   If you ever need to change the default root device, video mode,
<br>   ramdisk size, etc.  in the kernel image, use the 'rdev' program (or
<br>   alternatively the LILO boot options when appropriate).  No need to
<br>   recompile the kernel to change these parameters.
<br>
<br> - Reboot with the new kernel and enjoy.
<br>
<br>IF SOMETHING GOES WRONG:
<br>
<br> - If you have problems that seem to be due to kernel bugs, please check
<br>   the file MAINTAINERS to see if there is a particular person associated
<br>   with the part of the kernel that you are having trouble with. If there
<br>   isn't anyone listed there, then the second best thing is to mail
<br>   them to me (torvalds@linux-foundation.org), and possibly to any other
<br>   relevant mailing-list or to the newsgroup.
<br>
<br> - In all bug-reports, *please* tell what kernel you are talking about,
<br>   how to duplicate the problem, and what your setup is (use your common
<br>   sense).  If the problem is new, tell me so, and if the problem is
<br>   old, please try to tell me when you first noticed it.
<br>
<br> - If the bug results in a message like
<br>
<br>     unable to handle kernel paging request at address C0000010
<br>     Oops: 0002
<br>     EIP:   0010:XXXXXXXX
<br>     eax: xxxxxxxx   ebx: xxxxxxxx   ecx: xxxxxxxx   edx: xxxxxxxx
<br>     esi: xxxxxxxx   edi: xxxxxxxx   ebp: xxxxxxxx
<br>     ds: xxxx  es: xxxx  fs: xxxx  gs: xxxx
<br>     Pid: xx, process nr: xx
<br>     xx xx xx xx xx xx xx xx xx xx
<br>
<br>   or similar kernel debugging information on your screen or in your
<br>   system log, please duplicate it *exactly*.  The dump may look
<br>   incomprehensible to you, but it does contain information that may
<br>   help debugging the problem.  The text above the dump is also
<br>   important: it tells something about why the kernel dumped code (in
<br>   the above example, it's due to a bad kernel pointer). More information
<br>   on making sense of the dump is in Documentation/oops-tracing.txt
<br>
<br> - If you compiled the kernel with CONFIG_KALLSYMS you can send the dump
<br>   as is, otherwise you will have to use the "ksymoops" program to make
<br>   sense of the dump (but compiling with CONFIG_KALLSYMS is usually preferred).
<br>   This utility can be downloaded from
<br>   ftp://ftp.<country>.kernel.org/pub/linux/utils/kernel/ksymoops/ .
<br>   Alternatively, you can do the dump lookup by hand:
<br>
<br> - In debugging dumps like the above, it helps enormously if you can
<br>   look up what the EIP value means.  The hex value as such doesn't help
<br>   me or anybody else very much: it will depend on your particular
<br>   kernel setup.  What you should do is take the hex value from the EIP
<br>   line (ignore the "0010:"), and look it up in the kernel namelist to
<br>   see which kernel function contains the offending address.
<br>
<br>   To find out the kernel function name, you'll need to find the system
<br>   binary associated with the kernel that exhibited the symptom.  This is
<br>   the file 'linux/vmlinux'.  To extract the namelist and match it against
<br>   the EIP from the kernel crash, do:
<br>
<br>     nm vmlinux | sort | less
<br>
<br>   This will give you a list of kernel addresses sorted in ascending
<br>   order, from which it is simple to find the function that contains the
<br>   offending address.  Note that the address given by the kernel
<br>   debugging messages will not necessarily match exactly with the
<br>   function addresses (in fact, that is very unlikely), so you can't
<br>   just 'grep' the list: the list will, however, give you the starting
<br>   point of each kernel function, so by looking for the function that
<br>   has a starting address lower than the one you are searching for but
<br>   is followed by a function with a higher address you will find the one
<br>   you want.  In fact, it may be a good idea to include a bit of
<br>   "context" in your problem report, giving a few lines around the
<br>   interesting one.
<br>
<br>   If you for some reason cannot do the above (you have a pre-compiled
<br>   kernel image or similar), telling me as much about your setup as
<br>   possible will help.  Please read the REPORTING-BUGS document for details.
<br>
<br> - Alternatively, you can use gdb on a running kernel. (read-only; i.e. you
<br>   cannot change values or set break points.) To do this, first compile the
<br>   kernel with -g; edit arch/x86/Makefile appropriately, then do a "make
<br>   clean". You'll also need to enable CONFIG_PROC_FS (via "make config").
<br>
<br>   After you've rebooted with the new kernel, do "gdb vmlinux /proc/kcore".
<br>   You can now use all the usual gdb commands. The command to look up the
<br>   point where your system crashed is "l *0xXXXXXXXX". (Replace the XXXes
<br>   with the EIP value.)
<br>
<br>   gdb'ing a non-running kernel currently fails because gdb (wrongly)
<br>   disregards the starting offset for which the kernel is compiled.
<br>
<br><p></p><div class="separator"></div><br><p><h2>selinux</h2></p>Please see Documentation/security/SELinux.txt for information on
<br>installing a dummy SELinux policy.
<br><p></p><div class="separator"></div><br><p><h2>ksymoops</h2></p>ksymoops has been removed from the kernel.  It was always meant to be a
<br>free standing utility, not linked to any particular kernel version.
<br>The latest version can be found in
<br>ftp://ftp.<country>.kernel.org/pub/linux/utils/kernel/ksymoops together
<br>with patches to other utilities in order to give more accurate Oops
<br>debugging.
<br>
<br>Keith Owens <kaos@ocs.com.au> Sat Jun 19 10:30:34 EST 1999
<br><p></p><div class="separator"></div><br><p><h2>cramfs</h2></p>Notes on Filesystem Layout
<br>--------------------------
<br>
<br>These notes describe what mkcramfs generates.  Kernel requirements are
<br>a bit looser, e.g. it doesn't care if the <file_data> items are
<br>swapped around (though it does care that directory entries (inodes) in
<br>a given directory are contiguous, as this is used by readdir).
<br>
<br>All data is currently in host-endian format; neither mkcramfs nor the
<br>kernel ever do swabbing.  (See section `Block Size' below.)
<br>
<br><filesystem>:
<br>	<superblock>
<br>	<directory_structure>
<br>	<data>
<br>
<br><superblock>: struct cramfs_super (see cramfs_fs.h).
<br>
<br><directory_structure>:
<br>	For each file:
<br>		struct cramfs_inode (see cramfs_fs.h).
<br>		Filename.  Not generally null-terminated, but it is
<br>		 null-padded to a multiple of 4 bytes.
<br>
<br>The order of inode traversal is described as "width-first" (not to be
<br>confused with breadth-first); i.e. like depth-first but listing all of
<br>a directory's entries before recursing down its subdirectories: the
<br>same order as `ls -AUR' (but without the /^\..*:$/ directory header
<br>lines); put another way, the same order as `find -type d -exec
<br>ls -AU1 {} \;'.
<br>
<br>Beginning in 2.4.7, directory entries are sorted.  This optimization
<br>allows cramfs_lookup to return more quickly when a filename does not
<br>exist, speeds up user-space directory sorts, etc.
<br>
<br><data>:
<br>	One <file_data> for each file that's either a symlink or a
<br>	 regular file of non-zero st_size.
<br>
<br><file_data>:
<br>	nblocks * <block_pointer>
<br>	 (where nblocks = (st_size - 1) / blksize + 1)
<br>	nblocks * <block>
<br>	padding to multiple of 4 bytes
<br>
<br>The i'th <block_pointer> for a file stores the byte offset of the
<br>*end* of the i'th <block> (i.e. one past the last byte, which is the
<br>same as the start of the (i+1)'th <block> if there is one).  The first
<br><block> immediately follows the last <block_pointer> for the file.
<br><block_pointer>s are each 32 bits long.
<br>
<br>The order of <file_data>'s is a depth-first descent of the directory
<br>tree, i.e. the same order as `find -size +0 \( -type f -o -type l \)
<br>-print'.
<br>
<br>
<br><block>: The i'th <block> is the output of zlib's compress function
<br>applied to the i'th blksize-sized chunk of the input data.
<br>(For the last <block> of the file, the input may of course be smaller.)
<br>Each <block> may be a different size.  (See <block_pointer> above.)
<br><block>s are merely byte-aligned, not generally u32-aligned.
<br>
<br>
<br>Holes
<br>-----
<br>
<br>This kernel supports cramfs holes (i.e. [efficient representation of]
<br>blocks in uncompressed data consisting entirely of NUL bytes), but by
<br>default mkcramfs doesn't test for & create holes, since cramfs in
<br>kernels up to at least 2.3.39 didn't support holes.  Run mkcramfs
<br>with -z if you want it to create files that can have holes in them.
<br>
<br>
<br>Tools
<br>-----
<br>
<br>The cramfs user-space tools, including mkcramfs and cramfsck, are
<br>located at <http://sourceforge.net/projects/cramfs/>.
<br>
<br>
<br>Future Development
<br>==================
<br>
<br>Block Size
<br>----------
<br>
<br>(Block size in cramfs refers to the size of input data that is
<br>compressed at a time.  It's intended to be somewhere around
<br>PAGE_SIZE for cramfs_readpage's convenience.)
<br>
<br>The superblock ought to indicate the block size that the fs was
<br>written for, since comments in <linux/pagemap.h> indicate that
<br>PAGE_SIZE may grow in future (if I interpret the comment
<br>correctly).
<br>
<br>Currently, mkcramfs #define's PAGE_SIZE as 4096 and uses that
<br>for blksize, whereas Linux-2.3.39 uses its PAGE_SIZE, which in
<br>turn is defined as PAGE_SIZE (which can be as large as 32KB on arm).
<br>This discrepancy is a bug, though it's not clear which should be
<br>changed.
<br>
<br>One option is to change mkcramfs to take its PAGE_SIZE from
<br><asm/page.h>.  Personally I don't like this option, but it does
<br>require the least amount of change: just change `#define
<br>PAGE_SIZE (4096)' to `#include <asm/page.h>'.  The disadvantage
<br>is that the generated cramfs cannot always be shared between different
<br>kernels, not even necessarily kernels of the same architecture if
<br>PAGE_SIZE is subject to change between kernel versions
<br>(currently possible with arm and ia64).
<br>
<br>The remaining options try to make cramfs more sharable.
<br>
<br>One part of that is addressing endianness.  The two options here are
<br>`always use little-endian' (like ext2fs) or `writer chooses
<br>endianness; kernel adapts at runtime'.  Little-endian wins because of
<br>code simplicity and little CPU overhead even on big-endian machines.
<br>
<br>The cost of swabbing is changing the code to use the le32_to_cpu
<br>etc. macros as used by ext2fs.  We don't need to swab the compressed
<br>data, only the superblock, inodes and block pointers.
<br>
<br>
<br>The other part of making cramfs more sharable is choosing a block
<br>size.  The options are:
<br>
<br>  1. Always 4096 bytes.
<br>
<br>  2. Writer chooses blocksize; kernel adapts but rejects blocksize >
<br>     PAGE_SIZE.
<br>
<br>  3. Writer chooses blocksize; kernel adapts even to blocksize >
<br>     PAGE_SIZE.
<br>
<br>It's easy enough to change the kernel to use a smaller value than
<br>PAGE_SIZE: just make cramfs_readpage read multiple blocks.
<br>
<br>The cost of option 1 is that kernels with a larger PAGE_SIZE
<br>value don't get as good compression as they can.
<br>
<br>The cost of option 2 relative to option 1 is that the code uses
<br>variables instead of #define'd constants.  The gain is that people
<br>with kernels having larger PAGE_SIZE can make use of that if
<br>they don't mind their cramfs being inaccessible to kernels with
<br>smaller PAGE_SIZE values.
<br>
<br>Option 3 is easy to implement if we don't mind being CPU-inefficient:
<br>e.g. get readpage to decompress to a buffer of size MAX_BLKSIZE (which
<br>must be no larger than 32KB) and discard what it doesn't need.
<br>Getting readpage to read into all the covered pages is harder.
<br>
<br>The main advantage of option 3 over 1, 2, is better compression.  The
<br>cost is greater complexity.  Probably not worth it, but I hope someone
<br>will disagree.  (If it is implemented, then I'll re-use that code in
<br>e2compr.)
<br>
<br>
<br>Another cost of 2 and 3 over 1 is making mkcramfs use a different
<br>block size, but that just means adding and parsing a -b option.
<br>
<br>
<br>Inode Size
<br>----------
<br>
<br>Given that cramfs will probably be used for CDs etc. as well as just
<br>silicon ROMs, it might make sense to expand the inode a little from
<br>its current 12 bytes.  Inodes other than the root inode are followed
<br>by filename, so the expansion doesn't even have to be a multiple of 4
<br>bytes.
<br><p></p><div class="separator"></div><br><p><h2>qnx4</h2></p>
<br>  This is a snapshot of the QNX4 filesystem for Linux.
<br>  Please send diffs and remarks to <al@alarsen.net> .
<br>  
<br>Credits :
<br>
<br>Richard "Scuba" A. Frowijn     <scuba@wxs.nl>
<br>Frank "Jedi/Sector One" Denis  <j@pureftpd.org>
<br>Anders Larsen                  <al@alarsen.net> (Maintainer)
<br><p></p><div class="separator"></div><br><p><h2>jffs2</h2></p>
<br>	JFFS2 LOCKING DOCUMENTATION
<br>	---------------------------
<br>
<br>This document attempts to describe the existing locking rules for
<br>JFFS2. It is not expected to remain perfectly up to date, but ought to
<br>be fairly close.
<br>
<br>
<br>	alloc_sem
<br>	---------
<br>
<br>The alloc_sem is a per-filesystem mutex, used primarily to ensure
<br>contiguous allocation of space on the medium. It is automatically
<br>obtained during space allocations (jffs2_reserve_space()) and freed
<br>upon write completion (jffs2_complete_reservation()). Note that
<br>the garbage collector will obtain this right at the beginning of
<br>jffs2_garbage_collect_pass() and release it at the end, thereby
<br>preventing any other write activity on the file system during a
<br>garbage collect pass.
<br>
<br>When writing new nodes, the alloc_sem must be held until the new nodes
<br>have been properly linked into the data structures for the inode to
<br>which they belong. This is for the benefit of NAND flash - adding new
<br>nodes to an inode may obsolete old ones, and by holding the alloc_sem
<br>until this happens we ensure that any data in the write-buffer at the
<br>time this happens are part of the new node, not just something that
<br>was written afterwards. Hence, we can ensure the newly-obsoleted nodes
<br>don't actually get erased until the write-buffer has been flushed to
<br>the medium.
<br>
<br>With the introduction of NAND flash support and the write-buffer, 
<br>the alloc_sem is also used to protect the wbuf-related members of the
<br>jffs2_sb_info structure. Atomically reading the wbuf_len member to see
<br>if the wbuf is currently holding any data is permitted, though.
<br>
<br>Ordering constraints: See f->sem.
<br>
<br>
<br>	File Mutex f->sem
<br>	---------------------
<br>
<br>This is the JFFS2-internal equivalent of the inode mutex i->i_sem.
<br>It protects the contents of the jffs2_inode_info private inode data,
<br>including the linked list of node fragments (but see the notes below on
<br>erase_completion_lock), etc.
<br>
<br>The reason that the i_sem itself isn't used for this purpose is to
<br>avoid deadlocks with garbage collection -- the VFS will lock the i_sem
<br>before calling a function which may need to allocate space. The
<br>allocation may trigger garbage-collection, which may need to move a
<br>node belonging to the inode which was locked in the first place by the
<br>VFS. If the garbage collection code were to attempt to lock the i_sem
<br>of the inode from which it's garbage-collecting a physical node, this
<br>lead to deadlock, unless we played games with unlocking the i_sem
<br>before calling the space allocation functions.
<br>
<br>Instead of playing such games, we just have an extra internal
<br>mutex, which is obtained by the garbage collection code and also
<br>by the normal file system code _after_ allocation of space.
<br>
<br>Ordering constraints: 
<br>
<br>	1. Never attempt to allocate space or lock alloc_sem with 
<br>	   any f->sem held.
<br>	2. Never attempt to lock two file mutexes in one thread.
<br>	   No ordering rules have been made for doing so.
<br>	3. Never lock a page cache page with f->sem held.
<br>
<br>
<br>	erase_completion_lock spinlock
<br>	------------------------------
<br>
<br>This is used to serialise access to the eraseblock lists, to the
<br>per-eraseblock lists of physical jffs2_raw_node_ref structures, and
<br>(NB) the per-inode list of physical nodes. The latter is a special
<br>case - see below.
<br>
<br>As the MTD API no longer permits erase-completion callback functions
<br>to be called from bottom-half (timer) context (on the basis that nobody
<br>ever actually implemented such a thing), it's now sufficient to use
<br>a simple spin_lock() rather than spin_lock_bh().
<br>
<br>Note that the per-inode list of physical nodes (f->nodes) is a special
<br>case. Any changes to _valid_ nodes (i.e. ->flash_offset & 1 == 0) in
<br>the list are protected by the file mutex f->sem. But the erase code
<br>may remove _obsolete_ nodes from the list while holding only the
<br>erase_completion_lock. So you can walk the list only while holding the
<br>erase_completion_lock, and can drop the lock temporarily mid-walk as
<br>long as the pointer you're holding is to a _valid_ node, not an
<br>obsolete one.
<br>
<br>The erase_completion_lock is also used to protect the c->gc_task
<br>pointer when the garbage collection thread exits. The code to kill the
<br>GC thread locks it, sends the signal, then unlocks it - while the GC
<br>thread itself locks it, zeroes c->gc_task, then unlocks on the exit path.
<br>
<br>
<br>	inocache_lock spinlock
<br>	----------------------
<br>
<br>This spinlock protects the hashed list (c->inocache_list) of the
<br>in-core jffs2_inode_cache objects (each inode in JFFS2 has the
<br>correspondent jffs2_inode_cache object). So, the inocache_lock
<br>has to be locked while walking the c->inocache_list hash buckets.
<br>
<br>This spinlock also covers allocation of new inode numbers, which is
<br>currently just '++->highest_ino++', but might one day get more complicated
<br>if we need to deal with wrapping after 4 milliard inode numbers are used.
<br>
<br>Note, the f->sem guarantees that the correspondent jffs2_inode_cache
<br>will not be removed. So, it is allowed to access it without locking
<br>the inocache_lock spinlock. 
<br>
<br>Ordering constraints: 
<br>
<br>	If both erase_completion_lock and inocache_lock are needed, the
<br>	c->erase_completion has to be acquired first.
<br>
<br>
<br>	erase_free_sem
<br>	--------------
<br>
<br>This mutex is only used by the erase code which frees obsolete node
<br>references and the jffs2_garbage_collect_deletion_dirent() function.
<br>The latter function on NAND flash must read _obsolete_ nodes to
<br>determine whether the 'deletion dirent' under consideration can be
<br>discarded or whether it is still required to show that an inode has
<br>been unlinked. Because reading from the flash may sleep, the
<br>erase_completion_lock cannot be held, so an alternative, more
<br>heavyweight lock was required to prevent the erase code from freeing
<br>the jffs2_raw_node_ref structures in question while the garbage
<br>collection code is looking at them.
<br>
<br>Suggestions for alternative solutions to this problem would be welcomed.
<br>
<br>
<br>	wbuf_sem
<br>	--------
<br>
<br>This read/write semaphore protects against concurrent access to the
<br>write-behind buffer ('wbuf') used for flash chips where we must write
<br>in blocks. It protects both the contents of the wbuf and the metadata
<br>which indicates which flash region (if any) is currently covered by 
<br>the buffer.
<br>
<br>Ordering constraints:
<br>	Lock wbuf_sem last, after the alloc_sem or and f->sem.
<br>
<br>
<br>	c->xattr_sem
<br>	------------
<br>
<br>This read/write semaphore protects against concurrent access to the
<br>xattr related objects which include stuff in superblock and ic->xref.
<br>In read-only path, write-semaphore is too much exclusion. It's enough
<br>by read-semaphore. But you must hold write-semaphore when updating,
<br>creating or deleting any xattr related object.
<br>
<br>Once xattr_sem released, there would be no assurance for the existence
<br>of those objects. Thus, a series of processes is often required to retry,
<br>when updating such a object is necessary under holding read semaphore.
<br>For example, do_jffs2_getxattr() holds read-semaphore to scan xref and
<br>xdatum at first. But it retries this process with holding write-semaphore
<br>after release read-semaphore, if it's necessary to load name/value pair
<br>from medium.
<br>
<br>Ordering constraints:
<br>	Lock xattr_sem last, after the alloc_sem.
<br><p></p><div class="separator"></div><br><p><h2>reiserfs</h2></p>[LICENSING]
<br>
<br>ReiserFS is hereby licensed under the GNU General
<br>Public License version 2.
<br>
<br>Source code files that contain the phrase "licensing governed by
<br>reiserfs/README" are "governed files" throughout this file.  Governed
<br>files are licensed under the GPL.  The portions of them owned by Hans
<br>Reiser, or authorized to be licensed by him, have been in the past,
<br>and likely will be in the future, licensed to other parties under
<br>other licenses.  If you add your code to governed files, and don't
<br>want it to be owned by Hans Reiser, put your copyright label on that
<br>code so the poor blight and his customers can keep things straight.
<br>All portions of governed files not labeled otherwise are owned by Hans
<br>Reiser, and by adding your code to it, widely distributing it to
<br>others or sending us a patch, and leaving the sentence in stating that
<br>licensing is governed by the statement in this file, you accept this.
<br>It will be a kindness if you identify whether Hans Reiser is allowed
<br>to license code labeled as owned by you on your behalf other than
<br>under the GPL, because he wants to know if it is okay to do so and put
<br>a check in the mail to you (for non-trivial improvements) when he
<br>makes his next sale.  He makes no guarantees as to the amount if any,
<br>though he feels motivated to motivate contributors, and you can surely
<br>discuss this with him before or after contributing.  You have the
<br>right to decline to allow him to license your code contribution other
<br>than under the GPL.
<br>
<br>Further licensing options are available for commercial and/or other
<br>interests directly from Hans Reiser: hans@reiser.to.  If you interpret
<br>the GPL as not allowing those additional licensing options, you read
<br>it wrongly, and Richard Stallman agrees with me, when carefully read
<br>you can see that those restrictions on additional terms do not apply
<br>to the owner of the copyright, and my interpretation of this shall
<br>govern for this license.
<br>
<br>Finally, nothing in this license shall be interpreted to allow you to
<br>fail to fairly credit me, or to remove my credits, without my
<br>permission, unless you are an end user not redistributing to others.
<br>If you have doubts about how to properly do that, or about what is
<br>fair, ask.  (Last I spoke with him Richard was contemplating how best
<br>to address the fair crediting issue in the next GPL version.)
<br>
<br>[END LICENSING]
<br>
<br>Reiserfs is a file system based on balanced tree algorithms, which is
<br>described at https://reiser4.wiki.kernel.org/index.php/Main_Page 
<br>
<br>Stop reading here.  Go there, then return.
<br>
<br>Send bug reports to yura@namesys.botik.ru.
<br>
<br>mkreiserfs and other utilities are in reiserfs/utils, or wherever your
<br>Linux provider put them.  There is some disagreement about how useful
<br>it is for users to get their fsck and mkreiserfs out of sync with the
<br>version of reiserfs that is in their kernel, with many important
<br>distributors wanting them out of sync.:-) Please try to remember to
<br>recompile and reinstall fsck and mkreiserfs with every update of
<br>reiserfs, this is a common source of confusion.  Note that some of the
<br>utilities cannot be compiled without accessing the balancing code
<br>which is in the kernel code, and relocating the utilities may require
<br>you to specify where that code can be found.
<br>
<br>Yes, if you update your reiserfs kernel module you do have to
<br>recompile your kernel, most of the time.  The errors you get will be
<br>quite cryptic if your forget to do so.
<br>
<br>Real users, as opposed to folks who want to hack and then understand
<br>what went wrong, will want REISERFS_CHECK off.
<br>
<br>Hideous Commercial Pitch: Spread your development costs across other OS
<br>vendors.  Select from the best in the world, not the best in your
<br>building, by buying from third party OS component suppliers.  Leverage
<br>the software component development power of the internet.  Be the most
<br>aggressive in taking advantage of the commercial possibilities of
<br>decentralized internet development, and add value through your branded
<br>integration that you sell as an operating system.  Let your competitors
<br>be the ones to compete against the entire internet by themselves.  Be
<br>hip, get with the new economic trend, before your competitors do.  Send
<br>email to hans@reiser.to.
<br>
<br>To understand the code, after reading the website, start reading the
<br>code by reading reiserfs_fs.h first.
<br>
<br>Hans Reiser was the project initiator, primary architect, source of all
<br>funding for the first 5.5 years, and one of the programmers.  He owns
<br>the copyright.
<br>
<br>Vladimir Saveljev was one of the programmers, and he worked long hours
<br>writing the cleanest code.  He always made the effort to be the best he
<br>could be, and to make his code the best that it could be.  What resulted
<br>was quite remarkable. I don't think that money can ever motivate someone
<br>to work the way he did, he is one of the most selfless men I know.
<br>
<br>Yura helps with benchmarking, coding hashes, and block pre-allocation
<br>code.
<br>
<br>Anatoly Pinchuk is a former member of our team who worked closely with
<br>Vladimir throughout the project's development.  He wrote a quite
<br>substantial portion of the total code.  He realized that there was a
<br>space problem with packing tails of files for files larger than a node
<br>that start on a node aligned boundary (there are reasons to want to node
<br>align files), and he invented and implemented indirect items and
<br>unformatted nodes as the solution.
<br>
<br>Konstantin Shvachko, with the help of the Russian version of a VC,
<br>tried to put me in a position where I was forced into giving control
<br>of the project to him.  (Fortunately, as the person paying the money
<br>for all salaries from my dayjob I owned all copyrights, and you can't
<br>really force takeovers of sole proprietorships.)  This was something
<br>curious, because he never really understood the value of our project,
<br>why we should do what we do, or why innovation was possible in
<br>general, but he was sure that he ought to be controlling it.  Every
<br>innovation had to be forced past him while he was with us.  He added
<br>two years to the time required to complete reiserfs, and was a net
<br>loss for me.  Mikhail Gilula was a brilliant innovator who also left
<br>in a destructive way that erased the value of his contributions, and
<br>that he was shown much generosity just makes it more painful.
<br>
<br>Grigory Zaigralin was an extremely effective system administrator for
<br>our group.
<br>
<br>Igor Krasheninnikov was wonderful at hardware procurement, repair, and
<br>network installation.
<br>
<br>Jeremy Fitzhardinge wrote the teahash.c code, and he gives credit to a
<br>textbook he got the algorithm from in the code.  Note that his analysis
<br>of how we could use the hashing code in making 32 bit NFS cookies work
<br>was probably more important than the actual algorithm.  Colin Plumb also
<br>contributed to it.
<br>
<br>Chris Mason dived right into our code, and in just a few months produced
<br>the journaling code that dramatically increased the value of ReiserFS.
<br>He is just an amazing programmer.
<br>
<br>Igor Zagorovsky is writing much of the new item handler and extent code
<br>for our next major release.
<br>
<br>Alexander Zarochentcev (sometimes known as zam, or sasha), wrote the
<br>resizer, and is hard at work on implementing allocate on flush.  SGI
<br>implemented allocate on flush before us for XFS, and generously took
<br>the time to convince me we should do it also.  They are great people,
<br>and a great company.
<br>
<br>Yuri Shevchuk and Nikita Danilov are doing squid cache optimization.
<br>
<br>Vitaly Fertman is doing fsck.
<br>
<br>Jeff Mahoney, of SuSE, contributed a few cleanup fixes, most notably
<br>the endian safe patches which allow ReiserFS to run on any platform
<br>supported by the Linux kernel.
<br>
<br>SuSE, IntegratedLinux.com, Ecila, MP3.com, bigstorage.com, and the
<br>Alpha PC Company made it possible for me to not have a day job
<br>anymore, and to dramatically increase our staffing.  Ecila funded
<br>hypertext feature development, MP3.com funded journaling, SuSE funded
<br>core development, IntegratedLinux.com funded squid web cache
<br>appliances, bigstorage.com funded HSM, and the alpha PC company funded
<br>the alpha port.  Many of these tasks were helped by sponsors other
<br>than the ones just named.  SuSE has helped in much more than just
<br>funding....
<br>
<br><p></p><div class="separator"></div><br><p><h2>qnx6</h2></p>
<br>  This is a snapshot of the QNX6 filesystem for Linux.
<br>  Please send diffs and remarks to <chaosman@ontika.net> .
<br>
<br>Credits :
<br>
<br>Al Viro		<viro@ZenIV.linux.org.uk> (endless patience with me & support ;))
<br>Kai Bankett	<chaosman@ontika.net> (Maintainer)
<br><p></p><div class="separator"></div><br><p><h2>firmware</h2></p>
<br>	DO NOT ADD FIRMWARE TO THIS DIRECTORY.
<br>	======================================
<br>
<br>This directory is only here to contain firmware images extracted from old
<br>device drivers which predate the common use of request_firmware().
<br>
<br>As we update those drivers to use request_firmware() and keep a clean
<br>separation between code and firmware, we put the extracted firmware
<br>here.
<br>
<br>This directory is _NOT_ for adding arbitrary new firmware images. The
<br>place to add those is the separate linux-firmware repository:
<br>
<br>    git://git.kernel.org/pub/scm/linux/kernel/git/firmware/linux-firmware.git
<br>
<br>That repository contains all these firmware images which have been
<br>extracted from older drivers, as well various new firmware images which
<br>we were never permitted to include in a GPL'd work, but which we _have_
<br>been permitted to redistribute under separate cover.
<br>
<br>To submit firmware to that repository, please send either a git binary
<br>diff or preferably a git pull request to:
<br>      linux-firmware@kernel.org
<br>and also cc: to related mailing lists.
<br>
<br>Your commit should include an update to the WHENCE file clearly
<br>identifying the licence under which the firmware is available, and
<br>that it is redistributable. If the licence is long and involved, it's
<br>permitted to include it in a separate file and refer to it from the
<br>WHENCE file.
<br>And if it were possible, a changelog of the firmware itself.
<br>
<br>Ideally, your commit should contain a Signed-Off-By: from someone
<br>authoritative on the licensing of the firmware in question (i.e. from
<br>within the company that owns the code).
<br>
<br>
<br>WARNING:
<br>=======
<br>
<br>Don't send any "CONFIDENTIALITY STATEMENT" in your e-mail, patch or
<br>request. Otherwise your firmware _will never be accepted_.
<br>
<br>Maintainers are really busy, so don't expect a prompt reply.
<br><p></p><div class="separator"></div><br><p><h2>oss</h2></p>The modular sound driver patches were funded by Red Hat Software 
<br>(www.redhat.com). The sound driver here is thus a modified version of 
<br>Hannu's code. Please bear that in mind when considering the appropriate
<br>forums for bug reporting. 
<br>
<br>Alan Cox
<br><p></p><div class="separator"></div><br><p><h2>usbip</h2></p>#
<br># README for usbip-utils
<br>#
<br># Copyright (C) 2011 matt mooney <mfm@muteddisk.com>
<br>#               2005-2008 Takahiro Hirofuchi
<br>
<br>
<br>[Requirements]
<br>    - USB/IP device drivers
<br>	Found in the staging directory of the Linux kernel.
<br>
<br>    - libudev >= 2.0
<br>	libudev library
<br>
<br>    - libwrap0-dev
<br>	tcp wrapper library
<br>
<br>    - gcc >= 4.0
<br>
<br>    - libtool, automake >= 1.9, autoconf >= 2.5.0, pkg-config
<br>
<br>[Optional]
<br>    - hwdata
<br>        Contains USB device identification data.
<br>
<br>
<br>[Install]
<br>    0. Generate configuration scripts.
<br>	$ ./autogen.sh
<br>
<br>    1. Compile & install the userspace utilities.
<br>	$ ./configure [--with-tcp-wrappers=no] [--with-usbids-dir=<dir>]
<br>	$ make install
<br>
<br>    2. Compile & install USB/IP drivers.
<br>
<br>
<br>[Usage]
<br>    server:# (Physically attach your USB device.)
<br>
<br>    server:# insmod usbip-core.ko
<br>    server:# insmod usbip-host.ko
<br>
<br>    server:# usbipd -D
<br>	- Start usbip daemon.
<br>
<br>    server:# usbip list -l
<br>	- List driver assignments for USB devices.
<br>
<br>    server:# usbip bind --busid 1-2
<br>	- Bind usbip-host.ko to the device with busid 1-2.
<br>	- The USB device 1-2 is now exportable to other hosts!
<br>	- Use `usbip unbind --busid 1-2' to stop exporting the device.
<br>
<br>    client:# insmod usbip-core.ko
<br>    client:# insmod vhci-hcd.ko
<br>
<br>    client:# usbip list --remote <host>
<br>	- List exported USB devices on the <host>.
<br>
<br>    client:# usbip attach --remote <host> --busid 1-2
<br>	- Connect the remote USB device.
<br>
<br>    client:# usbip port
<br>	- Show virtual port status.
<br>
<br>    client:# usbip detach --port <port>
<br>	- Detach the USB device.
<br>
<br>
<br>[Example]
<br>---------------------------
<br>	SERVER SIDE
<br>---------------------------
<br>Physically attach your USB devices to this host.
<br>
<br>    trois:# insmod path/to/usbip-core.ko
<br>    trois:# insmod path/to/usbip-host.ko
<br>    trois:# usbipd -D
<br>
<br>In another terminal, let's look up what USB devices are physically
<br>attached to this host.
<br>
<br>    trois:# usbip list -l
<br>    Local USB devices
<br>    =================
<br>     - busid 1-1 (05a9:a511)
<br>	     1-1:1.0 -> ov511
<br>
<br>     - busid 3-2 (0711:0902)
<br>	     3-2:1.0 -> none
<br>
<br>     - busid 3-3.1 (08bb:2702)
<br>	     3-3.1:1.0 -> snd-usb-audio
<br>	     3-3.1:1.1 -> snd-usb-audio
<br>
<br>     - busid 3-3.2 (04bb:0206)
<br>	     3-3.2:1.0 -> usb-storage
<br>
<br>     - busid 3-3 (0409:0058)
<br>	     3-3:1.0 -> hub
<br>
<br>     - busid 4-1 (046d:08b2)
<br>	     4-1:1.0 -> none
<br>	     4-1:1.1 -> none
<br>	     4-1:1.2 -> none
<br>
<br>     - busid 5-2 (058f:9254)
<br>	     5-2:1.0 -> hub
<br>
<br>A USB storage device of busid 3-3.2 is now bound to the usb-storage
<br>driver. To export this device, we first mark the device as
<br>"exportable"; the device is bound to the usbip-host driver. Please
<br>remember you can not export a USB hub.
<br>
<br>Mark the device of busid 3-3.2 as exportable:
<br>
<br>    trois:# usbip --debug bind --busid 3-3.2
<br>    ...
<br>    usbip debug: usbip_bind.c:162:[unbind_other] 3-3.2:1.0 -> usb-storage
<br>    ...
<br>    bind device on busid 3-3.2: complete
<br>
<br>    trois:# usbip list -l
<br>    Local USB devices
<br>    =================
<br>    ...
<br>
<br>     - busid 3-3.2 (04bb:0206)
<br>	     3-3.2:1.0 -> usbip-host
<br>    ...
<br>
<br>---------------------------
<br>	CLIENT SIDE
<br>---------------------------
<br>First, let's list available remote devices that are marked as
<br>exportable on the host.
<br>
<br>    deux:# insmod path/to/usbip-core.ko
<br>    deux:# insmod path/to/vhci-hcd.ko
<br>
<br>    deux:# usbip list --remote 10.0.0.3
<br>    Exportable USB devices
<br>    ======================
<br>     - 10.0.0.3
<br>	    1-1: Prolific Technology, Inc. : unknown product (067b:3507)
<br>	       : /sys/devices/pci0000:00/0000:00:1f.2/usb1/1-1
<br>	       : (Defined at Interface level) / unknown subclass / unknown protocol (00/00/00)
<br>	       :  0 - Mass Storage / SCSI / Bulk (Zip) (08/06/50)
<br>
<br>	1-2.2.1: Apple Computer, Inc. : unknown product (05ac:0203)
<br>	       : /sys/devices/pci0000:00/0000:00:1f.2/usb1/1-2/1-2.2/1-2.2.1
<br>	       : (Defined at Interface level) / unknown subclass / unknown protocol (00/00/00)
<br>	       :  0 - Human Interface Devices / Boot Interface Subclass / Keyboard (03/01/01)
<br>
<br>	1-2.2.3: OmniVision Technologies, Inc. : OV511+ WebCam (05a9:a511)
<br>	       : /sys/devices/pci0000:00/0000:00:1f.2/usb1/1-2/1-2.2/1-2.2.3
<br>	       : (Defined at Interface level) / unknown subclass / unknown protocol (00/00/00)
<br>	       :  0 - Vendor Specific Class / unknown subclass / unknown protocol (ff/00/00)
<br>
<br>	    3-1: Logitech, Inc. : QuickCam Pro 4000 (046d:08b2)
<br>	       : /sys/devices/pci0000:00/0000:00:1e.0/0000:02:0a.0/usb3/3-1
<br>	       : (Defined at Interface level) / unknown subclass / unknown protocol (00/00/00)
<br>	       :  0 - Data / unknown subclass / unknown protocol (0a/ff/00)
<br>	       :  1 - Audio / Control Device / unknown protocol (01/01/00)
<br>	       :  2 - Audio / Streaming / unknown protocol (01/02/00)
<br>
<br>Attach a remote USB device:
<br>
<br>    deux:# usbip attach --remote 10.0.0.3 --busid 1-1
<br>    port 0 attached
<br>
<br>Show the devices attached to this client:
<br>
<br>    deux:# usbip port
<br>    Port 00: <Port in Use> at Full Speed(12Mbps)
<br>	   Prolific Technology, Inc. : unknown product (067b:3507)
<br>	   6-1 -> usbip://10.0.0.3:3240/1-1  (remote bus/dev 001/004)
<br>	   6-1:1.0 used by usb-storage
<br>			  /sys/class/scsi_device/0:0:0:0/device
<br>			  /sys/class/scsi_host/host0/device
<br>			  /sys/block/sda/device
<br>
<br>Detach the imported device:
<br>
<br>    deux:# usbip detach --port 0
<br>    port 0 detached
<br>
<br>
<br>[Checklist]
<br>    - See 'Debug Tips' on the project wiki.
<br>	- http://usbip.wiki.sourceforge.net/how-to-debug-usbip
<br>    - usbip-host.ko must be bound to the target device.
<br>	- See /proc/bus/usb/devices and find "Driver=..." lines of the device.
<br>    - Shutdown firewall.
<br>	- usbip now uses TCP port 3240.
<br>    - Disable SELinux.
<br>    - Check the kernel and daemon messages.
<br>
<br>
<br>[Contact]
<br>    Mailing List: linux-usb@vger.kernel.org
<br><p></p><div class="separator"></div><br><p><h2>empty2</h2></p>This directory is left intentionally without Build file
<br>to test proper nesting into Build-less directories.
<br><p></p><div class="separator"></div><br><p><h2>cpupower</h2></p>The cpupower package consists of the following elements:
<br>
<br>requirements
<br>------------
<br>
<br>On x86 pciutils is needed at runtime (-lpci).
<br>For compilation pciutils-devel (pci/pci.h) and a gcc version
<br>providing cpuid.h is needed.
<br>For both it's not explicitly checked for (yet).
<br>
<br>
<br>libcpupower
<br>----------
<br>
<br>"libcpupower" is a library which offers a unified access method for userspace
<br>tools and programs to the cpufreq core and drivers in the Linux kernel. This
<br>allows for code reduction in userspace tools, a clean implementation of
<br>the interaction to the cpufreq core, and support for both the sysfs and proc
<br>interfaces [depending on configuration, see below].
<br>
<br>
<br>compilation and installation
<br>----------------------------
<br>
<br>make
<br>su
<br>make install
<br>
<br>should suffice on most systems. It builds libcpupower to put in
<br>/usr/lib; cpupower, cpufreq-bench_plot.sh to put in /usr/bin; and
<br>cpufreq-bench to put in /usr/sbin. If you want to set up the paths
<br>differently and/or want to configure the package to your specific
<br>needs, you need to open "Makefile" with an editor of your choice and
<br>edit the block marked CONFIGURATION.
<br>
<br>
<br>THANKS
<br>------
<br>Many thanks to Mattia Dongili who wrote the autotoolization and
<br>libtoolization, the manpages and the italian language file for cpupower;
<br>to Dave Jones for his feedback and his dump_psb tool; to Bruno Ducrot for his
<br>powernow-k8-decode and intel_gsic tools as well as the french language file;
<br>and to various others commenting on the previous (pre-)releases of 
<br>cpupower.
<br>
<br>
<br>        Dominik Brodowski
<br><p></p><div class="separator"></div><br><p><h2>bench</h2></p>This is cpufreq-bench, a microbenchmark for the cpufreq framework.
<br>
<br>Purpose
<br>=======
<br>
<br>What is this benchmark for:
<br>  - Identify worst case performance loss when doing dynamic frequency
<br>    scaling using Linux kernel governors
<br>  - Identify average reaction time of a governor to CPU load changes
<br>  - (Stress) Testing whether a cpufreq low level driver or governor works
<br>    as expected
<br>  - Identify cpufreq related performance regressions between kernels
<br>  - Possibly Real time priority testing? -> what happens if there are
<br>    processes with a higher prio than the governor's kernel thread
<br>  - ...
<br>
<br>What this benchmark does *not* cover:
<br>  - Power saving related regressions (In fact as better the performance
<br>    throughput is, the worse the power savings will be, but the first should
<br>    mostly count more...)
<br>  - Real world (workloads)
<br>
<br>
<br>Description
<br>===========
<br>
<br>cpufreq-bench helps to test the condition of a given cpufreq governor.
<br>For that purpose, it compares the performance governor to a configured
<br>powersave module.
<br>
<br>
<br>How it works
<br>============
<br>You can specify load (100% CPU load) and sleep (0% CPU load) times in us which
<br>will be run X time in a row (cycles):
<br>
<br>         sleep=25000
<br>         load=25000
<br>         cycles=20
<br>
<br>This part of the configuration file will create 25ms load/sleep turns,
<br>repeated 20 times.
<br>
<br>Adding this:
<br>         sleep_step=25000
<br>         load_step=25000
<br>         rounds=5
<br>Will increase load and sleep time by 25ms 5 times.
<br>Together you get following test:
<br>25ms  load/sleep time repeated 20 times (cycles).
<br>50ms  load/sleep time repeated 20 times (cycles).
<br>..
<br>100ms load/sleep time repeated 20 times (cycles).
<br>
<br>First it is calibrated how long a specific CPU intensive calculation
<br>takes on this machine and needs to be run in a loop using the performance
<br>governor.
<br>Then the above test runs are processed using the performance governor
<br>and the governor to test. The time the calculation really needed
<br>with the dynamic freq scaling governor is compared with the time needed
<br>on full performance and you get the overall performance loss.
<br>
<br>
<br>Example of expected results with ondemand governor:
<br>
<br>This shows expected results of the first two test run rounds from
<br>above config, you there have:
<br>
<br>100% CPU load (load) | 0 % CPU load (sleep)  | round
<br>   25 ms             |    25 ms              |   1
<br>   50 ms             |    50 ms              |   2
<br>
<br>For example if ondemand governor is configured to have a 50ms
<br>sampling rate you get:
<br>
<br>In round 1, ondemand should have rather static 50% load and probably
<br>won't ever switch up (as long as up_threshold is above).
<br>
<br>In round 2, if the ondemand sampling times exactly match the load/sleep
<br>trigger of the cpufreq-bench, you will see no performance loss (compare with
<br>below possible ondemand sample kick ins (1)):
<br>
<br>But if ondemand always kicks in in the middle of the load sleep cycles, it
<br>will always see 50% loads and you get worst performance impact never
<br>switching up (compare with below possible ondemand sample kick ins (2))::
<br>
<br>      50     50   50   50ms ->time
<br>load -----|     |-----|     |-----|     |-----|
<br>          |     |     |     |     |     |     |
<br>sleep     |-----|     |-----|     |-----|     |----
<br>    |-----|-----|-----|-----|-----|-----|-----|----  ondemand sampling (1)
<br>         100    0    100    0    100    0    100     load seen by ondemand(%)
<br>       |-----|-----|-----|-----|-----|-----|-----|--   ondemand sampling (2)
<br>      50     50    50    50    50    50    50        load seen by ondemand(%)
<br>
<br>You can easily test all kind of load/sleep times and check whether your
<br>governor in average behaves as expected.
<br>
<br>
<br>ToDo
<br>====
<br>
<br>Provide a gnuplot utility script for easy generation of plots to present
<br>the outcome nicely.
<br>
<br>
<br>cpufreq-bench Command Usage
<br>===========================
<br>-l, --load=<long int>           initial load time in us
<br>-s, --sleep=<long int>          initial sleep time in us
<br>-x, --load-step=<long int>      time to be added to load time, in us
<br>-y, --sleep-step=<long int>     time to be added to sleep time, in us
<br>-c, --cpu=<unsigned int>        CPU Number to use, starting at 0
<br>-p, --prio=<priority>           scheduler priority, HIGH, LOW or DEFAULT
<br>-g, --governor=<governor>       cpufreq governor to test
<br>-n, --cycles=<int>              load/sleep cycles to get an average value to compare
<br>-r, --rounds<int>               load/sleep rounds
<br>-f, --file=<configfile>         config file to use
<br>-o, --output=<dir>              output dir, must exist
<br>-v, --verbose                   verbose output on/off
<br>
<br>Due to the high priority, the application may not be responsible for some time.
<br>After the benchmark, the logfile is saved in OUTPUTDIR/benchmark_TIMESTAMP.log
<br>
<br><p></p><div class="separator"></div><br><p><h2>futex</h2></p>Futex Test
<br>==========
<br>Futex Test is intended to thoroughly test the Linux kernel futex system call
<br>API.
<br>
<br>Functional tests shall test the documented behavior of the futex operation
<br>code under test. This includes checking for proper behavior under normal use,
<br>odd corner cases, regression tests, and abject abuse and misuse.
<br>
<br>Futextest will also provide example implementation of mutual exclusion
<br>primitives. These can be used as is in user applications or can serve as
<br>examples for system libraries. These will likely be added to either a new lib/
<br>directory or purely as header files under include/, I'm leaning toward the
<br>latter.
<br>
<br>Quick Start
<br>-----------
<br># make
<br># ./run.sh
<br>
<br>Design and Implementation Goals
<br>-------------------------------
<br>o Tests should be as self contained as is practical so as to facilitate sharing
<br>  the individual tests on mailing list discussions and bug reports.
<br>o The build system shall remain as simple as possible, avoiding any archive or
<br>  shared object building and linking.
<br>o Where possible, any helper functions or other package-wide code shall be
<br>  implemented in header files, avoiding the need to compile intermediate object
<br>  files.
<br>o External dependencies shall remain as minimal as possible. Currently gcc
<br>  and glibc are the only dependencies.
<br>o Tests return 0 for success and < 0 for failure.
<br>
<br>Output Formatting
<br>-----------------
<br>Test output shall be easily parsable by both human and machine. Title and
<br>results are printed to stdout, while intermediate ERROR or FAIL messages are
<br>sent to stderr. Tests shall support the -c option to print PASS, FAIL, and
<br>ERROR strings in color for easy visual parsing. Output shall conform to the
<br>following format:
<br>
<br>test_name: Description of the test
<br>	Arguments: arg1=val1 #units specified for clarity where appropriate
<br>	ERROR: Description of unexpected error
<br>	 FAIL: Reason for test failure
<br>	# FIXME: Perhaps an " INFO: informational message" option would be
<br>	#        useful here. Using -v to toggle it them on and off, as with -c.
<br>	# there may be multiple ERROR or FAIL messages
<br>Result: (PASS|FAIL|ERROR)
<br>
<br>Naming
<br>------
<br>o FIXME: decide on a sane test naming scheme.  Currently the tests are named
<br>  based on the primary futex operation they test. Eventually this will become a
<br>  problem as we intend to write multiple tests which collide in this namespace.
<br>  Perhaps something like "wait-wake-1" "wait-wake-2" is adequate, leaving the
<br>  detailed description in the test source and the output.
<br>
<br>Coding Style
<br>------------
<br>o The Futex Test project adheres to the coding standards set forth by Linux
<br>  kernel as defined in the Linux source Documentation/CodingStyle.
<br><p></p><div class="separator"></div><br><p><h2>ftrace</h2></p>Linux Ftrace Testcases
<br>
<br>This is a collection of testcases for ftrace tracing feature in the Linux
<br>kernel. Since ftrace exports interfaces via the debugfs, we just need
<br>shell scripts for testing. Feel free to add new test cases.
<br>
<br>Running the ftrace testcases
<br>============================
<br>
<br>At first, you need to be the root user to run this script.
<br>To run all testcases:
<br>
<br>  $ sudo ./ftracetest
<br>
<br>To run specific testcases:
<br>
<br>  # ./ftracetest test.d/basic3.tc
<br>
<br>Or you can also run testcases under given directory:
<br>
<br>  # ./ftracetest test.d/kprobe/
<br>
<br>Contributing new testcases
<br>==========================
<br>
<br>Copy test.d/template to your testcase (whose filename must have *.tc
<br>extension) and rewrite the test description line.
<br>
<br> * The working directory of the script is <debugfs>/tracing/.
<br>
<br> * Take care with side effects as the tests are run with root privilege.
<br>
<br> * The tests should not run for a long period of time (more than 1 min.)
<br>   These are to be unit tests.
<br>
<br> * You can add a directory for your testcases under test.d/ if needed.
<br>
<br> * The test cases should run on dash (busybox shell) for testing on
<br>   minimal cross-build environments.
<br>
<br> * Note that the tests are run with "set -e" (errexit) option. If any
<br>   command fails, the test will be terminated immediately.
<br>
<br> * The tests can return some result codes instead of pass or fail by
<br>   using exit_unresolved, exit_untested, exit_unsupported and exit_xfail.
<br>
<br>Result code
<br>===========
<br>
<br>Ftracetest supports following result codes.
<br>
<br> * PASS: The test succeeded as expected. The test which exits with 0 is
<br>         counted as passed test.
<br>
<br> * FAIL: The test failed, but was expected to succeed. The test which exits
<br>         with !0 is counted as failed test.
<br>
<br> * UNRESOLVED: The test produced unclear or intermidiate results.
<br>             for example, the test was interrupted
<br>                       or the test depends on a previous test, which failed.
<br>                       or the test was set up incorrectly
<br>             The test which is in above situation, must call exit_unresolved.
<br>
<br> * UNTESTED: The test was not run, currently just a placeholder.
<br>             In this case, the test must call exit_untested.
<br>
<br> * UNSUPPORTED: The test failed because of lack of feature.
<br>               In this case, the test must call exit_unsupported.
<br>
<br> * XFAIL: The test failed, and was expected to fail.
<br>          To return XFAIL, call exit_xfail from the test.
<br>
<br>There are some sample test scripts for result code under samples/.
<br>You can also run samples as below:
<br>
<br>  # ./ftracetest samples/
<br>
<br>TODO
<br>====
<br>
<br> * Fancy colored output :)
<br>
<br><p></p><div class="separator"></div><br><p><h2>zram</h2></p>zram: Compressed RAM based block devices
<br>----------------------------------------
<br>* Introduction
<br>
<br>The zram module creates RAM based block devices named /dev/zram<id>
<br>(<id> = 0, 1, ...). Pages written to these disks are compressed and stored
<br>in memory itself. These disks allow very fast I/O and compression provides
<br>good amounts of memory savings. Some of the usecases include /tmp storage,
<br>use as swap disks, various caches under /var and maybe many more :)
<br>
<br>Statistics for individual zram devices are exported through sysfs nodes at
<br>/sys/block/zram<id>/
<br>
<br>Kconfig required:
<br>CONFIG_ZRAM=y
<br>CONFIG_CRYPTO_LZ4=y
<br>CONFIG_ZPOOL=y
<br>CONFIG_ZSMALLOC=y
<br>
<br>ZRAM Testcases
<br>--------------
<br>zram_lib.sh: create library with initialization/cleanup functions
<br>zram.sh: For sanity check of CONFIG_ZRAM and to run zram01 and zram02
<br>
<br>Two functional tests: zram01 and zram02:
<br>zram01.sh: creates general purpose ram disks with ext4 filesystems
<br>zram02.sh: creates block device for swap
<br>
<br>Commands required for testing:
<br> - bc
<br> - dd
<br> - free
<br> - awk
<br> - mkswap
<br> - swapon
<br> - swapoff
<br> - mkfs/ mkfs.ext4
<br>
<br>For more information please refer:
<br>kernel-source-tree/Documentation/blockdev/zram.txt
<br><p></p><div class="separator"></div><br><p><h2>examples</h2></p>This directory contains example configs to use ktest for various tasks.
<br>The configs still need to be customized for your environment, but it
<br>is broken up by task which makes it easier to understand how to set up
<br>ktest.
<br>
<br>The configs are based off of real working configs but have been modified
<br>and commented to show more generic use cases that are more helpful for
<br>developers.
<br>
<br>crosstests.conf - this config shows an example of testing a git repo against
<br>    lots of different architectures. It only does build tests, but makes
<br>    it easy to compile test different archs. You can download the arch
<br>    cross compilers from:
<br>  http://kernel.org/pub/tools/crosstool/files/bin/x86_64/
<br>
<br>test.conf - A generic example of a config. This is based on an actual config
<br>     used to perform real testing.
<br>
<br>kvm.conf - A example of a config that is used to test a virtual guest running
<br>     on a host.
<br>
<br>snowball.conf - An example config that was used to demo ktest.pl against
<br>     a snowball ARM board.
<br>
<br>include/  -  The include directory holds default configs that can be
<br>    included into other configs. This is a real use example that shows how
<br>    to reuse configs for various machines or set ups. The files here
<br>    are included by other config files, where the other config files define
<br>    options and variables that will make the included config work for the
<br>    given environment.
<br>
<br>
<br><p></p><div class="separator"></div><br><p><h2>ringtest</h2></p>Partial implementation of various ring layouts, useful to tune virtio design.
<br>Uses shared memory heavily.
<br>
<br>Typical use:
<br>
<br># sh run-on-all.sh perf stat -r 10 --log-fd 1 -- ./ring
<br><p></p><div class="separator"></div><br><p><h2>virtio-trace</h2></p>Trace Agent for virtio-trace
<br>============================
<br>
<br>Trace agent is a user tool for sending trace data of a guest to a Host in low
<br>overhead. Trace agent has the following functions:
<br> - splice a page of ring-buffer to read_pipe without memory copying
<br> - splice the page from write_pipe to virtio-console without memory copying
<br> - write trace data to stdout by using -o option
<br> - controlled by start/stop orders from a Host
<br>
<br>The trace agent operates as follows:
<br> 1) Initialize all structures.
<br> 2) Create a read/write thread per CPU. Each thread is bound to a CPU.
<br>    The read/write threads hold it.
<br> 3) A controller thread does poll() for a start order of a host.
<br> 4) After the controller of the trace agent receives a start order from a host,
<br>    the controller wake read/write threads.
<br> 5) The read/write threads start to read trace data from ring-buffers and
<br>    write the data to virtio-serial.
<br> 6) If the controller receives a stop order from a host, the read/write threads
<br>    stop to read trace data.
<br>
<br>
<br>Files
<br>=====
<br>
<br>README: this file
<br>Makefile: Makefile of trace agent for virtio-trace
<br>trace-agent.c: includes main function, sets up for operating trace agent
<br>trace-agent.h: includes all structures and some macros
<br>trace-agent-ctl.c: includes controller function for read/write threads
<br>trace-agent-rw.c: includes read/write threads function
<br>
<br>
<br>Setup
<br>=====
<br>
<br>To use this trace agent for virtio-trace, we need to prepare some virtio-serial
<br>I/Fs.
<br>
<br>1) Make FIFO in a host
<br> virtio-trace uses virtio-serial pipe as trace data paths as to the number
<br>of CPUs and a control path, so FIFO (named pipe) should be created as follows:
<br>	# mkdir /tmp/virtio-trace/
<br>	# mkfifo /tmp/virtio-trace/trace-path-cpu{0,1,2,...,X}.{in,out}
<br>	# mkfifo /tmp/virtio-trace/agent-ctl-path.{in,out}
<br>
<br>For example, if a guest use three CPUs, the names are
<br>	trace-path-cpu{0,1,2}.{in.out}
<br>and
<br>	agent-ctl-path.{in,out}.
<br>
<br>2) Set up of virtio-serial pipe in a host
<br> Add qemu option to use virtio-serial pipe.
<br>
<br> ##virtio-serial device##
<br>     -device virtio-serial-pci,id=virtio-serial0\
<br> ##control path##
<br>     -chardev pipe,id=charchannel0,path=/tmp/virtio-trace/agent-ctl-path\
<br>     -device virtserialport,bus=virtio-serial0.0,nr=1,chardev=charchannel0,\
<br>      id=channel0,name=agent-ctl-path\
<br> ##data path##
<br>     -chardev pipe,id=charchannel1,path=/tmp/virtio-trace/trace-path-cpu0\
<br>     -device virtserialport,bus=virtio-serial0.0,nr=2,chardev=charchannel0,\
<br>      id=channel1,name=trace-path-cpu0\
<br>      ...
<br>
<br>If you manage guests with libvirt, add the following tags to domain XML files.
<br>Then, libvirt passes the same command option to qemu.
<br>
<br>	<channel type='pipe'>
<br>	   <source path='/tmp/virtio-trace/agent-ctl-path'/>
<br>	   <target type='virtio' name='agent-ctl-path'/>
<br>	   <address type='virtio-serial' controller='0' bus='0' port='0'/>
<br>	</channel>
<br>	<channel type='pipe'>
<br>	   <source path='/tmp/virtio-trace/trace-path-cpu0'/>
<br>	   <target type='virtio' name='trace-path-cpu0'/>
<br>	   <address type='virtio-serial' controller='0' bus='0' port='1'/>
<br>	</channel>
<br>	...
<br>Here, chardev names are restricted to trace-path-cpuX and agent-ctl-path. For
<br>example, if a guest use three CPUs, chardev names should be trace-path-cpu0,
<br>trace-path-cpu1, trace-path-cpu2, and agent-ctl-path.
<br>
<br>3) Boot the guest
<br> You can find some chardev in /dev/virtio-ports/ in the guest.
<br>
<br>
<br>Run
<br>===
<br>
<br>0) Build trace agent in a guest
<br>	$ make
<br>
<br>1) Enable ftrace in the guest
<br> <Example>
<br>	# echo 1 > /sys/kernel/debug/tracing/events/sched/enable
<br>
<br>2) Run trace agent in the guest
<br> This agent must be operated as root.
<br>	# ./trace-agent
<br>read/write threads in the agent wait for start order from host. If you add -o
<br>option, trace data are output via stdout in the guest.
<br>
<br>3) Open FIFO in a host
<br>	# cat /tmp/virtio-trace/trace-path-cpu0.out
<br>If a host does not open these, trace data get stuck in buffers of virtio. Then,
<br>the guest will stop by specification of chardev in QEMU. This blocking mode may
<br>be solved in the future.
<br>
<br>4) Start to read trace data by ordering from a host
<br> A host injects read start order to the guest via virtio-serial.
<br>	# echo 1 > /tmp/virtio-trace/agent-ctl-path.in
<br>
<br>5) Stop to read trace data by ordering from a host
<br> A host injects read stop order to the guest via virtio-serial.
<br>	# echo 0 > /tmp/virtio-trace/agent-ctl-path.in
<br><p></p><div class="separator"></div><br><p><h2>tmon</h2></p>TMON - A Monitoring and Testing Tool for Linux kernel thermal subsystem
<br>
<br>Why TMON?
<br>==========
<br>Increasingly, Linux is running on thermally constrained devices. The simple
<br>thermal relationship between processor and fan has become past for modern
<br>computers.
<br>
<br>As hardware vendors cope with the thermal constraints on their products, more
<br>and more sensors are added, new cooling capabilities are introduced. The
<br>complexity of the thermal relationship can grow exponentially among cooling
<br>devices, zones, sensors, and trip points. They can also change dynamically.
<br>
<br>To expose such relationship to the userspace, Linux generic thermal layer
<br>introduced sysfs entry at /sys/class/thermal with a matrix of symbolic
<br>links, trip point bindings, and device instances. To traverse such
<br>matrix by hand is not a trivial task. Testing is also difficult in that
<br>thermal conditions are often exception cases that hard to reach in
<br>normal operations.
<br>
<br>TMON is conceived as a tool to help visualize, tune, and test the
<br>complex thermal subsystem.
<br>
<br>Files
<br>=====
<br>	tmon.c : main function for set up and configurations.
<br>	tui.c : handles ncurses based user interface
<br>	sysfs.c : access to the generic thermal sysfs
<br>	pid.c : a proportional-integral-derivative (PID) controller
<br>	that can be used for thermal relationship training.
<br>
<br>Requirements
<br>============
<br>Depends on ncurses
<br>
<br>Build
<br>=========
<br>$ make
<br>$ sudo ./tmon -h
<br>Usage: tmon [OPTION...]
<br>  -c, --control         cooling device in control
<br>  -d, --daemon          run as daemon, no TUI
<br>  -l, --log             log data to /var/tmp/tmon.log
<br>  -h, --help            show this help message
<br>  -t, --time-interval   set time interval for sampling
<br>  -v, --version         show version
<br>  -g, --debug           debug message in syslog
<br>
<br>1. For monitoring only:
<br>$ sudo ./tmon
<br><p></p><div class="separator"></div><br><p><h2>pmu-events</h2></p>
<br>The contents of this directory allow users to specify PMU events in their
<br>CPUs by their symbolic names rather than raw event codes (see example below).
<br>
<br>The main program in this directory, is the 'jevents', which is built and
<br>executed _BEFORE_ the perf binary itself is built.
<br>
<br>The 'jevents' program tries to locate and process JSON files in the directory
<br>tree tools/perf/pmu-events/arch/foo.
<br>
<br>	- Regular files with '.json' extension in the name are assumed to be
<br>	  JSON files, each of which describes a set of PMU events.
<br>
<br>	- Regular files with basename starting with 'mapfile.csv' are assumed
<br>	  to be a CSV file that maps a specific CPU to its set of PMU events.
<br>	  (see below for mapfile format)
<br>
<br>	- Directories are traversed, but all other files are ignored.
<br>
<br>The PMU events supported by a CPU model are expected to grouped into topics
<br>such as Pipelining, Cache, Memory, Floating-point etc. All events for a topic
<br>should be placed in a separate JSON file - where the file name identifies
<br>the topic. Eg: "Floating-point.json".
<br>
<br>All the topic JSON files for a CPU model/family should be in a separate
<br>sub directory. Thus for the Silvermont X86 CPU:
<br>
<br>	$ ls tools/perf/pmu-events/arch/x86/Silvermont_core
<br>	Cache.json 	Memory.json 	Virtual-Memory.json
<br>	Frontend.json 	Pipeline.json
<br>
<br>Using the JSON files and the mapfile, 'jevents' generates the C source file,
<br>'pmu-events.c', which encodes the two sets of tables:
<br>
<br>	- Set of 'PMU events tables' for all known CPUs in the architecture,
<br>	  (one table like the following, per JSON file; table name 'pme_power8'
<br>	  is derived from JSON file name, 'power8.json').
<br>
<br>		struct pmu_event pme_power8[] = {
<br>
<br>			...
<br>
<br>			{
<br>				.name = "pm_1plus_ppc_cmpl",
<br>				.event = "event=0x100f2",
<br>				.desc = "1 or more ppc insts finished,",
<br>			},
<br>
<br>			...
<br>		}
<br>
<br>	- A 'mapping table' that maps each CPU of the architecture, to its
<br>	  'PMU events table'
<br>
<br>		struct pmu_events_map pmu_events_map[] = {
<br>		{
<br>			.cpuid = "004b0000",
<br>			.version = "1",
<br>			.type = "core",
<br>			.table = pme_power8
<br>		},
<br>			...
<br>
<br>		};
<br>
<br>After the 'pmu-events.c' is generated, it is compiled and the resulting
<br>'pmu-events.o' is added to 'libperf.a' which is then used to build perf.
<br>
<br>NOTES:
<br>	1. Several CPUs can support same set of events and hence use a common
<br>	   JSON file. Hence several entries in the pmu_events_map[] could map
<br>	   to a single 'PMU events table'.
<br>
<br>	2. The 'pmu-events.h' has an extern declaration for the mapping table
<br>	   and the generated 'pmu-events.c' defines this table.
<br>
<br>	3. _All_ known CPU tables for architecture are included in the perf
<br>	   binary.
<br>
<br>At run time, perf determines the actual CPU it is running on, finds the
<br>matching events table and builds aliases for those events. This allows
<br>users to specify events by their name:
<br>
<br>	$ perf stat -e pm_1plus_ppc_cmpl sleep 1
<br>
<br>where 'pm_1plus_ppc_cmpl' is a Power8 PMU event.
<br>
<br>In case of errors when processing files in the tools/perf/pmu-events/arch
<br>directory, 'jevents' tries to create an empty mapping file to allow the perf
<br>build to succeed even if the PMU event aliases cannot be used.
<br>
<br>However some errors in processing may cause the perf build to fail.
<br>
<br>Mapfile format
<br>===============
<br>
<br>The mapfile enables multiple CPU models to share a single set of PMU events.
<br>It is required even if such mapping is 1:1.
<br>
<br>The mapfile.csv format is expected to be:
<br>
<br>	Header line
<br>	CPUID,Version,Dir/path/name,Type
<br>
<br>where:
<br>
<br>	Comma:
<br>		is the required field delimiter (i.e other fields cannot
<br>		have commas within them).
<br>
<br>	Comments:
<br>		Lines in which the first character is either '\n' or '#'
<br>		are ignored.
<br>
<br>	Header line
<br>		The header line is the first line in the file, which is
<br>		always _IGNORED_. It can empty.
<br>
<br>	CPUID:
<br>		CPUID is an arch-specific char string, that can be used
<br>		to identify CPU (and associate it with a set of PMU events
<br>		it supports). Multiple CPUIDS can point to the same
<br>		File/path/name.json.
<br>
<br>		Example:
<br>			CPUID == 'GenuineIntel-6-2E' (on x86).
<br>			CPUID == '004b0100' (PVR value in Powerpc)
<br>	Version:
<br>		is the Version of the mapfile.
<br>
<br>	Dir/path/name:
<br>		is the pathname to the directory containing the CPU's JSON
<br>		files, relative to the directory containing the mapfile.csv
<br>
<br>	Type:
<br>		indicates whether the events or "core" or "uncore" events.
<br>
<br>
<br>	Eg:
<br>
<br>	$ grep Silvermont tools/perf/pmu-events/arch/x86/mapfile.csv
<br>	GenuineIntel-6-37,V13,Silvermont_core,core
<br>	GenuineIntel-6-4D,V13,Silvermont_core,core
<br>	GenuineIntel-6-4C,V13,Silvermont_core,core
<br>
<br>	i.e the three CPU models use the JSON files (i.e PMU events) listed
<br>	in the directory 'tools/perf/pmu-events/arch/x86/Silvermont_core'.
<br><p></p><div class="separator"></div><br><p><h2>Perf-Trace-Util</h2></p>Perf-Trace-Util version 0.01
<br>============================
<br>
<br>This module contains utility functions for use with perf script.
<br>
<br>Core.pm and Util.pm are pure Perl modules; Core.pm contains routines
<br>that the core perf support for Perl calls on and should always be
<br>'used', while Util.pm contains useful but optional utility functions
<br>that scripts may want to use.  Context.pm contains the Perl->C
<br>interface that allows scripts to access data in the embedding perf
<br>executable; scripts wishing to do that should 'use Context.pm'.
<br>
<br>The Perl->C perf interface is completely driven by Context.xs.  If you
<br>want to add new Perl functions that end up accessing C data in the
<br>perf executable, you add desciptions of the new functions here.
<br>scripting_context is a pointer to the perf data in the perf executable
<br>that you want to access - it's passed as the second parameter,
<br>$context, to all handler functions.
<br>
<br>After you do that:
<br>
<br>  perl Makefile.PL   # to create a Makefile for the next step
<br>  make               # to create Context.c
<br>
<br>  edit Context.c to add const to the char* file = __FILE__ line in
<br>  XS(boot_Perf__Trace__Context) to silence a warning/error.
<br>
<br>  You can delete the Makefile, object files and anything else that was
<br>  generated e.g. blib and shared library, etc, except for of course
<br>  Context.c
<br>
<br>  You should then be able to run the normal perf make as usual.
<br>
<br>INSTALLATION
<br>
<br>Building perf with perf script Perl scripting should install this
<br>module in the right place.
<br>
<br>You should make sure libperl and ExtUtils/Embed.pm are installed first
<br>e.g. apt-get install libperl-dev or yum install perl-ExtUtils-Embed.
<br>
<br>DEPENDENCIES
<br>
<br>This module requires these other modules and libraries:
<br>
<br>  None
<br>
<br>COPYRIGHT AND LICENCE
<br>
<br>Copyright (C) 2009 by Tom Zanussi <tzanussi@gmail.com>
<br>
<br>This library is free software; you can redistribute it and/or modify
<br>it under the same terms as Perl itself, either Perl version 5.10.0 or,
<br>at your option, any later version of Perl 5 you may have available.
<br>
<br>Alternatively, this software may be distributed under the terms of the
<br>GNU General Public License ("GPL") version 2 as published by the Free
<br>Software Foundation.
<br>
<br><p></p><div class="separator"></div><br><p><h2>attr</h2></p>The struct perf_event_attr test (attr tests) support
<br>====================================================
<br>This testing support is embedded into perf directly and is governed
<br>by the PERF_TEST_ATTR environment variable and hook inside the
<br>sys_perf_event_open function.
<br>
<br>The general idea is to store 'struct perf_event_attr' details for
<br>each event created within single perf command. Each event details
<br>are stored into separate text file. Once perf command is finished
<br>these files are checked for values we expect for command.
<br>
<br>The attr tests consist of following parts:
<br>
<br>tests/attr.c
<br>------------
<br>This is the sys_perf_event_open hook implementation. The hook
<br>is triggered when the PERF_TEST_ATTR environment variable is
<br>defined. It must contain name of existing directory with access
<br>and write permissions.
<br>
<br>For each sys_perf_event_open call event details are stored in
<br>separate file. Besides 'struct perf_event_attr' values we also
<br>store 'fd' and 'group_fd' values to allow checking for groups.
<br>
<br>tests/attr.py
<br>-------------
<br>This is the python script that does all the hard work. It reads
<br>the test definition, executes it and checks results.
<br>
<br>tests/attr/
<br>-----------
<br>Directory containing all attr test definitions.
<br>Following tests are defined (with perf commands):
<br>
<br>  perf record kill                              (test-record-basic)
<br>  perf record -b kill                           (test-record-branch-any)
<br>  perf record -j any kill                       (test-record-branch-filter-any)
<br>  perf record -j any_call kill                  (test-record-branch-filter-any_call)
<br>  perf record -j any_ret kill                   (test-record-branch-filter-any_ret)
<br>  perf record -j hv kill                        (test-record-branch-filter-hv)
<br>  perf record -j ind_call kill                  (test-record-branch-filter-ind_call)
<br>  perf record -j k kill                         (test-record-branch-filter-k)
<br>  perf record -j u kill                         (test-record-branch-filter-u)
<br>  perf record -c 123 kill                       (test-record-count)
<br>  perf record -d kill                           (test-record-data)
<br>  perf record -F 100 kill                       (test-record-freq)
<br>  perf record -g kill                           (test-record-graph-default)
<br>  perf record --call-graph dwarf kill		(test-record-graph-dwarf)
<br>  perf record --call-graph fp kill              (test-record-graph-fp)
<br>  perf record --group -e cycles,instructions kill (test-record-group)
<br>  perf record -e '{cycles,instructions}' kill   (test-record-group1)
<br>  perf record -D kill                           (test-record-no-delay)
<br>  perf record -i kill                           (test-record-no-inherit)
<br>  perf record -n kill                           (test-record-no-samples)
<br>  perf record -c 100 -P kill                    (test-record-period)
<br>  perf record -R kill                           (test-record-raw)
<br>  perf stat -e cycles kill                      (test-stat-basic)
<br>  perf stat kill                                (test-stat-default)
<br>  perf stat -d kill                             (test-stat-detailed-1)
<br>  perf stat -dd kill                            (test-stat-detailed-2)
<br>  perf stat -ddd kill                           (test-stat-detailed-3)
<br>  perf stat --group -e cycles,instructions kill (test-stat-group)
<br>  perf stat -e '{cycles,instructions}' kill     (test-stat-group1)
<br>  perf stat -i -e cycles kill                   (test-stat-no-inherit)
<br><p></p><div class="separator"></div><br><p><h2>bpf</h2></p>eBPF sample programs
<br>====================
<br>
<br>This directory contains a mini eBPF library, test stubs, verifier
<br>test-suite and examples for using eBPF.
<br>
<br>Build dependencies
<br>==================
<br>
<br>Compiling requires having installed:
<br> * clang >= version 3.4.0
<br> * llvm >= version 3.7.1
<br>
<br>Note that LLVM's tool 'llc' must support target 'bpf', list version
<br>and supported targets with command: ``llc --version``
<br>
<br>Kernel headers
<br>--------------
<br>
<br>There are usually dependencies to header files of the current kernel.
<br>To avoid installing devel kernel headers system wide, as a normal
<br>user, simply call::
<br>
<br> make headers_install
<br>
<br>This will creates a local "usr/include" directory in the git/build top
<br>level directory, that the make system automatically pickup first.
<br>
<br>Compiling
<br>=========
<br>
<br>For building the BPF samples, issue the below command from the kernel
<br>top level directory::
<br>
<br> make samples/bpf/
<br>
<br>Do notice the "/" slash after the directory name.
<br>
<br>It is also possible to call make from this directory.  This will just
<br>hide the the invocation of make as above with the appended "/".
<br>
<br>Manually compiling LLVM with 'bpf' support
<br>------------------------------------------
<br>
<br>Since version 3.7.0, LLVM adds a proper LLVM backend target for the
<br>BPF bytecode architecture.
<br>
<br>By default llvm will build all non-experimental backends including bpf.
<br>To generate a smaller llc binary one can use::
<br>
<br> -DLLVM_TARGETS_TO_BUILD="BPF"
<br>
<br>Quick sniplet for manually compiling LLVM and clang
<br>(build dependencies are cmake and gcc-c++)::
<br>
<br> $ git clone http://llvm.org/git/llvm.git
<br> $ cd llvm/tools
<br> $ git clone --depth 1 http://llvm.org/git/clang.git
<br> $ cd ..; mkdir build; cd build
<br> $ cmake .. -DLLVM_TARGETS_TO_BUILD="BPF;X86"
<br> $ make -j $(getconf _NPROCESSORS_ONLN)
<br>
<br>It is also possible to point make to the newly compiled 'llc' or
<br>'clang' command via redefining LLC or CLANG on the make command line::
<br>
<br> make samples/bpf/ LLC=~/git/llvm/build/bin/llc CLANG=~/git/llvm/build/bin/clang
<br><p></p><div class="separator"></div><br><p><h2>pktgen</h2></p>Sample and benchmark scripts for pktgen (packet generator)
<br>==========================================================
<br>This directory contains some pktgen sample and benchmark scripts, that
<br>can easily be copied and adjusted for your own use-case.
<br>
<br>General doc is located in kernel: Documentation/networking/pktgen.txt
<br>
<br>Helper include files
<br>====================
<br>This directory contains two helper shell files, that can be "included"
<br>by shell source'ing.  Namely "functions.sh" and "parameters.sh".
<br>
<br>Common parameters
<br>-----------------
<br>The parameters.sh file support easy and consistant parameter parsing
<br>across the sample scripts.  Usage example is printed on errors::
<br>
<br> Usage: ./pktgen_sample01_simple.sh [-vx] -i ethX
<br>  -i : ($DEV)       output interface/device (required)
<br>  -s : ($PKT_SIZE)  packet size
<br>  -d : ($DEST_IP)   destination IP
<br>  -m : ($DST_MAC)   destination MAC-addr
<br>  -t : ($THREADS)   threads to start
<br>  -c : ($SKB_CLONE) SKB clones send before alloc new SKB
<br>  -b : ($BURST)     HW level bursting of SKBs
<br>  -v : ($VERBOSE)   verbose
<br>  -x : ($DEBUG)     debug
<br>
<br>The global variable being set is also listed.  E.g. the required
<br>interface/device parameter "-i" sets variable $DEV.
<br>
<br>Common functions
<br>----------------
<br>The functions.sh file provides; Three different shell functions for
<br>configuring the different components of pktgen: pg_ctrl(), pg_thread()
<br>and pg_set().
<br>
<br>These functions correspond to pktgens different components.
<br> * pg_ctrl()   control "pgctrl" (/proc/net/pktgen/pgctrl)
<br> * pg_thread() control the kernel threads and binding to devices
<br> * pg_set()    control setup of individual devices
<br>
<br>See sample scripts for usage examples.
<br><p></p><div class="separator"></div><br><p><h2>networking</h2></p>
<br>Intel(R) PRO/Wireless 2100 Driver for Linux in support of:
<br>
<br>Intel(R) PRO/Wireless 2100 Network Connection
<br>
<br>Copyright (C) 2003-2006, Intel Corporation
<br>
<br>README.ipw2100
<br>
<br>Version: git-1.1.5
<br>Date   : January 25, 2006
<br>
<br>Index
<br>-----------------------------------------------
<br>0. IMPORTANT INFORMATION BEFORE USING THIS DRIVER
<br>1. Introduction
<br>2. Release git-1.1.5 Current Features
<br>3. Command Line Parameters
<br>4. Sysfs Helper Files
<br>5. Radio Kill Switch
<br>6. Dynamic Firmware
<br>7. Power Management
<br>8. Support
<br>9. License
<br>
<br>
<br>0.   IMPORTANT INFORMATION BEFORE USING THIS DRIVER
<br>-----------------------------------------------
<br>
<br>Important Notice FOR ALL USERS OR DISTRIBUTORS!!!!
<br>
<br>Intel wireless LAN adapters are engineered, manufactured, tested, and
<br>quality checked to ensure that they meet all necessary local and
<br>governmental regulatory agency requirements for the regions that they
<br>are designated and/or marked to ship into. Since wireless LANs are
<br>generally unlicensed devices that share spectrum with radars,
<br>satellites, and other licensed and unlicensed devices, it is sometimes
<br>necessary to dynamically detect, avoid, and limit usage to avoid
<br>interference with these devices. In many instances Intel is required to
<br>provide test data to prove regional and local compliance to regional and
<br>governmental regulations before certification or approval to use the
<br>product is granted. Intel's wireless LAN's EEPROM, firmware, and
<br>software driver are designed to carefully control parameters that affect
<br>radio operation and to ensure electromagnetic compliance (EMC). These
<br>parameters include, without limitation, RF power, spectrum usage,
<br>channel scanning, and human exposure.
<br>
<br>For these reasons Intel cannot permit any manipulation by third parties
<br>of the software provided in binary format with the wireless WLAN
<br>adapters (e.g., the EEPROM and firmware). Furthermore, if you use any
<br>patches, utilities, or code with the Intel wireless LAN adapters that
<br>have been manipulated by an unauthorized party (i.e., patches,
<br>utilities, or code (including open source code modifications) which have
<br>not been validated by Intel), (i) you will be solely responsible for
<br>ensuring the regulatory compliance of the products, (ii) Intel will bear
<br>no liability, under any theory of liability for any issues associated
<br>with the modified products, including without limitation, claims under
<br>the warranty and/or issues arising from regulatory non-compliance, and
<br>(iii) Intel will not provide or be required to assist in providing
<br>support to any third parties for such modified products.
<br>
<br>Note: Many regulatory agencies consider Wireless LAN adapters to be
<br>modules, and accordingly, condition system-level regulatory approval
<br>upon receipt and review of test data documenting that the antennas and
<br>system configuration do not cause the EMC and radio operation to be
<br>non-compliant.
<br>
<br>The drivers available for download from SourceForge are provided as a
<br>part of a development project.  Conformance to local regulatory
<br>requirements is the responsibility of the individual developer.  As
<br>such, if you are interested in deploying or shipping a driver as part of
<br>solution intended to be used for purposes other than development, please
<br>obtain a tested driver from Intel Customer Support at:
<br>
<br>http://www.intel.com/support/wireless/sb/CS-006408.htm
<br>
<br>1. Introduction
<br>-----------------------------------------------
<br>
<br>This document provides a brief overview of the features supported by the 
<br>IPW2100 driver project.  The main project website, where the latest 
<br>development version of the driver can be found, is:
<br>
<br>	http://ipw2100.sourceforge.net
<br>
<br>There you can find the not only the latest releases, but also information about
<br>potential fixes and patches, as well as links to the development mailing list
<br>for the driver project.
<br>
<br>
<br>2. Release git-1.1.5 Current Supported Features
<br>-----------------------------------------------
<br>- Managed (BSS) and Ad-Hoc (IBSS)
<br>- WEP (shared key and open)
<br>- Wireless Tools support 
<br>- 802.1x (tested with XSupplicant 1.0.1)
<br>
<br>Enabled (but not supported) features:
<br>- Monitor/RFMon mode
<br>- WPA/WPA2
<br>
<br>The distinction between officially supported and enabled is a reflection
<br>on the amount of validation and interoperability testing that has been
<br>performed on a given feature.
<br>
<br>
<br>3. Command Line Parameters
<br>-----------------------------------------------
<br>
<br>If the driver is built as a module, the following optional parameters are used
<br>by entering them on the command line with the modprobe command using this
<br>syntax:
<br>
<br>	modprobe ipw2100 [<option>=<VAL1><,VAL2>...]
<br>
<br>For example, to disable the radio on driver loading, enter:
<br>
<br>	modprobe ipw2100 disable=1
<br>
<br>The ipw2100 driver supports the following module parameters:
<br>
<br>Name		Value		Example:
<br>debug		0x0-0xffffffff	debug=1024
<br>mode		0,1,2		mode=1   /* AdHoc */
<br>channel		int		channel=3 /* Only valid in AdHoc or Monitor */
<br>associate	boolean		associate=0 /* Do NOT auto associate */
<br>disable		boolean		disable=1 /* Do not power the HW */
<br>
<br>
<br>4. Sysfs Helper Files
<br>---------------------------     
<br>-----------------------------------------------
<br>
<br>There are several ways to control the behavior of the driver.  Many of the 
<br>general capabilities are exposed through the Wireless Tools (iwconfig).  There
<br>are a few capabilities that are exposed through entries in the Linux Sysfs.
<br>
<br>
<br>----- Driver Level ------
<br>For the driver level files, look in /sys/bus/pci/drivers/ipw2100/
<br>
<br>  debug_level  
<br>	
<br>	This controls the same global as the 'debug' module parameter.  For 
<br>        information on the various debugging levels available, run the 'dvals'
<br>	script found in the driver source directory.
<br>
<br>	NOTE:  'debug_level' is only enabled if CONFIG_IPW2100_DEBUG is turn
<br>	       on.
<br>
<br>----- Device Level ------
<br>For the device level files look in
<br>	
<br>	/sys/bus/pci/drivers/ipw2100/{PCI-ID}/
<br>
<br>For example:
<br>	/sys/bus/pci/drivers/ipw2100/0000:02:01.0
<br>
<br>For the device level files, see /sys/bus/pci/drivers/ipw2100:
<br>
<br>  rf_kill
<br>	read - 
<br>	0 = RF kill not enabled (radio on)
<br>	1 = SW based RF kill active (radio off)
<br>	2 = HW based RF kill active (radio off)
<br>	3 = Both HW and SW RF kill active (radio off)
<br>	write -
<br>	0 = If SW based RF kill active, turn the radio back on
<br>	1 = If radio is on, activate SW based RF kill
<br>
<br>	NOTE: If you enable the SW based RF kill and then toggle the HW
<br>  	based RF kill from ON -> OFF -> ON, the radio will NOT come back on
<br>
<br>
<br>5. Radio Kill Switch
<br>-----------------------------------------------
<br>Most laptops provide the ability for the user to physically disable the radio.
<br>Some vendors have implemented this as a physical switch that requires no
<br>software to turn the radio off and on.  On other laptops, however, the switch
<br>is controlled through a button being pressed and a software driver then making
<br>calls to turn the radio off and on.  This is referred to as a "software based
<br>RF kill switch"
<br>
<br>See the Sysfs helper file 'rf_kill' for determining the state of the RF switch
<br>on your system.
<br>
<br>
<br>6. Dynamic Firmware
<br>-----------------------------------------------
<br>As the firmware is licensed under a restricted use license, it can not be 
<br>included within the kernel sources.  To enable the IPW2100 you will need a 
<br>firmware image to load into the wireless NIC's processors.
<br>
<br>You can obtain these images from <http://ipw2100.sf.net/firmware.php>.
<br>
<br>See INSTALL for instructions on installing the firmware.
<br>
<br>
<br>7. Power Management
<br>-----------------------------------------------
<br>The IPW2100 supports the configuration of the Power Save Protocol 
<br>through a private wireless extension interface.  The IPW2100 supports 
<br>the following different modes:
<br>
<br>	off	No power management.  Radio is always on.
<br>	on	Automatic power management
<br>	1-5	Different levels of power management.  The higher the 
<br>		number the greater the power savings, but with an impact to 
<br>		packet latencies. 
<br>
<br>Power management works by powering down the radio after a certain 
<br>interval of time has passed where no packets are passed through the 
<br>radio.  Once powered down, the radio remains in that state for a given 
<br>period of time.  For higher power savings, the interval between last 
<br>packet processed to sleep is shorter and the sleep period is longer.
<br>
<br>When the radio is asleep, the access point sending data to the station 
<br>must buffer packets at the AP until the station wakes up and requests 
<br>any buffered packets.  If you have an AP that does not correctly support 
<br>the PSP protocol you may experience packet loss or very poor performance 
<br>while power management is enabled.  If this is the case, you will need 
<br>to try and find a firmware update for your AP, or disable power 
<br>management (via `iwconfig eth1 power off`)
<br>
<br>To configure the power level on the IPW2100 you use a combination of 
<br>iwconfig and iwpriv.  iwconfig is used to turn power management on, off, 
<br>and set it to auto.
<br>
<br>	iwconfig eth1 power off    Disables radio power down
<br>	iwconfig eth1 power on     Enables radio power management to 
<br>				   last set level (defaults to AUTO)
<br>	iwpriv eth1 set_power 0    Sets power level to AUTO and enables 
<br>				   power management if not previously 
<br>				   enabled.
<br>	iwpriv eth1 set_power 1-5  Set the power level as specified, 
<br>				   enabling power management if not 
<br>				   previously enabled.
<br>
<br>You can view the current power level setting via:
<br>	
<br>	iwpriv eth1 get_power
<br>
<br>It will return the current period or timeout that is configured as a string
<br>in the form of xxxx/yyyy (z) where xxxx is the timeout interval (amount of
<br>time after packet processing), yyyy is the period to sleep (amount of time to 
<br>wait before powering the radio and querying the access point for buffered
<br>packets), and z is the 'power level'.  If power management is turned off the
<br>xxxx/yyyy will be replaced with 'off' -- the level reported will be the active
<br>level if `iwconfig eth1 power on` is invoked.
<br>
<br>
<br>8. Support
<br>-----------------------------------------------
<br>
<br>For general development information and support,
<br>go to:
<br>	
<br>    http://ipw2100.sf.net/
<br>
<br>The ipw2100 1.1.0 driver and firmware can be downloaded from:  
<br>
<br>    http://support.intel.com
<br>
<br>For installation support on the ipw2100 1.1.0 driver on Linux kernels 
<br>2.6.8 or greater, email support is available from:  
<br>
<br>    http://supportmail.intel.com
<br>
<br>9. License
<br>-----------------------------------------------
<br>
<br>  Copyright(c) 2003 - 2006 Intel Corporation. All rights reserved.
<br>
<br>  This program is free software; you can redistribute it and/or modify it 
<br>  under the terms of the GNU General Public License (version 2) as 
<br>  published by the Free Software Foundation.
<br>  
<br>  This program is distributed in the hope that it will be useful, but WITHOUT 
<br>  ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or 
<br>  FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for 
<br>  more details.
<br>  
<br>  You should have received a copy of the GNU General Public License along with
<br>  this program; if not, write to the Free Software Foundation, Inc., 59 
<br>  Temple Place - Suite 330, Boston, MA  02111-1307, USA.
<br>  
<br>  The full GNU General Public License is included in this distribution in the
<br>  file called LICENSE.
<br>  
<br>  License Contact Information:
<br>  James P. Ketrenos <ipw2100-admin@linux.intel.com>
<br>  Intel Corporation, 5200 N.E. Elam Young Parkway, Hillsboro, OR 97124-6497
<br>
<br><p></p><div class="separator"></div><br><p><h2>networking</h2></p>
<br>Intel(R) PRO/Wireless 2915ABG Driver for Linux in support of:
<br>
<br>Intel(R) PRO/Wireless 2200BG Network Connection
<br>Intel(R) PRO/Wireless 2915ABG Network Connection
<br>
<br>Note: The Intel(R) PRO/Wireless 2915ABG Driver for Linux and Intel(R)
<br>PRO/Wireless 2200BG Driver for Linux is a unified driver that works on
<br>both hardware adapters listed above. In this document the Intel(R)
<br>PRO/Wireless 2915ABG Driver for Linux will be used to reference the
<br>unified driver.
<br>
<br>Copyright (C) 2004-2006, Intel Corporation
<br>
<br>README.ipw2200
<br>
<br>Version: 1.1.2
<br>Date   : March 30, 2006
<br>
<br>
<br>Index
<br>-----------------------------------------------
<br>0.   IMPORTANT INFORMATION BEFORE USING THIS DRIVER
<br>1.   Introduction
<br>1.1. Overview of features
<br>1.2. Module parameters
<br>1.3. Wireless Extension Private Methods
<br>1.4. Sysfs Helper Files
<br>1.5. Supported channels
<br>2.   Ad-Hoc Networking
<br>3.   Interacting with Wireless Tools
<br>3.1. iwconfig mode
<br>3.2. iwconfig sens
<br>4.   About the Version Numbers
<br>5.   Firmware installation
<br>6.   Support
<br>7.   License
<br>
<br>
<br>0.   IMPORTANT INFORMATION BEFORE USING THIS DRIVER
<br>-----------------------------------------------
<br>
<br>Important Notice FOR ALL USERS OR DISTRIBUTORS!!!! 
<br>
<br>Intel wireless LAN adapters are engineered, manufactured, tested, and
<br>quality checked to ensure that they meet all necessary local and
<br>governmental regulatory agency requirements for the regions that they
<br>are designated and/or marked to ship into. Since wireless LANs are
<br>generally unlicensed devices that share spectrum with radars,
<br>satellites, and other licensed and unlicensed devices, it is sometimes
<br>necessary to dynamically detect, avoid, and limit usage to avoid
<br>interference with these devices. In many instances Intel is required to
<br>provide test data to prove regional and local compliance to regional and
<br>governmental regulations before certification or approval to use the
<br>product is granted. Intel's wireless LAN's EEPROM, firmware, and
<br>software driver are designed to carefully control parameters that affect
<br>radio operation and to ensure electromagnetic compliance (EMC). These
<br>parameters include, without limitation, RF power, spectrum usage,
<br>channel scanning, and human exposure. 
<br>
<br>For these reasons Intel cannot permit any manipulation by third parties
<br>of the software provided in binary format with the wireless WLAN
<br>adapters (e.g., the EEPROM and firmware). Furthermore, if you use any
<br>patches, utilities, or code with the Intel wireless LAN adapters that
<br>have been manipulated by an unauthorized party (i.e., patches,
<br>utilities, or code (including open source code modifications) which have
<br>not been validated by Intel), (i) you will be solely responsible for
<br>ensuring the regulatory compliance of the products, (ii) Intel will bear
<br>no liability, under any theory of liability for any issues associated
<br>with the modified products, including without limitation, claims under
<br>the warranty and/or issues arising from regulatory non-compliance, and
<br>(iii) Intel will not provide or be required to assist in providing
<br>support to any third parties for such modified products.  
<br>
<br>Note: Many regulatory agencies consider Wireless LAN adapters to be
<br>modules, and accordingly, condition system-level regulatory approval
<br>upon receipt and review of test data documenting that the antennas and
<br>system configuration do not cause the EMC and radio operation to be
<br>non-compliant.
<br>
<br>The drivers available for download from SourceForge are provided as a 
<br>part of a development project.  Conformance to local regulatory 
<br>requirements is the responsibility of the individual developer.  As 
<br>such, if you are interested in deploying or shipping a driver as part of 
<br>solution intended to be used for purposes other than development, please 
<br>obtain a tested driver from Intel Customer Support at:
<br>
<br>http://support.intel.com
<br>
<br>
<br>1.   Introduction
<br>-----------------------------------------------
<br>The following sections attempt to provide a brief introduction to using 
<br>the Intel(R) PRO/Wireless 2915ABG Driver for Linux.
<br>
<br>This document is not meant to be a comprehensive manual on 
<br>understanding or using wireless technologies, but should be sufficient 
<br>to get you moving without wires on Linux.
<br>
<br>For information on building and installing the driver, see the INSTALL
<br>file.
<br>
<br>
<br>1.1. Overview of Features
<br>-----------------------------------------------
<br>The current release (1.1.2) supports the following features:
<br>
<br>+ BSS mode (Infrastructure, Managed)
<br>+ IBSS mode (Ad-Hoc)
<br>+ WEP (OPEN and SHARED KEY mode)
<br>+ 802.1x EAP via wpa_supplicant and xsupplicant
<br>+ Wireless Extension support 
<br>+ Full B and G rate support (2200 and 2915)
<br>+ Full A rate support (2915 only)
<br>+ Transmit power control
<br>+ S state support (ACPI suspend/resume)
<br>
<br>The following features are currently enabled, but not officially
<br>supported:
<br>
<br>+ WPA
<br>+ long/short preamble support
<br>+ Monitor mode (aka RFMon)
<br>
<br>The distinction between officially supported and enabled is a reflection 
<br>on the amount of validation and interoperability testing that has been
<br>performed on a given feature. 
<br>
<br>
<br>
<br>1.2. Command Line Parameters
<br>-----------------------------------------------
<br>
<br>Like many modules used in the Linux kernel, the Intel(R) PRO/Wireless
<br>2915ABG Driver for Linux allows configuration options to be provided 
<br>as module parameters.  The most common way to specify a module parameter 
<br>is via the command line.  
<br>
<br>The general form is:
<br>
<br>% modprobe ipw2200 parameter=value
<br>
<br>Where the supported parameter are:
<br>
<br>  associate
<br>	Set to 0 to disable the auto scan-and-associate functionality of the
<br>	driver.  If disabled, the driver will not attempt to scan 
<br>	for and associate to a network until it has been configured with 
<br>	one or more properties for the target network, for example configuring 
<br>	the network SSID.  Default is 0 (do not auto-associate)
<br>	
<br>	Example: % modprobe ipw2200 associate=0
<br>
<br>  auto_create
<br>	Set to 0 to disable the auto creation of an Ad-Hoc network 
<br>	matching the channel and network name parameters provided.  
<br>	Default is 1.
<br>
<br>  channel
<br>	channel number for association.  The normal method for setting
<br>        the channel would be to use the standard wireless tools
<br>        (i.e. `iwconfig eth1 channel 10`), but it is useful sometimes
<br>	to set this while debugging.  Channel 0 means 'ANY'
<br>
<br>  debug
<br>	If using a debug build, this is used to control the amount of debug
<br>	info is logged.  See the 'dvals' and 'load' script for more info on
<br>	how to use this (the dvals and load scripts are provided as part 
<br>	of the ipw2200 development snapshot releases available from the 
<br>	SourceForge project at http://ipw2200.sf.net)
<br>  
<br>  led
<br>	Can be used to turn on experimental LED code.
<br>	0 = Off, 1 = On.  Default is 1.
<br>
<br>  mode
<br>	Can be used to set the default mode of the adapter.  
<br>	0 = Managed, 1 = Ad-Hoc, 2 = Monitor
<br>
<br>
<br>1.3. Wireless Extension Private Methods
<br>-----------------------------------------------
<br>
<br>As an interface designed to handle generic hardware, there are certain 
<br>capabilities not exposed through the normal Wireless Tool interface.  As 
<br>such, a provision is provided for a driver to declare custom, or 
<br>private, methods.  The Intel(R) PRO/Wireless 2915ABG Driver for Linux 
<br>defines several of these to configure various settings.
<br>
<br>The general form of using the private wireless methods is:
<br>
<br>	% iwpriv $IFNAME method parameters
<br>
<br>Where $IFNAME is the interface name the device is registered with 
<br>(typically eth1, customized via one of the various network interface
<br>name managers, such as ifrename)
<br>
<br>The supported private methods are:
<br>
<br>  get_mode
<br>	Can be used to report out which IEEE mode the driver is 
<br>	configured to support.  Example:
<br>	
<br>	% iwpriv eth1 get_mode
<br>	eth1	get_mode:802.11bg (6)
<br>
<br>  set_mode
<br>	Can be used to configure which IEEE mode the driver will 
<br>	support.  
<br>
<br>	Usage:
<br>	% iwpriv eth1 set_mode {mode}
<br>	Where {mode} is a number in the range 1-7:
<br>	1	802.11a (2915 only)
<br>	2	802.11b
<br>	3	802.11ab (2915 only)
<br>	4	802.11g 
<br>	5	802.11ag (2915 only)
<br>	6	802.11bg
<br>	7	802.11abg (2915 only)
<br>
<br>  get_preamble
<br>	Can be used to report configuration of preamble length.
<br>
<br>  set_preamble
<br>	Can be used to set the configuration of preamble length:
<br>
<br>	Usage:
<br>	% iwpriv eth1 set_preamble {mode}
<br>	Where {mode} is one of:
<br>	1	Long preamble only
<br>	0	Auto (long or short based on connection)
<br>	
<br>
<br>1.4. Sysfs Helper Files:
<br>-----------------------------------------------
<br>
<br>The Linux kernel provides a pseudo file system that can be used to 
<br>access various components of the operating system.  The Intel(R)
<br>PRO/Wireless 2915ABG Driver for Linux exposes several configuration
<br>parameters through this mechanism.
<br>
<br>An entry in the sysfs can support reading and/or writing.  You can 
<br>typically query the contents of a sysfs entry through the use of cat, 
<br>and can set the contents via echo.  For example:
<br>
<br>% cat /sys/bus/pci/drivers/ipw2200/debug_level
<br>
<br>Will report the current debug level of the driver's logging subsystem 
<br>(only available if CONFIG_IPW2200_DEBUG was configured when the driver
<br>was built).
<br>
<br>You can set the debug level via:
<br>
<br>% echo $VALUE > /sys/bus/pci/drivers/ipw2200/debug_level
<br>
<br>Where $VALUE would be a number in the case of this sysfs entry.  The 
<br>input to sysfs files does not have to be a number.  For example, the 
<br>firmware loader used by hotplug utilizes sysfs entries for transferring 
<br>the firmware image from user space into the driver.
<br>
<br>The Intel(R) PRO/Wireless 2915ABG Driver for Linux exposes sysfs entries 
<br>at two levels -- driver level, which apply to all instances of the driver 
<br>(in the event that there are more than one device installed) and device 
<br>level, which applies only to the single specific instance.
<br>
<br>
<br>1.4.1 Driver Level Sysfs Helper Files
<br>-----------------------------------------------
<br>
<br>For the driver level files, look in /sys/bus/pci/drivers/ipw2200/
<br>
<br>  debug_level  
<br>	
<br>	This controls the same global as the 'debug' module parameter
<br>
<br>
<br>
<br>1.4.2 Device Level Sysfs Helper Files
<br>-----------------------------------------------
<br>
<br>For the device level files, look in
<br>	
<br>	/sys/bus/pci/drivers/ipw2200/{PCI-ID}/
<br>
<br>For example:
<br>	/sys/bus/pci/drivers/ipw2200/0000:02:01.0
<br>
<br>For the device level files, see /sys/bus/pci/drivers/ipw2200:
<br>
<br>  rf_kill
<br>	read - 
<br>	0 = RF kill not enabled (radio on)
<br>	1 = SW based RF kill active (radio off)
<br>	2 = HW based RF kill active (radio off)
<br>	3 = Both HW and SW RF kill active (radio off)
<br>	write -
<br>	0 = If SW based RF kill active, turn the radio back on
<br>	1 = If radio is on, activate SW based RF kill
<br>
<br>	NOTE: If you enable the SW based RF kill and then toggle the HW
<br>  	based RF kill from ON -> OFF -> ON, the radio will NOT come back on
<br>	
<br>  ucode 
<br>	read-only access to the ucode version number
<br>
<br>  led
<br>	read -
<br>	0 = LED code disabled
<br>	1 = LED code enabled
<br>	write -
<br>	0 = Disable LED code
<br>	1 = Enable LED code
<br>
<br>	NOTE: The LED code has been reported to hang some systems when 
<br>	running ifconfig and is therefore disabled by default.
<br>
<br>
<br>1.5. Supported channels
<br>-----------------------------------------------
<br>
<br>Upon loading the Intel(R) PRO/Wireless 2915ABG Driver for Linux, a
<br>message stating the detected geography code and the number of 802.11
<br>channels supported by the card will be displayed in the log.
<br>
<br>The geography code corresponds to a regulatory domain as shown in the
<br>table below.
<br>
<br>					  Supported channels
<br>Code	Geography			802.11bg	802.11a
<br>
<br>---	Restricted			11 	 	 0
<br>ZZF	Custom US/Canada		11	 	 8
<br>ZZD	Rest of World			13	 	 0
<br>ZZA	Custom USA & Europe & High	11		13
<br>ZZB	Custom NA & Europe    		11		13
<br>ZZC	Custom Japan			11	 	 4
<br>ZZM	Custom 				11	 	 0
<br>ZZE	Europe				13		19
<br>ZZJ	Custom Japan			14	 	 4
<br>ZZR	Rest of World			14	 	 0
<br>ZZH	High Band			13	 	 4
<br>ZZG	Custom Europe			13	 	 4
<br>ZZK	Europe 				13		24
<br>ZZL	Europe				11		13
<br>
<br>
<br>2.   Ad-Hoc Networking
<br>-----------------------------------------------
<br>
<br>When using a device in an Ad-Hoc network, it is useful to understand the 
<br>sequence and requirements for the driver to be able to create, join, or 
<br>merge networks.
<br>
<br>The following attempts to provide enough information so that you can 
<br>have a consistent experience while using the driver as a member of an 
<br>Ad-Hoc network.
<br>
<br>2.1. Joining an Ad-Hoc Network
<br>-----------------------------------------------
<br>
<br>The easiest way to get onto an Ad-Hoc network is to join one that 
<br>already exists.
<br>
<br>2.2. Creating an Ad-Hoc Network
<br>-----------------------------------------------
<br>
<br>An Ad-Hoc networks is created using the syntax of the Wireless tool.
<br>
<br>For Example:
<br>iwconfig eth1 mode ad-hoc essid testing channel 2
<br>
<br>2.3. Merging Ad-Hoc Networks
<br>-----------------------------------------------
<br>
<br>
<br>3.  Interaction with Wireless Tools
<br>-----------------------------------------------
<br>
<br>3.1 iwconfig mode
<br>-----------------------------------------------
<br>
<br>When configuring the mode of the adapter, all run-time configured parameters
<br>are reset to the value used when the module was loaded.  This includes
<br>channels, rates, ESSID, etc.
<br>
<br>3.2 iwconfig sens
<br>-----------------------------------------------
<br>
<br>The 'iwconfig ethX sens XX' command will not set the signal sensitivity
<br>threshold, as described in iwconfig documentation, but rather the number
<br>of consecutive missed beacons that will trigger handover, i.e. roaming
<br>to another access point. At the same time, it will set the disassociation
<br>threshold to 3 times the given value.
<br>
<br>
<br>4.   About the Version Numbers
<br>-----------------------------------------------
<br>
<br>Due to the nature of open source development projects, there are 
<br>frequently changes being incorporated that have not gone through 
<br>a complete validation process.  These changes are incorporated into 
<br>development snapshot releases.
<br>
<br>Releases are numbered with a three level scheme: 
<br>
<br>	major.minor.development
<br>
<br>Any version where the 'development' portion is 0 (for example
<br>1.0.0, 1.1.0, etc.) indicates a stable version that will be made 
<br>available for kernel inclusion.
<br>
<br>Any version where the 'development' portion is not a 0 (for
<br>example 1.0.1, 1.1.5, etc.) indicates a development version that is
<br>being made available for testing and cutting edge users.  The stability 
<br>and functionality of the development releases are not know.  We make
<br>efforts to try and keep all snapshots reasonably stable, but due to the
<br>frequency of their release, and the desire to get those releases 
<br>available as quickly as possible, unknown anomalies should be expected.
<br>
<br>The major version number will be incremented when significant changes
<br>are made to the driver.  Currently, there are no major changes planned.
<br>
<br>5.  Firmware installation
<br>----------------------------------------------
<br>
<br>The driver requires a firmware image, download it and extract the
<br>files under /lib/firmware (or wherever your hotplug's firmware.agent
<br>will look for firmware files)
<br>
<br>The firmware can be downloaded from the following URL:
<br>
<br>    http://ipw2200.sf.net/
<br>
<br>
<br>6.  Support
<br>-----------------------------------------------
<br>
<br>For direct support of the 1.0.0 version, you can contact 
<br>http://supportmail.intel.com, or you can use the open source project
<br>support.
<br>
<br>For general information and support, go to:
<br>	
<br>    http://ipw2200.sf.net/
<br>
<br>
<br>7.  License
<br>-----------------------------------------------
<br>
<br>  Copyright(c) 2003 - 2006 Intel Corporation. All rights reserved.
<br>
<br>  This program is free software; you can redistribute it and/or modify it 
<br>  under the terms of the GNU General Public License version 2 as 
<br>  published by the Free Software Foundation.
<br>  
<br>  This program is distributed in the hope that it will be useful, but WITHOUT 
<br>  ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or 
<br>  FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for 
<br>  more details.
<br>  
<br>  You should have received a copy of the GNU General Public License along with
<br>  this program; if not, write to the Free Software Foundation, Inc., 59 
<br>  Temple Place - Suite 330, Boston, MA  02111-1307, USA.
<br>  
<br>  The full GNU General Public License is included in this distribution in the
<br>  file called LICENSE.
<br>  
<br>  Contact Information:
<br>  James P. Ketrenos <ipw2100-admin@linux.intel.com>
<br>  Intel Corporation, 5200 N.E. Elam Young Parkway, Hillsboro, OR 97124-6497
<br>
<br><p></p><div class="separator"></div><br><p><h2>networking</h2></p>sb1000 is a module network device driver for the General Instrument (also known
<br>as NextLevel) SURFboard1000 internal cable modem board.  This is an ISA card
<br>which is used by a number of cable TV companies to provide cable modem access.
<br>It's a one-way downstream-only cable modem, meaning that your upstream net link
<br>is provided by your regular phone modem.
<br>
<br>This driver was written by Franco Venturi <fventuri@mediaone.net>.  He deserves
<br>a great deal of thanks for this wonderful piece of code!
<br>
<br>-----------------------------------------------------------------------------
<br>
<br>Support for this device is now a part of the standard Linux kernel.  The
<br>driver source code file is drivers/net/sb1000.c.  In addition to this
<br>you will need:
<br>
<br>1.) The "cmconfig" program.  This is a utility which supplements "ifconfig"
<br>to configure the cable modem and network interface (usually called "cm0");
<br>and
<br>
<br>2.) Several PPP scripts which live in /etc/ppp to make connecting via your
<br>cable modem easy.
<br>
<br>   These utilities can be obtained from:
<br>
<br>      http://www.jacksonville.net/~fventuri/
<br>
<br>   in Franco's original source code distribution .tar.gz file.  Support for
<br>   the sb1000 driver can be found at:
<br>
<br>      http://web.archive.org/web/*/http://home.adelphia.net/~siglercm/sb1000.html
<br>      http://web.archive.org/web/*/http://linuxpower.cx/~cable/
<br>
<br>   along with these utilities.
<br>
<br>3.) The standard isapnp tools.  These are necessary to configure your SB1000
<br>card at boot time (or afterwards by hand) since it's a PnP card.
<br>
<br>   If you don't have these installed as a standard part of your Linux
<br>   distribution, you can find them at:
<br>
<br>      http://www.roestock.demon.co.uk/isapnptools/
<br>
<br>   or check your Linux distribution binary CD or their web site.  For help with
<br>   isapnp, pnpdump, or /etc/isapnp.conf, go to:
<br>
<br>      http://www.roestock.demon.co.uk/isapnptools/isapnpfaq.html
<br>
<br>-----------------------------------------------------------------------------
<br>
<br>To make the SB1000 card work, follow these steps:
<br>
<br>1.) Run `make config', or `make menuconfig', or `make xconfig', whichever
<br>you prefer, in the top kernel tree directory to set up your kernel
<br>configuration.  Make sure to say "Y" to "Prompt for development drivers"
<br>and to say "M" to the sb1000 driver.  Also say "Y" or "M" to all the standard
<br>networking questions to get TCP/IP and PPP networking support.
<br>
<br>2.) *BEFORE* you build the kernel, edit drivers/net/sb1000.c.  Make sure
<br>to redefine the value of READ_DATA_PORT to match the I/O address used
<br>by isapnp to access your PnP cards.  This is the value of READPORT in
<br>/etc/isapnp.conf or given by the output of pnpdump.
<br>
<br>3.) Build and install the kernel and modules as usual.
<br>
<br>4.) Boot your new kernel following the usual procedures.
<br>
<br>5.) Set up to configure the new SB1000 PnP card by capturing the output
<br>of "pnpdump" to a file and editing this file to set the correct I/O ports,
<br>IRQ, and DMA settings for all your PnP cards.  Make sure none of the settings
<br>conflict with one another.  Then test this configuration by running the
<br>"isapnp" command with your new config file as the input.  Check for
<br>errors and fix as necessary.  (As an aside, I use I/O ports 0x110 and
<br>0x310 and IRQ 11 for my SB1000 card and these work well for me.  YMMV.)
<br>Then save the finished config file as /etc/isapnp.conf for proper configuration
<br>on subsequent reboots.
<br>
<br>6.) Download the original file sb1000-1.1.2.tar.gz from Franco's site or one of
<br>the others referenced above.  As root, unpack it into a temporary directory and
<br>do a `make cmconfig' and then `install -c cmconfig /usr/local/sbin'.  Don't do
<br>`make install' because it expects to find all the utilities built and ready for
<br>installation, not just cmconfig.
<br>
<br>7.) As root, copy all the files under the ppp/ subdirectory in Franco's
<br>tar file into /etc/ppp, being careful not to overwrite any files that are
<br>already in there.  Then modify ppp@gi-on to set the correct login name,
<br>phone number, and frequency for the cable modem.  Also edit pap-secrets
<br>to specify your login name and password and any site-specific information
<br>you need.
<br>
<br>8.) Be sure to modify /etc/ppp/firewall to use ipchains instead of
<br>the older ipfwadm commands from the 2.0.x kernels.  There's a neat utility to
<br>convert ipfwadm commands to ipchains commands:
<br>
<br>   http://users.dhp.com/~whisper/ipfwadm2ipchains/
<br>
<br>You may also wish to modify the firewall script to implement a different
<br>firewalling scheme.
<br>
<br>9.) Start the PPP connection via the script /etc/ppp/ppp@gi-on.  You must be
<br>root to do this.  It's better to use a utility like sudo to execute
<br>frequently used commands like this with root permissions if possible.  If you
<br>connect successfully the cable modem interface will come up and you'll see a
<br>driver message like this at the console:
<br>
<br>         cm0: sb1000 at (0x110,0x310), csn 1, S/N 0x2a0d16d8, IRQ 11.
<br>         sb1000.c:v1.1.2 6/01/98 (fventuri@mediaone.net)
<br>
<br>The "ifconfig" command should show two new interfaces, ppp0 and cm0.
<br>The command "cmconfig cm0" will give you information about the cable modem
<br>interface.
<br>
<br>10.) Try pinging a site via `ping -c 5 www.yahoo.com', for example.  You should
<br>see packets received.
<br>
<br>11.) If you can't get site names (like www.yahoo.com) to resolve into
<br>IP addresses (like 204.71.200.67), be sure your /etc/resolv.conf file
<br>has no syntax errors and has the right nameserver IP addresses in it.
<br>If this doesn't help, try something like `ping -c 5 204.71.200.67' to
<br>see if the networking is running but the DNS resolution is where the
<br>problem lies.
<br>
<br>12.) If you still have problems, go to the support web sites mentioned above
<br>and read the information and documentation there.
<br>
<br>-----------------------------------------------------------------------------
<br>
<br>Common problems:
<br>
<br>1.) Packets go out on the ppp0 interface but don't come back on the cm0
<br>interface.  It looks like I'm connected but I can't even ping any
<br>numerical IP addresses.  (This happens predominantly on Debian systems due
<br>to a default boot-time configuration script.)
<br>
<br>Solution -- As root `echo 0 > /proc/sys/net/ipv4/conf/cm0/rp_filter' so it
<br>can share the same IP address as the ppp0 interface.  Note that this
<br>command should probably be added to the /etc/ppp/cablemodem script
<br>*right*between* the "/sbin/ifconfig" and "/sbin/cmconfig" commands.
<br>You may need to do this to /proc/sys/net/ipv4/conf/ppp0/rp_filter as well.
<br>If you do this to /proc/sys/net/ipv4/conf/default/rp_filter on each reboot
<br>(in rc.local or some such) then any interfaces can share the same IP
<br>addresses.
<br>
<br>2.) I get "unresolved symbol" error messages on executing `insmod sb1000.o'.
<br>
<br>Solution -- You probably have a non-matching kernel source tree and
<br>/usr/include/linux and /usr/include/asm header files.  Make sure you
<br>install the correct versions of the header files in these two directories.
<br>Then rebuild and reinstall the kernel.
<br>
<br>3.) When isapnp runs it reports an error, and my SB1000 card isn't working.
<br>
<br>Solution -- There's a problem with later versions of isapnp using the "(CHECK)"
<br>option in the lines that allocate the two I/O addresses for the SB1000 card.
<br>This first popped up on RH 6.0.  Delete "(CHECK)" for the SB1000 I/O addresses.
<br>Make sure they don't conflict with any other pieces of hardware first!  Then
<br>rerun isapnp and go from there.
<br>
<br>4.) I can't execute the /etc/ppp/ppp@gi-on file.
<br>
<br>Solution -- As root do `chmod ug+x /etc/ppp/ppp@gi-on'.
<br>
<br>5.) The firewall script isn't working (with 2.2.x and higher kernels).
<br>
<br>Solution -- Use the ipfwadm2ipchains script referenced above to convert the
<br>/etc/ppp/firewall script from the deprecated ipfwadm commands to ipchains.
<br>
<br>6.) I'm getting *tons* of firewall deny messages in the /var/kern.log,
<br>/var/messages, and/or /var/syslog files, and they're filling up my /var
<br>partition!!!
<br>
<br>Solution -- First, tell your ISP that you're receiving DoS (Denial of Service)
<br>and/or portscanning (UDP connection attempts) attacks!  Look over the deny
<br>messages to figure out what the attack is and where it's coming from.  Next,
<br>edit /etc/ppp/cablemodem and make sure the ",nobroadcast" option is turned on
<br>to the "cmconfig" command (uncomment that line).  If you're not receiving these
<br>denied packets on your broadcast interface (IP address xxx.yyy.zzz.255
<br>typically), then someone is attacking your machine in particular.  Be careful
<br>out there....
<br>
<br>7.) Everything seems to work fine but my computer locks up after a while
<br>(and typically during a lengthy download through the cable modem)!
<br>
<br>Solution -- You may need to add a short delay in the driver to 'slow down' the
<br>SURFboard because your PC might not be able to keep up with the transfer rate
<br>of the SB1000. To do this, it's probably best to download Franco's
<br>sb1000-1.1.2.tar.gz archive and build and install sb1000.o manually.  You'll
<br>want to edit the 'Makefile' and look for the 'SB1000_DELAY'
<br>define.  Uncomment those 'CFLAGS' lines (and comment out the default ones)
<br>and try setting the delay to something like 60 microseconds with:
<br>'-DSB1000_DELAY=60'.  Then do `make' and as root `make install' and try
<br>it out.  If it still doesn't work or you like playing with the driver, you may
<br>try other numbers.  Remember though that the higher the delay, the slower the
<br>driver (which slows down the rest of the PC too when it is actively
<br>used). Thanks to Ed Daiga for this tip!
<br>
<br>-----------------------------------------------------------------------------
<br>
<br>Credits:  This README came from Franco Venturi's original README file which is
<br>still supplied with his driver .tar.gz archive.  I and all other sb1000 users
<br>owe Franco a tremendous "Thank you!"  Additional thanks goes to Carl Patten
<br>and Ralph Bonnell who are now managing the Linux SB1000 web site, and to
<br>the SB1000 users who reported and helped debug the common problems listed
<br>above.
<br>
<br>
<br>					Clemmitt Sigler
<br>					csigler@vt.edu
<br><p></p><div class="separator"></div><br><p><h2>mac80211_hwsim</h2></p>mac80211_hwsim - software simulator of 802.11 radio(s) for mac80211
<br>Copyright (c) 2008, Jouni Malinen <j@w1.fi>
<br>
<br>This program is free software; you can redistribute it and/or modify
<br>it under the terms of the GNU General Public License version 2 as
<br>published by the Free Software Foundation.
<br>
<br>
<br>Introduction
<br>
<br>mac80211_hwsim is a Linux kernel module that can be used to simulate
<br>arbitrary number of IEEE 802.11 radios for mac80211. It can be used to
<br>test most of the mac80211 functionality and user space tools (e.g.,
<br>hostapd and wpa_supplicant) in a way that matches very closely with
<br>the normal case of using real WLAN hardware. From the mac80211 view
<br>point, mac80211_hwsim is yet another hardware driver, i.e., no changes
<br>to mac80211 are needed to use this testing tool.
<br>
<br>The main goal for mac80211_hwsim is to make it easier for developers
<br>to test their code and work with new features to mac80211, hostapd,
<br>and wpa_supplicant. The simulated radios do not have the limitations
<br>of real hardware, so it is easy to generate an arbitrary test setup
<br>and always reproduce the same setup for future tests. In addition,
<br>since all radio operation is simulated, any channel can be used in
<br>tests regardless of regulatory rules.
<br>
<br>mac80211_hwsim kernel module has a parameter 'radios' that can be used
<br>to select how many radios are simulated (default 2). This allows
<br>configuration of both very simply setups (e.g., just a single access
<br>point and a station) or large scale tests (multiple access points with
<br>hundreds of stations).
<br>
<br>mac80211_hwsim works by tracking the current channel of each virtual
<br>radio and copying all transmitted frames to all other radios that are
<br>currently enabled and on the same channel as the transmitting
<br>radio. Software encryption in mac80211 is used so that the frames are
<br>actually encrypted over the virtual air interface to allow more
<br>complete testing of encryption.
<br>
<br>A global monitoring netdev, hwsim#, is created independent of
<br>mac80211. This interface can be used to monitor all transmitted frames
<br>regardless of channel.
<br>
<br>
<br>Simple example
<br>
<br>This example shows how to use mac80211_hwsim to simulate two radios:
<br>one to act as an access point and the other as a station that
<br>associates with the AP. hostapd and wpa_supplicant are used to take
<br>care of WPA2-PSK authentication. In addition, hostapd is also
<br>processing access point side of association.
<br>
<br>
<br># Build mac80211_hwsim as part of kernel configuration
<br>
<br># Load the module
<br>modprobe mac80211_hwsim
<br>
<br># Run hostapd (AP) for wlan0
<br>hostapd hostapd.conf
<br>
<br># Run wpa_supplicant (station) for wlan1
<br>wpa_supplicant -Dwext -iwlan1 -c wpa_supplicant.conf
<br>
<br>
<br>More test cases are available in hostap.git:
<br>git://w1.fi/srv/git/hostap.git and mac80211_hwsim/tests subdirectory
<br>(http://w1.fi/gitweb/gitweb.cgi?p=hostap.git;a=tree;f=mac80211_hwsim/tests)
<br><p></p><div class="separator"></div><br><p><h2>caif</h2></p>Copyright (C) ST-Ericsson AB 2010
<br>Author: Sjur Brendeland/ sjur.brandeland@stericsson.com
<br>License terms: GNU General Public License (GPL) version 2
<br>---------------------------------------------------------
<br>
<br>=== Start ===
<br>If you have compiled CAIF for modules do:
<br>
<br>$modprobe crc_ccitt
<br>$modprobe caif
<br>$modprobe caif_socket
<br>$modprobe chnl_net
<br>
<br>
<br>=== Preparing the setup with a STE modem ===
<br>
<br>If you are working on integration of CAIF you should make sure
<br>that the kernel is built with module support.
<br>
<br>There are some things that need to be tweaked to get the host TTY correctly
<br>set up to talk to the modem.
<br>Since the CAIF stack is running in the kernel and we want to use the existing
<br>TTY, we are installing our physical serial driver as a line discipline above
<br>the TTY device.
<br>
<br>To achieve this we need to install the N_CAIF ldisc from user space.
<br>The benefit is that we can hook up to any TTY.
<br>
<br>The use of Start-of-frame-extension (STX) must also be set as
<br>module parameter "ser_use_stx".
<br>
<br>Normally Frame Checksum is always used on UART, but this is also provided as a
<br>module parameter "ser_use_fcs".
<br>
<br>$ modprobe caif_serial ser_ttyname=/dev/ttyS0 ser_use_stx=yes
<br>$ ifconfig caif_ttyS0 up
<br>
<br>PLEASE NOTE: 	There is a limitation in Android shell.
<br>		It only accepts one argument to insmod/modprobe!
<br>
<br>=== Trouble shooting ===
<br>
<br>There are debugfs parameters provided for serial communication.
<br>/sys/kernel/debug/caif_serial/<tty-name>/
<br>
<br>* ser_state:   Prints the bit-mask status where
<br>  - 0x02 means SENDING, this is a transient state.
<br>  - 0x10 means FLOW_OFF_SENT, i.e. the previous frame has not been sent
<br>	and is blocking further send operation. Flow OFF has been propagated
<br>	to all CAIF Channels using this TTY.
<br>
<br>* tty_status: Prints the bit-mask tty status information
<br>  - 0x01 - tty->warned is on.
<br>  - 0x02 - tty->low_latency is on.
<br>  - 0x04 - tty->packed is on.
<br>  - 0x08 - tty->flow_stopped is on.
<br>  - 0x10 - tty->hw_stopped is on.
<br>  - 0x20 - tty->stopped is on.
<br>
<br>* last_tx_msg: Binary blob Prints the last transmitted frame.
<br>	This can be printed with
<br>	$od --format=x1 /sys/kernel/debug/caif_serial/<tty>/last_rx_msg.
<br>	The first two tx messages sent look like this. Note: The initial
<br>	byte 02 is start of frame extension (STX) used for re-syncing
<br>	upon errors.
<br>
<br>  - Enumeration:
<br>        0000000  02 05 00 00 03 01 d2 02
<br>                 |  |     |  |  |  |
<br>                 STX(1)   |  |  |  |
<br>                    Length(2)|  |  |
<br>                          Control Channel(1)
<br>                             Command:Enumeration(1)
<br>                                Link-ID(1)
<br>                                    Checksum(2)
<br>  - Channel Setup:
<br>        0000000  02 07 00 00 00 21 a1 00 48 df
<br>                 |  |     |  |  |  |  |  |
<br>                 STX(1)   |  |  |  |  |  |
<br>                    Length(2)|  |  |  |  |
<br>                          Control Channel(1)
<br>                             Command:Channel Setup(1)
<br>                                Channel Type(1)
<br>                                    Priority and Link-ID(1)
<br>				      Endpoint(1)
<br>					  Checksum(2)
<br>
<br>* last_rx_msg: Prints the last transmitted frame.
<br>	The RX messages for LinkSetup look almost identical but they have the
<br>	bit 0x20 set in the command bit, and Channel Setup has added one byte
<br>	before Checksum containing Channel ID.
<br>	NOTE: Several CAIF Messages might be concatenated. The maximum debug
<br>	buffer size is 128 bytes.
<br>
<br>== Error Scenarios:
<br>- last_tx_msg contains channel setup message and last_rx_msg is empty ->
<br>  The host seems to be able to send over the UART, at least the CAIF ldisc get
<br>  notified that sending is completed.
<br>
<br>- last_tx_msg contains enumeration message and last_rx_msg is empty ->
<br>  The host is not able to send the message from UART, the tty has not been
<br>  able to complete the transmit operation.
<br>
<br>- if /sys/kernel/debug/caif_serial/<tty>/tty_status is non-zero there
<br>  might be problems transmitting over UART.
<br>  E.g. host and modem wiring is not correct you will typically see
<br>  tty_status = 0x10 (hw_stopped) and ser_state = 0x10 (FLOW_OFF_SENT).
<br>  You will probably see the enumeration message in last_tx_message
<br>  and empty last_rx_message.
<br><p></p><div class="separator"></div><br><p><h2>m68k</h2></p>
<br>The Amiga Buddha and Catweasel IDE Driver (part of ide.c) was written by
<br>Geert Uytterhoeven based on the following specifications:
<br>
<br>------------------------------------------------------------------------
<br>
<br>Register map of the Buddha IDE controller and the
<br>Buddha-part of the Catweasel Zorro-II version
<br>
<br>The Autoconfiguration has been implemented just as Commodore
<br>described  in  their  manuals, no tricks have been used (for
<br>example leaving some address lines out of the equations...).
<br>If you want to configure the board yourself (for example let
<br>a  Linux  kernel  configure the card), look at the Commodore
<br>Docs.  Reading the nibbles should give this information:
<br>
<br>Vendor number: 4626 ($1212)
<br>product number: 0 (42 for Catweasel Z-II)
<br>Serial number: 0
<br>Rom-vector: $1000
<br>
<br>The  card  should be a Z-II board, size 64K, not for freemem
<br>list, Rom-Vektor is valid, no second Autoconfig-board on the
<br>same card, no space preference, supports "Shutup_forever".
<br>
<br>Setting  the  base address should be done in two steps, just
<br>as  the Amiga Kickstart does:  The lower nibble of the 8-Bit
<br>address is written to $4a, then the whole Byte is written to
<br>$48, while it doesn't matter how often you're writing to $4a
<br>as  long as $48 is not touched.  After $48 has been written,
<br>the  whole card disappears from $e8 and is mapped to the new
<br>address just written.  Make sure $4a is written before $48,
<br>otherwise your chance is only 1:16 to find the board :-).
<br>
<br>The local memory-map is even active when mapped to $e8:
<br>
<br>$0-$7e		Autokonfig-space, see Z-II docs.
<br>
<br>$80-$7fd	reserved
<br>
<br>$7fe		Speed-select Register: Read & Write
<br>		(description see further down)
<br>
<br>$800-$8ff	IDE-Select 0 (Port 0, Register set 0)
<br>
<br>$900-$9ff	IDE-Select 1 (Port 0, Register set 1)
<br>
<br>$a00-$aff	IDE-Select 2 (Port 1, Register set 0)
<br>
<br>$b00-$bff	IDE-Select 3 (Port 1, Register set 1)
<br>
<br>$c00-$cff	IDE-Select 4 (Port 2, Register set 0,
<br>                          Catweasel only!)
<br>
<br>$d00-$dff	IDE-Select 5 (Port 3, Register set 1,
<br>			      Catweasel only!)
<br>
<br>$e00-$eff	local expansion port, on Catweasel Z-II the 
<br>		Catweasel registers are also mapped here.
<br>		Never touch, use multidisk.device!
<br>		
<br>$f00		read only, Byte-access: Bit 7 shows the 
<br>		level of the IRQ-line of IDE port 0. 
<br>
<br>$f01-$f3f	mirror of $f00
<br>
<br>$f40		read only, Byte-access: Bit 7 shows the 
<br>		level of the IRQ-line of IDE port 1. 
<br>
<br>$f41-$f7f	mirror of $f40
<br>
<br>$f80		read only, Byte-access: Bit 7 shows the 
<br>		level of the IRQ-line of IDE port 2. 
<br>		(Catweasel only!)
<br>
<br>$f81-$fbf	mirror of $f80
<br>
<br>$fc0		write-only: Writing any value to this
<br>		register enables IRQs to be passed from the 
<br>		IDE ports to the Zorro bus. This mechanism 
<br>		has been implemented to be compatible with 
<br>		harddisks that are either defective or have
<br>		a buggy firmware and pull the IRQ line up 
<br>		while starting up. If interrupts would 
<br>		always be passed to the bus, the computer 
<br>		might not start up. Once enabled, this flag 
<br>		can not be disabled again. The level of the 
<br>		flag can not be determined by software 
<br>		(what for? Write to me if it's necessary!).
<br>
<br>$fc1-$fff	mirror of $fc0
<br>
<br>$1000-$ffff	Buddha-Rom with offset $1000 in the rom
<br>		chip. The addresses $0 to $fff of the rom 
<br>		chip cannot be read. Rom is Byte-wide and
<br>		mapped to even addresses.
<br>
<br>The  IDE ports issue an INT2.  You can read the level of the
<br>IRQ-lines  of  the  IDE-ports by reading from the three (two
<br>for  Buddha-only)  registers  $f00, $f40 and $f80.  This way
<br>more  than one I/O request can be handled and you can easily
<br>determine  what  driver  has  to serve the INT2.  Buddha and
<br>Catweasel  expansion  boards  can issue an INT6.  A separate
<br>memory  map  is available for the I/O module and the sysop's
<br>I/O module.
<br>
<br>The IDE ports are fed by the address lines A2 to A4, just as
<br>the  Amiga  1200  and  Amiga  4000  IDE ports are.  This way
<br>existing  drivers  can be easily ported to Buddha.  A move.l
<br>polls  two  words  out of the same address of IDE port since
<br>every  word  is  mirrored  once.  movem is not possible, but
<br>it's  not  necessary  either,  because  you can only speedup
<br>68000  systems  with  this  technique.   A 68020 system with
<br>fastmem is faster with move.l.
<br>
<br>If you're using the mirrored registers of the IDE-ports with
<br>A6=1,  the Buddha doesn't care about the speed that you have
<br>selected  in  the  speed  register (see further down).  With
<br>A6=1  (for example $840 for port 0, register set 0), a 780ns
<br>access  is being made.  These registers should be used for a
<br>command   access   to  the  harddisk/CD-Rom,  since  command
<br>accesses  are Byte-wide and have to be made slower according
<br>to the ATA-X3T9 manual.
<br>
<br>Now  for the speed-register:  The register is byte-wide, and
<br>only  the  upper  three  bits are used (Bits 7 to 5).  Bit 4
<br>must  always  be set to 1 to be compatible with later Buddha
<br>versions  (if  I'll  ever  update this one).  I presume that
<br>I'll  never use the lower four bits, but they have to be set
<br>to 1 by definition.
<br>  The  values in this table have to be shifted 5 bits to the
<br>left and or'd with $1f (this sets the lower 5 bits).
<br>
<br>All  the timings have in common:  Select and IOR/IOW rise at
<br>the  same  time.   IOR  and  IOW have a propagation delay of
<br>about  30ns  to  the clocks on the Zorro bus, that's why the
<br>values  are no multiple of 71.  One clock-cycle is 71ns long
<br>(exactly 70,5 at 14,18 Mhz on PAL systems).
<br>
<br>value 0 (Default after reset)
<br>
<br>497ns Select (7 clock cycles) , IOR/IOW after 172ns (2 clock cycles)
<br>(same timing as the Amiga 1200 does on it's IDE port without
<br>accelerator card)
<br>
<br>value 1
<br>
<br>639ns Select (9 clock cycles), IOR/IOW after 243ns (3 clock cycles)
<br>
<br>value 2
<br>
<br>781ns Select (11 clock cycles), IOR/IOW after 314ns (4 clock cycles)
<br>
<br>value 3
<br>
<br>355ns Select (5 clock cycles), IOR/IOW after 101ns (1 clock cycle)
<br>
<br>value 4
<br>
<br>355ns Select (5 clock cycles), IOR/IOW after 172ns (2 clock cycles)
<br>
<br>value 5
<br>
<br>355ns Select (5 clock cycles), IOR/IOW after 243ns (3 clock cycles)
<br>
<br>value 6
<br>
<br>1065ns Select (15 clock cycles), IOR/IOW after 314ns (4 clock cycles)
<br>
<br>value 7
<br>
<br>355ns Select, (5 clock cycles), IOR/IOW after 101ns (1 clock cycle)
<br>
<br>When accessing IDE registers with A6=1 (for example $84x),
<br>the timing will always be mode 0 8-bit compatible, no matter
<br>what you have selected in the speed register:
<br>
<br>781ns select, IOR/IOW after 4 clock cycles (=314ns) aktive. 
<br>
<br>All  the  timings with a very short select-signal (the 355ns
<br>fast  accesses)  depend  on the accelerator card used in the
<br>system:  Sometimes two more clock cycles are inserted by the
<br>bus  interface,  making  the  whole access 497ns long.  This
<br>doesn't  affect  the  reliability  of the controller nor the
<br>performance  of  the  card,  since  this doesn't happen very
<br>often.
<br>
<br>All  the  timings  are  calculated  and  only  confirmed  by
<br>measurements  that allowed me to count the clock cycles.  If
<br>the  system  is clocked by an oscillator other than 28,37516
<br>Mhz  (for  example  the  NTSC-frequency  28,63636 Mhz), each
<br>clock  cycle is shortened to a bit less than 70ns (not worth
<br>mentioning).   You  could think of a small performance boost
<br>by  overclocking  the  system,  but  you would either need a
<br>multisync  monitor,  or  a  graphics card, and your internal
<br>diskdrive would go crazy, that's why you shouldn't tune your
<br>Amiga this way.
<br>
<br>Giving  you  the  possibility  to  write  software  that  is
<br>compatible  with both the Buddha and the Catweasel Z-II, The
<br>Buddha  acts  just  like  a  Catweasel  Z-II  with no device
<br>connected  to  the  third  IDE-port.   The IRQ-register $f80
<br>always  shows a "no IRQ here" on the Buddha, and accesses to
<br>the  third  IDE  port  are  going into data's Nirwana on the
<br>Buddha.
<br>
<br>			    Jens Schönfeld february 19th, 1997
<br>					updated may 27th, 1997
<br>			     eMail: sysop@nostlgic.tng.oche.de
<br>
<br><p></p><div class="separator"></div><br><p><h2>early-userspace</h2></p>Early userspace support
<br>=======================
<br>
<br>Last update: 2004-12-20 tlh
<br>
<br>
<br>"Early userspace" is a set of libraries and programs that provide
<br>various pieces of functionality that are important enough to be
<br>available while a Linux kernel is coming up, but that don't need to be
<br>run inside the kernel itself.
<br>
<br>It consists of several major infrastructure components:
<br>
<br>- gen_init_cpio, a program that builds a cpio-format archive
<br>  containing a root filesystem image.  This archive is compressed, and
<br>  the compressed image is linked into the kernel image.
<br>- initramfs, a chunk of code that unpacks the compressed cpio image
<br>  midway through the kernel boot process.
<br>- klibc, a userspace C library, currently packaged separately, that is
<br>  optimized for correctness and small size.
<br>
<br>The cpio file format used by initramfs is the "newc" (aka "cpio -H newc")
<br>format, and is documented in the file "buffer-format.txt".  There are
<br>two ways to add an early userspace image: specify an existing cpio
<br>archive to be used as the image or have the kernel build process build
<br>the image from specifications.
<br>
<br>CPIO ARCHIVE method
<br>
<br>You can create a cpio archive that contains the early userspace image.
<br>Your cpio archive should be specified in CONFIG_INITRAMFS_SOURCE and it
<br>will be used directly.  Only a single cpio file may be specified in
<br>CONFIG_INITRAMFS_SOURCE and directory and file names are not allowed in
<br>combination with a cpio archive.
<br>
<br>IMAGE BUILDING method
<br>
<br>The kernel build process can also build an early userspace image from
<br>source parts rather than supplying a cpio archive.  This method provides
<br>a way to create images with root-owned files even though the image was
<br>built by an unprivileged user.
<br>
<br>The image is specified as one or more sources in
<br>CONFIG_INITRAMFS_SOURCE.  Sources can be either directories or files -
<br>cpio archives are *not* allowed when building from sources.
<br>
<br>A source directory will have it and all of its contents packaged.  The
<br>specified directory name will be mapped to '/'.  When packaging a
<br>directory, limited user and group ID translation can be performed.
<br>INITRAMFS_ROOT_UID can be set to a user ID that needs to be mapped to
<br>user root (0).  INITRAMFS_ROOT_GID can be set to a group ID that needs
<br>to be mapped to group root (0).
<br>
<br>A source file must be directives in the format required by the
<br>usr/gen_init_cpio utility (run 'usr/gen_init_cpio --help' to get the
<br>file format).  The directives in the file will be passed directly to
<br>usr/gen_init_cpio.
<br>
<br>When a combination of directories and files are specified then the
<br>initramfs image will be an aggregate of all of them.  In this way a user
<br>can create a 'root-image' directory and install all files into it.
<br>Because device-special files cannot be created by a unprivileged user,
<br>special files can be listed in a 'root-files' file.  Both 'root-image'
<br>and 'root-files' can be listed in CONFIG_INITRAMFS_SOURCE and a complete
<br>early userspace image can be built by an unprivileged user.
<br>
<br>As a technical note, when directories and files are specified, the
<br>entire CONFIG_INITRAMFS_SOURCE is passed to
<br>scripts/gen_initramfs_list.sh.  This means that CONFIG_INITRAMFS_SOURCE
<br>can really be interpreted as any legal argument to
<br>gen_initramfs_list.sh.  If a directory is specified as an argument then
<br>the contents are scanned, uid/gid translation is performed, and
<br>usr/gen_init_cpio file directives are output.  If a directory is
<br>specified as an argument to scripts/gen_initramfs_list.sh then the
<br>contents of the file are simply copied to the output.  All of the output
<br>directives from directory scanning and file contents copying are
<br>processed by usr/gen_init_cpio.
<br>
<br>See also 'scripts/gen_initramfs_list.sh -h'.
<br>
<br>Where's this all leading?
<br>=========================
<br>
<br>The klibc distribution contains some of the necessary software to make
<br>early userspace useful.  The klibc distribution is currently
<br>maintained separately from the kernel.
<br>
<br>You can obtain somewhat infrequent snapshots of klibc from
<br>ftp://ftp.kernel.org/pub/linux/libs/klibc/
<br>
<br>For active users, you are better off using the klibc git
<br>repository, at http://git.kernel.org/?p=libs/klibc/klibc.git
<br>
<br>The standalone klibc distribution currently provides three components,
<br>in addition to the klibc library:
<br>
<br>- ipconfig, a program that configures network interfaces.  It can
<br>  configure them statically, or use DHCP to obtain information
<br>  dynamically (aka "IP autoconfiguration").
<br>- nfsmount, a program that can mount an NFS filesystem.
<br>- kinit, the "glue" that uses ipconfig and nfsmount to replace the old
<br>  support for IP autoconfig, mount a filesystem over NFS, and continue
<br>  system boot using that filesystem as root.
<br>
<br>kinit is built as a single statically linked binary to save space.
<br>
<br>Eventually, several more chunks of kernel functionality will hopefully
<br>move to early userspace:
<br>
<br>- Almost all of init/do_mounts* (the beginning of this is already in
<br>  place)
<br>- ACPI table parsing
<br>- Insert unwieldy subsystem that doesn't really need to be in kernel
<br>  space here
<br>
<br>If kinit doesn't meet your current needs and you've got bytes to burn,
<br>the klibc distribution includes a small Bourne-compatible shell (ash)
<br>and a number of other utilities, so you can replace kinit and build
<br>custom initramfs images that meet your needs exactly.
<br>
<br>For questions and help, you can sign up for the early userspace
<br>mailing list at http://www.zytor.com/mailman/listinfo/klibc
<br>
<br>How does it work?
<br>=================
<br>
<br>The kernel has currently 3 ways to mount the root filesystem:
<br>
<br>a) all required device and filesystem drivers compiled into the kernel, no
<br>   initrd.  init/main.c:init() will call prepare_namespace() to mount the
<br>   final root filesystem, based on the root= option and optional init= to run
<br>   some other init binary than listed at the end of init/main.c:init().
<br>
<br>b) some device and filesystem drivers built as modules and stored in an
<br>   initrd.  The initrd must contain a binary '/linuxrc' which is supposed to
<br>   load these driver modules.  It is also possible to mount the final root
<br>   filesystem via linuxrc and use the pivot_root syscall.  The initrd is
<br>   mounted and executed via prepare_namespace().
<br>
<br>c) using initramfs.  The call to prepare_namespace() must be skipped.
<br>   This means that a binary must do all the work.  Said binary can be stored
<br>   into initramfs either via modifying usr/gen_init_cpio.c or via the new
<br>   initrd format, an cpio archive.  It must be called "/init".  This binary
<br>   is responsible to do all the things prepare_namespace() would do.
<br>
<br>   To maintain backwards compatibility, the /init binary will only run if it
<br>   comes via an initramfs cpio archive.  If this is not the case,
<br>   init/main.c:init() will run prepare_namespace() to mount the final root
<br>   and exec one of the predefined init binaries.
<br>
<br>Bryan O'Sullivan <bos@serpentine.com>
<br><p></p><div class="separator"></div><br><p><h2>cifs</h2></p>The CIFS VFS support for Linux supports many advanced network filesystem 
<br>features such as hierarchical dfs like namespace, hardlinks, locking and more.  
<br>It was designed to comply with the SNIA CIFS Technical Reference (which 
<br>supersedes the 1992 X/Open SMB Standard) as well as to perform best practice 
<br>practical interoperability with Windows 2000, Windows XP, Samba and equivalent 
<br>servers.  This code was developed in participation with the Protocol Freedom
<br>Information Foundation.
<br>
<br>Please see
<br>  http://protocolfreedom.org/ and
<br>  http://samba.org/samba/PFIF/
<br>for more details.
<br>
<br>
<br>For questions or bug reports please contact:
<br>    sfrench@samba.org (sfrench@us.ibm.com) 
<br>
<br>Build instructions:
<br>==================
<br>For Linux 2.4:
<br>1) Get the kernel source (e.g.from http://www.kernel.org)
<br>and download the cifs vfs source (see the project page
<br>at http://us1.samba.org/samba/Linux_CIFS_client.html)
<br>and change directory into the top of the kernel directory
<br>then patch the kernel (e.g. "patch -p1 < cifs_24.patch") 
<br>to add the cifs vfs to your kernel configure options if
<br>it has not already been added (e.g. current SuSE and UL
<br>users do not need to apply the cifs_24.patch since the cifs vfs is
<br>already in the kernel configure menu) and then
<br>mkdir linux/fs/cifs and then copy the current cifs vfs files from
<br>the cifs download to your kernel build directory e.g.
<br>
<br>	cp <cifs_download_dir>/fs/cifs/* to <kernel_download_dir>/fs/cifs
<br>	
<br>2) make menuconfig (or make xconfig)
<br>3) select cifs from within the network filesystem choices
<br>4) save and exit
<br>5) make dep
<br>6) make modules (or "make" if CIFS VFS not to be built as a module)
<br>
<br>For Linux 2.6:
<br>1) Download the kernel (e.g. from http://www.kernel.org)
<br>and change directory into the top of the kernel directory tree
<br>(e.g. /usr/src/linux-2.5.73)
<br>2) make menuconfig (or make xconfig)
<br>3) select cifs from within the network filesystem choices
<br>4) save and exit
<br>5) make
<br>
<br>
<br>Installation instructions:
<br>=========================
<br>If you have built the CIFS vfs as module (successfully) simply
<br>type "make modules_install" (or if you prefer, manually copy the file to
<br>the modules directory e.g. /lib/modules/2.4.10-4GB/kernel/fs/cifs/cifs.o).
<br>
<br>If you have built the CIFS vfs into the kernel itself, follow the instructions
<br>for your distribution on how to install a new kernel (usually you
<br>would simply type "make install").
<br>
<br>If you do not have the utility mount.cifs (in the Samba 3.0 source tree and on 
<br>the CIFS VFS web site) copy it to the same directory in which mount.smbfs and 
<br>similar files reside (usually /sbin).  Although the helper software is not  
<br>required, mount.cifs is recommended.  Eventually the Samba 3.0 utility program 
<br>"net" may also be helpful since it may someday provide easier mount syntax for
<br>users who are used to Windows e.g.
<br>	net use <mount point> <UNC name or cifs URL>
<br>Note that running the Winbind pam/nss module (logon service) on all of your
<br>Linux clients is useful in mapping Uids and Gids consistently across the
<br>domain to the proper network user.  The mount.cifs mount helper can be
<br>trivially built from Samba 3.0 or later source e.g. by executing:
<br>
<br>	gcc samba/source/client/mount.cifs.c -o mount.cifs
<br>
<br>If cifs is built as a module, then the size and number of network buffers
<br>and maximum number of simultaneous requests to one server can be configured.
<br>Changing these from their defaults is not recommended. By executing modinfo
<br>	modinfo kernel/fs/cifs/cifs.ko
<br>on kernel/fs/cifs/cifs.ko the list of configuration changes that can be made
<br>at module initialization time (by running insmod cifs.ko) can be seen.
<br>
<br>Allowing User Mounts
<br>====================
<br>To permit users to mount and unmount over directories they own is possible
<br>with the cifs vfs.  A way to enable such mounting is to mark the mount.cifs
<br>utility as suid (e.g. "chmod +s /sbin/mount.cifs). To enable users to 
<br>umount shares they mount requires
<br>1) mount.cifs version 1.4 or later
<br>2) an entry for the share in /etc/fstab indicating that a user may
<br>unmount it e.g.
<br>//server/usersharename  /mnt/username cifs user 0 0
<br>
<br>Note that when the mount.cifs utility is run suid (allowing user mounts), 
<br>in order to reduce risks, the "nosuid" mount flag is passed in on mount to
<br>disallow execution of an suid program mounted on the remote target.
<br>When mount is executed as root, nosuid is not passed in by default,
<br>and execution of suid programs on the remote target would be enabled
<br>by default. This can be changed, as with nfs and other filesystems, 
<br>by simply specifying "nosuid" among the mount options. For user mounts 
<br>though to be able to pass the suid flag to mount requires rebuilding 
<br>mount.cifs with the following flag: 
<br> 
<br>        gcc samba/source/client/mount.cifs.c -DCIFS_ALLOW_USR_SUID -o mount.cifs
<br>
<br>There is a corresponding manual page for cifs mounting in the Samba 3.0 and
<br>later source tree in docs/manpages/mount.cifs.8 
<br>
<br>Allowing User Unmounts
<br>======================
<br>To permit users to ummount directories that they have user mounted (see above),
<br>the utility umount.cifs may be used.  It may be invoked directly, or if 
<br>umount.cifs is placed in /sbin, umount can invoke the cifs umount helper
<br>(at least for most versions of the umount utility) for umount of cifs
<br>mounts, unless umount is invoked with -i (which will avoid invoking a umount
<br>helper). As with mount.cifs, to enable user unmounts umount.cifs must be marked
<br>as suid (e.g. "chmod +s /sbin/umount.cifs") or equivalent (some distributions
<br>allow adding entries to a file to the /etc/permissions file to achieve the
<br>equivalent suid effect).  For this utility to succeed the target path
<br>must be a cifs mount, and the uid of the current user must match the uid
<br>of the user who mounted the resource.
<br>
<br>Also note that the customary way of allowing user mounts and unmounts is 
<br>(instead of using mount.cifs and unmount.cifs as suid) to add a line
<br>to the file /etc/fstab for each //server/share you wish to mount, but
<br>this can become unwieldy when potential mount targets include many
<br>or  unpredictable UNC names.
<br>
<br>Samba Considerations 
<br>==================== 
<br>To get the maximum benefit from the CIFS VFS, we recommend using a server that 
<br>supports the SNIA CIFS Unix Extensions standard (e.g.  Samba 2.2.5 or later or 
<br>Samba 3.0) but the CIFS vfs works fine with a wide variety of CIFS servers.  
<br>Note that uid, gid and file permissions will display default values if you do 
<br>not have a server that supports the Unix extensions for CIFS (such as Samba 
<br>2.2.5 or later).  To enable the Unix CIFS Extensions in the Samba server, add 
<br>the line: 
<br>
<br>	unix extensions = yes
<br>	
<br>to your smb.conf file on the server.  Note that the following smb.conf settings 
<br>are also useful (on the Samba server) when the majority of clients are Unix or 
<br>Linux: 
<br>
<br>	case sensitive = yes
<br>	delete readonly = yes 
<br>	ea support = yes
<br>
<br>Note that server ea support is required for supporting xattrs from the Linux
<br>cifs client, and that EA support is present in later versions of Samba (e.g. 
<br>3.0.6 and later (also EA support works in all versions of Windows, at least to
<br>shares on NTFS filesystems).  Extended Attribute (xattr) support is an optional
<br>feature of most Linux filesystems which may require enabling via
<br>make menuconfig. Client support for extended attributes (user xattr) can be
<br>disabled on a per-mount basis by specifying "nouser_xattr" on mount.
<br>
<br>The CIFS client can get and set POSIX ACLs (getfacl, setfacl) to Samba servers
<br>version 3.10 and later.  Setting POSIX ACLs requires enabling both XATTR and 
<br>then POSIX support in the CIFS configuration options when building the cifs
<br>module.  POSIX ACL support can be disabled on a per mount basic by specifying
<br>"noacl" on mount.
<br> 
<br>Some administrators may want to change Samba's smb.conf "map archive" and 
<br>"create mask" parameters from the default.  Unless the create mask is changed
<br>newly created files can end up with an unnecessarily restrictive default mode,
<br>which may not be what you want, although if the CIFS Unix extensions are
<br>enabled on the server and client, subsequent setattr calls (e.g. chmod) can
<br>fix the mode.  Note that creating special devices (mknod) remotely 
<br>may require specifying a mkdev function to Samba if you are not using 
<br>Samba 3.0.6 or later.  For more information on these see the manual pages
<br>("man smb.conf") on the Samba server system.  Note that the cifs vfs,
<br>unlike the smbfs vfs, does not read the smb.conf on the client system 
<br>(the few optional settings are passed in on mount via -o parameters instead).  
<br>Note that Samba 2.2.7 or later includes a fix that allows the CIFS VFS to delete
<br>open files (required for strict POSIX compliance).  Windows Servers already 
<br>supported this feature. Samba server does not allow symlinks that refer to files
<br>outside of the share, so in Samba versions prior to 3.0.6, most symlinks to
<br>files with absolute paths (ie beginning with slash) such as:
<br>	 ln -s /mnt/foo bar
<br>would be forbidden. Samba 3.0.6 server or later includes the ability to create 
<br>such symlinks safely by converting unsafe symlinks (ie symlinks to server 
<br>files that are outside of the share) to a samba specific format on the server
<br>that is ignored by local server applications and non-cifs clients and that will
<br>not be traversed by the Samba server).  This is opaque to the Linux client
<br>application using the cifs vfs. Absolute symlinks will work to Samba 3.0.5 or
<br>later, but only for remote clients using the CIFS Unix extensions, and will
<br>be invisbile to Windows clients and typically will not affect local
<br>applications running on the same server as Samba.  
<br>
<br>Use instructions:
<br>================
<br>Once the CIFS VFS support is built into the kernel or installed as a module 
<br>(cifs.o), you can use mount syntax like the following to access Samba or Windows 
<br>servers: 
<br>
<br>  mount -t cifs //9.53.216.11/e$ /mnt -o user=myname,pass=mypassword
<br>
<br>Before -o the option -v may be specified to make the mount.cifs
<br>mount helper display the mount steps more verbosely.  
<br>After -o the following commonly used cifs vfs specific options
<br>are supported:
<br>
<br>  user=<username>
<br>  pass=<password>
<br>  domain=<domain name>
<br>  
<br>Other cifs mount options are described below.  Use of TCP names (in addition to
<br>ip addresses) is available if the mount helper (mount.cifs) is installed. If
<br>you do not trust the server to which are mounted, or if you do not have
<br>cifs signing enabled (and the physical network is insecure), consider use
<br>of the standard mount options "noexec" and "nosuid" to reduce the risk of 
<br>running an altered binary on your local system (downloaded from a hostile server
<br>or altered by a hostile router).
<br>
<br>Although mounting using format corresponding to the CIFS URL specification is
<br>not possible in mount.cifs yet, it is possible to use an alternate format
<br>for the server and sharename (which is somewhat similar to NFS style mount
<br>syntax) instead of the more widely used UNC format (i.e. \\server\share):
<br>  mount -t cifs tcp_name_of_server:share_name /mnt -o user=myname,pass=mypasswd
<br>
<br>When using the mount helper mount.cifs, passwords may be specified via alternate
<br>mechanisms, instead of specifying it after -o using the normal "pass=" syntax
<br>on the command line:
<br>1) By including it in a credential file. Specify credentials=filename as one
<br>of the mount options. Credential files contain two lines
<br>        username=someuser
<br>        password=your_password
<br>2) By specifying the password in the PASSWD environment variable (similarly
<br>the user name can be taken from the USER environment variable).
<br>3) By specifying the password in a file by name via PASSWD_FILE
<br>4) By specifying the password in a file by file descriptor via PASSWD_FD
<br>
<br>If no password is provided, mount.cifs will prompt for password entry
<br>
<br>Restrictions
<br>============
<br>Servers must support either "pure-TCP" (port 445 TCP/IP CIFS connections) or RFC 
<br>1001/1002 support for "Netbios-Over-TCP/IP." This is not likely to be a 
<br>problem as most servers support this.
<br>
<br>Valid filenames differ between Windows and Linux.  Windows typically restricts
<br>filenames which contain certain reserved characters (e.g.the character : 
<br>which is used to delimit the beginning of a stream name by Windows), while
<br>Linux allows a slightly wider set of valid characters in filenames. Windows
<br>servers can remap such characters when an explicit mapping is specified in
<br>the Server's registry.  Samba starting with version 3.10 will allow such 
<br>filenames (ie those which contain valid Linux characters, which normally
<br>would be forbidden for Windows/CIFS semantics) as long as the server is
<br>configured for Unix Extensions (and the client has not disabled
<br>/proc/fs/cifs/LinuxExtensionsEnabled).
<br>  
<br>
<br>CIFS VFS Mount Options
<br>======================
<br>A partial list of the supported mount options follows:
<br>  user		The user name to use when trying to establish
<br>		the CIFS session.
<br>  password	The user password.  If the mount helper is
<br>		installed, the user will be prompted for password
<br>		if not supplied.
<br>  ip		The ip address of the target server
<br>  unc		The target server Universal Network Name (export) to 
<br>		mount.	
<br>  domain	Set the SMB/CIFS workgroup name prepended to the
<br>		username during CIFS session establishment
<br>  forceuid	Set the default uid for inodes to the uid
<br>		passed in on mount. For mounts to servers
<br>		which do support the CIFS Unix extensions, such as a
<br>		properly configured Samba server, the server provides
<br>		the uid, gid and mode so this parameter should not be
<br>		specified unless the server and clients uid and gid
<br>		numbering differ.  If the server and client are in the
<br>		same domain (e.g. running winbind or nss_ldap) and
<br>		the server supports the Unix Extensions then the uid
<br>		and gid can be retrieved from the server (and uid
<br>		and gid would not have to be specified on the mount.
<br>		For servers which do not support the CIFS Unix
<br>		extensions, the default uid (and gid) returned on lookup
<br>		of existing files will be the uid (gid) of the person
<br>		who executed the mount (root, except when mount.cifs
<br>		is configured setuid for user mounts) unless the "uid=" 
<br>		(gid) mount option is specified. Also note that permission
<br>		checks (authorization checks) on accesses to a file occur
<br>		at the server, but there are cases in which an administrator
<br>		may want to restrict at the client as well.  For those
<br>		servers which do not report a uid/gid owner
<br>		(such as Windows), permissions can also be checked at the
<br>		client, and a crude form of client side permission checking 
<br>		can be enabled by specifying file_mode and dir_mode on 
<br>		the client.  (default)
<br>  forcegid	(similar to above but for the groupid instead of uid) (default)
<br>  noforceuid	Fill in file owner information (uid) by requesting it from
<br>		the server if possible. With this option, the value given in
<br>		the uid= option (on mount) will only be used if the server
<br>		can not support returning uids on inodes.
<br>  noforcegid	(similar to above but for the group owner, gid, instead of uid)
<br>  uid		Set the default uid for inodes, and indicate to the
<br>		cifs kernel driver which local user mounted. If the server
<br>		supports the unix extensions the default uid is
<br>		not used to fill in the owner fields of inodes (files)
<br>		unless the "forceuid" parameter is specified.
<br>  gid		Set the default gid for inodes (similar to above).
<br>  file_mode     If CIFS Unix extensions are not supported by the server
<br>		this overrides the default mode for file inodes.
<br>  fsc		Enable local disk caching using FS-Cache (off by default). This
<br>  		option could be useful to improve performance on a slow link,
<br>		heavily loaded server and/or network where reading from the
<br>		disk is faster than reading from the server (over the network).
<br>		This could also impact scalability positively as the
<br>		number of calls to the server are reduced. However, local
<br>		caching is not suitable for all workloads for e.g. read-once
<br>		type workloads. So, you need to consider carefully your
<br>		workload/scenario before using this option. Currently, local
<br>		disk caching is functional for CIFS files opened as read-only.
<br>  dir_mode      If CIFS Unix extensions are not supported by the server 
<br>		this overrides the default mode for directory inodes.
<br>  port		attempt to contact the server on this tcp port, before
<br>		trying the usual ports (port 445, then 139).
<br>  iocharset     Codepage used to convert local path names to and from
<br>		Unicode. Unicode is used by default for network path
<br>		names if the server supports it.  If iocharset is
<br>		not specified then the nls_default specified
<br>		during the local client kernel build will be used.
<br>		If server does not support Unicode, this parameter is
<br>		unused.
<br>  rsize		default read size (usually 16K). The client currently
<br>		can not use rsize larger than CIFSMaxBufSize. CIFSMaxBufSize
<br>		defaults to 16K and may be changed (from 8K to the maximum
<br>		kmalloc size allowed by your kernel) at module install time
<br>		for cifs.ko. Setting CIFSMaxBufSize to a very large value
<br>		will cause cifs to use more memory and may reduce performance
<br>		in some cases.  To use rsize greater than 127K (the original
<br>		cifs protocol maximum) also requires that the server support
<br>		a new Unix Capability flag (for very large read) which some
<br>		newer servers (e.g. Samba 3.0.26 or later) do. rsize can be
<br>		set from a minimum of 2048 to a maximum of 130048 (127K or
<br>		CIFSMaxBufSize, whichever is smaller)
<br>  wsize		default write size (default 57344)
<br>		maximum wsize currently allowed by CIFS is 57344 (fourteen
<br>		4096 byte pages)
<br>  actimeo=n	attribute cache timeout in seconds (default 1 second).
<br>		After this timeout, the cifs client requests fresh attribute
<br>		information from the server. This option allows to tune the
<br>		attribute cache timeout to suit the workload needs. Shorter
<br>		timeouts mean better the cache coherency, but increased number
<br>		of calls to the server. Longer timeouts mean reduced number
<br>		of calls to the server at the expense of less stricter cache
<br>		coherency checks (i.e. incorrect attribute cache for a short
<br>		period of time).
<br>  rw		mount the network share read-write (note that the
<br>		server may still consider the share read-only)
<br>  ro		mount network share read-only
<br>  version	used to distinguish different versions of the
<br>		mount helper utility (not typically needed)
<br>  sep		if first mount option (after the -o), overrides
<br>		the comma as the separator between the mount
<br>		parms. e.g.
<br>			-o user=myname,password=mypassword,domain=mydom
<br>		could be passed instead with period as the separator by
<br>			-o sep=.user=myname.password=mypassword.domain=mydom
<br>		this might be useful when comma is contained within username
<br>		or password or domain. This option is less important
<br>		when the cifs mount helper cifs.mount (version 1.1 or later)
<br>		is used.
<br>  nosuid        Do not allow remote executables with the suid bit 
<br>		program to be executed.  This is only meaningful for mounts
<br>		to servers such as Samba which support the CIFS Unix Extensions.
<br>		If you do not trust the servers in your network (your mount
<br>		targets) it is recommended that you specify this option for
<br>		greater security.
<br>  exec		Permit execution of binaries on the mount.
<br>  noexec	Do not permit execution of binaries on the mount.
<br>  dev		Recognize block devices on the remote mount.
<br>  nodev		Do not recognize devices on the remote mount.
<br>  suid          Allow remote files on this mountpoint with suid enabled to 
<br>		be executed (default for mounts when executed as root,
<br>		nosuid is default for user mounts).
<br>  credentials   Although ignored by the cifs kernel component, it is used by 
<br>		the mount helper, mount.cifs. When mount.cifs is installed it
<br>		opens and reads the credential file specified in order  
<br>		to obtain the userid and password arguments which are passed to
<br>		the cifs vfs.
<br>  guest         Although ignored by the kernel component, the mount.cifs
<br>		mount helper will not prompt the user for a password
<br>		if guest is specified on the mount options.  If no
<br>		password is specified a null password will be used.
<br>  perm          Client does permission checks (vfs_permission check of uid
<br>		and gid of the file against the mode and desired operation),
<br>		Note that this is in addition to the normal ACL check on the
<br>		target machine done by the server software. 
<br>		Client permission checking is enabled by default.
<br>  noperm        Client does not do permission checks.  This can expose
<br>		files on this mount to access by other users on the local
<br>		client system. It is typically only needed when the server
<br>		supports the CIFS Unix Extensions but the UIDs/GIDs on the
<br>		client and server system do not match closely enough to allow
<br>		access by the user doing the mount, but it may be useful with
<br>		non CIFS Unix Extension mounts for cases in which the default
<br>		mode is specified on the mount but is not to be enforced on the
<br>		client (e.g. perhaps when MultiUserMount is enabled)
<br>		Note that this does not affect the normal ACL check on the
<br>		target machine done by the server software (of the server
<br>		ACL against the user name provided at mount time).
<br>  serverino	Use server's inode numbers instead of generating automatically
<br>		incrementing inode numbers on the client.  Although this will
<br>		make it easier to spot hardlinked files (as they will have
<br>		the same inode numbers) and inode numbers may be persistent,
<br>		note that the server does not guarantee that the inode numbers
<br>		are unique if multiple server side mounts are exported under a
<br>		single share (since inode numbers on the servers might not
<br>		be unique if multiple filesystems are mounted under the same
<br>		shared higher level directory).  Note that some older
<br>		(e.g. pre-Windows 2000) do not support returning UniqueIDs
<br>		or the CIFS Unix Extensions equivalent and for those
<br>		this mount option will have no effect.  Exporting cifs mounts
<br>		under nfsd requires this mount option on the cifs mount.
<br>		This is now the default if server supports the 
<br>		required network operation.
<br>  noserverino   Client generates inode numbers (rather than using the actual one
<br>		from the server). These inode numbers will vary after
<br>		unmount or reboot which can confuse some applications,
<br>		but not all server filesystems support unique inode
<br>		numbers.
<br>  setuids       If the CIFS Unix extensions are negotiated with the server
<br>		the client will attempt to set the effective uid and gid of
<br>		the local process on newly created files, directories, and
<br>		devices (create, mkdir, mknod).  If the CIFS Unix Extensions
<br>		are not negotiated, for newly created files and directories
<br>		instead of using the default uid and gid specified on
<br>		the mount, cache the new file's uid and gid locally which means
<br>		that the uid for the file can change when the inode is
<br>	        reloaded (or the user remounts the share).
<br>  nosetuids     The client will not attempt to set the uid and gid on
<br>		on newly created files, directories, and devices (create, 
<br>		mkdir, mknod) which will result in the server setting the
<br>		uid and gid to the default (usually the server uid of the
<br>		user who mounted the share).  Letting the server (rather than
<br>		the client) set the uid and gid is the default. If the CIFS
<br>		Unix Extensions are not negotiated then the uid and gid for
<br>		new files will appear to be the uid (gid) of the mounter or the
<br>		uid (gid) parameter specified on the mount.
<br>  netbiosname   When mounting to servers via port 139, specifies the RFC1001
<br>		source name to use to represent the client netbios machine 
<br>		name when doing the RFC1001 netbios session initialize.
<br>  direct        Do not do inode data caching on files opened on this mount.
<br>		This precludes mmapping files on this mount. In some cases
<br>		with fast networks and little or no caching benefits on the
<br>		client (e.g. when the application is doing large sequential
<br>		reads bigger than page size without rereading the same data) 
<br>		this can provide better performance than the default
<br>		behavior which caches reads (readahead) and writes 
<br>		(writebehind) through the local Linux client pagecache 
<br>		if oplock (caching token) is granted and held. Note that
<br>		direct allows write operations larger than page size
<br>		to be sent to the server.
<br>  strictcache   Use for switching on strict cache mode. In this mode the
<br>		client read from the cache all the time it has Oplock Level II,
<br>		otherwise - read from the server. All written data are stored
<br>		in the cache, but if the client doesn't have Exclusive Oplock,
<br>		it writes the data to the server.
<br>  rwpidforward  Forward pid of a process who opened a file to any read or write
<br>		operation on that file. This prevent applications like WINE
<br>		from failing on read and write if we use mandatory brlock style.
<br>  acl   	Allow setfacl and getfacl to manage posix ACLs if server
<br>		supports them.  (default)
<br>  noacl 	Do not allow setfacl and getfacl calls on this mount
<br>  user_xattr    Allow getting and setting user xattrs (those attributes whose
<br>		name begins with "user." or "os2.") as OS/2 EAs (extended
<br>		attributes) to the server.  This allows support of the
<br>		setfattr and getfattr utilities. (default)
<br>  nouser_xattr  Do not allow getfattr/setfattr to get/set/list xattrs 
<br>  mapchars      Translate six of the seven reserved characters (not backslash)
<br>			*?<>|:
<br>		to the remap range (above 0xF000), which also
<br>		allows the CIFS client to recognize files created with
<br>		such characters by Windows's POSIX emulation. This can
<br>		also be useful when mounting to most versions of Samba
<br>		(which also forbids creating and opening files
<br>		whose names contain any of these seven characters).
<br>		This has no effect if the server does not support
<br>		Unicode on the wire.
<br> nomapchars     Do not translate any of these seven characters (default).
<br> nocase         Request case insensitive path name matching (case
<br>		sensitive is the default if the server supports it).
<br>		(mount option "ignorecase" is identical to "nocase")
<br> posixpaths     If CIFS Unix extensions are supported, attempt to
<br>		negotiate posix path name support which allows certain
<br>		characters forbidden in typical CIFS filenames, without
<br>		requiring remapping. (default)
<br> noposixpaths   If CIFS Unix extensions are supported, do not request
<br>		posix path name support (this may cause servers to
<br>		reject creatingfile with certain reserved characters).
<br> nounix         Disable the CIFS Unix Extensions for this mount (tree
<br>		connection). This is rarely needed, but it may be useful
<br>		in order to turn off multiple settings all at once (ie
<br>		posix acls, posix locks, posix paths, symlink support
<br>		and retrieving uids/gids/mode from the server) or to
<br>		work around a bug in server which implement the Unix
<br>		Extensions.
<br> nobrl          Do not send byte range lock requests to the server.
<br>		This is necessary for certain applications that break
<br>		with cifs style mandatory byte range locks (and most
<br>		cifs servers do not yet support requesting advisory
<br>		byte range locks).
<br> forcemandatorylock Even if the server supports posix (advisory) byte range
<br>		locking, send only mandatory lock requests.  For some
<br>		(presumably rare) applications, originally coded for
<br>		DOS/Windows, which require Windows style mandatory byte range
<br>		locking, they may be able to take advantage of this option,
<br>		forcing the cifs client to only send mandatory locks
<br>		even if the cifs server would support posix advisory locks.
<br>		"forcemand" is accepted as a shorter form of this mount
<br>		option.
<br> nostrictsync   If this mount option is set, when an application does an
<br>		fsync call then the cifs client does not send an SMB Flush
<br>		to the server (to force the server to write all dirty data
<br>		for this file immediately to disk), although cifs still sends
<br>		all dirty (cached) file data to the server and waits for the
<br>		server to respond to the write.  Since SMB Flush can be
<br>		very slow, and some servers may be reliable enough (to risk
<br>		delaying slightly flushing the data to disk on the server),
<br>		turning on this option may be useful to improve performance for
<br>		applications that fsync too much, at a small risk of server
<br>		crash.  If this mount option is not set, by default cifs will
<br>		send an SMB flush request (and wait for a response) on every
<br>		fsync call.
<br> nodfs          Disable DFS (global name space support) even if the
<br>		server claims to support it.  This can help work around
<br>		a problem with parsing of DFS paths with Samba server
<br>		versions 3.0.24 and 3.0.25.
<br> remount        remount the share (often used to change from ro to rw mounts
<br>	        or vice versa)
<br> cifsacl        Report mode bits (e.g. on stat) based on the Windows ACL for
<br>	        the file. (EXPERIMENTAL)
<br> servern        Specify the server 's netbios name (RFC1001 name) to use
<br>		when attempting to setup a session to the server. 
<br>		This is needed for mounting to some older servers (such
<br>		as OS/2 or Windows 98 and Windows ME) since they do not
<br>		support a default server name.  A server name can be up
<br>		to 15 characters long and is usually uppercased.
<br> sfu            When the CIFS Unix Extensions are not negotiated, attempt to
<br>		create device files and fifos in a format compatible with
<br>		Services for Unix (SFU).  In addition retrieve bits 10-12
<br>		of the mode via the SETFILEBITS extended attribute (as
<br>		SFU does).  In the future the bottom 9 bits of the
<br>		mode also will be emulated using queries of the security
<br>		descriptor (ACL).
<br> mfsymlinks     Enable support for Minshall+French symlinks
<br>		(see http://wiki.samba.org/index.php/UNIX_Extensions#Minshall.2BFrench_symlinks)
<br>		This option is ignored when specified together with the
<br>		'sfu' option. Minshall+French symlinks are used even if
<br>		the server supports the CIFS Unix Extensions.
<br> sign           Must use packet signing (helps avoid unwanted data modification
<br>		by intermediate systems in the route).  Note that signing
<br>		does not work with lanman or plaintext authentication.
<br> seal           Must seal (encrypt) all data on this mounted share before
<br>		sending on the network.  Requires support for Unix Extensions.
<br>		Note that this differs from the sign mount option in that it
<br>		causes encryption of data sent over this mounted share but other
<br>		shares mounted to the same server are unaffected.
<br> locallease     This option is rarely needed. Fcntl F_SETLEASE is
<br>		used by some applications such as Samba and NFSv4 server to
<br>		check to see whether a file is cacheable.  CIFS has no way
<br>		to explicitly request a lease, but can check whether a file
<br>		is cacheable (oplocked).  Unfortunately, even if a file
<br>		is not oplocked, it could still be cacheable (ie cifs client
<br>		could grant fcntl leases if no other local processes are using
<br>		the file) for cases for example such as when the server does not
<br>		support oplocks and the user is sure that the only updates to
<br>		the file will be from this client. Specifying this mount option
<br>		will allow the cifs client to check for leases (only) locally
<br>		for files which are not oplocked instead of denying leases
<br>		in that case. (EXPERIMENTAL)
<br> sec            Security mode.  Allowed values are:
<br>			none	attempt to connection as a null user (no name)
<br>			krb5    Use Kerberos version 5 authentication
<br>			krb5i   Use Kerberos authentication and packet signing
<br>			ntlm    Use NTLM password hashing (default)
<br>			ntlmi   Use NTLM password hashing with signing (if
<br>				/proc/fs/cifs/PacketSigningEnabled on or if
<br>				server requires signing also can be the default) 
<br>			ntlmv2  Use NTLMv2 password hashing      
<br>			ntlmv2i Use NTLMv2 password hashing with packet signing
<br>			lanman  (if configured in kernel config) use older
<br>				lanman hash
<br>hard		Retry file operations if server is not responding
<br>soft		Limit retries to unresponsive servers (usually only
<br>		one retry) before returning an error.  (default)
<br>
<br>The mount.cifs mount helper also accepts a few mount options before -o
<br>including:
<br>
<br>	-S      take password from stdin (equivalent to setting the environment
<br>		variable "PASSWD_FD=0"
<br>	-V      print mount.cifs version
<br>	-?      display simple usage information
<br>
<br>With most 2.6 kernel versions of modutils, the version of the cifs kernel
<br>module can be displayed via modinfo.
<br>
<br>Misc /proc/fs/cifs Flags and Debug Info
<br>=======================================
<br>Informational pseudo-files:
<br>DebugData		Displays information about active CIFS sessions and
<br>			shares, features enabled as well as the cifs.ko
<br>			version.
<br>Stats			Lists summary resource usage information as well as per
<br>			share statistics, if CONFIG_CIFS_STATS in enabled
<br>			in the kernel configuration.
<br>
<br>Configuration pseudo-files:
<br>PacketSigningEnabled	If set to one, cifs packet signing is enabled
<br>			and will be used if the server requires 
<br>			it.  If set to two, cifs packet signing is
<br>			required even if the server considers packet
<br>			signing optional. (default 1)
<br>SecurityFlags		Flags which control security negotiation and
<br>			also packet signing. Authentication (may/must)
<br>			flags (e.g. for NTLM and/or NTLMv2) may be combined with
<br>			the signing flags.  Specifying two different password
<br>			hashing mechanisms (as "must use") on the other hand 
<br>			does not make much sense. Default flags are 
<br>				0x07007 
<br>			(NTLM, NTLMv2 and packet signing allowed).  The maximum 
<br>			allowable flags if you want to allow mounts to servers
<br>			using weaker password hashes is 0x37037 (lanman,
<br>			plaintext, ntlm, ntlmv2, signing allowed).  Some
<br>			SecurityFlags require the corresponding menuconfig
<br>			options to be enabled (lanman and plaintext require
<br>			CONFIG_CIFS_WEAK_PW_HASH for example).  Enabling
<br>			plaintext authentication currently requires also
<br>			enabling lanman authentication in the security flags
<br>			because the cifs module only supports sending
<br>			laintext passwords using the older lanman dialect
<br>			form of the session setup SMB.  (e.g. for authentication
<br>			using plain text passwords, set the SecurityFlags
<br>			to 0x30030):
<br> 
<br>			may use packet signing 				0x00001
<br>			must use packet signing				0x01001
<br>			may use NTLM (most common password hash)	0x00002
<br>			must use NTLM					0x02002
<br>			may use NTLMv2					0x00004
<br>			must use NTLMv2					0x04004
<br>			may use Kerberos security			0x00008
<br>			must use Kerberos				0x08008
<br>			may use lanman (weak) password hash  		0x00010
<br>			must use lanman password hash			0x10010
<br>			may use plaintext passwords    			0x00020
<br>			must use plaintext passwords			0x20020
<br>			(reserved for future packet encryption)		0x00040
<br>
<br>cifsFYI			If set to non-zero value, additional debug information
<br>			will be logged to the system error log.  This field
<br>			contains three flags controlling different classes of
<br>			debugging entries.  The maximum value it can be set
<br>			to is 7 which enables all debugging points (default 0).
<br>			Some debugging statements are not compiled into the
<br>			cifs kernel unless CONFIG_CIFS_DEBUG2 is enabled in the
<br>			kernel configuration. cifsFYI may be set to one or
<br>			nore of the following flags (7 sets them all):
<br>
<br>			log cifs informational messages			0x01
<br>			log return codes from cifs entry points		0x02
<br>			log slow responses (ie which take longer than 1 second)
<br>			  CONFIG_CIFS_STATS2 must be enabled in .config	0x04
<br>				
<br>				
<br>traceSMB		If set to one, debug information is logged to the
<br>			system error log with the start of smb requests
<br>			and responses (default 0)
<br>LookupCacheEnable	If set to one, inode information is kept cached
<br>			for one second improving performance of lookups
<br>			(default 1)
<br>OplockEnabled		If set to one, safe distributed caching enabled.
<br>			(default 1)
<br>LinuxExtensionsEnabled	If set to one then the client will attempt to
<br>			use the CIFS "UNIX" extensions which are optional
<br>			protocol enhancements that allow CIFS servers
<br>			to return accurate UID/GID information as well
<br>			as support symbolic links. If you use servers
<br>			such as Samba that support the CIFS Unix
<br>			extensions but do not want to use symbolic link
<br>			support and want to map the uid and gid fields 
<br>			to values supplied at mount (rather than the 
<br>			actual values, then set this to zero. (default 1)
<br>
<br>These experimental features and tracing can be enabled by changing flags in 
<br>/proc/fs/cifs (after the cifs module has been installed or built into the 
<br>kernel, e.g.  insmod cifs).  To enable a feature set it to 1 e.g.  to enable 
<br>tracing to the kernel message log type: 
<br>
<br>	echo 7 > /proc/fs/cifs/cifsFYI
<br>	
<br>cifsFYI functions as a bit mask. Setting it to 1 enables additional kernel
<br>logging of various informational messages.  2 enables logging of non-zero
<br>SMB return codes while 4 enables logging of requests that take longer
<br>than one second to complete (except for byte range lock requests). 
<br>Setting it to 4 requires defining CONFIG_CIFS_STATS2 manually in the
<br>source code (typically by setting it in the beginning of cifsglob.h),
<br>and setting it to seven enables all three.  Finally, tracing
<br>the start of smb requests and responses can be enabled via:
<br>
<br>	echo 1 > /proc/fs/cifs/traceSMB
<br>
<br>Per share (per client mount) statistics are available in /proc/fs/cifs/Stats
<br>if the kernel was configured with cifs statistics enabled.  The statistics
<br>represent the number of successful (ie non-zero return code from the server) 
<br>SMB responses to some of the more common commands (open, delete, mkdir etc.).
<br>Also recorded is the total bytes read and bytes written to the server for
<br>that share.  Note that due to client caching effects this can be less than the
<br>number of bytes read and written by the application running on the client.
<br>The statistics for the number of total SMBs and oplock breaks are different in
<br>that they represent all for that share, not just those for which the server
<br>returned success.
<br>	
<br>Also note that "cat /proc/fs/cifs/DebugData" will display information about
<br>the active sessions and the shares that are mounted.
<br>
<br>Enabling Kerberos (extended security) works but requires version 1.2 or later
<br>of the helper program cifs.upcall to be present and to be configured in the
<br>/etc/request-key.conf file.  The cifs.upcall helper program is from the Samba
<br>project(http://www.samba.org). NTLM and NTLMv2 and LANMAN support do not
<br>require this helper. Note that NTLMv2 security (which does not require the
<br>cifs.upcall helper program), instead of using Kerberos, is sufficient for
<br>some use cases.
<br>
<br>DFS support allows transparent redirection to shares in an MS-DFS name space.
<br>In addition, DFS support for target shares which are specified as UNC
<br>names which begin with host names (rather than IP addresses) requires
<br>a user space helper (such as cifs.upcall) to be present in order to
<br>translate host names to ip address, and the user space helper must also
<br>be configured in the file /etc/request-key.conf.  Samba, Windows servers and
<br>many NAS appliances support DFS as a way of constructing a global name
<br>space to ease network configuration and improve reliability.
<br>
<br>To use cifs Kerberos and DFS support, the Linux keyutils package should be
<br>installed and something like the following lines should be added to the
<br>/etc/request-key.conf file:
<br>
<br>create cifs.spnego * * /usr/local/sbin/cifs.upcall %k
<br>create dns_resolver * * /usr/local/sbin/cifs.upcall %k
<br>
<br>CIFS kernel module parameters
<br>=============================
<br>These module parameters can be specified or modified either during the time of
<br>module loading or during the runtime by using the interface
<br>	/proc/module/cifs/parameters/<param>
<br>
<br>i.e. echo "value" > /sys/module/cifs/parameters/<param>
<br>
<br>1. enable_oplocks - Enable or disable oplocks. Oplocks are enabled by default.
<br>		    [Y/y/1]. To disable use any of [N/n/0].
<br>
<br><p></p><div class="separator"></div><br><p><h2>wimax</h2></p>
<br>   Driver for the Intel Wireless Wimax Connection 2400m
<br>
<br>   (C) 2008 Intel Corporation < linux-wimax@intel.com >
<br>
<br>   This provides a driver for the Intel Wireless WiMAX Connection 2400m
<br>   and a basic Linux kernel WiMAX stack.
<br>
<br>1. Requirements
<br>
<br>     * Linux installation with Linux kernel 2.6.22 or newer (if building
<br>       from a separate tree)
<br>     * Intel i2400m Echo Peak or Baxter Peak; this includes the Intel
<br>       Wireless WiMAX/WiFi Link 5x50 series.
<br>     * build tools:
<br>          + Linux kernel development package for the target kernel; to
<br>            build against your currently running kernel, you need to have
<br>            the kernel development package corresponding to the running
<br>            image installed (usually if your kernel is named
<br>            linux-VERSION, the development package is called
<br>            linux-dev-VERSION or linux-headers-VERSION).
<br>          + GNU C Compiler, make
<br>
<br>2. Compilation and installation
<br>
<br>2.1. Compilation of the drivers included in the kernel
<br>
<br>   Configure the kernel; to enable the WiMAX drivers select Drivers >
<br>   Networking Drivers > WiMAX device support. Enable all of them as
<br>   modules (easier).
<br>
<br>   If USB or SDIO are not enabled in the kernel configuration, the options
<br>   to build the i2400m USB or SDIO drivers will not show. Enable said
<br>   subsystems and go back to the WiMAX menu to enable the drivers.
<br>
<br>   Compile and install your kernel as usual.
<br>
<br>2.2. Compilation of the drivers distributed as an standalone module
<br>
<br>   To compile
<br>
<br>$ cd source/directory
<br>$ make
<br>
<br>   Once built you can load and unload using the provided load.sh script;
<br>   load.sh will load the modules, load.sh u will unload them.
<br>
<br>   To install in the default kernel directories (and enable auto loading
<br>   when the device is plugged):
<br>
<br>$ make install
<br>$ depmod -a
<br>
<br>   If your kernel development files are located in a non standard
<br>   directory or if you want to build for a kernel that is not the
<br>   currently running one, set KDIR to the right location:
<br>
<br>$ make KDIR=/path/to/kernel/dev/tree
<br>
<br>   For more information, please contact linux-wimax@intel.com.
<br>
<br>3. Installing the firmware
<br>
<br>   The firmware can be obtained from http://linuxwimax.org or might have
<br>   been supplied with your hardware.
<br>
<br>   It has to be installed in the target system:
<br>     *
<br>$ cp FIRMWAREFILE.sbcf /lib/firmware/i2400m-fw-BUSTYPE-1.3.sbcf
<br>
<br>     * NOTE: if your firmware came in an .rpm or .deb file, just install
<br>       it as normal, with the rpm (rpm -i FIRMWARE.rpm) or dpkg
<br>       (dpkg -i FIRMWARE.deb) commands. No further action is needed.
<br>     * BUSTYPE will be usb or sdio, depending on the hardware you have.
<br>       Each hardware type comes with its own firmware and will not work
<br>       with other types.
<br>
<br>4. Design
<br>
<br>   This package contains two major parts: a WiMAX kernel stack and a
<br>   driver for the Intel i2400m.
<br>
<br>   The WiMAX stack is designed to provide for common WiMAX control
<br>   services to current and future WiMAX devices from any vendor; please
<br>   see README.wimax for details.
<br>
<br>   The i2400m kernel driver is broken up in two main parts: the bus
<br>   generic driver and the bus-specific drivers. The bus generic driver
<br>   forms the drivercore and contain no knowledge of the actual method we
<br>   use to connect to the device. The bus specific drivers are just the
<br>   glue to connect the bus-generic driver and the device. Currently only
<br>   USB and SDIO are supported. See drivers/net/wimax/i2400m/i2400m.h for
<br>   more information.
<br>
<br>   The bus generic driver is logically broken up in two parts: OS-glue and
<br>   hardware-glue. The OS-glue interfaces with Linux. The hardware-glue
<br>   interfaces with the device on using an interface provided by the
<br>   bus-specific driver. The reason for this breakup is to be able to
<br>   easily reuse the hardware-glue to write drivers for other OSes; note
<br>   the hardware glue part is written as a native Linux driver; no
<br>   abstraction layers are used, so to port to another OS, the Linux kernel
<br>   API calls should be replaced with the target OS's.
<br>
<br>5. Usage
<br>
<br>   To load the driver, follow the instructions in the install section;
<br>   once the driver is loaded, plug in the device (unless it is permanently
<br>   plugged in). The driver will enumerate the device, upload the firmware
<br>   and output messages in the kernel log (dmesg, /var/log/messages or
<br>   /var/log/kern.log) such as:
<br>
<br>...
<br>i2400m_usb 5-4:1.0: firmware interface version 8.0.0
<br>i2400m_usb 5-4:1.0: WiMAX interface wmx0 (00:1d:e1:01:94:2c) ready
<br>
<br>   At this point the device is ready to work.
<br>
<br>   Current versions require the Intel WiMAX Network Service in userspace
<br>   to make things work. See the network service's README for instructions
<br>   on how to scan, connect and disconnect.
<br>
<br>5.1. Module parameters
<br>
<br>   Module parameters can be set at kernel or module load time or by
<br>   echoing values:
<br>
<br>$ echo VALUE > /sys/module/MODULENAME/parameters/PARAMETERNAME
<br>
<br>   To make changes permanent, for example, for the i2400m module, you can
<br>   also create a file named /etc/modprobe.d/i2400m containing:
<br>
<br>options i2400m idle_mode_disabled=1
<br>
<br>   To find which parameters are supported by a module, run:
<br>
<br>$ modinfo path/to/module.ko
<br>
<br>   During kernel bootup (if the driver is linked in the kernel), specify
<br>   the following to the kernel command line:
<br>
<br>i2400m.PARAMETER=VALUE
<br>
<br>5.1.1. i2400m: idle_mode_disabled
<br>
<br>   The i2400m module supports a parameter to disable idle mode. This
<br>   parameter, once set, will take effect only when the device is
<br>   reinitialized by the driver (eg: following a reset or a reconnect).
<br>
<br>5.2. Debug operations: debugfs entries
<br>
<br>   The driver will register debugfs entries that allow the user to tweak
<br>   debug settings. There are three main container directories where
<br>   entries are placed, which correspond to the three blocks a i2400m WiMAX
<br>   driver has:
<br>     * /sys/kernel/debug/wimax:DEVNAME/ for the generic WiMAX stack
<br>       controls
<br>     * /sys/kernel/debug/wimax:DEVNAME/i2400m for the i2400m generic
<br>       driver controls
<br>     * /sys/kernel/debug/wimax:DEVNAME/i2400m-usb (or -sdio) for the
<br>       bus-specific i2400m-usb or i2400m-sdio controls).
<br>
<br>   Of course, if debugfs is mounted in a directory other than
<br>   /sys/kernel/debug, those paths will change.
<br>
<br>5.2.1. Increasing debug output
<br>
<br>   The files named *dl_* indicate knobs for controlling the debug output
<br>   of different submodules:
<br>     *
<br># find /sys/kernel/debug/wimax\:wmx0 -name \*dl_\*
<br>/sys/kernel/debug/wimax:wmx0/i2400m-usb/dl_tx
<br>/sys/kernel/debug/wimax:wmx0/i2400m-usb/dl_rx
<br>/sys/kernel/debug/wimax:wmx0/i2400m-usb/dl_notif
<br>/sys/kernel/debug/wimax:wmx0/i2400m-usb/dl_fw
<br>/sys/kernel/debug/wimax:wmx0/i2400m-usb/dl_usb
<br>/sys/kernel/debug/wimax:wmx0/i2400m/dl_tx
<br>/sys/kernel/debug/wimax:wmx0/i2400m/dl_rx
<br>/sys/kernel/debug/wimax:wmx0/i2400m/dl_rfkill
<br>/sys/kernel/debug/wimax:wmx0/i2400m/dl_netdev
<br>/sys/kernel/debug/wimax:wmx0/i2400m/dl_fw
<br>/sys/kernel/debug/wimax:wmx0/i2400m/dl_debugfs
<br>/sys/kernel/debug/wimax:wmx0/i2400m/dl_driver
<br>/sys/kernel/debug/wimax:wmx0/i2400m/dl_control
<br>/sys/kernel/debug/wimax:wmx0/wimax_dl_stack
<br>/sys/kernel/debug/wimax:wmx0/wimax_dl_op_rfkill
<br>/sys/kernel/debug/wimax:wmx0/wimax_dl_op_reset
<br>/sys/kernel/debug/wimax:wmx0/wimax_dl_op_msg
<br>/sys/kernel/debug/wimax:wmx0/wimax_dl_id_table
<br>/sys/kernel/debug/wimax:wmx0/wimax_dl_debugfs
<br>
<br>   By reading the file you can obtain the current value of said debug
<br>   level; by writing to it, you can set it.
<br>
<br>   To increase the debug level of, for example, the i2400m's generic TX
<br>   engine, just write:
<br>
<br>$ echo 3 > /sys/kernel/debug/wimax:wmx0/i2400m/dl_tx
<br>
<br>   Increasing numbers yield increasing debug information; for details of
<br>   what is printed and the available levels, check the source. The code
<br>   uses 0 for disabled and increasing values until 8.
<br>
<br>5.2.2. RX and TX statistics
<br>
<br>   The i2400m/rx_stats and i2400m/tx_stats provide statistics about the
<br>   data reception/delivery from the device:
<br>
<br>$ cat /sys/kernel/debug/wimax:wmx0/i2400m/rx_stats
<br>45 1 3 34 3104 48 480
<br>
<br>   The numbers reported are
<br>     * packets/RX-buffer: total, min, max
<br>     * RX-buffers: total RX buffers received, accumulated RX buffer size
<br>       in bytes, min size received, max size received
<br>
<br>   Thus, to find the average buffer size received, divide accumulated
<br>   RX-buffer / total RX-buffers.
<br>
<br>   To clear the statistics back to 0, write anything to the rx_stats file:
<br>
<br>$ echo 1 > /sys/kernel/debug/wimax:wmx0/i2400m_rx_stats
<br>
<br>   Likewise for TX.
<br>
<br>   Note the packets this debug file refers to are not network packet, but
<br>   packets in the sense of the device-specific protocol for communication
<br>   to the host. See drivers/net/wimax/i2400m/tx.c.
<br>
<br>5.2.3. Tracing messages received from user space
<br>
<br>   To echo messages received from user space into the trace pipe that the
<br>   i2400m driver creates, set the debug file i2400m/trace_msg_from_user to
<br>   1:
<br>     *
<br>$ echo 1 > /sys/kernel/debug/wimax:wmx0/i2400m/trace_msg_from_user
<br>
<br>5.2.4. Performing a device reset
<br>
<br>   By writing a 0, a 1 or a 2 to the file
<br>   /sys/kernel/debug/wimax:wmx0/reset, the driver performs a warm (without
<br>   disconnecting from the bus), cold (disconnecting from the bus) or bus
<br>   (bus specific) reset on the device.
<br>
<br>5.2.5. Asking the device to enter power saving mode
<br>
<br>   By writing any value to the /sys/kernel/debug/wimax:wmx0 file, the
<br>   device will attempt to enter power saving mode.
<br>
<br>6. Troubleshooting
<br>
<br>6.1. Driver complains about 'i2400m-fw-usb-1.2.sbcf: request failed'
<br>
<br>   If upon connecting the device, the following is output in the kernel
<br>   log:
<br>
<br>i2400m_usb 5-4:1.0: fw i2400m-fw-usb-1.3.sbcf: request failed: -2
<br>
<br>   This means that the driver cannot locate the firmware file named
<br>   /lib/firmware/i2400m-fw-usb-1.2.sbcf. Check that the file is present in
<br>   the right location.
<br><p></p><div class="separator"></div><br><p><h2>wimax</h2></p>
<br>   Linux kernel WiMAX stack
<br>
<br>   (C) 2008 Intel Corporation < linux-wimax@intel.com >
<br>
<br>   This provides a basic Linux kernel WiMAX stack to provide a common
<br>   control API for WiMAX devices, usable from kernel and user space.
<br>
<br>1. Design
<br>
<br>   The WiMAX stack is designed to provide for common WiMAX control
<br>   services to current and future WiMAX devices from any vendor.
<br>
<br>   Because currently there is only one and we don't know what would be the
<br>   common services, the APIs it currently provides are very minimal.
<br>   However, it is done in such a way that it is easily extensible to
<br>   accommodate future requirements.
<br>
<br>   The stack works by embedding a struct wimax_dev in your device's
<br>   control structures. This provides a set of callbacks that the WiMAX
<br>   stack will call in order to implement control operations requested by
<br>   the user. As well, the stack provides API functions that the driver
<br>   calls to notify about changes of state in the device.
<br>
<br>   The stack exports the API calls needed to control the device to user
<br>   space using generic netlink as a marshalling mechanism. You can access
<br>   them using your own code or use the wrappers provided for your
<br>   convenience in libwimax (in the wimax-tools package).
<br>
<br>   For detailed information on the stack, please see
<br>   include/linux/wimax.h.
<br>
<br>2. Usage
<br>
<br>   For usage in a driver (registration, API, etc) please refer to the
<br>   instructions in the header file include/linux/wimax.h.
<br>
<br>   When a device is registered with the WiMAX stack, a set of debugfs
<br>   files will appear in /sys/kernel/debug/wimax:wmxX can tweak for
<br>   control.
<br>
<br>2.1. Obtaining debug information: debugfs entries
<br>
<br>   The WiMAX stack is compiled, by default, with debug messages that can
<br>   be used to diagnose issues. By default, said messages are disabled.
<br>
<br>   The drivers will register debugfs entries that allow the user to tweak
<br>   debug settings.
<br>
<br>   Each driver, when registering with the stack, will cause a debugfs
<br>   directory named wimax:DEVICENAME to be created; optionally, it might
<br>   create more subentries below it.
<br>
<br>2.1.1. Increasing debug output
<br>
<br>   The files named *dl_* indicate knobs for controlling the debug output
<br>   of different submodules of the WiMAX stack:
<br>     *
<br># find /sys/kernel/debug/wimax\:wmx0 -name \*dl_\*
<br>/sys/kernel/debug/wimax:wmx0/wimax_dl_stack
<br>/sys/kernel/debug/wimax:wmx0/wimax_dl_op_rfkill
<br>/sys/kernel/debug/wimax:wmx0/wimax_dl_op_reset
<br>/sys/kernel/debug/wimax:wmx0/wimax_dl_op_msg
<br>/sys/kernel/debug/wimax:wmx0/wimax_dl_id_table
<br>/sys/kernel/debug/wimax:wmx0/wimax_dl_debugfs
<br>/sys/kernel/debug/wimax:wmx0/.... # other driver specific files
<br>
<br>       NOTE: Of course, if debugfs is mounted in a directory other than
<br>       /sys/kernel/debug, those paths will change.
<br>
<br>   By reading the file you can obtain the current value of said debug
<br>   level; by writing to it, you can set it.
<br>
<br>   To increase the debug level of, for example, the id-table submodule,
<br>   just write:
<br>
<br>$ echo 3 > /sys/kernel/debug/wimax:wmx0/wimax_dl_id_table
<br>
<br>   Increasing numbers yield increasing debug information; for details of
<br>   what is printed and the available levels, check the source. The code
<br>   uses 0 for disabled and increasing values until 8.
<br><p></p><div class="separator"></div><br><p><h2>arm</h2></p>			   ARM Linux 2.6
<br>			   =============
<br>
<br>    Please check <ftp://ftp.arm.linux.org.uk/pub/armlinux> for
<br>    updates.
<br>
<br>Compilation of kernel
<br>---------------------
<br>
<br>  In order to compile ARM Linux, you will need a compiler capable of
<br>  generating ARM ELF code with GNU extensions.  GCC 3.3 is known to be
<br>  a good compiler.  Fortunately, you needn't guess.  The kernel will report
<br>  an error if your compiler is a recognized offender.
<br>
<br>  To build ARM Linux natively, you shouldn't have to alter the ARCH = line
<br>  in the top level Makefile.  However, if you don't have the ARM Linux ELF
<br>  tools installed as default, then you should change the CROSS_COMPILE
<br>  line as detailed below.
<br>
<br>  If you wish to cross-compile, then alter the following lines in the top
<br>  level make file:
<br>
<br>    ARCH = <whatever>
<br>	with
<br>    ARCH = arm
<br>
<br>	and
<br>
<br>    CROSS_COMPILE=
<br>	to
<br>    CROSS_COMPILE=<your-path-to-your-compiler-without-gcc>
<br>	eg.
<br>    CROSS_COMPILE=arm-linux-
<br>
<br>  Do a 'make config', followed by 'make Image' to build the kernel 
<br>  (arch/arm/boot/Image).  A compressed image can be built by doing a 
<br>  'make zImage' instead of 'make Image'.
<br>
<br>
<br>Bug reports etc
<br>---------------
<br>
<br>  Please send patches to the patch system.  For more information, see
<br>  http://www.arm.linux.org.uk/developer/patches/info.php Always include some
<br>  explanation as to what the patch does and why it is needed.
<br>
<br>  Bug reports should be sent to linux-arm-kernel@lists.arm.linux.org.uk,
<br>  or submitted through the web form at
<br>  http://www.arm.linux.org.uk/developer/ 
<br>
<br>  When sending bug reports, please ensure that they contain all relevant
<br>  information, eg. the kernel messages that were printed before/during
<br>  the problem, what you were doing, etc.
<br>
<br>
<br>Include files
<br>-------------
<br>
<br>  Several new include directories have been created under include/asm-arm,
<br>  which are there to reduce the clutter in the top-level directory.  These
<br>  directories, and their purpose is listed below:
<br>
<br>   arch-*	machine/platform specific header files
<br>   hardware	driver-internal ARM specific data structures/definitions
<br>   mach		descriptions of generic ARM to specific machine interfaces
<br>   proc-*	processor dependent header files (currently only two
<br>		categories)
<br>
<br>
<br>Machine/Platform support
<br>------------------------
<br>
<br>  The ARM tree contains support for a lot of different machine types.  To
<br>  continue supporting these differences, it has become necessary to split
<br>  machine-specific parts by directory.  For this, the machine category is
<br>  used to select which directories and files get included (we will use
<br>  $(MACHINE) to refer to the category)
<br>
<br>  To this end, we now have arch/arm/mach-$(MACHINE) directories which are
<br>  designed to house the non-driver files for a particular machine (eg, PCI,
<br>  memory management, architecture definitions etc).  For all future
<br>  machines, there should be a corresponding arch/arm/mach-$(MACHINE)/include/mach
<br>  directory.
<br>
<br>
<br>Modules
<br>-------
<br>
<br>  Although modularisation is supported (and required for the FP emulator),
<br>  each module on an ARM2/ARM250/ARM3 machine when is loaded will take
<br>  memory up to the next 32k boundary due to the size of the pages.
<br>  Therefore, is modularisation on these machines really worth it?
<br>
<br>  However, ARM6 and up machines allow modules to take multiples of 4k, and
<br>  as such Acorn RiscPCs and other architectures using these processors can
<br>  make good use of modularisation.
<br>
<br>
<br>ADFS Image files
<br>----------------
<br>
<br>  You can access image files on your ADFS partitions by mounting the ADFS
<br>  partition, and then using the loopback device driver.  You must have
<br>  losetup installed.
<br>
<br>  Please note that the PCEmulator DOS partitions have a partition table at
<br>  the start, and as such, you will have to give '-o offset' to losetup.
<br>
<br>
<br>Request to developers
<br>---------------------
<br>
<br>  When writing device drivers which include a separate assembler file, please
<br>  include it in with the C file, and not the arch/arm/lib directory.  This
<br>  allows the driver to be compiled as a loadable module without requiring
<br>  half the code to be compiled into the kernel image.
<br>
<br>  In general, try to avoid using assembler unless it is really necessary.  It
<br>  makes drivers far less easy to port to other hardware.
<br>
<br>
<br>ST506 hard drives
<br>-----------------
<br>
<br>  The ST506 hard drive controllers seem to be working fine (if a little
<br>  slowly).  At the moment they will only work off the controllers on an
<br>  A4x0's motherboard, but for it to work off a Podule just requires
<br>  someone with a podule to add the addresses for the IRQ mask and the
<br>  HDC base to the source.
<br>
<br>  As of 31/3/96 it works with two drives (you should get the ADFS
<br>  *configure harddrive set to 2). I've got an internal 20MB and a great
<br>  big external 5.25" FH 64MB drive (who could ever want more :-) ).
<br>
<br>  I've just got 240K/s off it (a dd with bs=128k); thats about half of what
<br>  RiscOS gets; but it's a heck of a lot better than the 50K/s I was getting
<br>  last week :-)
<br>
<br>  Known bug: Drive data errors can cause a hang; including cases where
<br>  the controller has fixed the error using ECC. (Possibly ONLY
<br>  in that case...hmm).
<br>
<br>
<br>1772 Floppy
<br>-----------
<br>  This also seems to work OK, but hasn't been stressed much lately.  It
<br>  hasn't got any code for disc change detection in there at the moment which
<br>  could be a bit of a problem!  Suggestions on the correct way to do this
<br>  are welcome.
<br>
<br>
<br>CONFIG_MACH_ and CONFIG_ARCH_
<br>-----------------------------
<br>  A change was made in 2003 to the macro names for new machines.
<br>  Historically, CONFIG_ARCH_ was used for the bonafide architecture,
<br>  e.g. SA1100, as well as implementations of the architecture,
<br>  e.g. Assabet.  It was decided to change the implementation macros
<br>  to read CONFIG_MACH_ for clarity.  Moreover, a retroactive fixup has
<br>  not been made because it would complicate patching.
<br>
<br>  Previous registrations may be found online.
<br>
<br>    <http://www.arm.linux.org.uk/developer/machines/>
<br>
<br>Kernel entry (head.S)
<br>--------------------------
<br>  The initial entry into the kernel is via head.S, which uses machine
<br>  independent code.  The machine is selected by the value of 'r1' on
<br>  entry, which must be kept unique.
<br>
<br>  Due to the large number of machines which the ARM port of Linux provides
<br>  for, we have a method to manage this which ensures that we don't end up
<br>  duplicating large amounts of code.
<br>
<br>  We group machine (or platform) support code into machine classes.  A
<br>  class typically based around one or more system on a chip devices, and
<br>  acts as a natural container around the actual implementations.  These
<br>  classes are given directories - arch/arm/mach-<class> and
<br>  arch/arm/mach-<class> - which contain the source files to/include/mach
<br>  support the machine class.  This directories also contain any machine
<br>  specific supporting code.
<br>
<br>  For example, the SA1100 class is based upon the SA1100 and SA1110 SoC
<br>  devices, and contains the code to support the way the on-board and off-
<br>  board devices are used, or the device is setup, and provides that
<br>  machine specific "personality."
<br>
<br>  For platforms that support device tree (DT), the machine selection is
<br>  controlled at runtime by passing the device tree blob to the kernel.  At
<br>  compile-time, support for the machine type must be selected.  This allows for
<br>  a single multiplatform kernel build to be used for several machine types.
<br>
<br>  For platforms that do not use device tree, this machine selection is
<br>  controlled by the machine type ID, which acts both as a run-time and a
<br>  compile-time code selection method.  You can register a new machine via the
<br>  web site at:
<br>
<br>    <http://www.arm.linux.org.uk/developer/machines/>
<br>
<br>  Note: Please do not register a machine type for DT-only platforms.  If your
<br>  platform is DT-only, you do not need a registered machine type.
<br>
<br>---
<br>Russell King (15/03/2004)
<br><p></p><div class="separator"></div><br><p><h2>OMAP</h2></p>This file contains documentation for running mainline
<br>kernel on omaps.
<br>
<br>KERNEL		NEW DEPENDENCIES
<br>v4.3+		Update is needed for custom .config files to make sure
<br>		CONFIG_REGULATOR_PBIAS is enabled for MMC1 to work
<br>		properly.
<br><p></p><div class="separator"></div><br><p><h2>nwfpe</h2></p>This directory contains the version 0.92 test release of the NetWinder 
<br>Floating Point Emulator.
<br>
<br>The majority of the code was written by me, Scott Bambrough It is
<br>written in C, with a small number of routines in inline assembler
<br>where required.  It was written quickly, with a goal of implementing a
<br>working version of all the floating point instructions the compiler
<br>emits as the first target.  I have attempted to be as optimal as
<br>possible, but there remains much room for improvement.
<br>
<br>I have attempted to make the emulator as portable as possible.  One of
<br>the problems is with leading underscores on kernel symbols.  Elf
<br>kernels have no leading underscores, a.out compiled kernels do.  I
<br>have attempted to use the C_SYMBOL_NAME macro wherever this may be
<br>important.
<br>
<br>Another choice I made was in the file structure.  I have attempted to
<br>contain all operating system specific code in one module (fpmodule.*).
<br>All the other files contain emulator specific code.  This should allow
<br>others to port the emulator to NetBSD for instance relatively easily.
<br>
<br>The floating point operations are based on SoftFloat Release 2, by
<br>John Hauser.  SoftFloat is a software implementation of floating-point
<br>that conforms to the IEC/IEEE Standard for Binary Floating-point
<br>Arithmetic.  As many as four formats are supported: single precision,
<br>double precision, extended double precision, and quadruple precision.
<br>All operations required by the standard are implemented, except for
<br>conversions to and from decimal.  We use only the single precision,
<br>double precision and extended double precision formats.  The port of
<br>SoftFloat to the ARM was done by Phil Blundell, based on an earlier
<br>port of SoftFloat version 1 by Neil Carson for NetBSD/arm32.
<br>
<br>The file README.FPE contains a description of what has been implemented
<br>so far in the emulator.  The file TODO contains a information on what 
<br>remains to be done, and other ideas for the emulator.
<br>
<br>Bug reports, comments, suggestions should be directed to me at
<br><scottb@netwinder.org>.  General reports of "this program doesn't
<br>work correctly when your emulator is installed" are useful for
<br>determining that bugs still exist; but are virtually useless when
<br>attempting to isolate the problem.  Please report them, but don't
<br>expect quick action.  Bugs still exist.  The problem remains in isolating
<br>which instruction contains the bug.  Small programs illustrating a specific
<br>problem are a godsend.
<br>
<br>Legal Notices
<br>-------------
<br>
<br>The NetWinder Floating Point Emulator is free software.  Everything Rebel.com
<br>has written is provided under the GNU GPL.  See the file COPYING for copying
<br>conditions.  Excluded from the above is the SoftFloat code.  John Hauser's 
<br>legal notice for SoftFloat is included below.
<br>
<br>-------------------------------------------------------------------------------
<br>SoftFloat Legal Notice
<br>
<br>SoftFloat was written by John R. Hauser.  This work was made possible in
<br>part by the International Computer Science Institute, located at Suite 600,
<br>1947 Center Street, Berkeley, California 94704.  Funding was partially
<br>provided by the National Science Foundation under grant MIP-9311980.  The
<br>original version of this code was written as part of a project to build
<br>a fixed-point vector processor in collaboration with the University of
<br>California at Berkeley, overseen by Profs. Nelson Morgan and John Wawrzynek.
<br>
<br>THIS SOFTWARE IS DISTRIBUTED AS IS, FOR FREE.  Although reasonable effort
<br>has been made to avoid it, THIS SOFTWARE MAY CONTAIN FAULTS THAT WILL AT
<br>TIMES RESULT IN INCORRECT BEHAVIOR.  USE OF THIS SOFTWARE IS RESTRICTED TO
<br>PERSONS AND ORGANIZATIONS WHO CAN AND WILL TAKE FULL RESPONSIBILITY FOR ANY
<br>AND ALL LOSSES, COSTS, OR OTHER PROBLEMS ARISING FROM ITS USE.
<br>-------------------------------------------------------------------------------
<br><p></p><div class="separator"></div><br><p><h2>nwfpe</h2></p>The following describes the current state of the NetWinder's floating point
<br>emulator.
<br>
<br>In the following nomenclature is used to describe the floating point
<br>instructions.  It follows the conventions in the ARM manual.
<br>
<br><S|D|E> = <single|double|extended>, no default
<br>{P|M|Z} = {round to +infinity,round to -infinity,round to zero},
<br>          default = round to nearest
<br>
<br>Note: items enclosed in {} are optional.
<br>
<br>Floating Point Coprocessor Data Transfer Instructions (CPDT)
<br>------------------------------------------------------------
<br>
<br>LDF/STF - load and store floating
<br>
<br><LDF|STF>{cond}<S|D|E> Fd, Rn
<br><LDF|STF>{cond}<S|D|E> Fd, [Rn, #<expression>]{!}
<br><LDF|STF>{cond}<S|D|E> Fd, [Rn], #<expression>
<br>
<br>These instructions are fully implemented.
<br>
<br>LFM/SFM - load and store multiple floating
<br>
<br>Form 1 syntax:
<br><LFM|SFM>{cond}<S|D|E> Fd, <count>, [Rn]
<br><LFM|SFM>{cond}<S|D|E> Fd, <count>, [Rn, #<expression>]{!}
<br><LFM|SFM>{cond}<S|D|E> Fd, <count>, [Rn], #<expression>
<br>
<br>Form 2 syntax:
<br><LFM|SFM>{cond}<FD,EA> Fd, <count>, [Rn]{!}
<br>
<br>These instructions are fully implemented.  They store/load three words
<br>for each floating point register into the memory location given in the 
<br>instruction.  The format in memory is unlikely to be compatible with
<br>other implementations, in particular the actual hardware.  Specific
<br>mention of this is made in the ARM manuals.  
<br>
<br>Floating Point Coprocessor Register Transfer Instructions (CPRT)
<br>----------------------------------------------------------------
<br>
<br>Conversions, read/write status/control register instructions
<br>
<br>FLT{cond}<S,D,E>{P,M,Z} Fn, Rd          Convert integer to floating point
<br>FIX{cond}{P,M,Z} Rd, Fn                 Convert floating point to integer
<br>WFS{cond} Rd                            Write floating point status register
<br>RFS{cond} Rd                            Read floating point status register
<br>WFC{cond} Rd                            Write floating point control register
<br>RFC{cond} Rd                            Read floating point control register
<br>
<br>FLT/FIX are fully implemented.
<br>
<br>RFS/WFS are fully implemented.
<br>
<br>RFC/WFC are fully implemented.  RFC/WFC are supervisor only instructions, and
<br>presently check the CPU mode, and do an invalid instruction trap if not called
<br>from supervisor mode.
<br>
<br>Compare instructions
<br>
<br>CMF{cond} Fn, Fm        Compare floating
<br>CMFE{cond} Fn, Fm       Compare floating with exception
<br>CNF{cond} Fn, Fm        Compare negated floating
<br>CNFE{cond} Fn, Fm       Compare negated floating with exception
<br>
<br>These are fully implemented.
<br>
<br>Floating Point Coprocessor Data Instructions (CPDT)
<br>---------------------------------------------------
<br>
<br>Dyadic operations:
<br>
<br>ADF{cond}<S|D|E>{P,M,Z} Fd, Fn, <Fm,#value> - add
<br>SUF{cond}<S|D|E>{P,M,Z} Fd, Fn, <Fm,#value> - subtract
<br>RSF{cond}<S|D|E>{P,M,Z} Fd, Fn, <Fm,#value> - reverse subtract
<br>MUF{cond}<S|D|E>{P,M,Z} Fd, Fn, <Fm,#value> - multiply
<br>DVF{cond}<S|D|E>{P,M,Z} Fd, Fn, <Fm,#value> - divide
<br>RDV{cond}<S|D|E>{P,M,Z} Fd, Fn, <Fm,#value> - reverse divide
<br>
<br>These are fully implemented.
<br>
<br>FML{cond}<S|D|E>{P,M,Z} Fd, Fn, <Fm,#value> - fast multiply
<br>FDV{cond}<S|D|E>{P,M,Z} Fd, Fn, <Fm,#value> - fast divide
<br>FRD{cond}<S|D|E>{P,M,Z} Fd, Fn, <Fm,#value> - fast reverse divide
<br>
<br>These are fully implemented as well.  They use the same algorithm as the
<br>non-fast versions.  Hence, in this implementation their performance is
<br>equivalent to the MUF/DVF/RDV instructions.  This is acceptable according
<br>to the ARM manual.  The manual notes these are defined only for single
<br>operands, on the actual FPA11 hardware they do not work for double or
<br>extended precision operands.  The emulator currently does not check
<br>the requested permissions conditions, and performs the requested operation.
<br>
<br>RMF{cond}<S|D|E>{P,M,Z} Fd, Fn, <Fm,#value> - IEEE remainder
<br>
<br>This is fully implemented.
<br>
<br>Monadic operations:
<br>
<br>MVF{cond}<S|D|E>{P,M,Z} Fd, <Fm,#value> - move
<br>MNF{cond}<S|D|E>{P,M,Z} Fd, <Fm,#value> - move negated
<br>
<br>These are fully implemented.
<br>
<br>ABS{cond}<S|D|E>{P,M,Z} Fd, <Fm,#value> - absolute value
<br>SQT{cond}<S|D|E>{P,M,Z} Fd, <Fm,#value> - square root
<br>RND{cond}<S|D|E>{P,M,Z} Fd, <Fm,#value> - round
<br>
<br>These are fully implemented.
<br>
<br>URD{cond}<S|D|E>{P,M,Z} Fd, <Fm,#value> - unnormalized round
<br>NRM{cond}<S|D|E>{P,M,Z} Fd, <Fm,#value> - normalize
<br>
<br>These are implemented.  URD is implemented using the same code as the RND
<br>instruction.  Since URD cannot return a unnormalized number, NRM becomes
<br>a NOP.
<br>
<br>Library calls:
<br>
<br>POW{cond}<S|D|E>{P,M,Z} Fd, Fn, <Fm,#value> - power
<br>RPW{cond}<S|D|E>{P,M,Z} Fd, Fn, <Fm,#value> - reverse power
<br>POL{cond}<S|D|E>{P,M,Z} Fd, Fn, <Fm,#value> - polar angle (arctan2)
<br>
<br>LOG{cond}<S|D|E>{P,M,Z} Fd, <Fm,#value> - logarithm to base 10
<br>LGN{cond}<S|D|E>{P,M,Z} Fd, <Fm,#value> - logarithm to base e 
<br>EXP{cond}<S|D|E>{P,M,Z} Fd, <Fm,#value> - exponent
<br>SIN{cond}<S|D|E>{P,M,Z} Fd, <Fm,#value> - sine
<br>COS{cond}<S|D|E>{P,M,Z} Fd, <Fm,#value> - cosine
<br>TAN{cond}<S|D|E>{P,M,Z} Fd, <Fm,#value> - tangent
<br>ASN{cond}<S|D|E>{P,M,Z} Fd, <Fm,#value> - arcsine
<br>ACS{cond}<S|D|E>{P,M,Z} Fd, <Fm,#value> - arccosine
<br>ATN{cond}<S|D|E>{P,M,Z} Fd, <Fm,#value> - arctangent
<br>
<br>These are not implemented.  They are not currently issued by the compiler,
<br>and are handled by routines in libc.  These are not implemented by the FPA11
<br>hardware, but are handled by the floating point support code.  They should 
<br>be implemented in future versions.
<br>
<br>Signalling:
<br>
<br>Signals are implemented.  However current ELF kernels produced by Rebel.com
<br>have a bug in them that prevents the module from generating a SIGFPE.  This
<br>is caused by a failure to alias fp_current to the kernel variable
<br>current_set[0] correctly.
<br>
<br>The kernel provided with this distribution (vmlinux-nwfpe-0.93) contains
<br>a fix for this problem and also incorporates the current version of the
<br>emulator directly.  It is possible to run with no floating point module
<br>loaded with this kernel.  It is provided as a demonstration of the 
<br>technology and for those who want to do floating point work that depends
<br>on signals.  It is not strictly necessary to use the module.
<br>
<br>A module (either the one provided by Russell King, or the one in this 
<br>distribution) can be loaded to replace the functionality of the emulator
<br>built into the kernel.
<br><p></p><div class="separator"></div><br><p><h2>Atmel</h2></p>ARM Atmel SoCs (aka AT91)
<br>=========================
<br>
<br>
<br>Introduction
<br>------------
<br>This document gives useful information about the ARM Atmel SoCs that are
<br>currently supported in Linux Mainline (you know, the one on kernel.org).
<br>
<br>It is important to note that the Atmel | SMART ARM-based MPU product line is
<br>historically named "AT91" or "at91" throughout the Linux kernel development
<br>process even if this product prefix has completely disappeared from the
<br>official Atmel product name. Anyway, files, directories, git trees,
<br>git branches/tags and email subject always contain this "at91" sub-string.
<br>
<br>
<br>AT91 SoCs
<br>---------
<br>Documentation and detailled datasheet for each product are available on
<br>the Atmel website: http://www.atmel.com.
<br>
<br>  Flavors:
<br>    * ARM 920 based SoC
<br>      - at91rm9200
<br>        + Datasheet
<br>          http://www.atmel.com/Images/doc1768.pdf
<br>
<br>    * ARM 926 based SoCs
<br>      - at91sam9260
<br>        + Datasheet
<br>          http://www.atmel.com/Images/doc6221.pdf
<br>
<br>      - at91sam9xe
<br>        + Datasheet
<br>          http://www.atmel.com/Images/Atmel-6254-32-bit-ARM926EJ-S-Embedded-Microprocessor-SAM9XE_Datasheet.pdf
<br>
<br>      - at91sam9261
<br>        + Datasheet
<br>          http://www.atmel.com/Images/doc6062.pdf
<br>
<br>      - at91sam9263
<br>        + Datasheet
<br>          http://www.atmel.com/Images/Atmel_6249_32-bit-ARM926EJ-S-Microcontroller_SAM9263_Datasheet.pdf
<br>
<br>      - at91sam9rl
<br>        + Datasheet
<br>          http://www.atmel.com/Images/doc6289.pdf
<br>
<br>      - at91sam9g20
<br>        + Datasheet
<br>          http://www.atmel.com/Images/doc6384.pdf
<br>
<br>      - at91sam9g45 family
<br>        - at91sam9g45
<br>        - at91sam9g46
<br>        - at91sam9m10
<br>        - at91sam9m11 (device superset)
<br>        + Datasheet
<br>          http://www.atmel.com/Images/Atmel-6437-32-bit-ARM926-Embedded-Microprocessor-SAM9M11_Datasheet.pdf
<br>
<br>      - at91sam9x5 family (aka "The 5 series")
<br>        - at91sam9g15
<br>        - at91sam9g25
<br>        - at91sam9g35
<br>        - at91sam9x25
<br>        - at91sam9x35
<br>        + Datasheet (can be considered as covering the whole family)
<br>          http://www.atmel.com/Images/Atmel_11055_32-bit-ARM926EJ-S-Microcontroller_SAM9X35_Datasheet.pdf
<br>
<br>      - at91sam9n12
<br>        + Datasheet
<br>          http://www.atmel.com/Images/Atmel_11063_32-bit-ARM926EJ-S-Microcontroller_SAM9N12CN11CN12_Datasheet.pdf
<br>
<br>    * ARM Cortex-A5 based SoCs
<br>      - sama5d3 family
<br>        - sama5d31
<br>        - sama5d33
<br>        - sama5d34
<br>        - sama5d35
<br>        - sama5d36 (device superset)
<br>        + Datasheet
<br>          http://www.atmel.com/Images/Atmel-11121-32-bit-Cortex-A5-Microcontroller-SAMA5D3_Datasheet.pdf
<br>
<br>    * ARM Cortex-A5 + NEON based SoCs
<br>      - sama5d4 family
<br>        - sama5d41
<br>        - sama5d42
<br>        - sama5d43
<br>        - sama5d44 (device superset)
<br>        + Datasheet
<br>          http://www.atmel.com/Images/Atmel-11238-32-bit-Cortex-A5-Microcontroller-SAMA5D4_Datasheet.pdf
<br>
<br>      - sama5d2 family
<br>        - sama5d21
<br>        - sama5d22
<br>        - sama5d23
<br>        - sama5d24
<br>        - sama5d26
<br>        - sama5d27 (device superset)
<br>        - sama5d28 (device superset + environmental monitors)
<br>        + Datasheet
<br>          http://www.atmel.com/Images/Atmel-11267-32-bit-Cortex-A5-Microcontroller-SAMA5D2_Datasheet.pdf
<br>
<br>
<br>Linux kernel information
<br>------------------------
<br>Linux kernel mach directory: arch/arm/mach-at91
<br>MAINTAINERS entry is: "ARM/ATMEL AT91RM9200 AND AT91SAM ARM ARCHITECTURES"
<br>
<br>
<br>Device Tree for AT91 SoCs and boards
<br>------------------------------------
<br>All AT91 SoCs are converted to Device Tree. Since Linux 3.19, these products
<br>must use this method to boot the Linux kernel.
<br>
<br>Work In Progress statement:
<br>Device Tree files and Device Tree bindings that apply to AT91 SoCs and boards are
<br>considered as "Unstable". To be completely clear, any at91 binding can change at
<br>any time. So, be sure to use a Device Tree Binary and a Kernel Image generated from
<br>the same source tree.
<br>Please refer to the Documentation/devicetree/bindings/ABI.txt file for a
<br>definition of a "Stable" binding/ABI.
<br>This statement will be removed by AT91 MAINTAINERS when appropriate.
<br>
<br>Naming conventions and best practice:
<br>- SoCs Device Tree Source Include files are named after the official name of
<br>  the product (at91sam9g20.dtsi or sama5d33.dtsi for instance).
<br>- Device Tree Source Include files (.dtsi) are used to collect common nodes that can be
<br>  shared across SoCs or boards (sama5d3.dtsi or at91sam9x5cm.dtsi for instance).
<br>  When collecting nodes for a particular peripheral or topic, the identifier have to
<br>  be placed at the end of the file name, separated with a "_" (at91sam9x5_can.dtsi
<br>  or sama5d3_gmac.dtsi for example).
<br>- board Device Tree Source files (.dts) are prefixed by the string "at91-" so
<br>  that they can be identified easily. Note that some files are historical exceptions
<br>  to this rule (sama5d3[13456]ek.dts, usb_a9g20.dts or animeo_ip.dts for example).
<br><p></p><div class="separator"></div><br><p><h2>sunxi</h2></p>ARM Allwinner SoCs
<br>==================
<br>
<br>This document lists all the ARM Allwinner SoCs that are currently
<br>supported in mainline by the Linux kernel. This document will also
<br>provide links to documentation and/or datasheet for these SoCs.
<br>
<br>SunXi family
<br>------------
<br>  Linux kernel mach directory: arch/arm/mach-sunxi
<br>
<br>  Flavors:
<br>    * ARM926 based SoCs
<br>      - Allwinner F20 (sun3i)
<br>        + Not Supported
<br>
<br>    * ARM Cortex-A8 based SoCs
<br>      - Allwinner A10 (sun4i)
<br>        + Datasheet
<br>	  http://dl.linux-sunxi.org/A10/A10%20Datasheet%20-%20v1.21%20%282012-04-06%29.pdf
<br>	+ User Manual
<br>	  http://dl.linux-sunxi.org/A10/A10%20User%20Manual%20-%20v1.20%20%282012-04-09%2c%20DECRYPTED%29.pdf
<br>
<br>      - Allwinner A10s (sun5i)
<br>        + Datasheet
<br>          http://dl.linux-sunxi.org/A10s/A10s%20Datasheet%20-%20v1.20%20%282012-03-27%29.pdf
<br>
<br>      - Allwinner A13 / R8 (sun5i)
<br>        + Datasheet
<br>	  http://dl.linux-sunxi.org/A13/A13%20Datasheet%20-%20v1.12%20%282012-03-29%29.pdf
<br>        + User Manual
<br>          http://dl.linux-sunxi.org/A13/A13%20User%20Manual%20-%20v1.2%20%282013-01-08%29.pdf
<br>
<br>      - Next Thing Co GR8 (sun5i)
<br>
<br>    * Dual ARM Cortex-A7 based SoCs
<br>      - Allwinner A20 (sun7i)
<br>        + User Manual
<br>          http://dl.linux-sunxi.org/A20/A20%20User%20Manual%202013-03-22.pdf
<br>
<br>      - Allwinner A23 (sun8i)
<br>        + Datasheet
<br>          http://dl.linux-sunxi.org/A23/A23%20Datasheet%20V1.0%2020130830.pdf
<br>        + User Manual
<br>          http://dl.linux-sunxi.org/A23/A23%20User%20Manual%20V1.0%2020130830.pdf
<br>
<br>    * Quad ARM Cortex-A7 based SoCs
<br>      - Allwinner A31 (sun6i)
<br>        + Datasheet
<br>          http://dl.linux-sunxi.org/A31/A3x_release_document/A31/IC/A31%20datasheet%20V1.3%2020131106.pdf
<br>        + User Manual
<br>          http://dl.linux-sunxi.org/A31/A3x_release_document/A31/IC/A31%20user%20manual%20V1.1%2020130630.pdf
<br>
<br>      - Allwinner A31s (sun6i)
<br>        + Datasheet
<br>          http://dl.linux-sunxi.org/A31/A3x_release_document/A31s/IC/A31s%20datasheet%20V1.3%2020131106.pdf
<br>        + User Manual
<br>          http://dl.linux-sunxi.org/A31/A3x_release_document/A31s/IC/A31s%20User%20Manual%20%20V1.0%2020130322.pdf
<br>
<br>      - Allwinner A33 (sun8i)
<br>        + Datasheet
<br>          http://dl.linux-sunxi.org/A33/A33%20Datasheet%20release%201.1.pdf
<br>        + User Manual
<br>          http://dl.linux-sunxi.org/A33/A33%20user%20manual%20release%201.1.pdf
<br>
<br>      - Allwinner H3 (sun8i)
<br>        + Datasheet
<br>          http://dl.linux-sunxi.org/H3/Allwinner_H3_Datasheet_V1.0.pdf
<br>
<br>    * Quad ARM Cortex-A15, Quad ARM Cortex-A7 based SoCs
<br>      - Allwinner A80
<br>        + Datasheet
<br>	  http://dl.linux-sunxi.org/A80/A80_Datasheet_Revision_1.0_0404.pdf
<br>
<br>    * Octa ARM Cortex-A7 based SoCs
<br>      - Allwinner A83T
<br>        + Datasheet
<br>          https://github.com/allwinner-zh/documents/raw/master/A83T/A83T_Datasheet_v1.3_20150510.pdf
<br>        + User Manual
<br>          https://github.com/allwinner-zh/documents/raw/master/A83T/A83T_User_Manual_v1.5.1_20150513.pdf
<br>
<br>    * Quad ARM Cortex-A53 based SoCs
<br>      - Allwinner A64
<br>        + Datasheet
<br>          http://dl.linux-sunxi.org/A64/A64_Datasheet_V1.1.pdf
<br>        + User Manual
<br>          http://dl.linux-sunxi.org/A64/Allwinner%20A64%20User%20Manual%20v1.0.pdf
<br><p></p><div class="separator"></div><br><p><h2>Marvell</h2></p>ARM Marvell SoCs
<br>================
<br>
<br>This document lists all the ARM Marvell SoCs that are currently
<br>supported in mainline by the Linux kernel. As the Marvell families of
<br>SoCs are large and complex, it is hard to understand where the support
<br>for a particular SoC is available in the Linux kernel. This document
<br>tries to help in understanding where those SoCs are supported, and to
<br>match them with their corresponding public datasheet, when available.
<br>
<br>Orion family
<br>------------
<br>
<br>  Flavors:
<br>        88F5082
<br>        88F5181
<br>        88F5181L
<br>        88F5182
<br>               Datasheet               : http://www.embeddedarm.com/documentation/third-party/MV88F5182-datasheet.pdf
<br>               Programmer's User Guide : http://www.embeddedarm.com/documentation/third-party/MV88F5182-opensource-manual.pdf
<br>               User Manual             : http://www.embeddedarm.com/documentation/third-party/MV88F5182-usermanual.pdf
<br>        88F5281
<br>               Datasheet               : http://www.ocmodshop.com/images/reviews/networking/qnap_ts409u/marvel_88f5281_data_sheet.pdf
<br>        88F6183
<br>  Core: Feroceon 88fr331 (88f51xx) or 88fr531-vd (88f52xx) ARMv5 compatible
<br>  Linux kernel mach directory: arch/arm/mach-orion5x
<br>  Linux kernel plat directory: arch/arm/plat-orion
<br>
<br>Kirkwood family
<br>---------------
<br>
<br>  Flavors:
<br>        88F6282 a.k.a Armada 300
<br>                Product Brief  : http://www.marvell.com/embedded-processors/armada-300/assets/armada_310.pdf
<br>        88F6283 a.k.a Armada 310
<br>                Product Brief  : http://www.marvell.com/embedded-processors/armada-300/assets/armada_310.pdf
<br>        88F6190
<br>                Product Brief  : http://www.marvell.com/embedded-processors/kirkwood/assets/88F6190-003_WEB.pdf
<br>                Hardware Spec  : http://www.marvell.com/embedded-processors/kirkwood/assets/HW_88F619x_OpenSource.pdf
<br>                Functional Spec: http://www.marvell.com/embedded-processors/kirkwood/assets/FS_88F6180_9x_6281_OpenSource.pdf
<br>        88F6192
<br>                Product Brief  : http://www.marvell.com/embedded-processors/kirkwood/assets/88F6192-003_ver1.pdf
<br>                Hardware Spec  : http://www.marvell.com/embedded-processors/kirkwood/assets/HW_88F619x_OpenSource.pdf
<br>                Functional Spec: http://www.marvell.com/embedded-processors/kirkwood/assets/FS_88F6180_9x_6281_OpenSource.pdf
<br>        88F6182
<br>        88F6180
<br>                Product Brief  : http://www.marvell.com/embedded-processors/kirkwood/assets/88F6180-003_ver1.pdf
<br>                Hardware Spec  : http://www.marvell.com/embedded-processors/kirkwood/assets/HW_88F6180_OpenSource.pdf
<br>                Functional Spec: http://www.marvell.com/embedded-processors/kirkwood/assets/FS_88F6180_9x_6281_OpenSource.pdf
<br>        88F6281
<br>                Product Brief  : http://www.marvell.com/embedded-processors/kirkwood/assets/88F6281-004_ver1.pdf
<br>                Hardware Spec  : http://www.marvell.com/embedded-processors/kirkwood/assets/HW_88F6281_OpenSource.pdf
<br>                Functional Spec: http://www.marvell.com/embedded-processors/kirkwood/assets/FS_88F6180_9x_6281_OpenSource.pdf
<br>  Homepage: http://www.marvell.com/embedded-processors/kirkwood/
<br>  Core: Feroceon 88fr131 ARMv5 compatible
<br>  Linux kernel mach directory: arch/arm/mach-mvebu
<br>  Linux kernel plat directory: none
<br>
<br>Discovery family
<br>----------------
<br>
<br>  Flavors:
<br>        MV78100
<br>                Product Brief  : http://www.marvell.com/embedded-processors/discovery-innovation/assets/MV78100-003_WEB.pdf
<br>                Hardware Spec  : http://www.marvell.com/embedded-processors/discovery-innovation/assets/HW_MV78100_OpenSource.pdf
<br>                Functional Spec: http://www.marvell.com/embedded-processors/discovery-innovation/assets/FS_MV76100_78100_78200_OpenSource.pdf
<br>        MV78200
<br>                Product Brief  : http://www.marvell.com/embedded-processors/discovery-innovation/assets/MV78200-002_WEB.pdf
<br>                Hardware Spec  : http://www.marvell.com/embedded-processors/discovery-innovation/assets/HW_MV78200_OpenSource.pdf
<br>                Functional Spec: http://www.marvell.com/embedded-processors/discovery-innovation/assets/FS_MV76100_78100_78200_OpenSource.pdf
<br>        MV76100
<br>                Not supported by the Linux kernel.
<br>
<br>  Core: Feroceon 88fr571-vd ARMv5 compatible
<br>
<br>  Linux kernel mach directory: arch/arm/mach-mv78xx0
<br>  Linux kernel plat directory: arch/arm/plat-orion
<br>
<br>EBU Armada family
<br>-----------------
<br>
<br>  Armada 370 Flavors:
<br>        88F6710
<br>        88F6707
<br>        88F6W11
<br>    Product Brief:   http://www.marvell.com/embedded-processors/armada-300/assets/Marvell_ARMADA_370_SoC.pdf
<br>    Hardware Spec:   http://www.marvell.com/embedded-processors/armada-300/assets/ARMADA370-datasheet.pdf
<br>    Functional Spec: http://www.marvell.com/embedded-processors/armada-300/assets/ARMADA370-FunctionalSpec-datasheet.pdf
<br>    Core: Sheeva ARMv7 compatible PJ4B
<br>
<br>  Armada 375 Flavors:
<br>	88F6720
<br>    Product Brief: http://www.marvell.com/embedded-processors/armada-300/assets/ARMADA_375_SoC-01_product_brief.pdf
<br>    Core: ARM Cortex-A9
<br>
<br>  Armada 38x Flavors:
<br>	88F6810	Armada 380
<br>	88F6820 Armada 385
<br>	88F6828 Armada 388
<br>    Product infos:   http://www.marvell.com/embedded-processors/armada-38x/
<br>    Functional Spec: https://marvellcorp.wufoo.com/forms/marvell-armada-38x-functional-specifications/
<br>    Core: ARM Cortex-A9
<br>
<br>  Armada 39x Flavors:
<br>	88F6920 Armada 390
<br>	88F6928 Armada 398
<br>    Product infos: http://www.marvell.com/embedded-processors/armada-39x/
<br>    Core: ARM Cortex-A9
<br>
<br>  Armada XP Flavors:
<br>        MV78230
<br>        MV78260
<br>        MV78460
<br>    NOTE: not to be confused with the non-SMP 78xx0 SoCs
<br>    Product Brief: http://www.marvell.com/embedded-processors/armada-xp/assets/Marvell-ArmadaXP-SoC-product%20brief.pdf
<br>    Functional Spec: http://www.marvell.com/embedded-processors/armada-xp/assets/ARMADA-XP-Functional-SpecDatasheet.pdf
<br>    Hardware Specs:
<br>      http://www.marvell.com/embedded-processors/armada-xp/assets/HW_MV78230_OS.PDF
<br>      http://www.marvell.com/embedded-processors/armada-xp/assets/HW_MV78260_OS.PDF
<br>      http://www.marvell.com/embedded-processors/armada-xp/assets/HW_MV78460_OS.PDF
<br>    Core: Sheeva ARMv7 compatible Dual-core or Quad-core PJ4B-MP
<br>
<br>  Linux kernel mach directory: arch/arm/mach-mvebu
<br>  Linux kernel plat directory: none
<br>
<br>EBU Armada family ARMv8
<br>-----------------------
<br>
<br>  Armada 3710/3720 Flavors:
<br>	88F3710
<br>	88F3720
<br>	Core: ARM Cortex A53 (ARMv8)
<br>
<br>	Homepage: http://www.marvell.com/embedded-processors/armada-3700/
<br>	Product Brief: http://www.marvell.com/embedded-processors/assets/PB-88F3700-FNL.pdf
<br>	Device tree files: arch/arm64/boot/dts/marvell/armada-37*
<br>
<br>  Armada 7K Flavors:
<br>	88F7020 (AP806 Dual + one CP110)
<br>	88F7040 (AP806 Quad + one CP110)
<br>	Core: ARM Cortex A72
<br>
<br>	Homepage: http://www.marvell.com/embedded-processors/armada-70xx/
<br>	Product Brief: http://www.marvell.com/embedded-processors/assets/Armada7020PB-Jan2016.pdf
<br>		       http://www.marvell.com/embedded-processors/assets/Armada7040PB-Jan2016.pdf
<br>	Device tree files: arch/arm64/boot/dts/marvell/armada-70*
<br>
<br>  Armada 8K Flavors:
<br>	88F8020 (AP806 Dual + two CP110)
<br>	88F8040 (AP806 Quad + two CP110)
<br>	Core: ARM Cortex A72
<br>
<br>	Homepage: http://www.marvell.com/embedded-processors/armada-80xx/
<br>	Product Brief: http://www.marvell.com/embedded-processors/assets/Armada8020PB-Jan2016.pdf
<br>		       http://www.marvell.com/embedded-processors/assets/Armada8040PB-Jan2016.pdf
<br>	Device tree files: arch/arm64/boot/dts/marvell/armada-80*
<br>
<br>Avanta family
<br>-------------
<br>
<br>  Flavors:
<br>       88F6510
<br>       88F6530P
<br>       88F6550
<br>       88F6560
<br>  Homepage     : http://www.marvell.com/broadband/
<br>  Product Brief: http://www.marvell.com/broadband/assets/Marvell_Avanta_88F6510_305_060-001_product_brief.pdf
<br>  No public datasheet available.
<br>
<br>  Core: ARMv5 compatible
<br>
<br>  Linux kernel mach directory: no code in mainline yet, planned for the future
<br>  Linux kernel plat directory: no code in mainline yet, planned for the future
<br>
<br>Storage family
<br>--------------
<br>
<br>  Armada SP:
<br>	88RC1580
<br>    Product infos: http://www.marvell.com/storage/armada-sp/
<br>    Core: Sheeva ARMv7 comatible Quad-core PJ4C
<br>    (not supported in upstream Linux kernel)
<br>
<br>Dove family (application processor)
<br>-----------------------------------
<br>
<br>  Flavors:
<br>        88AP510 a.k.a Armada 510
<br>                Product Brief   : http://www.marvell.com/application-processors/armada-500/assets/Marvell_Armada510_SoC.pdf
<br>                Hardware Spec   : http://www.marvell.com/application-processors/armada-500/assets/Armada-510-Hardware-Spec.pdf
<br>                Functional Spec : http://www.marvell.com/application-processors/armada-500/assets/Armada-510-Functional-Spec.pdf
<br>  Homepage: http://www.marvell.com/application-processors/armada-500/
<br>  Core: ARMv7 compatible
<br>
<br>  Directory: arch/arm/mach-mvebu (DT enabled platforms)
<br>             arch/arm/mach-dove (non-DT enabled platforms)
<br>
<br>PXA 2xx/3xx/93x/95x family
<br>--------------------------
<br>
<br>  Flavors:
<br>        PXA21x, PXA25x, PXA26x
<br>             Application processor only
<br>             Core: ARMv5 XScale1 core
<br>        PXA270, PXA271, PXA272
<br>             Product Brief         : http://www.marvell.com/application-processors/pxa-family/assets/pxa_27x_pb.pdf
<br>             Design guide          : http://www.marvell.com/application-processors/pxa-family/assets/pxa_27x_design_guide.pdf
<br>             Developers manual     : http://www.marvell.com/application-processors/pxa-family/assets/pxa_27x_dev_man.pdf
<br>             Specification         : http://www.marvell.com/application-processors/pxa-family/assets/pxa_27x_emts.pdf
<br>             Specification update  : http://www.marvell.com/application-processors/pxa-family/assets/pxa_27x_spec_update.pdf
<br>             Application processor only
<br>             Core: ARMv5 XScale2 core
<br>        PXA300, PXA310, PXA320
<br>             PXA 300 Product Brief : http://www.marvell.com/application-processors/pxa-family/assets/PXA300_PB_R4.pdf
<br>             PXA 310 Product Brief : http://www.marvell.com/application-processors/pxa-family/assets/PXA310_PB_R4.pdf
<br>             PXA 320 Product Brief : http://www.marvell.com/application-processors/pxa-family/assets/PXA320_PB_R4.pdf
<br>             Design guide          : http://www.marvell.com/application-processors/pxa-family/assets/PXA3xx_Design_Guide.pdf
<br>             Developers manual     : http://www.marvell.com/application-processors/pxa-family/assets/PXA3xx_Developers_Manual.zip
<br>             Specifications        : http://www.marvell.com/application-processors/pxa-family/assets/PXA3xx_EMTS.pdf
<br>             Specification Update  : http://www.marvell.com/application-processors/pxa-family/assets/PXA3xx_Spec_Update.zip
<br>             Reference Manual      : http://www.marvell.com/application-processors/pxa-family/assets/PXA3xx_TavorP_BootROM_Ref_Manual.pdf
<br>             Application processor only
<br>             Core: ARMv5 XScale3 core
<br>        PXA930, PXA935
<br>             Application processor with Communication processor
<br>             Core: ARMv5 XScale3 core
<br>        PXA955
<br>             Application processor with Communication processor
<br>             Core: ARMv7 compatible Sheeva PJ4 core
<br>
<br>   Comments:
<br>
<br>    * This line of SoCs originates from the XScale family developed by
<br>      Intel and acquired by Marvell in ~2006. The PXA21x, PXA25x,
<br>      PXA26x, PXA27x, PXA3xx and PXA93x were developed by Intel, while
<br>      the later PXA95x were developed by Marvell.
<br>
<br>    * Due to their XScale origin, these SoCs have virtually nothing in
<br>      common with the other (Kirkwood, Dove, etc.) families of Marvell
<br>      SoCs, except with the MMP/MMP2 family of SoCs.
<br>
<br>   Linux kernel mach directory: arch/arm/mach-pxa
<br>   Linux kernel plat directory: arch/arm/plat-pxa
<br>
<br>MMP/MMP2/MMP3 family (communication processor)
<br>-----------------------------------------
<br>
<br>   Flavors:
<br>        PXA168, a.k.a Armada 168
<br>             Homepage             : http://www.marvell.com/application-processors/armada-100/armada-168.jsp
<br>             Product brief        : http://www.marvell.com/application-processors/armada-100/assets/pxa_168_pb.pdf
<br>             Hardware manual      : http://www.marvell.com/application-processors/armada-100/assets/armada_16x_datasheet.pdf
<br>             Software manual      : http://www.marvell.com/application-processors/armada-100/assets/armada_16x_software_manual.pdf
<br>             Specification update : http://www.marvell.com/application-processors/armada-100/assets/ARMADA16x_Spec_update.pdf
<br>             Boot ROM manual      : http://www.marvell.com/application-processors/armada-100/assets/armada_16x_ref_manual.pdf
<br>             App node package     : http://www.marvell.com/application-processors/armada-100/assets/armada_16x_app_note_package.pdf
<br>             Application processor only
<br>             Core: ARMv5 compatible Marvell PJ1 88sv331 (Mohawk)
<br>        PXA910/PXA920
<br>             Homepage             : http://www.marvell.com/communication-processors/pxa910/
<br>             Product Brief        : http://www.marvell.com/communication-processors/pxa910/assets/Marvell_PXA910_Platform-001_PB_final.pdf
<br>             Application processor with Communication processor
<br>             Core: ARMv5 compatible Marvell PJ1 88sv331 (Mohawk)
<br>        PXA688, a.k.a. MMP2, a.k.a Armada 610
<br>             Product Brief        : http://www.marvell.com/application-processors/armada-600/assets/armada610_pb.pdf
<br>             Application processor only
<br>             Core: ARMv7 compatible Sheeva PJ4 88sv581x core
<br>	PXA2128, a.k.a. MMP3 (OLPC XO4, Linux support not upstream)
<br>	     Product Brief	  : http://www.marvell.com/application-processors/armada/pxa2128/assets/Marvell-ARMADA-PXA2128-SoC-PB.pdf
<br>	     Application processor only
<br>	     Core: Dual-core ARMv7 compatible Sheeva PJ4C core
<br>	PXA960/PXA968/PXA978 (Linux support not upstream)
<br>	     Application processor with Communication Processor
<br>	     Core: ARMv7 compatible Sheeva PJ4 core
<br>	PXA986/PXA988 (Linux support not upstream)
<br>	     Application processor with Communication Processor
<br>	     Core: Dual-core ARMv7 compatible Sheeva PJ4B-MP core
<br>	PXA1088/PXA1920 (Linux support not upstream)
<br>	     Application processor with Communication Processor
<br>	     Core: quad-core ARMv7 Cortex-A7
<br>	PXA1908/PXA1928/PXA1936
<br>	     Application processor with Communication Processor
<br>	     Core: multi-core ARMv8 Cortex-A53
<br>
<br>   Comments:
<br>
<br>    * This line of SoCs originates from the XScale family developed by
<br>      Intel and acquired by Marvell in ~2006. All the processors of
<br>      this MMP/MMP2 family were developed by Marvell.
<br>
<br>    * Due to their XScale origin, these SoCs have virtually nothing in
<br>      common with the other (Kirkwood, Dove, etc.) families of Marvell
<br>      SoCs, except with the PXA family of SoCs listed above.
<br>
<br>   Linux kernel mach directory: arch/arm/mach-mmp
<br>   Linux kernel plat directory: arch/arm/plat-pxa
<br>
<br>Berlin family (Multimedia Solutions)
<br>-------------------------------------
<br>
<br>  Flavors:
<br>	88DE3010, Armada 1000 (no Linux support)
<br>		Core:		Marvell PJ1 (ARMv5TE), Dual-core
<br>		Product Brief:	http://www.marvell.com.cn/digital-entertainment/assets/armada_1000_pb.pdf
<br>	88DE3005, Armada 1500-mini
<br>	88DE3005, Armada 1500 Mini
<br>		Design name:	BG2CD
<br>		Core:		ARM Cortex-A9, PL310 L2CC
<br>		Homepage:	http://www.marvell.com/multimedia-solutions/armada-1500-mini/
<br>        88DE3006, Armada 1500 Mini Plus
<br>                Design name:    BG2CDP
<br>                Core:           Dual Core ARM Cortex-A7
<br>                Homepage:       http://www.marvell.com/multimedia-solutions/armada-1500-mini-plus/
<br>	88DE3100, Armada 1500
<br>		Design name:	BG2
<br>		Core:		Marvell PJ4B-MP (ARMv7), Tauros3 L2CC
<br>		Product Brief:	http://www.marvell.com/digital-entertainment/armada-1500/assets/Marvell-ARMADA-1500-Product-Brief.pdf
<br>	88DE3114, Armada 1500 Pro
<br>		Design name:	BG2Q
<br>		Core:		Quad Core ARM Cortex-A9, PL310 L2CC
<br>	88DE3214, Armada 1500 Pro 4K
<br>		Design name:	BG3
<br>		Core:		ARM Cortex-A15, CA15 integrated L2CC
<br>	88DE3218, ARMADA 1500 Ultra
<br>		Core:		ARM Cortex-A53
<br>
<br>  Homepage: http://www.marvell.com/multimedia-solutions/
<br>  Directory: arch/arm/mach-berlin
<br>
<br>  Comments:
<br>   * This line of SoCs is based on Marvell Sheeva or ARM Cortex CPUs
<br>     with Synopsys DesignWare (IRQ, GPIO, Timers, ...) and PXA IP (SDHCI, USB, ETH, ...).
<br>
<br>CPU Cores
<br>---------
<br>
<br>The XScale cores were designed by Intel, and shipped by Marvell in the older
<br>PXA processors. Feroceon is a Marvell designed core that developed in-house,
<br>and that evolved into Sheeva. The XScale and Feroceon cores were phased out
<br>over time and replaced with Sheeva cores in later products, which subsequently
<br>got replaced with licensed ARM Cortex-A cores.
<br>
<br>  XScale 1
<br>	CPUID 0x69052xxx
<br>	ARMv5, iWMMXt
<br>  XScale 2
<br>	CPUID 0x69054xxx
<br>	ARMv5, iWMMXt
<br>  XScale 3
<br>	CPUID 0x69056xxx or 0x69056xxx
<br>	ARMv5, iWMMXt
<br>  Feroceon-1850 88fr331 "Mohawk"
<br>	CPUID 0x5615331x or 0x41xx926x
<br>	ARMv5TE, single issue
<br>  Feroceon-2850 88fr531-vd "Jolteon"
<br>	CPUID 0x5605531x or 0x41xx926x
<br>	ARMv5TE, VFP, dual-issue
<br>  Feroceon 88fr571-vd "Jolteon"
<br>	CPUID 0x5615571x
<br>	ARMv5TE, VFP, dual-issue
<br>  Feroceon 88fr131 "Mohawk-D"
<br>	CPUID 0x5625131x
<br>	ARMv5TE, single-issue in-order
<br>  Sheeva PJ1 88sv331 "Mohawk"
<br>	CPUID 0x561584xx
<br>	ARMv5, single-issue iWMMXt v2
<br>  Sheeva PJ4 88sv581x "Flareon"
<br>	CPUID 0x560f581x
<br>	ARMv7, idivt, optional iWMMXt v2
<br>  Sheeva PJ4B 88sv581x
<br>	CPUID 0x561f581x
<br>	ARMv7, idivt, optional iWMMXt v2
<br>  Sheeva PJ4B-MP / PJ4C
<br>	CPUID 0x562f584x
<br>	ARMv7, idivt/idiva, LPAE, optional iWMMXt v2 and/or NEON
<br>
<br>Long-term plans
<br>---------------
<br>
<br> * Unify the mach-dove/, mach-mv78xx0/, mach-orion5x/ into the
<br>   mach-mvebu/ to support all SoCs from the Marvell EBU (Engineering
<br>   Business Unit) in a single mach-<foo> directory. The plat-orion/
<br>   would therefore disappear.
<br>
<br> * Unify the mach-mmp/ and mach-pxa/ into the same mach-pxa
<br>   directory. The plat-pxa/ would therefore disappear.
<br>
<br>Credits
<br>-------
<br>
<br> Maen Suleiman <maen@marvell.com>
<br> Lior Amsalem <alior@marvell.com>
<br> Thomas Petazzoni <thomas.petazzoni@free-electrons.com>
<br> Andrew Lunn <andrew@lunn.ch>
<br> Nicolas Pitre <nico@fluxnic.net>
<br> Eric Miao <eric.y.miao@gmail.com>
<br><p></p><div class="separator"></div><br><p><h2>mips</h2></p>README for MIPS AU1XXX IDE driver - Released 2005-07-15
<br>
<br>ABOUT
<br>-----
<br>This file describes the 'drivers/ide/au1xxx-ide.c', related files and the
<br>services they provide.
<br>
<br>If you are short in patience and just want to know how to add your hard disc to
<br>the white or black list, go to the 'ADD NEW HARD DISC TO WHITE OR BLACK LIST'
<br>section.
<br>
<br>
<br>LICENSE
<br>-------
<br>
<br>Copyright (c) 2003-2005 AMD, Personal Connectivity Solutions
<br>
<br>This program is free software; you can redistribute it and/or modify it under
<br>the terms of the GNU General Public License as published by the Free Software
<br>Foundation; either version 2 of the License, or (at your option) any later
<br>version.
<br>
<br>THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES,
<br>INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
<br>FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE AUTHOR
<br>BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
<br>CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
<br>SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
<br>INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
<br>CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
<br>ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
<br>POSSIBILITY OF SUCH DAMAGE.
<br>
<br>You should have received a copy of the GNU General Public License along with
<br>this program; if not, write to the Free Software Foundation, Inc.,
<br>675 Mass Ave, Cambridge, MA 02139, USA.
<br>
<br>Note: for more information, please refer "AMD Alchemy Au1200/Au1550 IDE
<br>      Interface and Linux Device Driver" Application Note.
<br>
<br>
<br>FILES, CONFIGS AND COMPATIBILITY
<br>--------------------------------
<br>
<br>Two files are introduced:
<br>
<br>  a) 'arch/mips/include/asm/mach-au1x00/au1xxx_ide.h'
<br>     contains : struct _auide_hwif
<br>                 timing parameters for PIO mode 0/1/2/3/4
<br>                 timing parameters for MWDMA 0/1/2
<br>
<br>  b) 'drivers/ide/mips/au1xxx-ide.c'
<br>     contains the functionality of the AU1XXX IDE driver
<br>
<br>Following extra configs variables are introduced:
<br>
<br>  CONFIG_BLK_DEV_IDE_AU1XXX_PIO_DBDMA    - enable the PIO+DBDMA mode
<br>  CONFIG_BLK_DEV_IDE_AU1XXX_MDMA2_DBDMA  - enable the MWDMA mode
<br>  CONFIG_BLK_DEV_IDE_AU1XXX_BURSTABLE_ON - set Burstable FIFO in DBDMA
<br>                                           controller
<br>
<br>
<br>SUPPORTED IDE MODES
<br>-------------------
<br>
<br>The AU1XXX IDE driver supported all PIO modes - PIO mode 0/1/2/3/4 - and all
<br>MWDMA modes - MWDMA 0/1/2 -. There is no support for SWDMA and UDMA mode.
<br>
<br>To change the PIO mode use the program hdparm with option -p, e.g.
<br>'hdparm -p0 [device]' for PIO mode 0. To enable the MWDMA mode use the option
<br>-X, e.g. 'hdparm -X32 [device]' for MWDMA mode 0.
<br>
<br>
<br>PERFORMANCE CONFIGURATIONS
<br>--------------------------
<br>
<br>If the used system doesn't need USB support enable the following kernel configs:
<br>
<br>CONFIG_IDE=y
<br>CONFIG_BLK_DEV_IDE=y
<br>CONFIG_IDE_GENERIC=y
<br>CONFIG_BLK_DEV_IDEPCI=y
<br>CONFIG_BLK_DEV_GENERIC=y
<br>CONFIG_BLK_DEV_IDEDMA_PCI=y
<br>CONFIG_IDEDMA_PCI_AUTO=y
<br>CONFIG_BLK_DEV_IDE_AU1XXX=y
<br>CONFIG_BLK_DEV_IDE_AU1XXX_MDMA2_DBDMA=y
<br>CONFIG_BLK_DEV_IDEDMA=y
<br>CONFIG_IDEDMA_AUTO=y
<br>
<br>Also define 'IDE_AU1XXX_BURSTMODE' in 'drivers/ide/mips/au1xxx-ide.c' to enable
<br>the burst support on DBDMA controller.
<br>
<br>If the used system need the USB support enable the following kernel configs for
<br>high IDE to USB throughput.
<br>
<br>CONFIG_BLK_DEV_IDEDISK=y
<br>CONFIG_IDE_GENERIC=y
<br>CONFIG_BLK_DEV_IDEPCI=y
<br>CONFIG_BLK_DEV_GENERIC=y
<br>CONFIG_BLK_DEV_IDEDMA_PCI=y
<br>CONFIG_IDEDMA_PCI_AUTO=y
<br>CONFIG_BLK_DEV_IDE_AU1XXX=y
<br>CONFIG_BLK_DEV_IDE_AU1XXX_MDMA2_DBDMA=y
<br>CONFIG_BLK_DEV_IDEDMA=y
<br>CONFIG_IDEDMA_AUTO=y
<br>
<br>Also undefine 'IDE_AU1XXX_BURSTMODE' in 'drivers/ide/mips/au1xxx-ide.c' to
<br>disable the burst support on DBDMA controller.
<br>
<br>
<br>ACKNOWLEDGMENTS
<br>---------------
<br>
<br>These drivers wouldn't have been done without the base of kernel 2.4.x AU1XXX
<br>IDE driver from AMD.
<br>
<br>Additional input also from:
<br>Matthias Lenk <matthias.lenk@amd.com>
<br>
<br>Happy hacking!
<br>Enrico Walther <enrico.walther@amd.com>
<br><p></p><div class="separator"></div><br><p><h2>cris</h2></p>Linux on the CRIS architecture
<br>==============================
<br>
<br>This is a port of Linux to Axis Communications ETRAX 100LX,
<br>ETRAX FS and ARTPEC-3 embedded network CPUs.
<br>
<br>For more information about CRIS and ETRAX please see further below.
<br>
<br>In order to compile this you need a version of gcc with support for the
<br>ETRAX chip family. Please see this link for more information on how to
<br>download the compiler and other tools useful when building and booting
<br>software for the ETRAX platform:
<br>
<br>http://developer.axis.com/wiki/doku.php?id=axis:install-howto-2_20
<br>
<br>What is CRIS ?
<br>--------------
<br>
<br>CRIS is an acronym for 'Code Reduced Instruction Set'. It is the CPU
<br>architecture in Axis Communication AB's range of embedded network CPU's,
<br>called ETRAX.
<br>
<br>The ETRAX 100LX chip
<br>--------------------
<br>
<br>For reference, please see the following link:
<br>
<br>http://www.axis.com/products/dev_etrax_100lx/index.htm
<br>
<br>The ETRAX 100LX is a 100 MIPS processor with 8kB cache, MMU, and a very broad
<br>range of built-in interfaces, all with modern scatter/gather DMA.
<br>
<br>Memory interfaces:
<br>
<br>	* SRAM
<br>	* NOR-flash/ROM
<br>	* EDO or page-mode DRAM
<br>	* SDRAM
<br>
<br>I/O interfaces:
<br>
<br>	* one 10/100 Mbit/s ethernet controller
<br>	* four serial-ports (up to 6 Mbit/s)
<br>	* two synchronous serial-ports for multimedia codec's etc.
<br>	* USB host controller and USB slave
<br>	* ATA
<br>	* SCSI
<br>	* two parallel-ports
<br>	* two generic 8-bit ports
<br>
<br>	(not all interfaces are available at the same time due to chip pin
<br>         multiplexing)
<br>
<br>ETRAX 100LX is CRISv10 architecture.
<br>
<br>
<br>The ETRAX FS and ARTPEC-3 chips
<br>-------------------------------
<br>
<br>The ETRAX FS is a 200MHz 32-bit RISC processor with on-chip 16kB
<br>I-cache and 16kB D-cache and with a wide range of device interfaces
<br>including multiple high speed serial ports and an integrated USB 1.1 PHY.
<br>
<br>The ARTPEC-3 is a variant of the ETRAX FS with additional IO-units
<br>used by the Axis Communications network cameras.
<br>
<br>See below link for more information:
<br>
<br>http://www.axis.com/products/dev_etrax_fs/index.htm
<br>
<br>ETRAX FS and ARTPEC-3 are both CRISv32 architectures.
<br>
<br>Bootlog
<br>-------
<br>
<br>Just as an example, this is the debug-output from a boot of Linux 2.4 on
<br>a board with ETRAX 100LX. The displayed BogoMIPS value is 5 times too small :)
<br>At the end you see some user-mode programs booting like telnet and ftp daemons.
<br>
<br>Linux version 2.4.1 (bjornw@godzilla.axis.se) (gcc version 2.96 20000427 (experimental)) #207 Wed Feb 21 15:48:15 CET 2001
<br>ROM fs in RAM, size 1376256 bytes
<br>Setting up paging and the MMU.
<br>On node 0 totalpages: 2048
<br>zone(0): 2048 pages.
<br>zone(1): 0 pages.
<br>zone(2): 0 pages.
<br>Linux/CRIS port on ETRAX 100LX (c) 2001 Axis Communications AB
<br>Kernel command line: 
<br>Calibrating delay loop... 19.91 BogoMIPS
<br>Memory: 13872k/16384k available (587k kernel code, 2512k reserved, 44k data, 24k init)
<br>kmem_create: Forcing size word alignment - vm_area_struct
<br>kmem_create: Forcing size word alignment - filp
<br>Dentry-cache hash table entries: 2048 (order: 1, 16384 bytes)
<br>Buffer-cache hash table entries: 2048 (order: 0, 8192 bytes)
<br>Page-cache hash table entries: 2048 (order: 0, 8192 bytes)
<br>kmem_create: Forcing size word alignment - kiobuf
<br>kmem_create: Forcing size word alignment - bdev_cache
<br>Inode-cache hash table entries: 1024 (order: 0, 8192 bytes)
<br>kmem_create: Forcing size word alignment - inode_cache
<br>POSIX conformance testing by UNIFIX
<br>Linux NET4.0 for Linux 2.4
<br>Based upon Swansea University Computer Society NET3.039
<br>Starting kswapd v1.8
<br>kmem_create: Forcing size word alignment - file lock cache
<br>kmem_create: Forcing size word alignment - blkdev_requests
<br>block: queued sectors max/low 9109kB/3036kB, 64 slots per queue
<br>ETRAX 100LX 10/100MBit ethernet v2.0 (c) 2000 Axis Communications AB
<br>eth0 initialized
<br>eth0: changed MAC to 00:40:8C:CD:00:00
<br>ETRAX 100LX serial-driver $Revision: 1.7 $, (c) 2000 Axis Communications AB
<br>ttyS0 at 0xb0000060 is a builtin UART with DMA
<br>ttyS1 at 0xb0000068 is a builtin UART with DMA
<br>ttyS2 at 0xb0000070 is a builtin UART with DMA
<br>ttyS3 at 0xb0000078 is a builtin UART with DMA
<br>Axis flash mapping: 200000 at 50000000
<br>Axis flash: Found 1 x16 CFI device at 0x0 in 16 bit mode
<br> Amd/Fujitsu Extended Query Table v1.0 at 0x0040
<br>Axis flash: JEDEC Device ID is 0xC4. Assuming broken CFI table.
<br>Axis flash: Swapping erase regions for broken CFI table.
<br>number of CFI chips: 1
<br> Using default partition table
<br>I2C driver v2.2, (c) 1999-2001 Axis Communications AB
<br>ETRAX 100LX GPIO driver v2.1, (c) 2001 Axis Communications AB
<br>NET4: Linux TCP/IP 1.0 for NET4.0
<br>IP Protocols: ICMP, UDP, TCP
<br>kmem_create: Forcing size word alignment - ip_dst_cache
<br>IP: routing cache hash table of 1024 buckets, 8Kbytes
<br>TCP: Hash tables configured (established 2048 bind 2048)
<br>NET4: Unix domain sockets 1.0/SMP for Linux NET4.0.
<br>VFS: Mounted root (cramfs filesystem) readonly.
<br>Init starts up...
<br>Mounted none on /proc ok.
<br>Setting up eth0 with ip 10.13.9.116 and mac 00:40:8c:18:04:60
<br>eth0: changed MAC to 00:40:8C:18:04:60
<br>Setting up lo with ip 127.0.0.1
<br>Default gateway is 10.13.9.1
<br>Hostname is bbox1
<br>Telnetd starting, using port 23.
<br>  using /bin/sash as shell.
<br>sftpd[15]: sftpd $Revision: 1.7 $ starting up
<br>
<br>
<br>
<br>And here is how some /proc entries look:
<br>
<br>17# cd /proc
<br>17# cat cpuinfo
<br>cpu             : CRIS
<br>cpu revision    : 10
<br>cpu model       : ETRAX 100LX
<br>cache size      : 8 kB
<br>fpu             : no
<br>mmu             : yes
<br>ethernet        : 10/100 Mbps
<br>token ring      : no
<br>scsi            : yes
<br>ata             : yes
<br>usb             : yes
<br>bogomips        : 99.84
<br>
<br>17# cat meminfo
<br>        total:    used:    free:  shared: buffers:  cached:
<br>Mem:   7028736   925696  6103040   114688        0   229376
<br>Swap:        0        0        0
<br>MemTotal:         6864 kB
<br>MemFree:          5960 kB
<br>MemShared:         112 kB
<br>Buffers:             0 kB
<br>Cached:            224 kB
<br>Active:            224 kB
<br>Inact_dirty:         0 kB
<br>Inact_clean:         0 kB
<br>Inact_target:        0 kB
<br>HighTotal:           0 kB
<br>HighFree:            0 kB
<br>LowTotal:         6864 kB
<br>LowFree:          5960 kB
<br>SwapTotal:           0 kB
<br>SwapFree:            0 kB
<br>17# ls -l /bin
<br>-rwxr-xr-x  1 342      100         10356  Jan 01 00:00 ifconfig
<br>-rwxr-xr-x  1 342      100         17548  Jan 01 00:00 init
<br>-rwxr-xr-x  1 342      100          9488  Jan 01 00:00 route
<br>-rwxr-xr-x  1 342      100         46036  Jan 01 00:00 sftpd
<br>-rwxr-xr-x  1 342      100         48104  Jan 01 00:00 sh
<br>-rwxr-xr-x  1 342      100         16252  Jan 01 00:00 telnetd
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br><p></p><div class="separator"></div><br><p><h2>oss</h2></p>Legacy audio driver for YMF7xx PCI cards.
<br>
<br>
<br>FIRST OF ALL
<br>============
<br>
<br>  This code references YAMAHA's sample codes and data sheets.
<br>  I respect and thank for all people they made open the information
<br>  about YMF7xx cards.
<br>
<br>  And this codes heavily based on Jeff Garzik <jgarzik@pobox.com>'s
<br>  old VIA 82Cxxx driver (via82cxxx.c). I also respect him.
<br>
<br>
<br>DISCLIMER
<br>=========
<br>
<br> This driver is currently at early ALPHA stage. It may cause serious
<br> damage to your computer when used.
<br> PLEASE USE IT AT YOUR OWN RISK.
<br>
<br>
<br>ABOUT THIS DRIVER
<br>=================
<br>
<br>  This code enables you to use your YMF724[A-F], YMF740[A-C], YMF744, YMF754
<br> cards. When enabled, your card acts as "SoundBlaster Pro" compatible card.
<br> It can only play 22.05kHz / 8bit / Stereo samples, control external MIDI
<br> port.
<br> If you want to use your card as recent "16-bit" card, you should use
<br> Alsa or OSS/Linux driver. Of course you can write native PCI driver for
<br> your cards :)
<br>
<br>
<br>USAGE
<br>=====
<br>
<br> # modprobe ymfsb (options)
<br>
<br>
<br>OPTIONS FOR MODULE
<br>==================
<br>
<br>  io           : SB base address     (0x220, 0x240, 0x260, 0x280)
<br>  synth_io     : OPL3 base address   (0x388, 0x398, 0x3a0, 0x3a8)
<br>  dma          : DMA number          (0,1,3)
<br>  master_volume: AC'97 PCM out Vol   (0-100)
<br>  spdif_out    : SPDIF-out flag      (0:disable 1:enable)
<br>
<br> These options will change in future...
<br>
<br>
<br>FREQUENCY
<br>=========
<br>
<br>  When playing sounds via this driver, you will hear its pitch is slightly
<br> lower than original sounds. Since this driver recognizes your card acts
<br> with 21.739kHz sample rates rather than 22.050kHz (I think it must be
<br> hardware restriction). So many players become tone deafness.
<br> To prevent this, you should express some options to your sound player
<br> that specify correct sample frequency. For example, to play your MP3 file
<br> correctly with mpg123, specify the frequency like following:
<br>
<br>  %  mpg123 -r 21739 foo.mp3
<br>
<br>
<br>SPDIF OUT
<br>=========
<br>
<br>  With installing modules with option 'spdif_out=1', you can enjoy your
<br> sounds from SPDIF-out of your card (if it had).
<br> Its Fs is fixed to 48kHz (It never means the sample frequency become 
<br> up to 48kHz. All sounds via SPDIF-out also 22kHz samples). So your
<br> digital-in capable components has to be able to handle 48kHz Fs.
<br>
<br>
<br>COPYING
<br>=======
<br>
<br> This program is free software; you can redistribute it and/or modify
<br> it under the terms of the GNU General Public License as published by
<br> the Free Software Foundation; either version 2, or (at your option)
<br> any later version.
<br>
<br> This program is distributed in the hope that it will be useful, but
<br> WITHOUT ANY WARRANTY; without even the implied warranty of
<br> MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
<br> General Public License for more details.
<br>
<br> You should have received a copy of the GNU General Public License
<br> along with this program; if not, write to the Free Software
<br> Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
<br>
<br>
<br>TODO
<br>====
<br> * support for multiple cards
<br>   (set the different SB_IO,MPU_IO,OPL_IO for each cards)
<br>
<br> * support for OPL (dmfm) : There will be no requirements... :-<
<br>
<br>
<br>AUTHOR
<br>======
<br>
<br> Daisuke Nagano <breeze.nagano@nifty.ne.jp>
<br>
<br><p></p><div class="separator"></div><br><p><h2>oss</h2></p>Building a modular sound driver
<br>================================
<br>
<br>  The following information is current as of linux-2.1.85. Check the other
<br>readme files, especially README.OSS, for information not specific to
<br>making sound modular.
<br>
<br>  First, configure your kernel. This is an idea of what you should be
<br>setting in the sound section:
<br>
<br><M> Sound card support 
<br>
<br><M> 100% Sound Blaster compatibles (SB16/32/64, ESS, Jazz16) support 
<br>
<br>  I have SoundBlaster. Select your card from the list.
<br>
<br><M> Generic OPL2/OPL3 FM synthesizer support 
<br><M> FM synthesizer (YM3812/OPL-3) support 
<br>
<br>  If you don't set these, you will probably find you can play .wav files
<br>but not .midi. As the help for them says, set them unless you know your
<br>card does not use one of these chips for FM support.
<br>
<br>  Once you are configured, make zlilo, modules, modules_install; reboot.
<br>Note that it is no longer necessary or possible to configure sound in the
<br>drivers/sound dir. Now one simply configures and makes one's kernel and
<br>modules in the usual way.
<br>
<br> Then, add to your /etc/modprobe.d/oss.conf something like:
<br>
<br>alias char-major-14-* sb
<br>install sb /sbin/modprobe -i sb && /sbin/modprobe adlib_card
<br>options sb io=0x220 irq=7 dma=1 dma16=5 mpu_io=0x330
<br>options adlib_card io=0x388     # FM synthesizer
<br>
<br> Alternatively, if you have compiled in kernel level ISAPnP support:
<br>
<br>alias char-major-14 sb
<br>softdep sb post: adlib_card
<br>options adlib_card io=0x388
<br>
<br>  The effect of this is that the sound driver and all necessary bits and
<br>pieces autoload on demand, assuming you use kerneld (a sound choice) and
<br>autoclean when not in use. Also, options for the device drivers are
<br>set. They will not work without them. Change as appropriate for your card.
<br>If you are not yet using the very cool kerneld, you will have to "modprobe
<br>-k sb" yourself to get things going. Eventually things may be fixed so
<br>that this kludgery is not necessary; for the time being, it seems to work
<br>well.
<br>
<br>  Replace 'sb' with the driver for your card, and give it the right
<br>options. To find the filename of the driver, look in
<br>/lib/modules/<kernel-version>/misc. Mine looks like:
<br>
<br>adlib_card.o # This is the generic OPLx driver
<br>opl3.o # The OPL3 driver
<br>sb.o # <<The SoundBlaster driver. Yours may differ.>>
<br>sound.o # The sound driver
<br>uart401.o # Used by sb, maybe other cards
<br>
<br> Whichever card you have, try feeding it the options that would be the
<br>default if you were making the driver wired, not as modules. You can
<br>look at function referred to by module_init() for the card to see what
<br>args are expected.
<br>
<br> Note that at present there is no way to configure the io, irq and other
<br>parameters for the modular drivers as one does for the wired drivers.. One
<br>needs to pass the modules the necessary parameters as arguments, either
<br>with /etc/modprobe.d/*.conf or with command-line args to modprobe, e.g.
<br>
<br>modprobe sb io=0x220 irq=7 dma=1 dma16=5 mpu_io=0x330
<br>modprobe adlib_card io=0x388
<br>
<br> recommend using /etc/modprobe.d/*.conf.
<br>
<br>Persistent DMA Buffers:
<br>
<br>The sound modules normally allocate DMA buffers during open() and
<br>deallocate them during close(). Linux can often have problems allocating
<br>DMA buffers for ISA cards on machines with more than 16MB RAM. This is
<br>because ISA DMA buffers must exist below the 16MB boundary and it is quite
<br>possible that we can't find a large enough free block in this region after
<br>the machine has been running for any amount of time. The way to avoid this
<br>problem is to allocate the DMA buffers during module load and deallocate
<br>them when the module is unloaded. For this to be effective we need to load
<br>the sound modules right after the kernel boots, either manually or by an
<br>init script, and keep them around until we shut down. This is a little
<br>wasteful of RAM, but it guarantees that sound always works.
<br>
<br>To make the sound driver use persistent DMA buffers we need to pass the
<br>sound.o module a "dmabuf=1" command-line argument. This is normally done
<br>in /etc/modprobe.d/*.conf files like so:
<br>
<br>options sound		dmabuf=1
<br>
<br>If you have 16MB or less RAM or a PCI sound card, this is wasteful and
<br>unnecessary. It is possible that machine with 16MB or less RAM will find
<br>this option useful, but if your machine is so memory-starved that it
<br>cannot find a 64K block free, you will be wasting even more RAM by keeping
<br>the sound modules loaded and the DMA buffers allocated when they are not
<br>needed. The proper solution is to upgrade your RAM. But you do also have
<br>this improper solution as well. Use it wisely.
<br>
<br>  I'm afraid I know nothing about anything but my setup, being more of a
<br>text-mode guy anyway. If you have options for other cards or other helpful
<br>hints, send them to me, Jim Bray, jb@as220.org, http://as220.org/jb.
<br><p></p><div class="separator"></div><br><p><h2>oss</h2></p>Introduction
<br>------------
<br>
<br>This file is a collection of all the old Readme files distributed with
<br>OSS/Lite by Hannu Savolainen. Since the new Linux sound driver is founded
<br>on it I think these information may still be interesting for users that
<br>have to configure their sound system.
<br>
<br>Be warned: Alan Cox is the current maintainer of the Linux sound driver so if
<br>you have problems with it, please contact him or the current device-specific
<br>driver maintainer (e.g. for aedsp16 specific problems contact me). If you have
<br>patches, contributions or suggestions send them to Alan: I'm sure they are
<br>welcome.
<br>
<br>In this document you will find a lot of references about OSS/Lite or ossfree:
<br>they are gone forever. Keeping this in mind and with a grain of salt this
<br>document can be still interesting and very helpful.
<br>
<br>[ File edited 17.01.1999 - Riccardo Facchetti ]
<br>[ Edited miroSOUND section 19.04.2001 - Robert Siemer ]
<br>
<br>OSS/Free version 3.8 release notes
<br>----------------------------------
<br>
<br>Please read the SOUND-HOWTO (available from sunsite.unc.edu and other Linux FTP 
<br>sites). It gives instructions about using sound with Linux. It's bit out of
<br>date but still very useful. Information about bug fixes and such things
<br>is available from the web page (see above).
<br>
<br>Please check http://www.opensound.com/pguide for more info about programming
<br>with OSS API.
<br>
<br>   ====================================================
<br>-  THIS VERSION ____REQUIRES____ Linux 2.1.57 OR LATER.
<br>   ====================================================
<br>
<br>Packages "snd-util-3.8.tar.gz" and "snd-data-0.1.tar.Z"
<br>contain useful utilities to be used with this driver.
<br>See http://www.opensound.com/ossfree/ for
<br>download instructions.
<br>
<br>If you are looking for the installation instructions, please
<br>look forward into this document.
<br>
<br>Supported sound cards
<br>---------------------
<br>
<br>See below.
<br>
<br>Contributors
<br>------------
<br>
<br>This driver contains code by several contributors. In addition several other
<br>persons have given useful suggestions. The following is a list of major
<br>contributors. (I could have forgotten some names.)
<br>
<br>	Craig Metz	1/2 of the PAS16 Mixer and PCM support
<br>	Rob Hooft	Volume computation algorithm for the FM synth.
<br>	Mika Liljeberg	uLaw encoding and decoding routines
<br>	Jeff Tranter	Linux SOUND HOWTO document
<br>	Greg Lee	Volume computation algorithm for the GUS and
<br>			lots of valuable suggestions.
<br>	Andy Warner	ISC port
<br>	Jim Lowe,
<br>	Amancio Hasty Jr	FreeBSD/NetBSD port
<br>	Anders Baekgaard 	Bug hunting and valuable suggestions.
<br>	Joerg Schubert	SB16 DSP support (initial version).
<br>	Andrew Robinson Improvements to the GUS driver
<br>	Megens SA	MIDI recording for SB and SB Pro (initial version).
<br>	Mikael Nordqvist  Linear volume support for GUS and
<br>			  nonblocking /dev/sequencer.
<br>	Ian Hartas		SVR4.2 port
<br>	Markus Aroharju	and
<br>	Risto Kankkunen		Major contributions to the mixer support
<br>				of GUS v3.7.
<br>	Hunyue Yau	Mixer support for SG NX Pro.
<br>	Marc Hoffman	PSS support (initial version).
<br>	Rainer Vranken	Initialization for Jazz16 (initial version).
<br>	Peter Trattler	Initial version of loadable module support for Linux.
<br>	JRA Gibson	16 bit mode for Jazz16 (initial version)
<br>	Davor Jadrijevic MAD16 support (initial version)
<br>	Gregor Hoffleit	Mozart support (initial version)
<br>	Riccardo Facchetti Audio Excel DSP 16 (aedsp16) support
<br>	James Hightower Spotting a tiny but important bug in CS423x support.
<br>	Denis Sablic	OPTi 82C924 specific enhancements (non PnP mode)
<br>	Tim MacKenzie	Full duplex support for OPTi 82C930.
<br>	
<br>	Please look at lowlevel/README for more contributors.
<br>
<br>There are probably many other names missing. If you have sent me some
<br>patches and your name is not in the above list, please inform me.
<br>
<br>Sending your contributions or patches
<br>-------------------------------------
<br>
<br>First of all it's highly recommended to contact me before sending anything
<br>or before even starting to do any work. Tell me what you suggest to be
<br>changed or what you have planned to do. Also ensure you are using the
<br>very latest (development) version of OSS/Free since the change may already be
<br>implemented there. In general it's a major waste of time to try to improve a
<br>several months old version. Information about the latest version can be found
<br>from http://www.opensound.com/ossfree. In general there is no point in
<br>sending me patches relative to production kernels.
<br>
<br>Sponsors etc.
<br>-------------
<br>
<br>The following companies have greatly helped development of this driver 
<br>in form of a free copy of their product:
<br>
<br>Novell, Inc.		UnixWare personal edition + SDK
<br>The Santa Cruz Operation, Inc. 	A SCO OpenServer + SDK
<br>Ensoniq Corp,		a SoundScape card and extensive amount of assistance
<br>MediaTrix Peripherals Inc, a AudioTrix Pro card + SDK
<br>Acer, Inc.		a pair of AcerMagic S23 cards.
<br>
<br>In addition the following companies have provided me sufficient amount
<br>of technical information at least some of their products (free or $$$):
<br>
<br>Advanced Gravis Computer Technology Ltd.
<br>Media Vision Inc.
<br>Analog Devices Inc.
<br>Logitech Inc.
<br>Aztech Labs Inc.
<br>Crystal Semiconductor Corporation,
<br>Integrated Circuit Systems Inc.
<br>OAK Technology
<br>OPTi
<br>Turtle Beach
<br>miro
<br>Ad Lib Inc. ($$)
<br>Music Quest Inc. ($$)
<br>Creative Labs ($$$)
<br>
<br>If you have some problems
<br>=========================
<br>
<br>Read the sound HOWTO (sunsite.unc.edu:/pub/Linux/docs/...?).
<br>Also look at the home page (http://www.opensound.com/ossfree). It may
<br>contain info about some recent bug fixes.
<br>
<br>It's likely that you have some problems when trying to use the sound driver
<br>first time. Sound cards don't have standard configuration so there are no
<br>good default configuration to use. Please try to use same I/O, DMA and IRQ
<br>values for the sound card than with DOS.
<br>
<br>If you get an error message when trying to use the driver, please look
<br>at /var/adm/messages for more verbose error message.
<br>
<br>
<br>The following errors are likely with /dev/dsp and /dev/audio.
<br>
<br>	- "No such device or address".
<br>	This error indicates that there are no suitable hardware for the
<br>	device file or the sound driver has been compiled without support for
<br>	this particular device. For example /dev/audio and /dev/dsp will not
<br>	work if "digitized voice support" was not enabled during "make config".
<br>	
<br>	- "Device or resource busy". Probably the IRQ (or DMA) channel 
<br>	required by the sound card is in use by some other device/driver.
<br>
<br>	- "I/O error". Almost certainly (99%) it's an IRQ or DMA conflict.
<br>	Look at the kernel messages in /var/adm/notice for more info.
<br>
<br>	- "Invalid argument". The application is calling ioctl()
<br>	with impossible parameters. Check that the application is
<br>	for sound driver version 2.X or later.
<br>
<br>Linux installation
<br>==================
<br>
<br>IMPORTANT!	Read this if you are installing a separately
<br>		distributed version of this driver.
<br>
<br>		Check that your kernel version works with this
<br>		release of the driver (see Readme). Also verify
<br>		that your current kernel version doesn't have more
<br>		recent sound driver version than this one. IT'S HIGHLY
<br>		RECOMMENDED THAT YOU USE THE SOUND DRIVER VERSION THAT
<br>		IS DISTRIBUTED WITH KERNEL SOURCES.
<br>
<br>- When installing separately distributed sound driver you should first
<br>  read the above notice. Then try to find proper directory where and how
<br>  to install the driver sources. You should not try to install a separately
<br>  distributed driver version if you are not able to find the proper way
<br>  yourself (in this case use the version that is distributed with kernel
<br>  sources). Remove old version of linux/drivers/sound directory before
<br>  installing new files.
<br>
<br>- To build the device files you need to run the enclosed shell script 
<br>  (see below). You need to do this only when installing sound driver
<br>  first time or when upgrading to much recent version than the earlier
<br>  one.
<br>
<br>- Configure and compile Linux as normally (remember to include the
<br>  sound support during "make config"). Please refer to kernel documentation
<br>  for instructions about configuring and compiling kernel. File Readme.cards
<br>  contains card specific instructions for configuring this driver for
<br>  use with various sound cards.
<br>
<br>Boot time configuration (using lilo and insmod) 
<br>-----------------------------------------------
<br>
<br>This information has been removed. Too many users didn't believe
<br>that it's really not necessary to use this method. Please look at
<br>Readme of sound driver version 3.0.1 if you still want to use this method.
<br>
<br>Problems
<br>--------
<br>
<br>Common error messages:
<br>
<br>- /dev/???????: No such file or directory.
<br>Run the script at the end of this file.
<br>
<br>- /dev/???????: No such device.
<br>You are not running kernel which contains the sound driver. When using
<br>modularized sound driver this error means that the sound driver is not
<br>loaded.
<br>
<br>- /dev/????: No such device or address.
<br>Sound driver didn't detect suitable card when initializing. Please look at
<br>Readme.cards for info about configuring the driver with your card. Also
<br>check for possible boot (insmod) time error messages in /var/adm/messages.
<br>
<br>- Other messages or problems
<br>Please check http://www.opensound.com/ossfree for more info.
<br>
<br>Configuring version 3.8 (for Linux) with some common sound cards
<br>================================================================
<br>
<br>This document describes configuring sound cards with the freeware version of
<br>Open Sound Systems (OSS/Free). Information about the commercial version
<br>(OSS/Linux) and its configuration is available from 
<br>http://www.opensound.com/linux.html. Information presented here is
<br>not valid for OSS/Linux. 
<br>
<br>If you are unsure about how to configure OSS/Free
<br>you can download the free evaluation version of OSS/Linux from the above
<br>address. There is a chance that it can autodetect your sound card. In this case
<br>you can use the information included in soundon.log when configuring OSS/Free.
<br>
<br>
<br>IMPORTANT!	This document covers only cards that were "known" when
<br>		this driver version was released. Please look at
<br>		http://www.opensound.com/ossfree for info about
<br>		cards introduced recently.
<br>
<br>		When configuring the sound driver, you should carefully
<br>		check each sound configuration option (particularly
<br>		"Support for /dev/dsp and /dev/audio"). The default values
<br>		offered by these programs are not necessarily valid.
<br>
<br>
<br>THE BIGGEST MISTAKES YOU CAN MAKE
<br>=================================
<br>
<br>1. Assuming that the card is Sound Blaster compatible when it's not.
<br>--------------------------------------------------------------------
<br>
<br>The number one mistake is to assume that your card is compatible with
<br>Sound Blaster. Only the cards made by Creative Technology or which have
<br>one or more chips labeled by Creative are SB compatible. In addition there
<br>are few sound chipsets which are SB compatible in Linux such as ESS1688 or
<br>Jazz16. Note that SB compatibility in DOS/Windows does _NOT_ mean anything
<br>in Linux. 
<br>
<br>IF YOU REALLY ARE 150% SURE YOU HAVE A SOUND BLASTER YOU CAN SKIP THE REST OF
<br>THIS CHAPTER.
<br>
<br>For most other "supposed to be SB compatible" cards you have to use other
<br>than SB drivers (see below).  It is possible to get most sound cards to work
<br>in SB mode but in general it's a complete waste of time. There are several
<br>problems which you will encounter by using SB mode with cards that are not
<br>truly SB compatible:
<br>
<br>- The SB emulation is at most SB Pro (DSP version 3.x) which means that 
<br>you get only 8 bit audio (there is always an another ("native") mode which
<br>gives the 16 bit capability). The 8 bit only operation is the reason why
<br>many users claim that sound quality in Linux is much worse than in DOS.
<br>In addition some applications require 16 bit mode and they produce just
<br>noise with a 8 bit only device.
<br>- The card may work only in some cases but refuse to work most of the
<br>time. The SB compatible mode always requires special initialization which is 
<br>done by the DOS/Windows drivers. This kind of cards work in Linux after
<br>you have warm booted it after DOS but they don't work after cold boot
<br>(power on or reset).
<br>- You get the famous "DMA timed out" messages. Usually all SB clones have
<br>software selectable IRQ and DMA settings. If the (power on default) values
<br>currently used by the card don't match configuration of the driver you will
<br>get the above error message whenever you try to record or play. There are
<br>few other reasons to the DMA timeout message but using the SB mode seems
<br>to be the most common cause.
<br>
<br>2. Trying to use a PnP (Plug & Play) card just like an ordinary sound card
<br>--------------------------------------------------------------------------
<br>
<br>Plug & Play is a protocol defined by Intel and Microsoft. It lets operating
<br>systems to easily identify and reconfigure I/O ports, IRQs and DMAs of ISA
<br>cards. The problem with PnP cards is that the standard Linux doesn't currently
<br>(versions 2.1.x and earlier) don't support PnP. This means that you will have
<br>to use some special tricks (see later) to get a PnP card alive. Many PnP cards
<br>work after they have been initialized but this is not always the case.
<br>
<br>There are sometimes both PnP and non-PnP versions of the same sound card.
<br>The non-PnP version is the original model which usually has been discontinued
<br>more than an year ago. The PnP version has the same name but with "PnP"
<br>appended to it (sometimes not). This causes major confusion since the non-PnP
<br>model works with Linux but the PnP one doesn't.
<br>
<br>You should carefully check if "Plug & Play" or "PnP" is mentioned in the name
<br>of the card or in the documentation or package that came with the card. 
<br>Everything described in the rest of this document is not necessarily valid for
<br>PnP models of sound cards even you have managed to wake up the card properly.
<br>Many PnP cards are simply too different from their non-PnP ancestors which are
<br>covered by this document.
<br>
<br>
<br>Cards that are not (fully) supported by this driver
<br>===================================================
<br>
<br>See http://www.opensound.com/ossfree for information about sound cards 
<br>to be supported in future. 
<br>
<br>
<br>How to use sound without recompiling kernel and/or sound driver
<br>===============================================================
<br>
<br>There is a commercial sound driver which comes in precompiled form and doesn't
<br>require recompiling of the kernel. See http://www.4Front-tech.com/oss.html for
<br>more info.
<br>
<br>
<br>Configuring PnP cards
<br>=====================
<br>
<br>New versions of most sound cards use the so-called ISA PnP protocol for
<br>soft configuring their I/O, IRQ, DMA and shared memory resources.
<br>Currently at least cards made by Creative Technology (SB32 and SB32AWE
<br>PnP), Gravis (GUS PnP and GUS PnP Pro), Ensoniq (Soundscape PnP) and
<br>Aztech (some Sound Galaxy models) use PnP technology. The CS4232/4236 audio
<br>chip by Crystal Semiconductor (Intel Atlantis, HP Pavilion and many other
<br>motherboards) is also based on PnP technology but there is a "native" driver
<br>available for it (see information about CS4232 later in this document).
<br>
<br>PnP sound cards (as well as most other PnP ISA cards) are not supported
<br>by this version of the driver . Proper
<br>support for them should be released during 97 once the kernel level
<br>PnP support is available.
<br>
<br>There is a method to get most of the PnP cards to work. The basic method
<br>is the following:
<br>
<br>1) Boot DOS so the card's DOS drivers have a chance to initialize it.
<br>2) _Cold_ boot to Linux by using "loadlin.exe".  Hitting ctrl-alt-del
<br>works with older machines but causes a hard reset of all cards on recent
<br>(Pentium) machines.
<br>3) If you have the sound driver in Linux configured properly, the card should
<br>work now. "Proper" means that I/O, IRQ and DMA settings are the same as in
<br>DOS. The hard part is to find which settings were used. See the documentation of
<br>your card for more info.
<br>
<br>Windows 95 could work as well as DOS but running loadlin may be difficult.
<br>Probably you should "shut down" your machine to MS-DOS mode before running it.
<br>
<br>Some machines have a BIOS utility for setting PnP resources. This is a good
<br>way to configure some cards. In this case you don't need to boot DOS/Win95
<br>before starting Linux.
<br>
<br>Another way to initialize PnP cards without DOS/Win95 is a Linux based
<br>PnP isolation tool. When writing this there is a pre alpha test version
<br>of such a tool available from ftp://ftp.demon.co.uk/pub/unix/linux/utils. The
<br>file is called isapnptools-*. Please note that this tool is just a temporary
<br>solution which may be incompatible with future kernel versions having proper
<br>support for PnP cards. There are bugs in setting DMA channels in earlier
<br>versions of isapnptools so at least version 1.6 is required with sound cards.
<br>
<br>Yet another way to use PnP cards is to use (commercial) OSS/Linux drivers.  See
<br>http://www.opensound.com/linux.html for more info. This is probably the way you
<br>should do it if you don't want to spend time recompiling the kernel and 
<br>required tools.
<br>
<br>
<br>Read this before trying to configure the driver
<br>===============================================
<br>
<br>There are currently many cards that work with this driver. Some of the cards
<br>have native support while others work since they emulate some other
<br>card (usually SB, MSS/WSS and/or MPU401). The following cards have native
<br>support in the driver. Detailed instructions for configuring these cards
<br>will be given later in this document.
<br>
<br>Pro Audio Spectrum 16 (PAS16) and compatibles:
<br>	Pro Audio Spectrum 16
<br>	Pro Audio Studio 16
<br>	Logitech Sound Man 16
<br>	NOTE! The original Pro Audio Spectrum as well as the PAS+ are not
<br>	      and will not be supported by the driver.
<br>
<br>Media Vision Jazz16 based cards
<br>	Pro Sonic 16
<br>	Logitech SoundMan Wave
<br>	(Other Jazz based cards should work but I don't have any reports
<br>	about them).
<br>
<br>Sound Blasters
<br>	SB 1.0 to 2.0
<br>	SB Pro
<br>	SB 16
<br>	SB32/64/AWE
<br>		Configure SB32/64/AWE just like SB16. See lowlevel/README.awe
<br>		for information about using the wave table synth.
<br>	        NOTE! AWE63/Gold and 16/32/AWE "PnP" cards need to be activated
<br>		      using isapnptools before they work with OSS/Free.
<br>	SB16 compatible cards by other manufacturers than Creative.
<br>		You have been fooled since there are _no_ SB16 compatible
<br>		cards on the market (as of May 1997). It's likely that your card
<br>		is compatible just with SB Pro but there is also a non-SB-
<br>		compatible 16 bit mode. Usually it's MSS/WSS but it could also
<br>		be a proprietary one like MV Jazz16 or ESS ES688. OPTi
<br>		MAD16 chips are very common in so called "SB 16 bit cards"
<br>		(try with the MAD16 driver).
<br>
<br>	======================================================================
<br>	"Supposed to be SB compatible" cards.
<br>		Forget the SB compatibility and check for other alternatives
<br>		first. The only cards that work with the SB driver in
<br>		Linux have been made by Creative Technology (there is at least
<br>		one chip on the card with "CREATIVE" printed on it). The
<br>		only other SB compatible chips are ESS and Jazz16 chips
<br>		(maybe ALSxxx chips too but they probably don't work).
<br>		Most other "16 bit SB compatible" cards such as "OPTi/MAD16" or
<br>		"Crystal" are _NOT_ SB compatible in Linux.
<br>
<br>		Practically all sound cards have some kind of SB emulation mode
<br>		in addition to their native (16 bit) mode. In most cases this
<br>		(8 bit only) SB compatible mode doesn't work with Linux. If
<br>		you get it working it may cause problems with games and
<br>		applications which require 16 bit audio. Some 16 bit only
<br>		applications don't check if the card actually supports 16 bits.
<br>		They just dump 16 bit data to a 8 bit card which produces just
<br>		noise.
<br>
<br>		In most cases the 16 bit native mode is supported by Linux.
<br>		Use the SB mode with "clones" only if you don't find anything
<br>		better from the rest of this doc.
<br>	======================================================================
<br>
<br>Gravis Ultrasound (GUS)
<br>	GUS
<br>	GUS + the 16 bit option
<br>	GUS MAX
<br>	GUS ACE (No MIDI port and audio recording)
<br>	GUS PnP (with RAM)
<br>
<br>MPU-401	and compatibles
<br>	The driver works both with the full (intelligent mode) MPU-401
<br>	cards (such as MPU IPC-T and MQX-32M) and with the UART only
<br>	dumb MIDI ports. MPU-401 is currently the most common MIDI
<br>	interface. Most sound cards are compatible with it. However,
<br>	don't enable MPU401 mode blindly. Many cards with native support
<br>	in the driver have their own MPU401 driver. Enabling the standard one
<br>	will cause a conflict with these cards. So check if your card is
<br>	in the list of supported cards before enabling MPU401.
<br>
<br>Windows Sound System (MSS/WSS)
<br>	Even when Microsoft has discontinued their own Sound System card 
<br>	they managed to make it a standard. MSS compatible cards are based on 
<br>	a codec chip which is easily available from at least two manufacturers
<br>	(AD1848 by Analog Devices and CS4231/CS4248 by Crystal Semiconductor).
<br>	Currently most sound cards are based on one of the MSS compatible codec
<br>	chips. The CS4231 is used in the high quality cards such as GUS MAX,
<br>	MediaTrix AudioTrix Pro and TB Tropez (GUS MAX is not MSS compatible). 
<br>
<br>	Having a AD1848, CS4248 or CS4231 codec chip on the card is a good
<br>	sign. Even if the card is not MSS compatible, it could be easy to write
<br>	support for it. Note also that most MSS compatible cards
<br>	require special boot time initialization which may not be present
<br>	in the driver. Also, some MSS compatible cards have native support.
<br>	Enabling the MSS support with these cards is likely to
<br>	cause a conflict. So check if your card is listed in this file before
<br>	enabling the MSS support.
<br>
<br>Yamaha FM synthesizers (OPL2, OPL3 (not OPL3-SA) and OPL4)
<br>	Most sound cards have a FM synthesizer chip. The OPL2 is a 2
<br>	operator chip used in the original AdLib card. Currently it's used
<br>	only in the cheapest (8 bit mono) cards. The OPL3 is a 4 operator 
<br>	FM chip which provides better sound quality and/or more available 
<br>	voices than the OPL2. The OPL4 is a new chip that has an OPL3 and
<br>	a wave table synthesizer packed onto the same chip. The driver supports
<br>	just the OPL3 mode directly. Most cards with an OPL4 (like
<br>	SM Wave and AudioTrix Pro) support the OPL4 mode using MPU401
<br>	emulation. Writing a native OPL4 support is difficult
<br>	since Yamaha doesn't give information about their sample ROM chip.
<br>
<br>	Enable the generic OPL2/OPL3 FM synthesizer support if your
<br>	card has a FM chip made by Yamaha. Don't enable it if your card
<br>	has a software (TRS) based FM emulator.
<br>
<br>	----------------------------------------------------------------
<br>	NOTE! OPL3-SA is different chip than the ordinary OPL3. In addition
<br>	to the FM synth this chip has also digital audio (WSS) and
<br>	MIDI (MPU401) capabilities. Support for OPL3-SA is described below.
<br>	----------------------------------------------------------------
<br>
<br>Yamaha OPL3-SA1
<br>
<br>	Yamaha OPL3-SA1 (YMF701) is an audio controller chip used on some
<br>	(Intel) motherboards and on cheap sound cards. It should not be
<br>	confused with the original OPL3 chip (YMF278) which is entirely
<br>        different chip. OPL3-SA1 has support for MSS, MPU401 and SB Pro
<br>	(not used in OSS/Free) in addition to the OPL3 FM synth.
<br>
<br>	There are also chips called OPL3-SA2, OPL3-SA3, ..., OPL3SA-N. They
<br>	are PnP chips and will not work with the OPL3-SA1 driver. You should 
<br>	use the standard MSS, MPU401 and OPL3 options with these chips and to
<br>	activate the card using isapnptools.
<br>
<br>4Front Technologies SoftOSS
<br>
<br>	SoftOSS is a software based wave table emulation which works with
<br>	any 16 bit stereo sound card. Due to its nature a fast CPU is
<br>	required (P133 is minimum). Although SoftOSS does _not_ use MMX
<br>	instructions it has proven out that recent processors (which appear
<br>	to have MMX) perform significantly better with SoftOSS than earlier
<br>	ones. For example a P166MMX beats a PPro200. SoftOSS should not be used
<br>	on 486 or 386 machines.
<br>
<br>	The amount of CPU load caused by SoftOSS can be controlled by
<br>	selecting the CONFIG_SOFTOSS_RATE and CONFIG_SOFTOSS_VOICES
<br>	parameters properly (they will be prompted by make config). It's
<br>	recommended to set CONFIG_SOFTOSS_VOICES to 32. If you have a
<br>	P166MMX or faster (PPro200 is not faster) you can set
<br>	CONFIG_SOFTOSS_RATE to 44100 (kHz). However with slower systems it
<br>	recommended to use sampling rates around 22050 or even 16000 kHz.
<br>	Selecting too high values for these parameters may hang your
<br>	system when playing MIDI files with hight degree of polyphony
<br>	(number of concurrently playing notes). It's also possible to
<br>	decrease CONFIG_SOFTOSS_VOICES. This makes it possible to use
<br>	higher sampling rates. However using fewer voices decreases
<br>	playback quality more than decreasing the sampling rate.
<br>
<br>	SoftOSS keeps the samples loaded on the system's RAM so much RAM is
<br>	required. SoftOSS should never be used on machines with less than 16 MB
<br>	of RAM since this is potentially dangerous (you may accidentally run out
<br>	of memory which probably crashes the machine). 
<br>
<br>	SoftOSS implements the wave table API originally designed for GUS. For
<br>	this reason all applications designed for GUS should work (at least
<br>	after minor modifications). For example gmod/xgmod and playmidi -g are
<br>	known to work.
<br>
<br>	To work SoftOSS will require GUS compatible
<br>	patch files to be installed on the system (in /dos/ultrasnd/midi). You
<br>	can use the public domain MIDIA patchset available from several ftp
<br>	sites.
<br>
<br>        *********************************************************************
<br>	IMPORTANT NOTICE! The original patch set distributed with the Gravis 
<br>	Ultrasound card is not in public domain (even though it's available from
<br>	some FTP sites). You should contact Voice Crystal (www.voicecrystal.com)
<br>	if you like to use these patches with SoftOSS included in OSS/Free.
<br>        *********************************************************************
<br>
<br>PSS based cards (AD1848 + ADSP-2115 + Echo ESC614 ASIC)
<br>	Analog Devices and Echo Speech have together defined a sound card
<br>	architecture based on the above chips. The DSP chip is used
<br>	for emulation of SB Pro, FM and General MIDI/MT32.
<br>
<br>	There are several cards based on this architecture. The most known
<br>	ones are Orchid SW32 and Cardinal DSP16. 
<br>
<br>	The driver supports downloading DSP algorithms to these cards.
<br>
<br>	NOTE! You will have to use the "old" config script when configuring
<br>	PSS cards.
<br>
<br>MediaTrix AudioTrix Pro
<br>	The ATP card is built around a CS4231 codec and an OPL4 synthesizer
<br>	chips. The OPL4 mode is supported by a microcontroller running a
<br>	General MIDI emulator. There is also a SB 1.5 compatible playback mode.
<br>
<br>Ensoniq SoundScape and compatibles
<br>	Ensoniq has designed a sound card architecture based on the
<br>	OTTO synthesizer chip used in their professional MIDI synthesizers.
<br>	Several companies (including Ensoniq, Reveal and Spea) are selling
<br>	cards based on this architecture.
<br>
<br>	NOTE! The SoundScape PnP is not supported by OSS/Free. Ensoniq VIVO and
<br>	VIVO90 cards are not compatible with Soundscapes so the Soundscape
<br>        driver will not work with them. You may want to use OSS/Linux with these
<br>        cards.
<br>
<br>OPTi MAD16 and Mozart based cards
<br>	The Mozart (OAK OTI-601), MAD16 (OPTi 82C928), MAD16 Pro (OPTi 82C929),
<br>	OPTi 82C924/82C925 (in _non_ PnP mode) and OPTi 82C930 interface
<br>	chips are used in many different sound cards, including some
<br>	cards by Reveal miro and Turtle Beach (Tropez). The purpose of these
<br>	chips is to connect other audio components to the PC bus. The
<br>	interface chip performs address decoding for the other chips.
<br>	NOTE! Tropez Plus is not MAD16 but CS4232 based.
<br>	NOTE! MAD16 PnP cards (82C924, 82C925, 82C931) are not MAD16 compatible
<br>	in the PnP mode. You will have to use them in MSS mode after having
<br>	initialized them using isapnptools or DOS. 82C931 probably requires
<br>	initialization using DOS/Windows (running isapnptools is not enough).
<br>	It's possible to use 82C931 with OSS/Free by jumpering it to non-PnP
<br>	mode (provided that the card has a jumper for this). In non-PnP mode
<br>	82C931 is compatible with 82C930 and should work with the MAD16 driver
<br>	(without need to use isapnptools or DOS to initialize it). All OPTi
<br>	chips are supported by OSS/Linux (both in PnP and non-PnP modes).
<br>
<br>Audio Excel DSP16 
<br>	Support for this card was written by Riccardo Faccetti
<br>	(riccardo@cdc8g5.cdc.polimi.it). The AEDSP16 driver included in
<br>	the lowlevel/ directory. To use it you should enable the
<br>	"Additional low level drivers" option.
<br>
<br>Crystal CS4232 and CS4236 based cards such as AcerMagic S23, TB Tropez _Plus_ and 
<br>	many PC motherboards (Compaq, HP, Intel, ...)
<br>	CS4232 is a PnP multimedia chip which contains a CS3231A codec,
<br>	SB and MPU401 emulations. There is support for OPL3 too.
<br>	Unfortunately the MPU401 mode doesn't work (I don't know how to
<br>	initialize it). CS4236 is an enhanced (compatible) version of CS4232.
<br>	NOTE! Don't ever try to use isapnptools with CS4232 since this will just
<br>	freeze your machine (due to chip bugs). If you have problems in getting
<br>	CS4232 working you could try initializing it with DOS (CS4232C.EXE) and
<br>	then booting Linux using loadlin. CS4232C.EXE loads a secret firmware
<br>	patch which is not documented by Crystal.
<br>
<br>Turtle Beach Maui and Tropez "classic"
<br>	This driver version supports sample, patch and program loading commands
<br>	described in the Maui/Tropez User's manual. 
<br>	There is now full initialization support too. The audio side of
<br>	the Tropez is based on the MAD16 chip (see above).
<br>	NOTE! Tropez Plus is different card than Tropez "classic" and will not
<br>	work fully in Linux. You can get audio features working by configuring
<br>	the card as a CS4232 based card (above).
<br>
<br>
<br>Jumpers and software configuration
<br>==================================
<br>
<br>Some of the earliest sound cards were jumper configurable. You have to
<br>configure the driver use I/O, IRQ and DMA settings
<br>that match the jumpers. Just few 8 bit cards are fully jumper 
<br>configurable (SB 1.x/2.x, SB Pro and clones).
<br>Some cards made by Aztech have an EEPROM which contains the 
<br>config info. These cards behave much like hardware jumpered cards.
<br>
<br>Most cards have jumper for the base I/O address but other parameters
<br>are software configurable. Sometimes there are few other jumpers too.
<br>
<br>Latest cards are fully software configurable or they are PnP ISA
<br>compatible. There are no jumpers on the board.
<br>
<br>The driver handles software configurable cards automatically. Just configure
<br>the driver to use I/O, IRQ and DMA settings which are known to work.
<br>You could usually use the same values than with DOS and/or Windows.
<br>Using different settings is possible but not recommended since it may cause
<br>some trouble (for example when warm booting from an OS to another or
<br>when installing new hardware to the machine).
<br>
<br>Sound driver sets the soft configurable parameters of the card automatically
<br>during boot. Usually you don't need to run any extra initialization
<br>programs when booting Linux but there are some exceptions. See the
<br>card-specific instructions below for more info.
<br>
<br>The drawback of software configuration is that the driver needs to know
<br>how the card must be initialized. It cannot initialize unknown cards
<br>even if they are otherwise compatible with some other cards (like SB,
<br>MPU401 or Windows Sound System).
<br>
<br>
<br>What if your card was not listed above?
<br>=======================================
<br>
<br>The first thing to do is to look at the major IC chips on the card.
<br>Many of the latest sound cards are based on some standard chips. If you
<br>are lucky, all of them could be supported by the driver. The most common ones
<br>are the OPTi MAD16, Mozart, SoundScape (Ensoniq) and the PSS architectures
<br>listed above. Also look at the end of this file for list of unsupported
<br>cards and the ones which could be supported later.
<br>
<br>The last resort is to send _exact_ name and model information of the card
<br>to me together with a list of the major IC chips (manufactured, model) to 
<br>me. I could then try to check if your card looks like something familiar.
<br>
<br>There are many more cards in the world than listed above. The first thing to
<br>do with these cards is to check if they emulate some other card or interface
<br>such as SB, MSS and/or MPU401. In this case there is a chance to get the
<br>card to work by booting DOS before starting Linux (boot DOS, hit ctrl-alt-del
<br>and boot Linux without hard resetting the machine). In this method the
<br>DOS based driver initializes the hardware to use known I/O, IRQ and DMA
<br>settings. If sound driver is configured to use the same settings, everything
<br>should work OK.
<br>
<br>
<br>Configuring sound driver (with Linux)
<br>=====================================
<br>
<br>The sound driver is currently distributed as part of the Linux kernel. The 
<br>files are in /usr/src/linux/drivers/sound/. 
<br>
<br>****************************************************************************
<br>*	ALWAYS USE THE SOUND DRIVER VERSION WHICH IS DISTRIBUTED WITH	   *
<br>*	THE KERNEL SOURCE PACKAGE YOU ARE USING. SOME ALPHA AND BETA TEST  *
<br>*	VERSIONS CAN BE INSTALLED FROM A SEPARATELY DISTRIBUTED PACKAGE	   *
<br>*	BUT CHECK THAT THE PACKAGE IS NOT MUCH OLDER (OR NEWER) THAN THE   *
<br>*	KERNEL YOU ARE USING. IT'S POSSIBLE THAT THE KERNEL/DRIVER 	   *
<br>*	INTERFACE CHANGES BETWEEN KERNEL RELEASES WHICH MAY CAUSE SOME	   *
<br>*	INCOMPATIBILITY PROBLEMS.					   *
<br>*									   *
<br>*	IN CASE YOU INSTALL A SEPARATELY DISTRIBUTED SOUND DRIVER VERSION, *
<br>*	BE SURE TO REMOVE OR RENAME THE OLD SOUND DRIVER DIRECTORY BEFORE  *
<br>*	INSTALLING THE NEW ONE. LEAVING OLD FILES TO THE SOUND DRIVER	   *
<br>*	DIRECTORY _WILL_ CAUSE PROBLEMS WHEN THE DRIVER IS USED OR	   *
<br>*	COMPILED.							   *
<br>****************************************************************************
<br>
<br>To configure the driver, run "make config" in the kernel source directory
<br>(/usr/src/linux). Answer "y" or "m" to the question about Sound card support
<br>(after the questions about mouse, CD-ROM, ftape, etc. support).  Questions
<br>about options for sound will then be asked.
<br>
<br>After configuring the kernel and sound driver and compile the kernel 
<br>following instructions in the kernel README.
<br>
<br>The sound driver configuration dialog
<br>-------------------------------------
<br>
<br>Sound configuration starts by making some yes/no questions. Be careful
<br>when answering to these questions since answering y to a question may
<br>prevent some later ones from being asked. For example don't answer y to
<br>the first question (PAS16) if you don't really have a PAS16. Don't enable
<br>more cards than you really need since they just consume memory. Also
<br>some drivers (like MPU401) may conflict with your SCSI controller and
<br>prevent kernel from booting. If you card was in the list of supported
<br>cards (above), please look at the card specific config instructions
<br>(later in this file) before starting to configure. Some cards must be
<br>configured in way which is not obvious.
<br>
<br>So here is the beginning of the config dialog. Answer 'y' or 'n' to these
<br>questions. The default answer is shown so that (y/n) means 'y' by default and
<br>(n/y) means 'n'. To use the default value, just hit ENTER. But be careful
<br>since using the default _doesn't_ guarantee anything.
<br>
<br>Note also that all questions may not be asked. The configuration program
<br>may disable some questions depending on the earlier choices. It may also
<br>select some options automatically as well.
<br>
<br>  "ProAudioSpectrum 16 support",
<br>	- Answer 'y'_ONLY_ if you have a Pro Audio Spectrum _16_,
<br>	  Pro Audio Studio 16 or Logitech SoundMan 16 (be sure that
<br>	  you read the above list correctly). Don't answer 'y' if you
<br>	  have some other card made by Media Vision or Logitech since they
<br>	  are not PAS16 compatible.
<br>	  NOTE! Since 3.5-beta10 you need to enable SB support (next question)
<br>	  if you want to use the SB emulation of PAS16. It's also possible to
<br>   	  the emulation if you want to use a true SB card together with PAS16
<br>	  (there is another question about this that is asked later).
<br>  "Sound Blaster support",
<br>	- Answer 'y' if you have an original SB card made by Creative Labs
<br>	  or a full 100% hardware compatible clone (like Thunderboard or
<br>	  SM Games). If your card was in the list of supported cards (above),
<br>	  please look at the card specific instructions later in this file
<br>	  before answering this question. For an unknown card you may answer 
<br>	  'y' if the card claims to be SB compatible.
<br>	 Enable this option also with PAS16 (changed since v3.5-beta9).
<br>
<br>	 Don't enable SB if you have a MAD16 or Mozart compatible card.
<br>
<br>  "Generic OPL2/OPL3 FM synthesizer support",
<br>	- Answer 'y' if your card has a FM chip made by Yamaha (OPL2/OPL3/OPL4).
<br>	  Answering 'y' is usually a safe and recommended choice. However some
<br>	  cards may have software (TSR) FM emulation. Enabling FM support
<br>	  with these cards may cause trouble. However I don't currently know
<br>	  such cards.
<br>  "Gravis Ultrasound support",
<br>	- Answer 'y' if you have GUS or GUS MAX. Answer 'n' if you don't
<br>	  have GUS since the GUS driver consumes much memory.
<br>	  Currently I don't have experiences with the GUS ACE so I don't
<br>	  know what to answer with it.
<br>  "MPU-401 support (NOT for SB16)",
<br>	- Be careful with this question. The MPU401 interface is supported
<br>	  by almost any sound card today. However some natively supported cards
<br>	  have their own driver for MPU401. Enabling the MPU401 option with
<br>	  these cards will cause a conflict. Also enabling MPU401 on a system
<br>	  that doesn't really have a MPU401 could cause some trouble. If your
<br>	  card was in the list of supported cards (above), please look at
<br>	  the card specific instructions later in this file.
<br>
<br>	  In MOST cases this MPU401 driver should only be used with "true"
<br>	  MIDI-only MPU401 professional cards. In most other cases there
<br>	  is another way to get the MPU401 compatible interface of a
<br>	  sound card to work.
<br>	  Support for the MPU401 compatible MIDI port of SB16, ESS1688
<br>	  and MV Jazz16 cards is included in the SB driver. Use it instead
<br>	  of this separate MPU401 driver with these cards. As well 
<br>	  Soundscape, PSS and Maui drivers include their own MPU401
<br>	  options.
<br>
<br>	  It's safe to answer 'y' if you have a true MPU401 MIDI interface
<br>	  card. 
<br>  "6850 UART Midi support",
<br>	- It's safe to answer 'n' to this question in all cases. The 6850
<br>	  UART interface is so rarely used.
<br>  "PSS (ECHO-ADI2111) support",
<br>	- Answer 'y' only if you have Orchid SW32, Cardinal DSP16 or some
<br>	  other card based on the PSS chipset (AD1848 codec + ADSP-2115
<br>	  DSP chip + Echo ESC614 ASIC CHIP).
<br>  "16 bit sampling option of GUS (_NOT_ GUS MAX)",
<br>	- Answer 'y' if you have installed the 16 bit sampling daughtercard
<br>	  to your GUS. Answer 'n' if you have GUS MAX. Enabling this option
<br>	  disables GUS MAX support.
<br>  "GUS MAX support",
<br>	- Answer 'y' only if you have a GUS MAX.
<br>  "Microsoft Sound System support",
<br>	- Again think carefully before answering 'y' to this question. It's
<br>	  safe to answer 'y' in case you have the original Windows Sound 
<br>	  System card made by Microsoft or Aztech SG 16 Pro (or NX16 Pro).
<br>	  Also you may answer 'y' in case your card was not listed earlier
<br>	  in this file. For cards having native support in the driver, consult
<br>	  the card specific instructions later in this file. Some drivers
<br>	  have their own MSS support and enabling this option will cause a
<br>	  conflict. 
<br>	  Note! The MSS driver permits configuring two DMA channels. This is a
<br>	  "nonstandard" feature and works only with very few cards (if any).
<br>	  In most cases the second DMA channel should be disabled or set to
<br>	  the same channel than the first one. Trying to configure two separate
<br>	  channels with cards that don't support this feature will prevent
<br>	  audio (at least recording) from working.
<br>  "Ensoniq Soundscape support",
<br>	- Answer 'y' if you have a sound card based on the Ensoniq SoundScape
<br>	  chipset. Such cards are being manufactured at least by Ensoniq,
<br>	  Spea and Reveal (note that Reveal makes other cards also).  The oldest
<br>	  cards made by Spea don't work properly with Linux. 
<br>	  Soundscape PnP as well as Ensoniq VIVO work only with the commercial
<br>	  OSS/Linux version.
<br>  "MediaTrix AudioTrix Pro support",
<br>	- Answer 'y' if you have the AudioTrix Pro.
<br>  "Support for MAD16 and/or Mozart based cards",
<br>	- Answer y if your card has a Mozart (OAK OTI-601) or MAD16
<br>	  (OPTi 82C928, 82C929, 82C924/82C925 or 82C930) audio interface chip. 
<br>	  These chips are
<br>	  currently quite common so it's possible that many no-name cards
<br>	  have one of them. In addition the MAD16 chip is used in some
<br>	  cards made by known manufacturers such as Turtle Beach (Tropez),
<br>	  Reveal (some models) and Diamond (some recent models).
<br>	  Note OPTi 82C924 and 82C925 are MAD16 compatible only in non PnP
<br>	  mode (jumper selectable on many cards).
<br>  "Support for TB Maui"
<br>	- This enables TB Maui specific initialization. Works with TB Maui
<br>	and TB Tropez (may not work with Tropez Plus).
<br>
<br>
<br>Then the configuration program asks some y/n questions about the higher
<br>level services. It's recommended to answer 'y' to each of these questions.
<br>Answer 'n' only if you know you will not need the option.
<br>
<br>  "MIDI interface support",
<br>	- Answering 'n' disables /dev/midi## devices and access to any
<br>	  MIDI ports using /dev/sequencer and /dev/music. This option
<br>	  also affects any MPU401 and/or General MIDI compatible devices.
<br>  "FM synthesizer (YM3812/OPL-3) support",
<br>	- Answer 'y' here.
<br>  "/dev/sequencer support",
<br>	- Answering 'n' disables /dev/sequencer and /dev/music.
<br>
<br>Entering the I/O, IRQ and DMA config parameters
<br>-----------------------------------------------
<br>
<br>After the above questions the configuration program prompts for the
<br>card specific configuration information. Usually just a set of
<br>I/O address, IRQ and DMA numbers are asked. With some cards the program
<br>asks for some files to be used during initialization of the card. For example
<br>many cards have a DSP chip or microprocessor which must be initialized by
<br>downloading a program (microcode) file to the card.
<br>
<br>Instructions for answering these questions are given in the next section.
<br>
<br>
<br>Card specific information
<br>=========================
<br>
<br>This section gives additional instructions about configuring some cards.
<br>Please refer manual of your card for valid I/O, IRQ and DMA numbers. Using
<br>the same settings with DOS/Windows and Linux is recommended. Using
<br>different values could cause some problems when switching between
<br>different operating systems.
<br>
<br>Sound Blasters (the original ones by Creative)
<br>---------------------------------------------
<br>
<br>NOTE! Check if you have a PnP Sound Blaster (cards sold after summer 1995
<br>      are almost certainly PnP ones). With PnP cards you should use isapnptools
<br>      to activate them (see above).
<br>
<br>It's possible to configure these cards to use different I/O, IRQ and
<br>DMA settings. Since the possible/default settings have changed between various
<br>models, you have to consult manual of your card for the proper ones. It's
<br>a good idea to use the same values than with DOS/Windows. With SB and SB Pro
<br>it's the only choice. SB16 has software selectable IRQ and DMA channels but
<br>using different values with DOS and Linux is likely to cause troubles. The
<br>DOS driver is not able to reset the card properly after warm boot from Linux
<br>if Linux has used different IRQ or DMA values.
<br>
<br>The original (steam) Sound Blaster (versions 1.x and 2.x) use always
<br>DMA1. There is no way to change it.
<br>
<br>The SB16 needs two DMA channels. A 8 bit one (1 or 3) is required for
<br>8 bit operation and a 16 bit one (5, 6 or 7) for the 16 bit mode. In theory
<br>it's possible to use just one (8 bit) DMA channel by answering the 8 bit
<br>one when the configuration program asks for the 16 bit one. This may work
<br>in some systems but is likely to cause terrible noise on some other systems.
<br>
<br>It's possible to use two SB16/32/64 at the same time. To do this you should
<br>first configure OSS/Free for one card. Then edit local.h manually and define
<br>SB2_BASE, SB2_IRQ, SB2_DMA and SB2_DMA2 for the second one. You can't get
<br>the OPL3, MIDI and EMU8000 devices of the second card to work. If you are
<br>going to use two PnP Sound Blasters, ensure that they are of different model
<br>and have different PnP IDs. There is no way to get two cards with the same
<br>card ID and serial number to work. The easiest way to check this is trying 
<br>if isapnptools can see both cards or just one.
<br>
<br>NOTE!	Don't enable the SM Games option (asked by the configuration program)
<br>	if you are not 101% sure that your card is a Logitech Soundman Games
<br>	(not a SM Wave or SM16).
<br>
<br>SB Clones
<br>---------
<br>
<br>First of all: There are no SB16 clones. There are SB Pro clones with a
<br>16 bit mode which is not SB16 compatible. The most likely alternative is that
<br>the 16 bit mode means MSS/WSS.
<br>
<br>There are just a few fully 100% hardware SB or SB Pro compatible cards.
<br>I know just Thunderboard and SM Games. Other cards require some kind of
<br>hardware initialization before they become SB compatible. Check if your card
<br>was listed in the beginning of this file. In this case you should follow
<br>instructions for your card later in this file.
<br>
<br>For other not fully SB clones you may try initialization using DOS in
<br>the following way:
<br>
<br>	- Boot DOS so that the card specific driver gets run.
<br>	- Hit ctrl-alt-del (or use loadlin) to boot Linux. Don't
<br>	  switch off power or press the reset button.
<br>	- If you use the same I/O, IRQ and DMA settings in Linux, the
<br>	  card should work.
<br>
<br>If your card is both SB and MSS compatible, I recommend using the MSS mode.
<br>Most cards of this kind are not able to work in the SB and the MSS mode 
<br>simultaneously. Using the MSS mode provides 16 bit recording and playback.
<br>
<br>ProAudioSpectrum 16 and compatibles
<br>-----------------------------------
<br>
<br>PAS16 has a SB emulation chip which can be used together with the native
<br>(16 bit) mode of the card. To enable this emulation you should configure 
<br>the driver to have SB support too (this has been changed since version
<br>3.5-beta9 of this driver).
<br>
<br>With current driver versions it's also possible to use PAS16 together with 
<br>another SB compatible card. In this case you should configure SB support
<br>for the other card and to disable the SB emulation of PAS16 (there is a
<br>separate questions about this).
<br>
<br>With PAS16 you can use two audio device files at the same time. /dev/dsp (and
<br>/dev/audio) is connected to the 8/16 bit native codec and the /dev/dsp1 (and
<br>/dev/audio1) is connected to the SB emulation (8 bit mono only).
<br>
<br>Gravis Ultrasound
<br>-----------------
<br>
<br>There are many different revisions of the Ultrasound card (GUS). The
<br>earliest ones (pre 3.7) don't have a hardware mixer. With these cards
<br>the driver uses a software emulation for synth and pcm playbacks. It's
<br>also possible to switch some of the inputs (line in, mic) off by setting
<br>mixer volume of the channel level below 10%. For recording you have
<br>to select the channel as a recording source and to use volume above 10%.
<br>
<br>GUS 3.7 has a hardware mixer.
<br>
<br>GUS MAX and the 16 bit sampling daughtercard have a CS4231 codec chip which 
<br>also contains a mixer.
<br>
<br>Configuring GUS is simple. Just enable the GUS support and GUS MAX or
<br>the 16 bit daughtercard if you have them. Note that enabling the daughter
<br>card disables GUS MAX driver.
<br>
<br>NOTE for owners of the 16 bit daughtercard: By default the daughtercard
<br>uses /dev/dsp (and /dev/audio). Command "ln -sf /dev/dsp1 /dev/dsp"
<br>selects the daughter card as the default device.
<br>
<br>With just the standard GUS enabled the configuration program prompts
<br>for the I/O, IRQ and DMA numbers for the card. Use the same values than
<br>with DOS.
<br>
<br>With the daughter card option enabled you will be prompted for the I/O,
<br>IRQ and DMA numbers for the daughter card. You have to use different I/O
<br>and DMA values than for the standard GUS. The daughter card permits
<br>simultaneous recording and playback. Use /dev/dsp (the daughtercard) for
<br>recording and /dev/dsp1 (GUS GF1) for playback.
<br>
<br>GUS MAX uses the same I/O address and IRQ settings than the original GUS
<br>(GUS MAX = GUS + a CS4231 codec). In addition an extra DMA channel may be used.
<br>Using two DMA channels permits simultaneous playback using two devices
<br>(dev/dsp0 and /dev/dsp1). The second DMA channel is required for
<br>full duplex audio.
<br>To enable the second DMA channels, give a valid DMA channel when the config
<br>program asks for the GUS MAX DMA (entering -1 disables the second DMA).
<br>Using 16 bit DMA channels (5,6 or 7) is recommended.
<br>
<br>If you have problems in recording with GUS MAX, you could try to use
<br>just one 8 bit DMA channel. Recording will not work with one DMA
<br>channel if it's a 16 bit one.
<br>
<br>Microphone input of GUS MAX is connected to mixer in little bit nonstandard
<br>way. There is actually two microphone volume controls. Normal "mic" controls
<br>only recording level. Mixer control "speaker" is used to control volume of
<br>microphone signal connected directly to line/speaker out. So just decrease
<br>volume of "speaker" if you have problems with microphone feedback.
<br>
<br>GUS ACE works too but any attempt to record or to use the MIDI port
<br>will fail.
<br>
<br>GUS PnP (with RAM) is partially supported but it needs to be initialized using
<br>DOS or isapnptools before starting the driver.
<br>
<br>MPU401 and Windows Sound System
<br>-------------------------------
<br>
<br>Again. Don't enable these options in case your card is listed
<br>somewhere else in this file.
<br>
<br>Configuring these cards is obvious (or it should be). With MSS
<br>you should probably enable the OPL3 synth also since
<br>most MSS compatible cards have it. However check that this is true
<br>before enabling OPL3.
<br>
<br>Sound driver supports more than one MPU401 compatible cards at the same time
<br>but the config program asks config info for just the first of them.
<br>Adding the second or third MPU interfaces must be done manually by
<br>editing sound/local.h (after running the config program). Add defines for
<br>MPU2_BASE & MPU2_IRQ (and MPU3_BASE & MPU3_IRQ) to the file.
<br>
<br>CAUTION!
<br>
<br>The default I/O base of Adaptec AHA-1542 SCSI controller is 0x330 which
<br>is also the default of the MPU401 driver. Don't configure the sound driver to
<br>use 0x330 as the MPU401 base if you have a AHA1542. The kernel will not boot
<br>if you make this mistake.
<br>
<br>PSS
<br>---
<br>
<br>Even the PSS cards are compatible with SB, MSS and MPU401, you must not
<br>enable these options when configuring the driver. The configuration
<br>program handles these options itself. (You may use the SB, MPU and MSS options
<br>together with PSS if you have another card on the system).
<br>
<br>The PSS driver enables MSS and MPU401 modes of the card. SB is not enabled 
<br>since it doesn't work concurrently with MSS. The driver loads also a
<br>DSP algorithm which is used to for the general MIDI emulation. The
<br>algorithm file (.ld) is read by the config program and written to a
<br>file included when the pss.c is compiled. For this reason the config
<br>program asks if you want to download the file. Use the genmidi.ld file
<br>distributed with the DOS/Windows drivers of the card (don't use the mt32.ld).
<br>With some cards the file is called 'synth.ld'. You must have access to
<br>the file when configuring the driver. The easiest way is to mount the DOS
<br>partition containing the file with Linux. 
<br>
<br>It's possible to load your own DSP algorithms and run them with the card.
<br>Look at the directory pss_test of snd-util-3.0.tar.gz for more info.
<br>
<br>AudioTrix Pro
<br>-------------
<br>
<br>You have to enable the OPL3 and SB (not SB Pro or SB16) drivers in addition
<br>to the native AudioTrix driver. Don't enable MSS or MPU drivers.
<br>
<br>Configuring ATP is little bit tricky since it uses so many I/O, IRQ and
<br>DMA numbers. Using the same values than with DOS/Win is a good idea. Don't
<br>attempt to use the same IRQ or DMA channels twice.
<br>
<br>The SB mode of ATP is implemented so the ATP driver just enables SB
<br>in the proper address. The SB driver handles the rest. You have to configure
<br>both the SB driver and the SB mode of ATP to use the same IRQ, DMA and I/O
<br>settings.
<br>
<br>Also the ATP has a microcontroller for the General MIDI emulation (OPL4).
<br>For this reason the driver asks for the name of a file containing the
<br>microcode (TRXPRO.HEX). This file is usually located in the directory
<br>where the DOS drivers were installed. You must have access to this file
<br>when configuring the driver. 
<br>
<br>If you have the effects daughtercard, it must be initialized by running
<br>the setfx program of snd-util-3.0.tar.gz package. This step is not required
<br>when using the (future) binary distribution version of the driver.
<br>
<br>Ensoniq SoundScape
<br>------------------
<br>
<br>NOTE!	The new PnP SoundScape is not supported yet. Soundscape compatible
<br>	cards made by Reveal don't work with Linux. They use older revision
<br>	of the Soundscape chipset which is not fully compatible with
<br>	newer cards made by Ensoniq.
<br>
<br>The SoundScape driver handles initialization of MSS and MPU supports
<br>itself so you don't need to enable other drivers than SoundScape
<br>(enable also the /dev/dsp, /dev/sequencer and MIDI supports).
<br>
<br>!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
<br>!!!!!                                                                   !!!!
<br>!!!!! NOTE! Before version 3.5-beta6 there WERE two sets of audio 	!!!!
<br>!!!!!       device files (/dev/dsp0 and /dev/dsp1). The first one WAS   !!!!
<br>!!!!!	    used only for card initialization and the second for audio  !!!!
<br>!!!!!	    purposes. It WAS required to change /dev/dsp (a symlink) to !!!!
<br>!!!!!	    point to /dev/dsp1.						!!!!
<br>!!!!!                                                                   !!!!
<br>!!!!!	    This is not required with OSS versions 3.5-beta6 and later	!!!!
<br>!!!!!	    since there is now just one audio device file. Please 	!!!!
<br>!!!!!	    change /dev/dsp to point back to /dev/dsp0 if you are	!!!!
<br>!!!!!	    upgrading from an earlier driver version using		!!!!
<br>!!!!!	    (cd /dev;rm dsp;ln -s dsp0 dsp).				!!!!
<br>!!!!!                                                                   !!!!
<br>!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
<br>
<br>The configuration program asks one DMA channel and two interrupts. One IRQ
<br>and one DMA is used by the MSS codec. The second IRQ is required for the
<br>MPU401 mode (you have to use different IRQs for both purposes).
<br>There were earlier two DMA channels for SoundScape but the current driver
<br>version requires just one.
<br>
<br>The SoundScape card has a Motorola microcontroller which must initialized
<br>_after_ boot (the driver doesn't initialize it during boot).
<br>The initialization is done by running the 'ssinit' program which is
<br>distributed in the snd-util-3.0.tar.gz package. You have to edit two
<br>defines in the ssinit.c and then compile the program. You may run ssinit 
<br>manually (after each boot) or add it to /etc/rc.d/rc.local.
<br>
<br>The ssinit program needs the microcode file that comes with the DOS/Windows
<br>driver of the card. You will need to use version 1.30.00 or later
<br>of the microcode file (sndscape.co0 or sndscape.co1 depending on
<br>your card model). THE OLD sndscape.cod WILL NOT WORK. IT WILL HANG YOUR
<br>MACHINE. The only way to get the new microcode file is to download
<br>and install the DOS/Windows driver from ftp://ftp.ensoniq.com/pub.
<br>
<br>Then you have to select the proper microcode file to use: soundscape.co0
<br>is the right one for most cards and sndscape.co1 is for few (older) cards
<br>made by Reveal and/or Spea. The driver has capability to detect the card
<br>version during boot. Look at the boot log messages in /var/adm/messages
<br>and locate the sound driver initialization message for the SoundScape
<br>card. If the driver displays string <Ensoniq Soundscape (old)>, you have
<br>an old card and you will need to use sndscape.co1. For other cards use
<br>soundscape.co0. New Soundscape revisions such as Elite and PnP use
<br>code files with higher numbers (.co2, .co3, etc.).
<br>
<br>NOTE!	Ensoniq Soundscape VIVO is not compatible with other Soundscape cards.
<br>	Currently it's possible to use it in Linux only with OSS/Linux
<br>	drivers.
<br>
<br>Check /var/adm/messages after running ssinit. The driver prints
<br>the board version after downloading the microcode file. That version
<br>number must match the number in the name of the microcode file (extension).
<br>
<br>Running ssinit with a wrong version of the sndscape.co? file is not
<br>dangerous as long as you don't try to use a file called sndscape.cod.
<br>If you have initialized the card using a wrong microcode file (sounds
<br>are terrible), just modify ssinit.c to use another microcode file and try
<br>again. It's possible to use an earlier version of sndscape.co[01] but it
<br>may sound weird.
<br>
<br>MAD16 (Pro) and Mozart
<br>----------------------
<br>
<br>You need to enable just the MAD16 /Mozart support when configuring
<br>the driver. _Don't_ enable SB, MPU401 or MSS. However you will need the
<br>/dev/audio, /dev/sequencer and MIDI supports.
<br>
<br>Mozart and OPTi 82C928 (the original MAD16) chips don't support
<br>MPU401 mode so enter just 0 when the configuration program asks the
<br>MPU/MIDI I/O base. The MAD16 Pro (OPTi 82C929) and 82C930 chips have MPU401
<br>mode.
<br>
<br>TB Tropez is based on the 82C929 chip. It has two MIDI ports.
<br>The one connected to the MAD16 chip is the second one (there is a second
<br>MIDI connector/pins somewhere??). If you have not connected the second MIDI
<br>port, just disable the MIDI port of MAD16. The 'Maui' compatible synth of
<br>Tropez is jumper configurable and not connected to the MAD16 chip (the
<br>Maui driver can be used with it).
<br>
<br>Some MAD16 based cards may cause feedback, whistle or terrible noise if the
<br>line3 mixer channel is turned too high. This happens at least with Shuttle
<br>Sound System. Current driver versions set volume of line3 low enough so
<br>this should not be a problem.
<br>
<br>If you have a MAD16 card which have an OPL4 (FM + Wave table) synthesizer
<br>chip (_not_ an OPL3), you have to append a line containing #define MAD16_OPL4
<br>to the file linux/drivers/sound/local.h (after running make config).
<br>
<br>MAD16 cards having a CS4231 codec support full duplex mode. This mode
<br>can be enabled by configuring the card to use two DMA channels. Possible
<br>DMA channel pairs are: 0&1, 1&0 and 3&0.
<br>
<br>NOTE! Cards having an OPTi 82C924/82C925 chip work with OSS/Free only in
<br>non-PnP mode (usually jumper selectable). The PnP mode is supported only
<br>by OSS/Linux.
<br>
<br>MV Jazz (ProSonic)
<br>------------------
<br>
<br>The Jazz16 driver is just a hack made to the SB Pro driver. However it works
<br>fairly well. You have to enable SB, SB Pro (_not_ SB16) and MPU401 supports
<br>when configuring the driver. The configuration program asks later if you
<br>want support for MV Jazz16 based cards (after asking SB base address). Answer
<br>'y' here and the driver asks the second (16 bit) DMA channel.
<br>
<br>The Jazz16 driver uses the MPU401 driver in a way which will cause
<br>problems if you have another MPU401 compatible card. In this case you must
<br>give address of the Jazz16 based MPU401 interface when the config
<br>program prompts for the MPU401 information. Then look at the MPU401
<br>specific section for instructions about configuring more than one MPU401 cards.
<br>
<br>Logitech Soundman Wave
<br>----------------------
<br>
<br>Read the above MV Jazz specific instructions first.
<br>
<br>The Logitech SoundMan Wave (don't confuse this with the SM16 or SM Games) is
<br>a MV Jazz based card which has an additional OPL4 based wave table
<br>synthesizer. The OPL4 chip is handled by an on board microcontroller
<br>which must be initialized during boot. The config program asks if
<br>you have a SM Wave immediately after asking the second DMA channel of jazz16.
<br>If you answer 'y', the config program will ask name of the file containing
<br>code to be loaded to the microcontroller. The file is usually called
<br>MIDI0001.BIN and it's located in the DOS/Windows driver directory. The file
<br>may also be called as TSUNAMI.BIN or something else (older cards?).
<br>
<br>The OPL4 synth will be inaccessible without loading the microcontroller code.
<br>
<br>Also remember to enable SB MPU401 support if you want to use the OPL4 mode.
<br>(Don't enable the 'normal' MPU401 device as with some earlier driver
<br>versions (pre 3.5-alpha8)).
<br>
<br>NOTE!	Don't answer 'y' when the driver asks about SM Games support
<br>	(the next question after the MIDI0001.BIN name). However
<br>	answering 'y' doesn't cause damage your computer so don't panic. 
<br>
<br>Sound Galaxies
<br>--------------
<br>
<br>There are many different Sound Galaxy cards made by Aztech. The 8 bit
<br>ones are fully SB or SB Pro compatible and there should be no problems
<br>with them. 
<br>
<br>The older 16 bit cards (SG Pro16, SG NX Pro16, Nova and Lyra) have
<br>an EEPROM chip for storing the configuration data. There is a microcontroller
<br>which initializes the card to match the EEPROM settings when the machine
<br>is powered on. These cards actually behave just like they have jumpers
<br>for all of the settings. Configure driver for MSS, MPU, SB/SB Pro  and OPL3 
<br>supports with these cards. 
<br>
<br>There are some new Sound Galaxies in the market. I have no experience with
<br>them so read the card's manual carefully.
<br>
<br>ESS ES1688 and ES688 'AudioDrive' based cards
<br>---------------------------------------------
<br>
<br>Support for these two ESS chips is embedded in the SB driver.
<br>Configure these cards just like SB. Enable the 'SB MPU401 MIDI port'
<br>if you want to use MIDI features of ES1688. ES688 doesn't have MPU mode
<br>so you don't need to enable it (the driver uses normal SB MIDI automatically
<br>with ES688).
<br>
<br>NOTE! ESS cards are not compatible with MSS/WSS so don't worry if MSS support
<br>of OSS doesn't work with it.
<br>
<br>There are some ES1688/688 based sound cards and (particularly) motherboards
<br>which use software configurable I/O port relocation feature of the chip.
<br>This ESS proprietary feature is supported only by OSS/Linux.
<br>
<br>There are ES1688 based cards which use different interrupt pin assignment than
<br>recommended by ESS (5, 7, 9/2 and 10). In this case all IRQs don't work.
<br>At least a card called (Pearl?) Hypersound 16 supports IRQ 15 but it doesn't
<br>work.
<br>
<br>ES1868 is a PnP chip which is (supposed to be) compatible with ESS1688
<br>probably works with OSS/Free after initialization using isapnptools.
<br>
<br>Reveal cards
<br>------------
<br>
<br>There are several different cards made/marketed by Reveal. Some of them
<br>are compatible with SoundScape and some use the MAD16 chip. You may have
<br>to look at the card and try to identify its origin.
<br>
<br>Diamond
<br>-------
<br>
<br>The oldest (Sierra Aria based) sound cards made by Diamond are not supported
<br>(they may work if the card is initialized using DOS). The recent (LX?)
<br>models are based on the MAD16 chip which is supported by the driver.
<br>
<br>Audio Excel DSP16
<br>-----------------
<br>
<br>Support for this card is currently not functional. A new driver for it
<br>should be available later this year.
<br>
<br>PCMCIA cards
<br>------------
<br>
<br>Sorry, can't help. Some cards may work and some don't.
<br>
<br>TI TM4000M notebooks
<br>--------------------
<br>
<br>These computers have a built in sound support based on the Jazz chipset.
<br>Look at the instructions for MV Jazz (above). It's also important to note
<br>that there is something wrong with the mouse port and sound at least on
<br>some TM models. Don't enable the "C&T 82C710 mouse port support" when
<br>configuring Linux. Having it enabled is likely to cause mysterious problems
<br>and kernel failures when sound is used.
<br>
<br>miroSOUND
<br>---------
<br>
<br>The miroSOUND PCM1-pro, PCM12 and PCM20 radio has been used
<br>successfully. These cards are based on the MAD16, OPL4, and CS4231A chips
<br>and everything said in the section about MAD16 cards applies here,
<br>too. The only major difference between the PCMxx and other MAD16 cards
<br>is that instead of the mixer in the CS4231 codec a separate mixer
<br>controlled by an on-board 80C32 microcontroller is used. Control of
<br>the mixer takes place via the ACI (miro's audio control interface)
<br>protocol that is implemented in a separate lowlevel driver. Make sure
<br>you compile this ACI driver together with the normal MAD16 support
<br>when you use a miroSOUND PCMxx card. The ACI mixer is controlled by
<br>/dev/mixer and the CS4231 mixer by /dev/mixer1 (depends on load
<br>time). Only in special cases you want to change something regularly on
<br>the CS4231 mixer.
<br>
<br>The miroSOUND PCM12 and PCM20 radio is capable of full duplex
<br>operation (simultaneous PCM replay and recording), which allows you to
<br>implement nice real-time signal processing audio effect software and
<br>network telephones. The ACI mixer has to be switched into the "solo"
<br>mode for duplex operation in order to avoid feedback caused by the
<br>mixer (input hears output signal). You can de-/activate this mode
<br>through toggling the record button for the wave controller with an
<br>OSS-mixer.
<br>
<br>The PCM20 contains a radio tuner, which is also controlled by
<br>ACI. This radio tuner is supported by the ACI driver together with the
<br>miropcm20.o module. Also the 7-band equalizer is integrated
<br>(limited by the OSS-design). Development has started and maybe
<br>finished for the RDS decoder on this card, too. You will be able to
<br>read RadioText, the Programme Service name, Programme TYpe and
<br>others. Even the v4l radio module benefits from it with a refined
<br>strength value. See aci.[ch] and miropcm20*.[ch] for more details.
<br>
<br>The following configuration parameters have worked fine for the PCM12
<br>in Markus Kuhn's system, many other configurations might work, too:
<br>CONFIG_MAD16_BASE=0x530, CONFIG_MAD16_IRQ=11, CONFIG_MAD16_DMA=3, 
<br>CONFIG_MAD16_DMA2=0, CONFIG_MAD16_MPU_BASE=0x330, CONFIG_MAD16_MPU_IRQ=10,
<br>DSP_BUFFSIZE=65536, SELECTED_SOUND_OPTIONS=0x00281000.
<br>
<br>Bas van der Linden is using his PCM1-pro with a configuration that
<br>differs in: CONFIG_MAD16_IRQ=7, CONFIG_MAD16_DMA=1, CONFIG_MAD16_MPU_IRQ=9
<br>
<br>Compaq Deskpro XL
<br>-----------------
<br>
<br>The builtin sound hardware of Compaq Deskpro XL is now supported. 
<br>You need to configure the driver with MSS and OPL3 supports enabled.
<br>In addition you need to manually edit linux/drivers/sound/local.h and
<br>to add a line containing "#define DESKPROXL" if you used 
<br>make menuconfig/xconfig.
<br>
<br>Others?
<br>-------
<br>
<br>Since there are so many different sound cards, it's likely that I have 
<br>forgotten to mention many of them. Please inform me if you know yet another
<br>card which works with Linux, please inform me (or is anybody else
<br>willing to maintain a database of supported cards (just like in XF86)?).
<br>
<br>Cards not supported yet
<br>=======================
<br>
<br>Please check the version of sound driver you are using before 
<br>complaining that your card is not supported. It's possible you are 
<br>using a driver version which was released months before your card was
<br>introduced.
<br>
<br>First of all, there is an easy way to make most sound cards work with Linux.
<br>Just use the DOS based driver to initialize the card to a known state, then use
<br>loadlin.exe to boot Linux. If Linux is configured to use the same I/O, IRQ and
<br>DMA numbers as DOS, the card could work.
<br>(ctrl-alt-del can be used in place of loadlin.exe but it doesn't work with
<br>new motherboards). This method works also with all/most PnP sound cards.
<br>
<br>Don't get fooled with SB compatibility. Most cards are compatible with
<br>SB but that may require a TSR which is not possible with Linux. If
<br>the card is compatible with MSS, it's a better choice. Some cards
<br>don't work in the SB and MSS modes at the same time.
<br>
<br>Then there are cards which are no longer manufactured and/or which
<br>are relatively rarely used (such as the 8 bit ProAudioSpectrum
<br>models). It's extremely unlikely that such cards ever get supported.
<br>Adding support for a new card requires much work and increases time
<br>required in maintaining the driver (some changes need to be done
<br>to all low level drivers and be tested too, maybe with multiple
<br>operating systems). For this reason I have made a decision to not support
<br>obsolete cards. It's possible that someone else makes a separately 
<br>distributed driver (diffs) for the card. 
<br>
<br>Writing a driver for a new card is not possible if there are no 
<br>programming information available about the card. If you don't
<br>find your new card from this file, look from the home page 
<br>(http://www.opensound.com/ossfree). Then please contact
<br>manufacturer of the card and ask if they have (or are willing to)
<br>released technical details of the card. Do this before contacting me. I
<br>can only answer 'no' if there are no programming information available.
<br>
<br>I have made decision to not accept code based on reverse engineering
<br>to the driver. There are three main reasons: First I don't want to break
<br>relationships to sound card manufacturers. The second reason is that
<br>maintaining and supporting a driver without any specs will be a pain.
<br>The third reason is that companies have freedom to refuse selling their
<br>products to other than Windows users.
<br>
<br>Some companies don't give low level technical information about their
<br>products to public or at least their require signing a NDA. It's not
<br>possible to implement a freeware driver for them. However it's possible
<br>that support for such cards become available in the commercial version
<br>of this driver (see http://www.4Front-tech.com/oss.html for more info).
<br>
<br>There are some common audio chipsets that are not supported yet. For example
<br>Sierra Aria and IBM Mwave. It's possible that these architectures
<br>get some support in future but I can't make any promises. Just look
<br>at the home page (http://www.opensound.com/ossfree/)
<br>for latest info.
<br>
<br>Information about unsupported sound cards and chipsets is welcome as well
<br>as free copies of sound cards, SDKs and operating systems.
<br>
<br>If you have any corrections and/or comments, please contact me.
<br>
<br>Hannu Savolainen
<br>hannu@opensound.com
<br>
<br>home page of OSS/Free: http://www.opensound.com/ossfree
<br>
<br>home page of commercial OSS
<br>(Open Sound System) drivers: http://www.opensound.com/oss.html
<br><p></p><div class="separator"></div><br><p><h2>alsa</h2></p>NOTE: The following is the original document of Rainer's patch that the
<br>current maya44 code based on.  Some contents might be obsoleted, but I
<br>keep here as reference -- tiwai
<br>
<br>----------------------------------------------------------------
<br> 
<br>STATE OF DEVELOPMENT:
<br>
<br>This driver is being developed on the initiative of Piotr Makowski (oponek@gmail.com) and financed by Lars Bergmann.
<br>Development is carried out by Rainer Zimmermann (mail@lightshed.de).
<br>
<br>ESI provided a sample Maya44 card for the development work.
<br>
<br>However, unfortunately it has turned out difficult to get detailed programming information, so I (Rainer Zimmermann) had to find out some card-specific information by experiment and conjecture. Some information (in particular, several GPIO bits) is still missing.
<br>
<br>This is the first testing version of the Maya44 driver released to the alsa-devel mailing list (Feb 5, 2008).
<br>
<br>
<br>The following functions work, as tested by Rainer Zimmermann and Piotr Makowski:
<br>
<br>- playback and capture at all sampling rates
<br>- input/output level
<br>- crossmixing
<br>- line/mic switch
<br>- phantom power switch
<br>- analogue monitor a.k.a bypass
<br>
<br>
<br>The following functions *should* work, but are not fully tested:
<br>
<br>- Channel 3+4 analogue - S/PDIF input switching
<br>- S/PDIF output
<br>- all inputs/outputs on the M/IO/DIO extension card
<br>- internal/external clock selection
<br>
<br>
<br>*In particular, we would appreciate testing of these functions by anyone who has access to an M/IO/DIO extension card.*
<br>
<br>
<br>Things that do not seem to work:
<br>
<br>- The level meters ("multi track") in 'alsamixer' do not seem to react to signals in (if this is a bug, it would probably be in the existing ICE1724 code).
<br>
<br>- Ardour 2.1 seems to work only via JACK, not using ALSA directly or via OSS. This still needs to be tracked down.
<br>
<br>
<br>DRIVER DETAILS:
<br>
<br>the following files were added:
<br>
<br>pci/ice1724/maya44.c        - Maya44 specific code
<br>pci/ice1724/maya44.h
<br>pci/ice1724/ice1724.patch
<br>pci/ice1724/ice1724.h.patch - PROPOSED patch to ice1724.h (see SAMPLING RATES)
<br>i2c/other/wm8776.c  - low-level access routines for Wolfson WM8776 codecs 
<br>include/wm8776.h
<br>
<br>
<br>Note that the wm8776.c code is meant to be card-independent and does not actually register the codec with the ALSA infrastructure.
<br>This is done in maya44.c, mainly because some of the WM8776 controls are used in Maya44-specific ways, and should be named appropriately.
<br>
<br>
<br>the following files were created in pci/ice1724, simply #including the corresponding file from the alsa-kernel tree:
<br>
<br>wtm.h
<br>vt1720_mobo.h
<br>revo.h
<br>prodigy192.h
<br>pontis.h
<br>phase.h
<br>maya44.h
<br>juli.h
<br>aureon.h
<br>amp.h
<br>envy24ht.h
<br>se.h
<br>prodigy_hifi.h
<br>
<br>
<br>*I hope this is the correct way to do things.*
<br>
<br>
<br>SAMPLING RATES:
<br>
<br>The Maya44 card (or more exactly, the Wolfson WM8776 codecs) allow a maximum sampling rate of 192 kHz for playback and 92 kHz for capture.
<br>
<br>As the ICE1724 chip only allows one global sampling rate, this is handled as follows:
<br>
<br>* setting the sampling rate on any open PCM device on the maya44 card will always set the *global* sampling rate for all playback and capture channels.
<br>
<br>* In the current state of the driver, setting rates of up to 192 kHz is permitted even for capture devices.
<br>
<br>*AVOID CAPTURING AT RATES ABOVE 96kHz*, even though it may appear to work. The codec cannot actually capture at such rates, meaning poor quality.
<br>
<br>
<br>I propose some additional code for limiting the sampling rate when setting on a capture pcm device. However because of the global sampling rate, this logic would be somewhat problematic.
<br>
<br>The proposed code (currently deactivated) is in ice1712.h.patch, ice1724.c and maya44.c (in pci/ice1712).
<br>
<br>
<br>SOUND DEVICES:
<br>
<br>PCM devices correspond to inputs/outputs as follows (assuming Maya44 is card #0):
<br>
<br>hw:0,0 input - stereo, analog input 1+2
<br>hw:0,0 output - stereo, analog output 1+2
<br>hw:0,1 input - stereo, analog input 3+4 OR S/PDIF input
<br>hw:0,1 output - stereo, analog output 3+4 (and SPDIF out)
<br>
<br>
<br>NAMING OF MIXER CONTROLS:
<br>
<br>(for more information about the signal flow, please refer to the block diagram on p.24 of the ESI Maya44 manual, or in the ESI windows software).
<br>
<br>
<br>PCM: (digital) output level for channel 1+2
<br>PCM 1: same for channel 3+4
<br>
<br>Mic Phantom+48V: switch for +48V phantom power for electrostatic microphones on input 1/2.
<br>    Make sure this is not turned on while any other source is connected to input 1/2.
<br>    It might damage the source and/or the maya44 card.
<br>
<br>Mic/Line input: if switch is on, input jack 1/2 is microphone input (mono), otherwise line input (stereo).
<br>
<br>Bypass: analogue bypass from ADC input to output for channel 1+2. Same as "Monitor" in the windows driver.
<br>Bypass 1: same for channel 3+4.
<br>
<br>Crossmix: cross-mixer from channels 1+2 to channels 3+4
<br>Crossmix 1: cross-mixer from channels 3+4 to channels 1+2
<br>
<br>IEC958 Output: switch for S/PDIF output.
<br>    This is not supported by the ESI windows driver.
<br>    S/PDIF should output the same signal as channel 3+4. [untested!]
<br>
<br>
<br>Digitial output selectors:
<br>
<br>    These switches allow a direct digital routing from the ADCs to the DACs.
<br>    Each switch determines where the digital input data to one of the DACs comes from.
<br>    They are not supported by the ESI windows driver.
<br>    For normal operation, they should all be set to "PCM out".
<br>
<br>H/W: Output source channel 1
<br>H/W 1: Output source channel 2
<br>H/W 2: Output source channel 3
<br>H/W 3: Output source channel 4
<br>
<br>H/W 4 ... H/W 9: unknown function, left in to enable testing.
<br>    Possibly some of these control S/PDIF output(s).
<br>    If these turn out to be unused, they will go away in later driver versions.
<br>
<br>Selectable values for each of the digital output selectors are:
<br>   "PCM out" -> DAC output of the corresponding channel (default setting)
<br>   "Input 1"...
<br>   "Input 4" -> direct routing from ADC output of the selected input channel
<br>
<br>
<br>--------
<br>
<br>Feb 14, 2008
<br>Rainer Zimmermann
<br>mail@lightshed.de
<br>
<br><p></p><div class="separator"></div><br><p><h2>devices</h2></p>This directory contains specific device bindings for KVM_CAP_DEVICE_CTRL.
<br><p></p><div class="separator"></div><br><p><h2>blockdev</h2></p>   Linux Driver for Mylex DAC960/AcceleRAID/eXtremeRAID PCI RAID Controllers
<br>
<br>			Version 2.2.11 for Linux 2.2.19
<br>			Version 2.4.11 for Linux 2.4.12
<br>
<br>			      PRODUCTION RELEASE
<br>
<br>				11 October 2001
<br>
<br>			       Leonard N. Zubkoff
<br>			       Dandelion Digital
<br>			       lnz@dandelion.com
<br>
<br>	 Copyright 1998-2001 by Leonard N. Zubkoff <lnz@dandelion.com>
<br>
<br>
<br>				 INTRODUCTION
<br>
<br>Mylex, Inc. designs and manufactures a variety of high performance PCI RAID
<br>controllers.  Mylex Corporation is located at 34551 Ardenwood Blvd., Fremont,
<br>California 94555, USA and can be reached at 510.796.6100 or on the World Wide
<br>Web at http://www.mylex.com.  Mylex Technical Support can be reached by
<br>electronic mail at mylexsup@us.ibm.com, by voice at 510.608.2400, or by FAX at
<br>510.745.7715.  Contact information for offices in Europe and Japan is available
<br>on their Web site.
<br>
<br>The latest information on Linux support for DAC960 PCI RAID Controllers, as
<br>well as the most recent release of this driver, will always be available from
<br>my Linux Home Page at URL "http://www.dandelion.com/Linux/".  The Linux DAC960
<br>driver supports all current Mylex PCI RAID controllers including the new
<br>eXtremeRAID 2000/3000 and AcceleRAID 352/170/160 models which have an entirely
<br>new firmware interface from the older eXtremeRAID 1100, AcceleRAID 150/200/250,
<br>and DAC960PJ/PG/PU/PD/PL.  See below for a complete controller list as well as
<br>minimum firmware version requirements.  For simplicity, in most places this
<br>documentation refers to DAC960 generically rather than explicitly listing all
<br>the supported models.
<br>
<br>Driver bug reports should be sent via electronic mail to "lnz@dandelion.com".
<br>Please include with the bug report the complete configuration messages reported
<br>by the driver at startup, along with any subsequent system messages relevant to
<br>the controller's operation, and a detailed description of your system's
<br>hardware configuration.  Driver bugs are actually quite rare; if you encounter
<br>problems with disks being marked offline, for example, please contact Mylex
<br>Technical Support as the problem is related to the hardware configuration
<br>rather than the Linux driver.
<br>
<br>Please consult the RAID controller documentation for detailed information
<br>regarding installation and configuration of the controllers.  This document
<br>primarily provides information specific to the Linux support.
<br>
<br>
<br>				DRIVER FEATURES
<br>
<br>The DAC960 RAID controllers are supported solely as high performance RAID
<br>controllers, not as interfaces to arbitrary SCSI devices.  The Linux DAC960
<br>driver operates at the block device level, the same level as the SCSI and IDE
<br>drivers.  Unlike other RAID controllers currently supported on Linux, the
<br>DAC960 driver is not dependent on the SCSI subsystem, and hence avoids all the
<br>complexity and unnecessary code that would be associated with an implementation
<br>as a SCSI driver.  The DAC960 driver is designed for as high a performance as
<br>possible with no compromises or extra code for compatibility with lower
<br>performance devices.  The DAC960 driver includes extensive error logging and
<br>online configuration management capabilities.  Except for initial configuration
<br>of the controller and adding new disk drives, most everything can be handled
<br>from Linux while the system is operational.
<br>
<br>The DAC960 driver is architected to support up to 8 controllers per system.
<br>Each DAC960 parallel SCSI controller can support up to 15 disk drives per
<br>channel, for a maximum of 60 drives on a four channel controller; the fibre
<br>channel eXtremeRAID 3000 controller supports up to 125 disk drives per loop for
<br>a total of 250 drives.  The drives installed on a controller are divided into
<br>one or more "Drive Groups", and then each Drive Group is subdivided further
<br>into 1 to 32 "Logical Drives".  Each Logical Drive has a specific RAID Level
<br>and caching policy associated with it, and it appears to Linux as a single
<br>block device.  Logical Drives are further subdivided into up to 7 partitions
<br>through the normal Linux and PC disk partitioning schemes.  Logical Drives are
<br>also known as "System Drives", and Drive Groups are also called "Packs".  Both
<br>terms are in use in the Mylex documentation; I have chosen to standardize on
<br>the more generic "Logical Drive" and "Drive Group".
<br>
<br>DAC960 RAID disk devices are named in the style of the obsolete Device File
<br>System (DEVFS).  The device corresponding to Logical Drive D on Controller C
<br>is referred to as /dev/rd/cCdD, and the partitions are called /dev/rd/cCdDp1
<br>through /dev/rd/cCdDp7.  For example, partition 3 of Logical Drive 5 on
<br>Controller 2 is referred to as /dev/rd/c2d5p3.  Note that unlike with SCSI
<br>disks the device names will not change in the event of a disk drive failure.
<br>The DAC960 driver is assigned major numbers 48 - 55 with one major number per
<br>controller.  The 8 bits of minor number are divided into 5 bits for the Logical
<br>Drive and 3 bits for the partition.
<br>
<br>
<br>	  SUPPORTED DAC960/AcceleRAID/eXtremeRAID PCI RAID CONTROLLERS
<br>
<br>The following list comprises the supported DAC960, AcceleRAID, and eXtremeRAID
<br>PCI RAID Controllers as of the date of this document.  It is recommended that
<br>anyone purchasing a Mylex PCI RAID Controller not in the following table
<br>contact the author beforehand to verify that it is or will be supported.
<br>
<br>eXtremeRAID 3000
<br>	    1 Wide Ultra-2/LVD SCSI channel
<br>	    2 External Fibre FC-AL channels
<br>	    233MHz StrongARM SA 110 Processor
<br>	    64 Bit 33MHz PCI (backward compatible with 32 Bit PCI slots)
<br>	    32MB/64MB ECC SDRAM Memory
<br>
<br>eXtremeRAID 2000
<br>	    4 Wide Ultra-160 LVD SCSI channels
<br>	    233MHz StrongARM SA 110 Processor
<br>	    64 Bit 33MHz PCI (backward compatible with 32 Bit PCI slots)
<br>	    32MB/64MB ECC SDRAM Memory
<br>
<br>AcceleRAID 352
<br>	    2 Wide Ultra-160 LVD SCSI channels
<br>	    100MHz Intel i960RN RISC Processor
<br>	    64 Bit 33MHz PCI (backward compatible with 32 Bit PCI slots)
<br>	    32MB/64MB ECC SDRAM Memory
<br>
<br>AcceleRAID 170
<br>	    1 Wide Ultra-160 LVD SCSI channel
<br>	    100MHz Intel i960RM RISC Processor
<br>	    16MB/32MB/64MB ECC SDRAM Memory
<br>
<br>AcceleRAID 160 (AcceleRAID 170LP)
<br>	    1 Wide Ultra-160 LVD SCSI channel
<br>	    100MHz Intel i960RS RISC Processor
<br>	    Built in 16M ECC SDRAM Memory
<br>	    PCI Low Profile Form Factor - fit for 2U height
<br>
<br>eXtremeRAID 1100 (DAC1164P)
<br>	    3 Wide Ultra-2/LVD SCSI channels
<br>	    233MHz StrongARM SA 110 Processor
<br>	    64 Bit 33MHz PCI (backward compatible with 32 Bit PCI slots)
<br>	    16MB/32MB/64MB Parity SDRAM Memory with Battery Backup
<br>
<br>AcceleRAID 250 (DAC960PTL1)
<br>	    Uses onboard Symbios SCSI chips on certain motherboards
<br>	    Also includes one onboard Wide Ultra-2/LVD SCSI Channel
<br>	    66MHz Intel i960RD RISC Processor
<br>	    4MB/8MB/16MB/32MB/64MB/128MB ECC EDO Memory
<br>
<br>AcceleRAID 200 (DAC960PTL0)
<br>	    Uses onboard Symbios SCSI chips on certain motherboards
<br>	    Includes no onboard SCSI Channels
<br>	    66MHz Intel i960RD RISC Processor
<br>	    4MB/8MB/16MB/32MB/64MB/128MB ECC EDO Memory
<br>
<br>AcceleRAID 150 (DAC960PRL)
<br>	    Uses onboard Symbios SCSI chips on certain motherboards
<br>	    Also includes one onboard Wide Ultra-2/LVD SCSI Channel
<br>	    33MHz Intel i960RP RISC Processor
<br>	    4MB Parity EDO Memory
<br>
<br>DAC960PJ    1/2/3 Wide Ultra SCSI-3 Channels
<br>	    66MHz Intel i960RD RISC Processor
<br>	    4MB/8MB/16MB/32MB/64MB/128MB ECC EDO Memory
<br>
<br>DAC960PG    1/2/3 Wide Ultra SCSI-3 Channels
<br>	    33MHz Intel i960RP RISC Processor
<br>	    4MB/8MB ECC EDO Memory
<br>
<br>DAC960PU    1/2/3 Wide Ultra SCSI-3 Channels
<br>	    Intel i960CF RISC Processor
<br>	    4MB/8MB EDRAM or 2MB/4MB/8MB/16MB/32MB DRAM Memory
<br>
<br>DAC960PD    1/2/3 Wide Fast SCSI-2 Channels
<br>	    Intel i960CF RISC Processor
<br>	    4MB/8MB EDRAM or 2MB/4MB/8MB/16MB/32MB DRAM Memory
<br>
<br>DAC960PL    1/2/3 Wide Fast SCSI-2 Channels
<br>	    Intel i960 RISC Processor
<br>	    2MB/4MB/8MB/16MB/32MB DRAM Memory
<br>
<br>DAC960P	    1/2/3 Wide Fast SCSI-2 Channels
<br>	    Intel i960 RISC Processor
<br>	    2MB/4MB/8MB/16MB/32MB DRAM Memory
<br>
<br>For the eXtremeRAID 2000/3000 and AcceleRAID 352/170/160, firmware version
<br>6.00-01 or above is required.
<br>
<br>For the eXtremeRAID 1100, firmware version 5.06-0-52 or above is required.
<br>
<br>For the AcceleRAID 250, 200, and 150, firmware version 4.06-0-57 or above is
<br>required.
<br>
<br>For the DAC960PJ and DAC960PG, firmware version 4.06-0-00 or above is required.
<br>
<br>For the DAC960PU, DAC960PD, DAC960PL, and DAC960P, either firmware version
<br>3.51-0-04 or above is required (for dual Flash ROM controllers), or firmware
<br>version 2.73-0-00 or above is required (for single Flash ROM controllers)
<br>
<br>Please note that not all SCSI disk drives are suitable for use with DAC960
<br>controllers, and only particular firmware versions of any given model may
<br>actually function correctly.  Similarly, not all motherboards have a BIOS that
<br>properly initializes the AcceleRAID 250, AcceleRAID 200, AcceleRAID 150,
<br>DAC960PJ, and DAC960PG because the Intel i960RD/RP is a multi-function device.
<br>If in doubt, contact Mylex RAID Technical Support (mylexsup@us.ibm.com) to
<br>verify compatibility.  Mylex makes available a hard disk compatibility list at
<br>http://www.mylex.com/support/hdcomp/hd-lists.html.
<br>
<br>
<br>			      DRIVER INSTALLATION
<br>
<br>This distribution was prepared for Linux kernel version 2.2.19 or 2.4.12.
<br>
<br>To install the DAC960 RAID driver, you may use the following commands,
<br>replacing "/usr/src" with wherever you keep your Linux kernel source tree:
<br>
<br>  cd /usr/src
<br>  tar -xvzf DAC960-2.2.11.tar.gz (or DAC960-2.4.11.tar.gz)
<br>  mv README.DAC960 linux/Documentation
<br>  mv DAC960.[ch] linux/drivers/block
<br>  patch -p0 < DAC960.patch (if DAC960.patch is included)
<br>  cd linux
<br>  make config
<br>  make bzImage (or zImage)
<br>
<br>Then install "arch/x86/boot/bzImage" or "arch/x86/boot/zImage" as your
<br>standard kernel, run lilo if appropriate, and reboot.
<br>
<br>To create the necessary devices in /dev, the "make_rd" script included in
<br>"DAC960-Utilities.tar.gz" from http://www.dandelion.com/Linux/ may be used.
<br>LILO 21 and FDISK v2.9 include DAC960 support; also included in this archive
<br>are patches to LILO 20 and FDISK v2.8 that add DAC960 support, along with
<br>statically linked executables of LILO and FDISK.  This modified version of LILO
<br>will allow booting from a DAC960 controller and/or mounting the root file
<br>system from a DAC960.
<br>
<br>Red Hat Linux 6.0 and SuSE Linux 6.1 include support for Mylex PCI RAID
<br>controllers.  Installing directly onto a DAC960 may be problematic from other
<br>Linux distributions until their installation utilities are updated.
<br>
<br>
<br>			      INSTALLATION NOTES
<br>
<br>Before installing Linux or adding DAC960 logical drives to an existing Linux
<br>system, the controller must first be configured to provide one or more logical
<br>drives using the BIOS Configuration Utility or DACCF.  Please note that since
<br>there are only at most 6 usable partitions on each logical drive, systems
<br>requiring more partitions should subdivide a drive group into multiple logical
<br>drives, each of which can have up to 6 usable partitions.  Also, note that with
<br>large disk arrays it is advisable to enable the 8GB BIOS Geometry (255/63)
<br>rather than accepting the default 2GB BIOS Geometry (128/32); failing to so do
<br>will cause the logical drive geometry to have more than 65535 cylinders which
<br>will make it impossible for FDISK to be used properly.  The 8GB BIOS Geometry
<br>can be enabled by configuring the DAC960 BIOS, which is accessible via Alt-M
<br>during the BIOS initialization sequence.
<br>
<br>For maximum performance and the most efficient E2FSCK performance, it is
<br>recommended that EXT2 file systems be built with a 4KB block size and 16 block
<br>stride to match the DAC960 controller's 64KB default stripe size.  The command
<br>"mke2fs -b 4096 -R stride=16 <device>" is appropriate.  Unless there will be a
<br>large number of small files on the file systems, it is also beneficial to add
<br>the "-i 16384" option to increase the bytes per inode parameter thereby
<br>reducing the file system metadata.  Finally, on systems that will only be run
<br>with Linux 2.2 or later kernels it is beneficial to enable sparse superblocks
<br>with the "-s 1" option.
<br>
<br>
<br>		      DAC960 ANNOUNCEMENTS MAILING LIST
<br>
<br>The DAC960 Announcements Mailing List provides a forum for informing Linux
<br>users of new driver releases and other announcements regarding Linux support
<br>for DAC960 PCI RAID Controllers.  To join the mailing list, send a message to
<br>"dac960-announce-request@dandelion.com" with the line "subscribe" in the
<br>message body.
<br>
<br>
<br>		CONTROLLER CONFIGURATION AND STATUS MONITORING
<br>
<br>The DAC960 RAID controllers running firmware 4.06 or above include a Background
<br>Initialization facility so that system downtime is minimized both for initial
<br>installation and subsequent configuration of additional storage.  The BIOS
<br>Configuration Utility (accessible via Alt-R during the BIOS initialization
<br>sequence) is used to quickly configure the controller, and then the logical
<br>drives that have been created are available for immediate use even while they
<br>are still being initialized by the controller.  The primary need for online
<br>configuration and status monitoring is then to avoid system downtime when disk
<br>drives fail and must be replaced.  Mylex's online monitoring and configuration
<br>utilities are being ported to Linux and will become available at some point in
<br>the future.  Note that with a SAF-TE (SCSI Accessed Fault-Tolerant Enclosure)
<br>enclosure, the controller is able to rebuild failed drives automatically as
<br>soon as a drive replacement is made available.
<br>
<br>The primary interfaces for controller configuration and status monitoring are
<br>special files created in the /proc/rd/... hierarchy along with the normal
<br>system console logging mechanism.  Whenever the system is operating, the DAC960
<br>driver queries each controller for status information every 10 seconds, and
<br>checks for additional conditions every 60 seconds.  The initial status of each
<br>controller is always available for controller N in /proc/rd/cN/initial_status,
<br>and the current status as of the last status monitoring query is available in
<br>/proc/rd/cN/current_status.  In addition, status changes are also logged by the
<br>driver to the system console and will appear in the log files maintained by
<br>syslog.  The progress of asynchronous rebuild or consistency check operations
<br>is also available in /proc/rd/cN/current_status, and progress messages are
<br>logged to the system console at most every 60 seconds.
<br>
<br>Starting with the 2.2.3/2.0.3 versions of the driver, the status information
<br>available in /proc/rd/cN/initial_status and /proc/rd/cN/current_status has been
<br>augmented to include the vendor, model, revision, and serial number (if
<br>available) for each physical device found connected to the controller:
<br>
<br>***** DAC960 RAID Driver Version 2.2.3 of 19 August 1999 *****
<br>Copyright 1998-1999 by Leonard N. Zubkoff <lnz@dandelion.com>
<br>Configuring Mylex DAC960PRL PCI RAID Controller
<br>  Firmware Version: 4.07-0-07, Channels: 1, Memory Size: 16MB
<br>  PCI Bus: 1, Device: 4, Function: 1, I/O Address: Unassigned
<br>  PCI Address: 0xFE300000 mapped at 0xA0800000, IRQ Channel: 21
<br>  Controller Queue Depth: 128, Maximum Blocks per Command: 128
<br>  Driver Queue Depth: 127, Maximum Scatter/Gather Segments: 33
<br>  Stripe Size: 64KB, Segment Size: 8KB, BIOS Geometry: 255/63
<br>  SAF-TE Enclosure Management Enabled
<br>  Physical Devices:
<br>    0:0  Vendor: IBM       Model: DRVS09D           Revision: 0270
<br>         Serial Number:       68016775HA
<br>         Disk Status: Online, 17928192 blocks
<br>    0:1  Vendor: IBM       Model: DRVS09D           Revision: 0270
<br>         Serial Number:       68004E53HA
<br>         Disk Status: Online, 17928192 blocks
<br>    0:2  Vendor: IBM       Model: DRVS09D           Revision: 0270
<br>         Serial Number:       13013935HA
<br>         Disk Status: Online, 17928192 blocks
<br>    0:3  Vendor: IBM       Model: DRVS09D           Revision: 0270
<br>         Serial Number:       13016897HA
<br>         Disk Status: Online, 17928192 blocks
<br>    0:4  Vendor: IBM       Model: DRVS09D           Revision: 0270
<br>         Serial Number:       68019905HA
<br>         Disk Status: Online, 17928192 blocks
<br>    0:5  Vendor: IBM       Model: DRVS09D           Revision: 0270
<br>         Serial Number:       68012753HA
<br>         Disk Status: Online, 17928192 blocks
<br>    0:6  Vendor: ESG-SHV   Model: SCA HSBP M6       Revision: 0.61
<br>  Logical Drives:
<br>    /dev/rd/c0d0: RAID-5, Online, 89640960 blocks, Write Thru
<br>  No Rebuild or Consistency Check in Progress
<br>
<br>To simplify the monitoring process for custom software, the special file
<br>/proc/rd/status returns "OK" when all DAC960 controllers in the system are
<br>operating normally and no failures have occurred, or "ALERT" if any logical
<br>drives are offline or critical or any non-standby physical drives are dead.
<br>
<br>Configuration commands for controller N are available via the special file
<br>/proc/rd/cN/user_command.  A human readable command can be written to this
<br>special file to initiate a configuration operation, and the results of the
<br>operation can then be read back from the special file in addition to being
<br>logged to the system console.  The shell command sequence
<br>
<br>  echo "<configuration-command>" > /proc/rd/c0/user_command
<br>  cat /proc/rd/c0/user_command
<br>
<br>is typically used to execute configuration commands.  The configuration
<br>commands are:
<br>
<br>  flush-cache
<br>
<br>    The "flush-cache" command flushes the controller's cache.  The system
<br>    automatically flushes the cache at shutdown or if the driver module is
<br>    unloaded, so this command is only needed to be certain a write back cache
<br>    is flushed to disk before the system is powered off by a command to a UPS.
<br>    Note that the flush-cache command also stops an asynchronous rebuild or
<br>    consistency check, so it should not be used except when the system is being
<br>    halted.
<br>
<br>  kill <channel>:<target-id>
<br>
<br>    The "kill" command marks the physical drive <channel>:<target-id> as DEAD.
<br>    This command is provided primarily for testing, and should not be used
<br>    during normal system operation.
<br>
<br>  make-online <channel>:<target-id>
<br>
<br>    The "make-online" command changes the physical drive <channel>:<target-id>
<br>    from status DEAD to status ONLINE.  In cases where multiple physical drives
<br>    have been killed simultaneously, this command may be used to bring all but
<br>    one of them back online, after which a rebuild to the final drive is
<br>    necessary.
<br>
<br>    Warning: make-online should only be used on a dead physical drive that is
<br>    an active part of a drive group, never on a standby drive.  The command
<br>    should never be used on a dead drive that is part of a critical logical
<br>    drive; rebuild should be used if only a single drive is dead.
<br>
<br>  make-standby <channel>:<target-id>
<br>
<br>    The "make-standby" command changes physical drive <channel>:<target-id>
<br>    from status DEAD to status STANDBY.  It should only be used in cases where
<br>    a dead drive was replaced after an automatic rebuild was performed onto a
<br>    standby drive.  It cannot be used to add a standby drive to the controller
<br>    configuration if one was not created initially; the BIOS Configuration
<br>    Utility must be used for that currently.
<br>
<br>  rebuild <channel>:<target-id>
<br>
<br>    The "rebuild" command initiates an asynchronous rebuild onto physical drive
<br>    <channel>:<target-id>.  It should only be used when a dead drive has been
<br>    replaced.
<br>
<br>  check-consistency <logical-drive-number>
<br>
<br>    The "check-consistency" command initiates an asynchronous consistency check
<br>    of <logical-drive-number> with automatic restoration.  It can be used
<br>    whenever it is desired to verify the consistency of the redundancy
<br>    information.
<br>
<br>  cancel-rebuild
<br>  cancel-consistency-check
<br>
<br>    The "cancel-rebuild" and "cancel-consistency-check" commands cancel any
<br>    rebuild or consistency check operations previously initiated.
<br>
<br>
<br>	       EXAMPLE I - DRIVE FAILURE WITHOUT A STANDBY DRIVE
<br>
<br>The following annotated logs demonstrate the controller configuration and and
<br>online status monitoring capabilities of the Linux DAC960 Driver.  The test
<br>configuration comprises 6 1GB Quantum Atlas I disk drives on two channels of a
<br>DAC960PJ controller.  The physical drives are configured into a single drive
<br>group without a standby drive, and the drive group has been configured into two
<br>logical drives, one RAID-5 and one RAID-6.  Note that these logs are from an
<br>earlier version of the driver and the messages have changed somewhat with newer
<br>releases, but the functionality remains similar.  First, here is the current
<br>status of the RAID configuration:
<br>
<br>gwynedd:/u/lnz# cat /proc/rd/c0/current_status
<br>***** DAC960 RAID Driver Version 2.0.0 of 23 March 1999 *****
<br>Copyright 1998-1999 by Leonard N. Zubkoff <lnz@dandelion.com>
<br>Configuring Mylex DAC960PJ PCI RAID Controller
<br>  Firmware Version: 4.06-0-08, Channels: 3, Memory Size: 8MB
<br>  PCI Bus: 0, Device: 19, Function: 1, I/O Address: Unassigned
<br>  PCI Address: 0xFD4FC000 mapped at 0x8807000, IRQ Channel: 9
<br>  Controller Queue Depth: 128, Maximum Blocks per Command: 128
<br>  Driver Queue Depth: 127, Maximum Scatter/Gather Segments: 33
<br>  Stripe Size: 64KB, Segment Size: 8KB, BIOS Geometry: 255/63
<br>  Physical Devices:
<br>    0:1 - Disk: Online, 2201600 blocks
<br>    0:2 - Disk: Online, 2201600 blocks
<br>    0:3 - Disk: Online, 2201600 blocks
<br>    1:1 - Disk: Online, 2201600 blocks
<br>    1:2 - Disk: Online, 2201600 blocks
<br>    1:3 - Disk: Online, 2201600 blocks
<br>  Logical Drives:
<br>    /dev/rd/c0d0: RAID-5, Online, 5498880 blocks, Write Thru
<br>    /dev/rd/c0d1: RAID-6, Online, 3305472 blocks, Write Thru
<br>  No Rebuild or Consistency Check in Progress
<br>
<br>gwynedd:/u/lnz# cat /proc/rd/status
<br>OK
<br>
<br>The above messages indicate that everything is healthy, and /proc/rd/status
<br>returns "OK" indicating that there are no problems with any DAC960 controller
<br>in the system.  For demonstration purposes, while I/O is active Physical Drive
<br>1:1 is now disconnected, simulating a drive failure.  The failure is noted by
<br>the driver within 10 seconds of the controller's having detected it, and the
<br>driver logs the following console status messages indicating that Logical
<br>Drives 0 and 1 are now CRITICAL as a result of Physical Drive 1:1 being DEAD:
<br>
<br>DAC960#0: Physical Drive 1:2 Error Log: Sense Key = 6, ASC = 29, ASCQ = 02
<br>DAC960#0: Physical Drive 1:3 Error Log: Sense Key = 6, ASC = 29, ASCQ = 02
<br>DAC960#0: Physical Drive 1:1 killed because of timeout on SCSI command
<br>DAC960#0: Physical Drive 1:1 is now DEAD
<br>DAC960#0: Logical Drive 0 (/dev/rd/c0d0) is now CRITICAL
<br>DAC960#0: Logical Drive 1 (/dev/rd/c0d1) is now CRITICAL
<br>
<br>The Sense Keys logged here are just Check Condition / Unit Attention conditions
<br>arising from a SCSI bus reset that is forced by the controller during its error
<br>recovery procedures.  Concurrently with the above, the driver status available
<br>from /proc/rd also reflects the drive failure.  The status message in
<br>/proc/rd/status has changed from "OK" to "ALERT":
<br>
<br>gwynedd:/u/lnz# cat /proc/rd/status
<br>ALERT
<br>
<br>and /proc/rd/c0/current_status has been updated:
<br>
<br>gwynedd:/u/lnz# cat /proc/rd/c0/current_status
<br>  ...
<br>  Physical Devices:
<br>    0:1 - Disk: Online, 2201600 blocks
<br>    0:2 - Disk: Online, 2201600 blocks
<br>    0:3 - Disk: Online, 2201600 blocks
<br>    1:1 - Disk: Dead, 2201600 blocks
<br>    1:2 - Disk: Online, 2201600 blocks
<br>    1:3 - Disk: Online, 2201600 blocks
<br>  Logical Drives:
<br>    /dev/rd/c0d0: RAID-5, Critical, 5498880 blocks, Write Thru
<br>    /dev/rd/c0d1: RAID-6, Critical, 3305472 blocks, Write Thru
<br>  No Rebuild or Consistency Check in Progress
<br>
<br>Since there are no standby drives configured, the system can continue to access
<br>the logical drives in a performance degraded mode until the failed drive is
<br>replaced and a rebuild operation completed to restore the redundancy of the
<br>logical drives.  Once Physical Drive 1:1 is replaced with a properly
<br>functioning drive, or if the physical drive was killed without having failed
<br>(e.g., due to electrical problems on the SCSI bus), the user can instruct the
<br>controller to initiate a rebuild operation onto the newly replaced drive:
<br>
<br>gwynedd:/u/lnz# echo "rebuild 1:1" > /proc/rd/c0/user_command
<br>gwynedd:/u/lnz# cat /proc/rd/c0/user_command
<br>Rebuild of Physical Drive 1:1 Initiated
<br>
<br>The echo command instructs the controller to initiate an asynchronous rebuild
<br>operation onto Physical Drive 1:1, and the status message that results from the
<br>operation is then available for reading from /proc/rd/c0/user_command, as well
<br>as being logged to the console by the driver.
<br>
<br>Within 10 seconds of this command the driver logs the initiation of the
<br>asynchronous rebuild operation:
<br>
<br>DAC960#0: Rebuild of Physical Drive 1:1 Initiated
<br>DAC960#0: Physical Drive 1:1 Error Log: Sense Key = 6, ASC = 29, ASCQ = 01
<br>DAC960#0: Physical Drive 1:1 is now WRITE-ONLY
<br>DAC960#0: Rebuild in Progress: Logical Drive 0 (/dev/rd/c0d0) 1% completed
<br>
<br>and /proc/rd/c0/current_status is updated:
<br>
<br>gwynedd:/u/lnz# cat /proc/rd/c0/current_status
<br>  ...
<br>  Physical Devices:
<br>    0:1 - Disk: Online, 2201600 blocks
<br>    0:2 - Disk: Online, 2201600 blocks
<br>    0:3 - Disk: Online, 2201600 blocks
<br>    1:1 - Disk: Write-Only, 2201600 blocks
<br>    1:2 - Disk: Online, 2201600 blocks
<br>    1:3 - Disk: Online, 2201600 blocks
<br>  Logical Drives:
<br>    /dev/rd/c0d0: RAID-5, Critical, 5498880 blocks, Write Thru
<br>    /dev/rd/c0d1: RAID-6, Critical, 3305472 blocks, Write Thru
<br>  Rebuild in Progress: Logical Drive 0 (/dev/rd/c0d0) 6% completed
<br>
<br>As the rebuild progresses, the current status in /proc/rd/c0/current_status is
<br>updated every 10 seconds:
<br>
<br>gwynedd:/u/lnz# cat /proc/rd/c0/current_status
<br>  ...
<br>  Physical Devices:
<br>    0:1 - Disk: Online, 2201600 blocks
<br>    0:2 - Disk: Online, 2201600 blocks
<br>    0:3 - Disk: Online, 2201600 blocks
<br>    1:1 - Disk: Write-Only, 2201600 blocks
<br>    1:2 - Disk: Online, 2201600 blocks
<br>    1:3 - Disk: Online, 2201600 blocks
<br>  Logical Drives:
<br>    /dev/rd/c0d0: RAID-5, Critical, 5498880 blocks, Write Thru
<br>    /dev/rd/c0d1: RAID-6, Critical, 3305472 blocks, Write Thru
<br>  Rebuild in Progress: Logical Drive 0 (/dev/rd/c0d0) 15% completed
<br>
<br>and every minute a progress message is logged to the console by the driver:
<br>
<br>DAC960#0: Rebuild in Progress: Logical Drive 0 (/dev/rd/c0d0) 32% completed
<br>DAC960#0: Rebuild in Progress: Logical Drive 0 (/dev/rd/c0d0) 63% completed
<br>DAC960#0: Rebuild in Progress: Logical Drive 0 (/dev/rd/c0d0) 94% completed
<br>DAC960#0: Rebuild in Progress: Logical Drive 1 (/dev/rd/c0d1) 94% completed
<br>
<br>Finally, the rebuild completes successfully.  The driver logs the status of the 
<br>logical and physical drives and the rebuild completion:
<br>
<br>DAC960#0: Rebuild Completed Successfully
<br>DAC960#0: Physical Drive 1:1 is now ONLINE
<br>DAC960#0: Logical Drive 0 (/dev/rd/c0d0) is now ONLINE
<br>DAC960#0: Logical Drive 1 (/dev/rd/c0d1) is now ONLINE
<br>
<br>/proc/rd/c0/current_status is updated:
<br>
<br>gwynedd:/u/lnz# cat /proc/rd/c0/current_status
<br>  ...
<br>  Physical Devices:
<br>    0:1 - Disk: Online, 2201600 blocks
<br>    0:2 - Disk: Online, 2201600 blocks
<br>    0:3 - Disk: Online, 2201600 blocks
<br>    1:1 - Disk: Online, 2201600 blocks
<br>    1:2 - Disk: Online, 2201600 blocks
<br>    1:3 - Disk: Online, 2201600 blocks
<br>  Logical Drives:
<br>    /dev/rd/c0d0: RAID-5, Online, 5498880 blocks, Write Thru
<br>    /dev/rd/c0d1: RAID-6, Online, 3305472 blocks, Write Thru
<br>  Rebuild Completed Successfully
<br>
<br>and /proc/rd/status indicates that everything is healthy once again:
<br>
<br>gwynedd:/u/lnz# cat /proc/rd/status
<br>OK
<br>
<br>
<br>		EXAMPLE II - DRIVE FAILURE WITH A STANDBY DRIVE
<br>
<br>The following annotated logs demonstrate the controller configuration and and
<br>online status monitoring capabilities of the Linux DAC960 Driver.  The test
<br>configuration comprises 6 1GB Quantum Atlas I disk drives on two channels of a
<br>DAC960PJ controller.  The physical drives are configured into a single drive
<br>group with a standby drive, and the drive group has been configured into two
<br>logical drives, one RAID-5 and one RAID-6.  Note that these logs are from an
<br>earlier version of the driver and the messages have changed somewhat with newer
<br>releases, but the functionality remains similar.  First, here is the current
<br>status of the RAID configuration:
<br>
<br>gwynedd:/u/lnz# cat /proc/rd/c0/current_status
<br>***** DAC960 RAID Driver Version 2.0.0 of 23 March 1999 *****
<br>Copyright 1998-1999 by Leonard N. Zubkoff <lnz@dandelion.com>
<br>Configuring Mylex DAC960PJ PCI RAID Controller
<br>  Firmware Version: 4.06-0-08, Channels: 3, Memory Size: 8MB
<br>  PCI Bus: 0, Device: 19, Function: 1, I/O Address: Unassigned
<br>  PCI Address: 0xFD4FC000 mapped at 0x8807000, IRQ Channel: 9
<br>  Controller Queue Depth: 128, Maximum Blocks per Command: 128
<br>  Driver Queue Depth: 127, Maximum Scatter/Gather Segments: 33
<br>  Stripe Size: 64KB, Segment Size: 8KB, BIOS Geometry: 255/63
<br>  Physical Devices:
<br>    0:1 - Disk: Online, 2201600 blocks
<br>    0:2 - Disk: Online, 2201600 blocks
<br>    0:3 - Disk: Online, 2201600 blocks
<br>    1:1 - Disk: Online, 2201600 blocks
<br>    1:2 - Disk: Online, 2201600 blocks
<br>    1:3 - Disk: Standby, 2201600 blocks
<br>  Logical Drives:
<br>    /dev/rd/c0d0: RAID-5, Online, 4399104 blocks, Write Thru
<br>    /dev/rd/c0d1: RAID-6, Online, 2754560 blocks, Write Thru
<br>  No Rebuild or Consistency Check in Progress
<br>
<br>gwynedd:/u/lnz# cat /proc/rd/status
<br>OK
<br>
<br>The above messages indicate that everything is healthy, and /proc/rd/status
<br>returns "OK" indicating that there are no problems with any DAC960 controller
<br>in the system.  For demonstration purposes, while I/O is active Physical Drive
<br>1:2 is now disconnected, simulating a drive failure.  The failure is noted by
<br>the driver within 10 seconds of the controller's having detected it, and the
<br>driver logs the following console status messages:
<br>
<br>DAC960#0: Physical Drive 1:1 Error Log: Sense Key = 6, ASC = 29, ASCQ = 02
<br>DAC960#0: Physical Drive 1:3 Error Log: Sense Key = 6, ASC = 29, ASCQ = 02
<br>DAC960#0: Physical Drive 1:2 killed because of timeout on SCSI command
<br>DAC960#0: Physical Drive 1:2 is now DEAD
<br>DAC960#0: Physical Drive 1:2 killed because it was removed
<br>DAC960#0: Logical Drive 0 (/dev/rd/c0d0) is now CRITICAL
<br>DAC960#0: Logical Drive 1 (/dev/rd/c0d1) is now CRITICAL
<br>
<br>Since a standby drive is configured, the controller automatically begins
<br>rebuilding onto the standby drive:
<br>
<br>DAC960#0: Physical Drive 1:3 is now WRITE-ONLY
<br>DAC960#0: Rebuild in Progress: Logical Drive 0 (/dev/rd/c0d0) 4% completed
<br>
<br>Concurrently with the above, the driver status available from /proc/rd also
<br>reflects the drive failure and automatic rebuild.  The status message in
<br>/proc/rd/status has changed from "OK" to "ALERT":
<br>
<br>gwynedd:/u/lnz# cat /proc/rd/status
<br>ALERT
<br>
<br>and /proc/rd/c0/current_status has been updated:
<br>
<br>gwynedd:/u/lnz# cat /proc/rd/c0/current_status
<br>  ...
<br>  Physical Devices:
<br>    0:1 - Disk: Online, 2201600 blocks
<br>    0:2 - Disk: Online, 2201600 blocks
<br>    0:3 - Disk: Online, 2201600 blocks
<br>    1:1 - Disk: Online, 2201600 blocks
<br>    1:2 - Disk: Dead, 2201600 blocks
<br>    1:3 - Disk: Write-Only, 2201600 blocks
<br>  Logical Drives:
<br>    /dev/rd/c0d0: RAID-5, Critical, 4399104 blocks, Write Thru
<br>    /dev/rd/c0d1: RAID-6, Critical, 2754560 blocks, Write Thru
<br>  Rebuild in Progress: Logical Drive 0 (/dev/rd/c0d0) 4% completed
<br>
<br>As the rebuild progresses, the current status in /proc/rd/c0/current_status is
<br>updated every 10 seconds:
<br>
<br>gwynedd:/u/lnz# cat /proc/rd/c0/current_status
<br>  ...
<br>  Physical Devices:
<br>    0:1 - Disk: Online, 2201600 blocks
<br>    0:2 - Disk: Online, 2201600 blocks
<br>    0:3 - Disk: Online, 2201600 blocks
<br>    1:1 - Disk: Online, 2201600 blocks
<br>    1:2 - Disk: Dead, 2201600 blocks
<br>    1:3 - Disk: Write-Only, 2201600 blocks
<br>  Logical Drives:
<br>    /dev/rd/c0d0: RAID-5, Critical, 4399104 blocks, Write Thru
<br>    /dev/rd/c0d1: RAID-6, Critical, 2754560 blocks, Write Thru
<br>  Rebuild in Progress: Logical Drive 0 (/dev/rd/c0d0) 40% completed
<br>
<br>and every minute a progress message is logged on the console by the driver:
<br>
<br>DAC960#0: Rebuild in Progress: Logical Drive 0 (/dev/rd/c0d0) 40% completed
<br>DAC960#0: Rebuild in Progress: Logical Drive 0 (/dev/rd/c0d0) 76% completed
<br>DAC960#0: Rebuild in Progress: Logical Drive 1 (/dev/rd/c0d1) 66% completed
<br>DAC960#0: Rebuild in Progress: Logical Drive 1 (/dev/rd/c0d1) 84% completed
<br>
<br>Finally, the rebuild completes successfully.  The driver logs the status of the 
<br>logical and physical drives and the rebuild completion:
<br>
<br>DAC960#0: Rebuild Completed Successfully
<br>DAC960#0: Physical Drive 1:3 is now ONLINE
<br>DAC960#0: Logical Drive 0 (/dev/rd/c0d0) is now ONLINE
<br>DAC960#0: Logical Drive 1 (/dev/rd/c0d1) is now ONLINE
<br>
<br>/proc/rd/c0/current_status is updated:
<br>
<br>***** DAC960 RAID Driver Version 2.0.0 of 23 March 1999 *****
<br>Copyright 1998-1999 by Leonard N. Zubkoff <lnz@dandelion.com>
<br>Configuring Mylex DAC960PJ PCI RAID Controller
<br>  Firmware Version: 4.06-0-08, Channels: 3, Memory Size: 8MB
<br>  PCI Bus: 0, Device: 19, Function: 1, I/O Address: Unassigned
<br>  PCI Address: 0xFD4FC000 mapped at 0x8807000, IRQ Channel: 9
<br>  Controller Queue Depth: 128, Maximum Blocks per Command: 128
<br>  Driver Queue Depth: 127, Maximum Scatter/Gather Segments: 33
<br>  Stripe Size: 64KB, Segment Size: 8KB, BIOS Geometry: 255/63
<br>  Physical Devices:
<br>    0:1 - Disk: Online, 2201600 blocks
<br>    0:2 - Disk: Online, 2201600 blocks
<br>    0:3 - Disk: Online, 2201600 blocks
<br>    1:1 - Disk: Online, 2201600 blocks
<br>    1:2 - Disk: Dead, 2201600 blocks
<br>    1:3 - Disk: Online, 2201600 blocks
<br>  Logical Drives:
<br>    /dev/rd/c0d0: RAID-5, Online, 4399104 blocks, Write Thru
<br>    /dev/rd/c0d1: RAID-6, Online, 2754560 blocks, Write Thru
<br>  Rebuild Completed Successfully
<br>
<br>and /proc/rd/status indicates that everything is healthy once again:
<br>
<br>gwynedd:/u/lnz# cat /proc/rd/status
<br>OK
<br>
<br>Note that the absence of a viable standby drive does not create an "ALERT"
<br>status.  Once dead Physical Drive 1:2 has been replaced, the controller must be
<br>told that this has occurred and that the newly replaced drive should become the
<br>new standby drive:
<br>
<br>gwynedd:/u/lnz# echo "make-standby 1:2" > /proc/rd/c0/user_command
<br>gwynedd:/u/lnz# cat /proc/rd/c0/user_command
<br>Make Standby of Physical Drive 1:2 Succeeded
<br>
<br>The echo command instructs the controller to make Physical Drive 1:2 into a
<br>standby drive, and the status message that results from the operation is then
<br>available for reading from /proc/rd/c0/user_command, as well as being logged to
<br>the console by the driver.  Within 60 seconds of this command the driver logs:
<br>
<br>DAC960#0: Physical Drive 1:2 Error Log: Sense Key = 6, ASC = 29, ASCQ = 01
<br>DAC960#0: Physical Drive 1:2 is now STANDBY
<br>DAC960#0: Make Standby of Physical Drive 1:2 Succeeded
<br>
<br>and /proc/rd/c0/current_status is updated:
<br>
<br>gwynedd:/u/lnz# cat /proc/rd/c0/current_status
<br>  ...
<br>  Physical Devices:
<br>    0:1 - Disk: Online, 2201600 blocks
<br>    0:2 - Disk: Online, 2201600 blocks
<br>    0:3 - Disk: Online, 2201600 blocks
<br>    1:1 - Disk: Online, 2201600 blocks
<br>    1:2 - Disk: Standby, 2201600 blocks
<br>    1:3 - Disk: Online, 2201600 blocks
<br>  Logical Drives:
<br>    /dev/rd/c0d0: RAID-5, Online, 4399104 blocks, Write Thru
<br>    /dev/rd/c0d1: RAID-6, Online, 2754560 blocks, Write Thru
<br>  Rebuild Completed Successfully
<br><p></p><div class="separator"></div><br><p><h2>drbd</h2></p>Description
<br>
<br>  DRBD is a shared-nothing, synchronously replicated block device. It
<br>  is designed to serve as a building block for high availability
<br>  clusters and in this context, is a "drop-in" replacement for shared
<br>  storage. Simplistically, you could see it as a network RAID 1.
<br>
<br>  Please visit http://www.drbd.org to find out more.
<br>
<br>The here included files are intended to help understand the implementation
<br>
<br>DRBD-8.3-data-packets.svg, DRBD-data-packets.svg  
<br>  relates some functions, and write packets.
<br>
<br>conn-states-8.dot, disk-states-8.dot, node-states-8.dot
<br>  The sub graphs of DRBD's state transitions
<br><p></p><div class="separator"></div><br><p><h2>sysctl</h2></p>Documentation for /proc/sys/		kernel version 2.2.10
<br>	(c) 1998, 1999,  Rik van Riel <riel@nl.linux.org>
<br>
<br>'Why', I hear you ask, 'would anyone even _want_ documentation
<br>for them sysctl files? If anybody really needs it, it's all in
<br>the source...'
<br>
<br>Well, this documentation is written because some people either
<br>don't know they need to tweak something, or because they don't
<br>have the time or knowledge to read the source code.
<br>
<br>Furthermore, the programmers who built sysctl have built it to
<br>be actually used, not just for the fun of programming it :-)
<br>
<br>==============================================================
<br>
<br>Legal blurb:
<br>
<br>As usual, there are two main things to consider:
<br>1. you get what you pay for
<br>2. it's free
<br>
<br>The consequences are that I won't guarantee the correctness of
<br>this document, and if you come to me complaining about how you
<br>screwed up your system because of wrong documentation, I won't
<br>feel sorry for you. I might even laugh at you...
<br>
<br>But of course, if you _do_ manage to screw up your system using
<br>only the sysctl options used in this file, I'd like to hear of
<br>it. Not only to have a great laugh, but also to make sure that
<br>you're the last RTFMing person to screw up.
<br>
<br>In short, e-mail your suggestions, corrections and / or horror
<br>stories to: <riel@nl.linux.org>
<br>
<br>Rik van Riel.
<br>
<br>==============================================================
<br>
<br>Introduction:
<br>
<br>Sysctl is a means of configuring certain aspects of the kernel
<br>at run-time, and the /proc/sys/ directory is there so that you
<br>don't even need special tools to do it!
<br>In fact, there are only four things needed to use these config
<br>facilities:
<br>- a running Linux system
<br>- root access
<br>- common sense (this is especially hard to come by these days)
<br>- knowledge of what all those values mean
<br>
<br>As a quick 'ls /proc/sys' will show, the directory consists of
<br>several (arch-dependent?) subdirs. Each subdir is mainly about
<br>one part of the kernel, so you can do configuration on a piece
<br>by piece basis, or just some 'thematic frobbing'.
<br>
<br>The subdirs are about:
<br>abi/		execution domains & personalities
<br>debug/		<empty>
<br>dev/		device specific information (eg dev/cdrom/info)
<br>fs/		specific filesystems
<br>		filehandle, inode, dentry and quota tuning
<br>		binfmt_misc <Documentation/binfmt_misc.txt>
<br>kernel/		global kernel info / tuning
<br>		miscellaneous stuff
<br>net/		networking stuff, for documentation look in:
<br>		<Documentation/networking/>
<br>proc/		<empty>
<br>sunrpc/		SUN Remote Procedure Call (NFS)
<br>vm/		memory management tuning
<br>		buffer and cache management
<br>user/		Per user per user namespace limits
<br>
<br>These are the subdirs I have on my system. There might be more
<br>or other subdirs in another setup. If you see another dir, I'd
<br>really like to hear about it :-)
<br><p></p><div class="separator"></div><br><p><h2>isdn</h2></p>
<br>Fax with isdn4linux
<br>===================
<br>
<br>When enabled during kernel configuration, the tty emulator
<br>of the ISDN subsystem is capable of the Fax Class 2 commands.
<br>
<br>This only makes sense under the following conditions :
<br>
<br>- You need the commands as dummy, because you are using
<br>  hylafax (with patch) for AVM capi.
<br>- You want to use the fax capabilities of your isdn-card.
<br>  (supported cards are listed below)
<br>
<br>
<br>NOTE: This implementation does *not* support fax with passive
<br>      ISDN-cards (known as softfax). The low-level driver of
<br>      the ISDN-card and/or the card itself must support this.
<br>
<br>
<br>Supported ISDN-Cards
<br>--------------------
<br>
<br>Eicon DIVA Server BRI/PCI
<br>	- full support with both B-channels.
<br>
<br>Eicon DIVA Server 4BRI/PCI
<br>	- full support with all B-channels.
<br>
<br>Eicon DIVA Server PRI/PCI
<br>	- full support on amount of B-channels
<br>		depending on DSPs on board.
<br>
<br>
<br>
<br>The command set is known as Class 2 (not Class 2.0) and
<br>can be activated by AT+FCLASS=2
<br>
<br>
<br>The interface between the link-level-module and the hardware-level driver
<br>is described in the files INTERFACE.fax and INTERFACE.
<br>
<br>Armin
<br>mac@melware.de
<br>
<br><p></p><div class="separator"></div><br><p><h2>isdn</h2></p>Description of the "concap" encapsulation protocol interface
<br>============================================================
<br>
<br>The "concap" interface is intended to be used by network device
<br>drivers that need to process an encapsulation protocol. 
<br>It is assumed that the protocol interacts with a linux network device by
<br>- data transmission
<br>- connection control (establish, release)
<br>Thus, the mnemonic: "CONnection CONtrolling eNCAPsulation Protocol".
<br>
<br>This is currently only used inside the isdn subsystem. But it might
<br>also be useful to other kinds of network devices. Thus, if you want
<br>to suggest changes that improve usability or performance of the
<br>interface, please let me know. I'm willing to include them in future
<br>releases (even if I needed to adapt the current isdn code to the
<br>changed interface).
<br>
<br>
<br>Why is this useful?
<br>===================
<br>
<br>The encapsulation protocol used on top of WAN connections or permanent
<br>point-to-point links are frequently chosen upon bilateral agreement.
<br>Thus, a device driver for a certain type of hardware must support
<br>several different encapsulation protocols at once.
<br>
<br>The isdn device driver did already support several different
<br>encapsulation protocols. The encapsulation protocol is configured by a
<br>user space utility (isdnctrl). The isdn network interface code then
<br>uses several case statements which select appropriate actions
<br>depending on the currently configured encapsulation protocol.
<br>
<br>In contrast, LAN network interfaces always used a single encapsulation
<br>protocol which is unique to the hardware type of the interface. The LAN
<br>encapsulation is usually done by just sticking a header on the data. Thus,
<br>traditional linux network device drivers used to process the
<br>encapsulation protocol directly (usually by just providing a hard_header()
<br>method in the device structure) using some hardware type specific support
<br>functions. This is simple, direct and efficient. But it doesn't fit all
<br>the requirements for complex WAN encapsulations. 
<br>
<br>
<br>   The configurability of the encapsulation protocol to be used
<br>   makes isdn network interfaces more flexible, but also much more
<br>   complex than traditional lan network interfaces.
<br>
<br>
<br>Many Encapsulation protocols used on top of WAN connections will not just
<br>stick a header on the data. They also might need to set up or release
<br>the WAN connection. They also might want to send other data for their
<br>private purpose over the wire, e.g. ppp does a lot of link level
<br>negotiation before the first piece of user data can be transmitted.
<br>Such encapsulation protocols for WAN devices are typically more complex
<br>than encapsulation protocols for lan devices. Thus, network interface
<br>code for typical WAN devices also tends to be more complex.
<br>
<br>
<br>In order to support Linux' x25 PLP implementation on top of
<br>isdn network interfaces I could have introduced yet another branch to
<br>the various case statements inside drivers/isdn/isdn_net.c.
<br>This eventually made isdn_net.c even more complex. In addition, it made
<br>isdn_net.c harder to maintain. Thus, by identifying an abstract
<br>interface between the network interface code and the encapsulation
<br>protocol, complexity could be reduced and maintainability could be
<br>increased.
<br>
<br>
<br>Likewise, a similar encapsulation protocol will frequently be needed by
<br>several different interfaces of even different hardware type, e.g. the
<br>synchronous ppp implementation used by the isdn driver and the
<br>asynchronous ppp implementation used by the ppp driver have a lot of
<br>similar code in them. By cleanly separating the encapsulation protocol
<br>from the hardware specific interface stuff such code could be shared
<br>better in future.
<br>
<br>
<br>When operating over dial-up-connections (e.g. telephone lines via modem,
<br>non-permanent virtual circuits of wide area networks, ISDN) many
<br>encapsulation protocols will need to control the connection. Therefore,
<br>some basic connection control primitives are supported. The type and
<br>semantics of the connection (i.e the ISO layer where connection service
<br>is provided) is outside our scope and might be different depending on
<br>the encapsulation protocol used, e.g. for a ppp module using our service
<br>on top of a modem connection a connect_request will result in dialing
<br>a (somewhere else configured) remote phone number. For an X25-interface
<br>module (LAPB semantics, as defined in Documentation/networking/x25-iface.txt)
<br>a connect_request will ask for establishing a reliable lapb
<br>datalink connection.
<br>
<br>
<br>The encapsulation protocol currently provides the following
<br>service primitives to the network device.
<br>
<br>- create a new encapsulation protocol instance
<br>- delete encapsulation protocol instance and free all its resources
<br>- initialize (open) the encapsulation protocol instance for use.
<br>- deactivate (close) an encapsulation protocol instance.
<br>- process (xmit) data handed down by upper protocol layer
<br>- receive data from lower (hardware) layer
<br>- process connect indication from lower (hardware) layer
<br>- process disconnect indication from lower (hardware) layer
<br>
<br>
<br>The network interface driver accesses those primitives via callbacks
<br>provided by the encapsulation protocol instance within a
<br>struct concap_proto_ops.
<br>
<br>struct concap_proto_ops{
<br>
<br>	/* create a new encapsulation protocol instance of same type */
<br>	struct concap_proto *  (*proto_new) (void);
<br>
<br>	/* delete encapsulation protocol instance and free all its resources.
<br>	   cprot may no longer be referenced after calling this */
<br>	void (*proto_del)(struct concap_proto *cprot);
<br>
<br>	/* initialize the protocol's data. To be called at interface startup
<br>	   or when the device driver resets the interface. All services of the
<br>	   encapsulation protocol may be used after this*/
<br>	int (*restart)(struct concap_proto *cprot, 
<br>		       struct net_device *ndev,
<br>		       struct concap_device_ops *dops);
<br>
<br>	/* deactivate an encapsulation protocol instance. The encapsulation
<br>	   protocol may not call any *dops methods after this. */
<br>	int (*close)(struct concap_proto *cprot);
<br>
<br>	/* process a frame handed down to us by upper layer */
<br>	int (*encap_and_xmit)(struct concap_proto *cprot, struct sk_buff *skb);
<br>
<br>	/* to be called for each data entity received from lower layer*/ 
<br>	int (*data_ind)(struct concap_proto *cprot, struct sk_buff *skb);
<br>
<br>	/* to be called when a connection was set up/down.
<br>	   Protocols that don't process these primitives might fill in
<br>	   dummy methods here */
<br>	int (*connect_ind)(struct concap_proto *cprot);
<br>	int (*disconn_ind)(struct concap_proto *cprot);
<br>};
<br>
<br>
<br>The data structures are defined in the header file include/linux/concap.h.
<br>
<br>
<br>A Network interface using encapsulation protocols must also provide
<br>some service primitives to the encapsulation protocol:
<br>
<br>- request data being submitted by lower layer (device hardware) 
<br>- request a connection being set up by lower layer 
<br>- request a connection being released by lower layer
<br>
<br>The encapsulation protocol accesses those primitives via callbacks
<br>provided by the network interface within a struct concap_device_ops.
<br>
<br>struct concap_device_ops{
<br>
<br>	/* to request data be submitted by device */ 
<br>	int (*data_req)(struct concap_proto *, struct sk_buff *);
<br>
<br>	/* Control methods must be set to NULL by devices which do not
<br>	   support connection control. */
<br>	/* to request a connection be set up */ 
<br>	int (*connect_req)(struct concap_proto *);
<br>
<br>	/* to request a connection be released */
<br>	int (*disconn_req)(struct concap_proto *);	
<br>};
<br>
<br>The network interface does not explicitly provide a receive service
<br>because the encapsulation protocol directly calls netif_rx(). 
<br>
<br>
<br>
<br>
<br>An encapsulation protocol itself is actually the
<br>struct concap_proto{
<br>	struct net_device *net_dev;		/* net device using our service  */
<br>	struct concap_device_ops *dops; /* callbacks provided by device */
<br> 	struct concap_proto_ops  *pops; /* callbacks provided by us */
<br>	int flags;
<br>	void *proto_data;               /* protocol specific private data, to
<br>					   be accessed via *pops methods only*/
<br>	/*
<br>	  :
<br>	  whatever 
<br>	  :
<br>	  */
<br>};
<br>
<br>Most of this is filled in when the device requests the protocol to 
<br>be reset (opend). The network interface must provide the net_dev and
<br>dops pointers. Other concap_proto members should be considered private
<br>data that are only accessed by the pops callback functions. Likewise,
<br>a concap proto should access the network device's private data
<br>only by means of the callbacks referred to by the dops pointer.
<br>
<br>
<br>A possible extended device structure which uses the connection controlling
<br>encapsulation services could look like this:
<br>
<br>struct concap_device{
<br>	struct net_device net_dev;
<br>	struct my_priv  /* device->local stuff */
<br>			/* the my_priv struct might contain a 
<br>			   struct concap_device_ops *dops;
<br>	                   to provide the device specific callbacks
<br>			*/
<br>	struct concap_proto *cprot;        /* callbacks provided by protocol */
<br>};
<br>
<br>
<br>
<br>Misc Thoughts
<br>=============
<br>
<br>The concept of the concap proto might help to reuse protocol code and
<br>reduce the complexity of certain network interface implementations.
<br>The trade off is that it introduces yet another procedure call layer
<br>when processing the protocol. This has of course some impact on
<br>performance. However, typically the concap interface will be used by
<br>devices attached to slow lines (like telephone, isdn, leased synchronous
<br>lines). For such slow lines, the overhead is probably negligible.
<br>This might no longer hold for certain high speed WAN links (like
<br>ATM).
<br>
<br>
<br>If general linux network interfaces explicitly supported concap
<br>protocols (e.g. by a member struct concap_proto* in struct net_device)
<br>then the interface of the service function could be changed
<br>by passing a pointer of type (struct net_device*) instead of
<br>type (struct concap_proto*). Doing so would make many of the service
<br>functions compatible to network device support functions.
<br>
<br>e.g. instead of the concap protocol's service function
<br>
<br>  int (*encap_and_xmit)(struct concap_proto *cprot, struct sk_buff *skb);
<br>
<br>we could have
<br>
<br>  int (*encap_and_xmit)(struct net_device *ndev, struct sk_buff *skb);
<br>
<br>As this is compatible to the dev->hard_start_xmit() method, the device
<br>driver could directly register the concap protocol's encap_and_xmit()
<br>function as its hard_start_xmit() method. This would eliminate one
<br>procedure call layer.
<br>
<br>
<br>The device's data request function could also be defined as
<br> 
<br>  int (*data_req)(struct net_device *ndev, struct sk_buff *skb);
<br>
<br>This might even allow for some protocol stacking. And the network
<br>interface might even register the same data_req() function directly
<br>as its hard_start_xmit() method when a zero layer encapsulation
<br>protocol is configured. Thus, eliminating the performance penalty
<br>of the concap interface when a trivial concap protocol is used.
<br>Nevertheless, the device remains able to support encapsulation
<br>protocol configuration.
<br>
<br><p></p><div class="separator"></div><br><p><h2>isdn</h2></p>The driver for the HFC-PCI and HFC-PCI-A chips from CCD may be used
<br>for many OEM cards using this chips.
<br>Additionally the driver has a special feature which makes it possible
<br>to read the echo-channel of the isdn bus. So all frames in both directions
<br>may be logged.
<br>When the echo logging feature is used the number of available B-channels
<br>for a HFC-PCI card is reduced to 1. Of course this is only relevant to
<br>the card, not to the isdn line.
<br>To activate the echo mode the following ioctls must be entered:
<br>
<br>hisaxctrl <driver/cardname> 10 1
<br>
<br>This reduces the available channels to 1. There must not be open connections
<br>through this card when entering the command.
<br>And then:
<br>
<br>hisaxctrl <driver/cardname> 12 1
<br>
<br>This enables the echo mode. If Hex logging is activated the isdnctrlx 
<br>devices show a output with a line beginning of HEX: for the providers
<br>exchange and ECHO: for isdn devices sending to the provider.
<br>
<br>If more than one HFC-PCI cards are installed, a specific card may be selected
<br>at the hisax module load command line. Supply the load command with the desired
<br>IO-address of the desired card. 
<br>Example:
<br>There tree cards installed in your machine at IO-base addresses 0xd000, 0xd400 
<br>and 0xdc00
<br>If you want to use the card at 0xd400 standalone you should supply the insmod
<br>or depmod with type=35 io=0xd400.
<br>If you want to use all three cards, but the order needs to be at 0xdc00,0xd400,
<br>0xd000 you may give the parameters type=35,35,35 io=0xdc00,0xd400,0xd00 
<br>Then the desired card will be the initialised in the desired order.
<br>If the io parameter is used the io addresses of all used cards should be 
<br>supplied else the parameter is assumed 0 and a auto search for a free card is
<br>invoked which may not give the wanted result. 
<br>
<br>Comments and reports to werner@isdn4linux.de or werner@isdn-development.de
<br>
<br>
<br>
<br><p></p><div class="separator"></div><br><p><h2>isdn</h2></p>$Id: README.audio,v 1.8 1999/07/11 17:17:29 armin Exp $
<br>
<br>ISDN subsystem for Linux.
<br>  Description of audio mode.
<br>
<br>When enabled during kernel configuration, the tty emulator of the ISDN
<br>subsystem is capable of a reduced set of commands to support audio.
<br>This document describes the commands supported and the format of
<br>audio data.
<br>
<br>Commands for enabling/disabling audio mode:
<br>
<br>        AT+FCLASS=8      Enable audio mode.
<br>                         This affects the following registers:
<br>                           S18: Bits 0 and 2 are set.
<br>                           S16: Set to 48 and any further change to
<br>                                larger values is blocked.
<br>        AT+FCLASS=0      Disable audio mode.
<br>                         Register 18 is set to 4.
<br>        AT+FCLASS=?      Show possible modes.
<br>        AT+FCLASS?       Report current mode (0 or 8).
<br>
<br>Commands supported in audio mode:
<br>
<br>All audio mode commands have one of the following forms:
<br>
<br>        AT+Vxx?          Show current setting.
<br>        AT+Vxx=?         Show possible settings.
<br>        AT+Vxx=v         Set simple parameter.
<br>        AT+Vxx=v,v ...   Set complex parameter.
<br>
<br>where xx is a two-character code and v are alphanumerical parameters.
<br>The following commands are supported:
<br>
<br>        AT+VNH=x         Auto hangup setting. NO EFFECT, supported
<br>                         for compatibility only.
<br>        AT+VNH?          Always reporting "1"
<br>        AT+VNH=?         Always reporting "1"
<br>
<br>        AT+VIP           Reset all audio parameters.
<br>
<br>        AT+VLS=x         Line select. x is one of the following:
<br>                           0 = No device.
<br>                           2 = Phone line.
<br>        AT+VLS=?         Always reporting "0,2"
<br>        AT+VLS?          Show current line.
<br>
<br>        AT+VRX           Start recording. Emulator responds with
<br>                         CONNECT and starts sending audio data to
<br>                         the application. See below for data format
<br>
<br>        AT+VSD=x,y       Set silence-detection parameters.
<br>                         Possible parameters:
<br>                           x = 0 ... 31  sensitivity threshold level.
<br>                                         (default 0 , deactivated)
<br>                           y = 0 ... 255 range of interval in units
<br>                                         of 0.1 second. (default 70)
<br>        AT+VSD=?         Report possible parameters.
<br>        AT+VSD?          Show current parameters.
<br>
<br>        AT+VDD=x,y       Set DTMF-detection parameters.
<br>                         Only possible if online and during this connection.
<br>                         Possible parameters:
<br>                           x = 0 ... 15  sensitivity threshold level.
<br>                                         (default 0 , I4L soft-decode)
<br>                                         (1-15 soft-decode off, hardware on)
<br>                           y = 0 ... 255 tone duration in units of 5ms.
<br>                                         Not for I4L soft decode (default 8, 40ms)
<br>        AT+VDD=?         Report possible parameters.
<br>        AT+VDD?          Show current parameters.
<br>
<br>        AT+VSM=x         Select audio data format.
<br>                         Possible parameters:
<br>                           2 = ADPCM-2
<br>                           3 = ADPCM-3
<br>                           4 = ADPCM-4
<br>                           5 = aLAW
<br>                           6 = uLAW
<br>        AT+VSM=?         Show possible audio formats.
<br>
<br>        AT+VTX           Start audio playback. Emulator responds
<br>                         with CONNECT and starts sending audio data
<br>                         received from the application via phone line.
<br>General behavior and description of data formats/protocol.
<br>    when a connection is made:
<br>
<br>      On incoming calls, if the application responds to a RING
<br>      with ATA, depending on the calling service, the emulator
<br>      responds with either CONNECT (data call) or VCON (voice call).
<br>      
<br>      On outgoing voice calls, the emulator responds with VCON
<br>      upon connection setup.
<br>
<br>  Audio recording.
<br>
<br>    When receiving audio data, a kind of bisync protocol is used.
<br>    Upon AT+VRX command, the emulator responds with CONNECT, and
<br>    starts sending audio data to the application. There are several
<br>    escape sequences defined, all using DLE (0x10) as Escape char:
<br>
<br>    <DLE><ETX>              End of audio data. (i.e. caused by a
<br>                            hangup of the remote side) Emulator stops
<br>                            recording, responding with VCON.
<br>    <DLE><DC4>		    Abort recording, (send by appl.) Emulator
<br>			    stops recording, sends DLE,ETX.
<br>    <DLE><DLE>              Escape sequence for DLE in data stream.
<br>    <DLE>0                  Touchtone "0" received.
<br>         ...
<br>    <DLE>9                  Touchtone "9" received.
<br>    <DLE>#                  Touchtone "#" received.
<br>    <DLE>*                  Touchtone "*" received.
<br>    <DLE>A                  Touchtone "A" received.
<br>    <DLE>B                  Touchtone "B" received.
<br>    <DLE>C                  Touchtone "C" received.
<br>    <DLE>D                  Touchtone "D" received.
<br>
<br>    <DLE>q                  quiet. Silence detected after non-silence.
<br>    <DLE>s                  silence. Silence detected from the
<br>                            start of recording.
<br>
<br>    Currently unsupported DLE sequences:
<br>
<br>    <DLE>c                  FAX calling tone received.
<br>    <DLE>b                  busy tone received.
<br>
<br>  Audio playback.
<br>
<br>    When sending audio data, upon AT+VTX command, emulator responds with
<br>    CONNECT, and starts transferring data from application to the phone line.
<br>    The same DLE sequences apply to this mode.
<br>
<br>  Full-Duplex-Audio:
<br>
<br>    When _both_ commands for recording and playback are given in _one_
<br>    AT-command-line (i.e.: "AT+VTX+VRX"), full-duplex-mode is selected.
<br>	In this mode, the only way to stop recording is sending <DLE><DC4>
<br>    and the only way to stop playback is to send <DLE><ETX>.
<br>
<br><p></p><div class="separator"></div><br><p><h2>isdn</h2></p>GigaSet 307x Device Driver
<br>==========================
<br>
<br>1.   Requirements
<br>     ------------
<br>1.1. Hardware
<br>     --------
<br>     This driver supports the connection of the Gigaset 307x/417x family of
<br>     ISDN DECT bases via Gigaset M101 Data, Gigaset M105 Data or direct USB
<br>     connection. The following devices are reported to be compatible:
<br>
<br>     Bases:
<br>        Siemens Gigaset 3070/3075 isdn
<br>        Siemens Gigaset 4170/4175 isdn
<br>        Siemens Gigaset SX205/255
<br>        Siemens Gigaset SX353
<br>        T-Com Sinus 45 [AB] isdn
<br>        T-Com Sinus 721X[A] [SE]
<br>        Vox Chicago 390 ISDN (KPN Telecom)
<br>
<br>     RS232 data boxes:
<br>        Siemens Gigaset M101 Data
<br>        T-Com Sinus 45 Data 1
<br>
<br>     USB data boxes:
<br>        Siemens Gigaset M105 Data
<br>        Siemens Gigaset USB Adapter DECT
<br>        T-Com Sinus 45 Data 2
<br>        T-Com Sinus 721 data
<br>        Chicago 390 USB (KPN)
<br>
<br>     See also http://www.erbze.info/sinus_gigaset.htm and
<br>              http://gigaset307x.sourceforge.net/
<br>
<br>     We had also reports from users of Gigaset M105 who could use the drivers
<br>     with SX 100 and CX 100 ISDN bases (only in unimodem mode, see section 2.5.)
<br>     If you have another device that works with our driver, please let us know.
<br>
<br>     Chances of getting an USB device to work are good if the output of
<br>        lsusb
<br>     at the command line contains one of the following:
<br>        ID 0681:0001
<br>        ID 0681:0002
<br>        ID 0681:0009
<br>        ID 0681:0021
<br>        ID 0681:0022
<br>
<br>1.2. Software
<br>     --------
<br>     The driver works with the Kernel CAPI subsystem as well as the old
<br>     ISDN4Linux subsystem, so it can be used with any software which is able
<br>     to use CAPI 2.0 or ISDN4Linux for ISDN connections (voice or data).
<br>
<br>     There are some user space tools available at
<br>     http://sourceforge.net/projects/gigaset307x/
<br>     which provide access to additional device specific functions like SMS,
<br>     phonebook or call journal.
<br>
<br>
<br>2.   How to use the driver
<br>     ---------------------
<br>2.1. Modules
<br>     -------
<br>     For the devices to work, the proper kernel modules have to be loaded.
<br>     This normally happens automatically when the system detects the USB
<br>     device (base, M105) or when the line discipline is attached (M101). It
<br>     can also be triggered manually using the modprobe(8) command, for example
<br>     for troubleshooting or to pass module parameters.
<br>
<br>     The module ser_gigaset provides a serial line discipline N_GIGASET_M101
<br>     which uses the regular serial port driver to access the device, and must
<br>     therefore be attached to the serial device to which the M101 is connected.
<br>     The ldattach(8) command (included in util-linux-ng release 2.14 or later)
<br>     can be used for that purpose, for example:
<br>	ldattach GIGASET_M101 /dev/ttyS1
<br>     This will open the device file, attach the line discipline to it, and
<br>     then sleep in the background, keeping the device open so that the line
<br>     discipline remains active. To deactivate it, kill the daemon, for example
<br>     with
<br>	killall ldattach
<br>     before disconnecting the device. To have this happen automatically at
<br>     system startup/shutdown on an LSB compatible system, create and activate
<br>     an appropriate LSB startup script /etc/init.d/gigaset. (The init name
<br>     'gigaset' is officially assigned to this project by LANANA.)
<br>     Alternatively, just add the 'ldattach' command line to /etc/rc.local.
<br>
<br>     The modules accept the following parameters:
<br>
<br>	Module	 	Parameter  Meaning
<br>
<br>	gigaset	 	debug	   debug level (see section 3.2.)
<br>
<br>			startmode  initial operation mode (see section 2.5.):
<br>	bas_gigaset )		   1=ISDN4linux/CAPI (default), 0=Unimodem
<br>	ser_gigaset )
<br>	usb_gigaset )	cidmode    initial Call-ID mode setting (see section
<br>				   2.5.): 1=on (default), 0=off
<br>
<br>     Depending on your distribution you may want to create a separate module
<br>     configuration file like /etc/modprobe.d/gigaset.conf for these.
<br>
<br>2.2. Device nodes for user space programs
<br>     ------------------------------------
<br>     The device can be accessed from user space (eg. by the user space tools
<br>     mentioned in 1.2.) through the device nodes:
<br>
<br>     - /dev/ttyGS0 for M101 (RS232 data boxes)
<br>     - /dev/ttyGU0 for M105 (USB data boxes)
<br>     - /dev/ttyGB0 for the base driver (direct USB connection)
<br>
<br>     If you connect more than one device of a type, they will get consecutive
<br>     device nodes, eg. /dev/ttyGU1 for a second M105.
<br>
<br>     You can also set a "default device" for the user space tools to use when
<br>     no device node is given as parameter, by creating a symlink /dev/ttyG to
<br>     one of them, eg.:
<br>
<br>	ln -s /dev/ttyGB0 /dev/ttyG
<br>
<br>     The devices accept the following device specific ioctl calls
<br>     (defined in gigaset_dev.h):
<br>
<br>     ioctl(int fd, GIGASET_REDIR, int *cmd);
<br>     If cmd==1, the device is set to be controlled exclusively through the
<br>     character device node; access from the ISDN subsystem is blocked.
<br>     If cmd==0, the device is set to be used from the ISDN subsystem and does
<br>     not communicate through the character device node.
<br>
<br>     ioctl(int fd, GIGASET_CONFIG, int *cmd);
<br>     (ser_gigaset and usb_gigaset only)
<br>     If cmd==1, the device is set to adapter configuration mode where commands
<br>     are interpreted by the M10x DECT adapter itself instead of being
<br>     forwarded to the base station. In this mode, the device accepts the
<br>     commands described in Siemens document "AT-Kommando Alignment M10x Data"
<br>     for setting the operation mode, associating with a base station and
<br>     querying parameters like field strengh and signal quality.
<br>     Note that there is no ioctl command for leaving adapter configuration
<br>     mode and returning to regular operation. In order to leave adapter
<br>     configuration mode, write the command ATO to the device.
<br>
<br>     ioctl(int fd, GIGASET_BRKCHARS, unsigned char brkchars[6]);
<br>     (usb_gigaset only)
<br>     Set the break characters on an M105's internal serial adapter to the six
<br>     bytes stored in brkchars[]. Unused bytes should be set to zero.
<br>
<br>     ioctl(int fd, GIGASET_VERSION, unsigned version[4]);
<br>     Retrieve version information from the driver. version[0] must be set to
<br>     one of:
<br>     - GIGVER_DRIVER: retrieve driver version
<br>     - GIGVER_COMPAT: retrieve interface compatibility version
<br>     - GIGVER_FWBASE: retrieve the firmware version of the base
<br>     Upon return, version[] is filled with the requested version information.
<br>
<br>2.3. CAPI
<br>     ----
<br>     If the driver is compiled with CAPI support (kernel configuration option
<br>     GIGASET_CAPI) the devices will show up as CAPI controllers as soon as the
<br>     corresponding driver module is loaded, and can then be used with CAPI 2.0
<br>     kernel and user space applications. For user space access, the module
<br>     capi.ko must be loaded.
<br>
<br>     Legacy ISDN4Linux applications are supported via the capidrv
<br>     compatibility driver. The kernel module capidrv.ko must be loaded
<br>     explicitly with the command
<br>        modprobe capidrv
<br>     if needed, and cannot be unloaded again without unloading the driver
<br>     first. (These are limitations of capidrv.)
<br>
<br>     Most distributions handle loading and unloading of the various CAPI
<br>     modules automatically via the command capiinit(1) from the capi4k-utils
<br>     package or a similar mechanism. Note that capiinit(1) cannot unload the
<br>     Gigaset drivers because it doesn't support more than one module per
<br>     driver.
<br>
<br>2.4. ISDN4Linux
<br>     ----------
<br>     If the driver is compiled without CAPI support (native ISDN4Linux
<br>     variant), it registers the device with the legacy ISDN4Linux subsystem
<br>     after loading the module. It can then be used with ISDN4Linux
<br>     applications only. Most distributions provide some configuration utility
<br>     for setting up that subsystem. Otherwise you can use some HOWTOs like
<br>         http://www.linuxhaven.de/dlhp/HOWTO/DE-ISDN-HOWTO-5.html
<br>
<br>
<br>2.5. Unimodem mode
<br>     -------------
<br>     In this mode the device works like a modem connected to a serial port
<br>     (the /dev/ttyGU0, ... mentioned above) which understands the commands
<br>
<br>         ATZ                 init, reset
<br>             => OK or ERROR
<br>         ATD
<br>         ATDT                dial
<br>             => OK, CONNECT,
<br>                BUSY,
<br>                NO DIAL TONE,
<br>                NO CARRIER,
<br>                NO ANSWER
<br>         <pause>+++<pause>   change to command mode when connected
<br>         ATH                 hangup
<br>
<br>     You can use some configuration tool of your distribution to configure this
<br>     "modem" or configure pppd/wvdial manually. There are some example ppp
<br>     configuration files and chat scripts in the gigaset-VERSION/ppp directory
<br>     in the driver packages from http://sourceforge.net/projects/gigaset307x/.
<br>     Please note that the USB drivers are not able to change the state of the
<br>     control lines. This means you must use "Stupid Mode" if you are using
<br>     wvdial or you should use the nocrtscts option of pppd.
<br>     You must also assure that the ppp_async module is loaded with the parameter
<br>     flag_time=0. You can do this e.g. by adding a line like
<br>
<br>        options ppp_async flag_time=0
<br>
<br>     to an appropriate module configuration file, like
<br>     /etc/modprobe.d/gigaset.conf.
<br>
<br>     Unimodem mode is needed for making some devices [e.g. SX100] work which
<br>     do not support the regular Gigaset command set. If debug output (see
<br>     section 3.2.) shows something like this when dialing:
<br>         CMD Received: ERROR
<br>         Available Params: 0
<br>         Connection State: 0, Response: -1
<br>         gigaset_process_response: resp_code -1 in ConState 0 !
<br>         Timeout occurred
<br>     then switching to unimodem mode may help.
<br>
<br>     If you have installed the command line tool gigacontr, you can enter
<br>     unimodem mode using
<br>         gigacontr --mode unimodem
<br>     You can switch back using
<br>         gigacontr --mode isdn
<br>
<br>     You can also put the driver directly into Unimodem mode when it's loaded,
<br>     by passing the module parameter startmode=0 to the hardware specific
<br>     module, e.g.
<br>	modprobe usb_gigaset startmode=0
<br>     or by adding a line like
<br>	options usb_gigaset startmode=0
<br>     to an appropriate module configuration file, like
<br>     /etc/modprobe.d/gigaset.conf
<br>
<br>2.6. Call-ID (CID) mode
<br>     ------------------
<br>     Call-IDs are numbers used to tag commands to, and responses from, the
<br>     Gigaset base in order to support the simultaneous handling of multiple
<br>     ISDN calls. Their use can be enabled ("CID mode") or disabled ("Unimodem
<br>     mode"). Without Call-IDs (in Unimodem mode), only a very limited set of
<br>     functions is available. It allows outgoing data connections only, but
<br>     does not signal incoming calls or other base events.
<br>
<br>     DECT cordless data devices (M10x) permanently occupy the cordless
<br>     connection to the base while Call-IDs are activated. As the Gigaset
<br>     bases only support one DECT data connection at a time, this prevents
<br>     other DECT cordless data devices from accessing the base.
<br>
<br>     During active operation, the driver switches to the necessary mode
<br>     automatically. However, for the reasons above, the mode chosen when
<br>     the device is not in use (idle) can be selected by the user.
<br>     - If you want to receive incoming calls, you can use the default
<br>       settings (CID mode).
<br>     - If you have several DECT data devices (M10x) which you want to use
<br>       in turn, select Unimodem mode by passing the parameter "cidmode=0" to
<br>       the appropriate driver module (ser_gigaset or usb_gigaset).
<br>
<br>     If you want both of these at once, you are out of luck.
<br>
<br>     You can also use the tty class parameter "cidmode" of the device to
<br>     change its CID mode while the driver is loaded, eg.
<br>        echo 0 > /sys/class/tty/ttyGU0/cidmode
<br>
<br>2.7. Dialing Numbers
<br>     ---------------
<br>     The called party number provided by an application for dialing out must
<br>     be a public network number according to the local dialing plan, without
<br>     any dial prefix for getting an outside line.
<br>
<br>     Internal calls can be made by providing an internal extension number
<br>     prefixed with "**" (two asterisks) as the called party number. So to dial
<br>     eg. the first registered DECT handset, give "**11" as the called party
<br>     number. Dialing "***" (three asterisks) calls all extensions
<br>     simultaneously (global call).
<br>
<br>     This holds for both CAPI 2.0 and ISDN4Linux applications. Unimodem mode
<br>     does not support internal calls.
<br>
<br>2.8. Unregistered Wireless Devices (M101/M105)
<br>     -----------------------------------------
<br>     The main purpose of the ser_gigaset and usb_gigaset drivers is to allow
<br>     the M101 and M105 wireless devices to be used as ISDN devices for ISDN
<br>     connections through a Gigaset base. Therefore they assume that the device
<br>     is registered to a DECT base.
<br>
<br>     If the M101/M105 device is not registered to a base, initialization of
<br>     the device fails, and a corresponding error message is logged by the
<br>     driver. In that situation, a restricted set of functions is available
<br>     which includes, in particular, those necessary for registering the device
<br>     to a base or for switching it between Fixed Part and Portable Part
<br>     modes. See the gigacontr(8) manpage for details.
<br>
<br>3.   Troubleshooting
<br>     ---------------
<br>3.1. Solutions to frequently reported problems
<br>     -----------------------------------------
<br>     Problem:
<br>        You have a slow provider and isdn4linux gives up dialing too early.
<br>     Solution:
<br>        Load the isdn module using the dialtimeout option. You can do this e.g.
<br>        by adding a line like
<br>
<br>           options isdn dialtimeout=15
<br>
<br>        to /etc/modprobe.d/gigaset.conf or a similar file.
<br>
<br>     Problem:
<br>        The isdnlog program emits error messages or just doesn't work.
<br>     Solution:
<br>        Isdnlog supports only the HiSax driver. Do not attempt to use it with
<br>	other drivers such as Gigaset.
<br>
<br>     Problem:
<br>        You have two or more DECT data adapters (M101/M105) and only the
<br>        first one you turn on works.
<br>     Solution:
<br>        Select Unimodem mode for all DECT data adapters. (see section 2.5.)
<br>
<br>     Problem:
<br>	Messages like this:
<br>	    usb_gigaset 3-2:1.0: Could not initialize the device.
<br>	appear in your syslog.
<br>     Solution:
<br>	Check whether your M10x wireless device is correctly registered to the
<br>	Gigaset base. (see section 2.7.)
<br>
<br>3.2. Telling the driver to provide more information
<br>     ----------------------------------------------
<br>     Building the driver with the "Gigaset debugging" kernel configuration
<br>     option (CONFIG_GIGASET_DEBUG) gives it the ability to produce additional
<br>     information useful for debugging.
<br>
<br>     You can control the amount of debugging information the driver produces by
<br>     writing an appropriate value to /sys/module/gigaset/parameters/debug, e.g.
<br>        echo 0 > /sys/module/gigaset/parameters/debug
<br>     switches off debugging output completely,
<br>        echo 0x302020 > /sys/module/gigaset/parameters/debug
<br>     enables a reasonable set of debugging output messages. These values are
<br>     bit patterns where every bit controls a certain type of debugging output.
<br>     See the constants DEBUG_* in the source file gigaset.h for details.
<br>
<br>     The initial value can be set using the debug parameter when loading the
<br>     module "gigaset", e.g. by adding a line
<br>        options gigaset debug=0
<br>     to your module configuration file, eg. /etc/modprobe.d/gigaset.conf
<br>
<br>     Generated debugging information can be found
<br>     - as output of the command
<br>         dmesg
<br>     - in system log files written by your syslog daemon, usually
<br>       in /var/log/, e.g. /var/log/messages.
<br>
<br>3.3. Reporting problems and bugs
<br>     ---------------------------
<br>     If you can't solve problems with the driver on your own, feel free to
<br>     use one of the forums, bug trackers, or mailing lists on
<br>         http://sourceforge.net/projects/gigaset307x
<br>     or write an electronic mail to the maintainers.
<br>
<br>     Try to provide as much information as possible, such as
<br>     - distribution
<br>     - kernel version (uname -r)
<br>     - gcc version (gcc --version)
<br>     - hardware architecture (uname -m, ...)
<br>     - type and firmware version of your device (base and wireless module,
<br>       if any)
<br>     - output of "lsusb -v" (if using an USB device)
<br>     - error messages
<br>     - relevant system log messages (it would help if you activate debug
<br>       output as described in 3.2.)
<br>
<br>     For help with general configuration problems not specific to our driver,
<br>     such as isdn4linux and network configuration issues, please refer to the
<br>     appropriate forums and newsgroups.
<br>
<br>3.4. Reporting problem solutions
<br>     ---------------------------
<br>     If you solved a problem with our drivers, wrote startup scripts for your
<br>     distribution, ... feel free to contact us (using one of the places
<br>     mentioned in 3.3.). We'd like to add scripts, hints, documentation
<br>     to the driver and/or the project web page.
<br>
<br>
<br>4.   Links, other software
<br>     ---------------------
<br>     - Sourceforge project developing this driver and associated tools
<br>         http://sourceforge.net/projects/gigaset307x
<br>     - Yahoo! Group on the Siemens Gigaset family of devices
<br>         http://de.groups.yahoo.com/group/Siemens-Gigaset
<br>     - Siemens Gigaset/T-Sinus compatibility table
<br>         http://www.erbze.info/sinus_gigaset.htm
<br>
<br>
<br>5.   Credits
<br>     -------
<br>     Thanks to
<br>
<br>     Karsten Keil
<br>        for his help with isdn4linux
<br>     Deti Fliegl
<br>        for his base driver code
<br>     Dennis Dietrich
<br>        for his kernel 2.6 patches
<br>     Andreas Rummel
<br>        for his work and logs to get unimodem mode working
<br>     Andreas Degert
<br>        for his logs and patches to get cx 100 working
<br>     Dietrich Feist
<br>        for his generous donation of one M105 and two M101 cordless adapters
<br>     Christoph Schweers
<br>        for his generous donation of a M34 device
<br>
<br>     and all the other people who sent logs and other information.
<br>
<br><p></p><div class="separator"></div><br><p><h2>isdn</h2></p>Driver for active AVM Controller.
<br>
<br>The driver provides a kernel capi2.0 Interface (kernelcapi) and
<br>on top of this a User-Level-CAPI2.0-interface (capi)
<br>and a driver to connect isdn4linux with CAPI2.0 (capidrv).
<br>The lowlevel interface can be used to implement a CAPI2.0
<br>also for passive cards since July 1999.
<br>
<br>The author can be reached at calle@calle.in-berlin.de.
<br>The command avmcapictrl is part of the isdn4k-utils.
<br>t4-files can be found at ftp://ftp.avm.de/cardware/b1/linux/firmware
<br>
<br>Currently supported cards:
<br>	B1 ISA (all versions)
<br>	B1 PCI
<br>	T1/T1B (HEMA card)
<br>	M1
<br>	M2
<br>	B1 PCMCIA
<br>
<br>Installing
<br>----------
<br>
<br>You need at least /dev/capi20 to load the firmware.
<br>
<br>mknod /dev/capi20 c 68 0
<br>mknod /dev/capi20.00 c 68 1
<br>mknod /dev/capi20.01 c 68 2
<br>.
<br>.
<br>.
<br>mknod /dev/capi20.19 c 68 20
<br>
<br>Running
<br>-------
<br>
<br>To use the card you need the t4-files to download the firmware.
<br>AVM GmbH provides several t4-files for the different D-channel
<br>protocols (b1.t4 for Euro-ISDN). Install these file in /lib/isdn.
<br>
<br>if you configure as modules load the modules this way:
<br>
<br>insmod /lib/modules/current/misc/capiutil.o
<br>insmod /lib/modules/current/misc/b1.o
<br>insmod /lib/modules/current/misc/kernelcapi.o
<br>insmod /lib/modules/current/misc/capidrv.o
<br>insmod /lib/modules/current/misc/capi.o
<br>
<br>if you have an B1-PCI card load the module b1pci.o
<br>insmod /lib/modules/current/misc/b1pci.o
<br>and load the firmware with
<br>avmcapictrl load /lib/isdn/b1.t4 1
<br>
<br>if you have an B1-ISA card load the module b1isa.o
<br>and add the card by calling
<br>avmcapictrl add 0x150 15
<br>and load the firmware by calling
<br>avmcapictrl load /lib/isdn/b1.t4 1
<br>
<br>if you have an T1-ISA card load the module t1isa.o
<br>and add the card by calling
<br>avmcapictrl add 0x450 15 T1 0
<br>and load the firmware by calling
<br>avmcapictrl load /lib/isdn/t1.t4 1
<br>
<br>if you have an PCMCIA card (B1/M1/M2) load the module b1pcmcia.o
<br>before you insert the card.
<br>
<br>Leased Lines with B1
<br>--------------------
<br>Init card and load firmware.
<br>For an D64S use "FV: 1" as phone number
<br>For an D64S2 use "FV: 1" and "FV: 2" for multilink
<br>or "FV: 1,2" to use CAPI channel bundling.
<br>
<br>/proc-Interface
<br>-----------------
<br>
<br>/proc/capi:
<br>  dr-xr-xr-x   2 root     root            0 Jul  1 14:03 .
<br>  dr-xr-xr-x  82 root     root            0 Jun 30 19:08 ..
<br>  -r--r--r--   1 root     root            0 Jul  1 14:03 applications
<br>  -r--r--r--   1 root     root            0 Jul  1 14:03 applstats
<br>  -r--r--r--   1 root     root            0 Jul  1 14:03 capi20
<br>  -r--r--r--   1 root     root            0 Jul  1 14:03 capidrv
<br>  -r--r--r--   1 root     root            0 Jul  1 14:03 controller
<br>  -r--r--r--   1 root     root            0 Jul  1 14:03 contrstats
<br>  -r--r--r--   1 root     root            0 Jul  1 14:03 driver
<br>  -r--r--r--   1 root     root            0 Jul  1 14:03 ncci
<br>  -r--r--r--   1 root     root            0 Jul  1 14:03 users
<br>
<br>/proc/capi/applications:
<br>   applid level3cnt datablkcnt datablklen ncci-cnt recvqueuelen
<br>	level3cnt: capi_register parameter
<br>	datablkcnt: capi_register parameter
<br>	ncci-cnt: current number of nccis (connections)
<br>	recvqueuelen: number of messages on receive queue
<br>   for example:
<br>1 -2 16 2048 1 0
<br>2 2 7 2048 1 0
<br>
<br>/proc/capi/applstats:
<br>   applid recvctlmsg nrecvdatamsg nsentctlmsg nsentdatamsg
<br>	recvctlmsg: capi messages received without DATA_B3_IND
<br>	recvdatamsg: capi DATA_B3_IND received
<br>	sentctlmsg: capi messages sent without DATA_B3_REQ
<br>	sentdatamsg: capi DATA_B3_REQ sent
<br>   for example:
<br>1 2057 1699 1721 1699
<br>
<br>/proc/capi/capi20: statistics of capi.o (/dev/capi20)
<br>    minor nopen nrecvdropmsg nrecvctlmsg nrecvdatamsg sentctlmsg sentdatamsg
<br>	minor: minor device number of capi device
<br>	nopen: number of calls to devices open
<br>	nrecvdropmsg: capi messages dropped (messages in recvqueue in close)
<br>	nrecvctlmsg: capi messages received without DATA_B3_IND
<br>	nrecvdatamsg: capi DATA_B3_IND received
<br>	nsentctlmsg: capi messages sent without DATA_B3_REQ
<br>	nsentdatamsg: capi DATA_B3_REQ sent
<br>
<br>   for example:
<br>1 2 18 0 16 2
<br>
<br>/proc/capi/capidrv: statistics of capidrv.o (capi messages)
<br>    nrecvctlmsg nrecvdatamsg sentctlmsg sentdatamsg
<br>	nrecvctlmsg: capi messages received without DATA_B3_IND
<br>	nrecvdatamsg: capi DATA_B3_IND received
<br>	nsentctlmsg: capi messages sent without DATA_B3_REQ
<br>	nsentdatamsg: capi DATA_B3_REQ sent
<br>   for example:
<br>2780 2226 2256 2226
<br>
<br>/proc/capi/controller:
<br>   controller drivername state cardname   controllerinfo
<br>   for example:
<br>1 b1pci      running  b1pci-e000       B1 3.07-01 0xe000 19
<br>2 t1isa      running  t1isa-450        B1 3.07-01 0x450 11 0
<br>3 b1pcmcia   running  m2-150           B1 3.07-01 0x150 5
<br>
<br>/proc/capi/contrstats:
<br>    controller nrecvctlmsg nrecvdatamsg sentctlmsg sentdatamsg
<br>	nrecvctlmsg: capi messages received without DATA_B3_IND
<br>	nrecvdatamsg: capi DATA_B3_IND received
<br>	nsentctlmsg: capi messages sent without DATA_B3_REQ
<br>	nsentdatamsg: capi DATA_B3_REQ sent
<br>   for example:
<br>1 2845 2272 2310 2274
<br>2 2 0 2 0
<br>3 2 0 2 0
<br>
<br>/proc/capi/driver:
<br>   drivername ncontroller
<br>   for example:
<br>b1pci                            1
<br>t1isa                            1
<br>b1pcmcia                         1
<br>b1isa                            0
<br>
<br>/proc/capi/ncci:
<br>   apllid ncci winsize sendwindow
<br>   for example:
<br>1 0x10101 8 0
<br>
<br>/proc/capi/users: kernelmodules that use the kernelcapi.
<br>   name
<br>   for example:
<br>capidrv
<br>capi20
<br>
<br>Questions
<br>---------
<br>Check out the FAQ (ftp.isdn4linux.de) or subscribe to the
<br>linux-avmb1@calle.in-berlin.de mailing list by sending
<br>a mail to majordomo@calle.in-berlin.de with
<br>subscribe linux-avmb1
<br>in the body.
<br>
<br>German documentation and several scripts can be found at
<br>ftp://ftp.avm.de/cardware/b1/linux/
<br>
<br>Bugs 
<br>----
<br>If you find any please let me know. 
<br>
<br>Enjoy,
<br>
<br>Carsten Paeth (calle@calle.in-berlin.de)
<br><p></p><div class="separator"></div><br><p><h2>isdn</h2></p>mISDN is a new modular ISDN driver, in the long term it should replace
<br>the old I4L driver architecture for passiv ISDN cards.
<br>It was designed to allow a broad range of applications and interfaces
<br>but only have the basic function in kernel, the interface to the user
<br>space is based on sockets with a own address family AF_ISDN.
<br>
<br><p></p><div class="separator"></div><br><p><h2>isdn</h2></p>  
<br>X.25 support within isdn4linux
<br>==============================
<br>
<br>This is alpha/beta test code. Use it completely at your own risk.
<br>As new versions appear, the stuff described here might suddenly change
<br>or become invalid without notice.
<br>
<br>Keep in mind:
<br>
<br>You are using several new parts of the 2.2.x kernel series which
<br>have not been tested in a large scale. Therefore, you might encounter
<br>more bugs as usual.
<br>
<br>- If you connect to an X.25 neighbour not operated by yourself, ASK the
<br>  other side first. Be prepared that bugs in the protocol implementation
<br>  might result in problems.
<br>
<br>- This implementation has never wiped out my whole hard disk yet. But as
<br>  this is experimental code, don't blame me if that happened to you.
<br>  Backing up important data will never harm.
<br>
<br>- Monitor your isdn connections while using this software. This should
<br>  prevent you from undesired phone bills in case of driver problems.
<br>  
<br> 
<br>
<br>
<br>How to configure the kernel
<br>===========================
<br> 
<br>The ITU-T (former CCITT) X.25 network protocol layer has been implemented
<br>in the Linux source tree since version 2.1.16. The isdn subsystem might be 
<br>useful to run X.25 on top of ISDN. If you want to try it, select
<br>
<br>   "CCITT X.25 Packet Layer"
<br>
<br>from the networking options as well as
<br>
<br>   "ISDN Support" and "X.25 PLP on Top of ISDN"
<br>
<br>from the ISDN subsystem options when you configure your kernel for
<br>compilation. You currently also need to enable
<br>"Prompt for development and/or incomplete code/drivers" from the
<br>"Code maturity level options" menu. For the x25trace utility to work
<br>you also need to enable "Packet socket".
<br>
<br>For local testing it is also recommended to enable the isdnloop driver
<br>from the isdn subsystem's configuration menu.
<br>
<br>For testing, it is recommended that all isdn drivers and the X.25 PLP
<br>protocol are compiled as loadable modules. Like this, you can recover
<br>from certain errors by simply unloading and reloading the modules.
<br>
<br>
<br>
<br>What's it for? How to use it?
<br>=============================
<br>
<br>X.25 on top of isdn might be useful with two different scenarios:
<br>
<br>- You might want to access a public X.25 data network from your Linux box.
<br>  You can use i4l if you were physically connected to the X.25 switch
<br>  by an ISDN B-channel (leased line as well as dial up connection should
<br>  work).
<br>
<br>  This corresponds to ITU-T recommendation X.31 Case A (circuit-mode
<br>  access to PSPDN [packet switched public data network]).
<br>
<br>  NOTE: X.31 also covers a Case B (access to PSPDN via virtual
<br>  circuit / packet mode service). The latter mode (which in theory
<br>  also allows using the D-channel) is not supported by isdn4linux.
<br>  It should however be possible to establish such packet mode connections
<br>  with certain active isdn cards provided that the firmware supports X.31
<br>  and the driver exports this functionality to the user. Currently, 
<br>  the AVM B1 driver is the only driver which does so. (It should be
<br>  possible to access D-channel X.31 with active AVM cards using the
<br>  CAPI interface of the AVM-B1 driver).
<br>
<br>- Or you might want to operate certain ISDN teleservices on your linux
<br>  box. A lot of those teleservices run on top of the ISO-8208
<br>  (DTE-DTE mode) network layer protocol. ISO-8208 is essentially the
<br>  same as ITU-T X.25.
<br>
<br>  Popular candidates of such teleservices are EUROfile transfer or any
<br>  teleservice applying ITU-T recommendation T.90.
<br>
<br>To use the X.25 protocol on top of isdn, just create an isdn network
<br>interface as usual, configure your own and/or peer's ISDN numbers,
<br>and choose x25iface encapsulation by
<br>
<br>   isdnctrl encap <iface-name> x25iface.
<br>
<br>Once encap is set like this, the device can be used by the X.25 packet layer.
<br>
<br>All the stuff needed for X.25 is implemented inside the isdn link
<br>level (mainly isdn_net.c and some new source files). Thus, it should
<br>work with every existing HL driver. I was able to successfully open X.25
<br>connections on top of the isdnloop driver and the hisax driver.
<br>"x25iface"-encapsulation bypasses demand dialing. Dialing will be
<br>initiated when the upper (X.25 packet) layer requests the lapb datalink to
<br>be established. But hangup timeout is still active. Whenever a hangup
<br>occurs, all existing X.25 connections on that link will be cleared
<br>It is recommended to use sufficiently large hangup-timeouts for the
<br>isdn interfaces.
<br>
<br>
<br>In order to set up a conforming protocol stack you also need to
<br>specify the proper l2_prot parameter:
<br>
<br>To operate in ISO-8208  X.25 DTE-DTE mode, use
<br>
<br>   isdnctrl l2_prot <iface-name> x75i
<br>
<br>To access an X.25 network switch via isdn (your linux box is the DTE), use
<br>
<br>   isdnctrl l2_prot <iface-name> x25dte
<br>
<br>To mimic an X.25 network switch (DCE side of the connection), use
<br>
<br>   isdnctrl l2_prot <iface-name> x25dce
<br>
<br>However, x25dte or x25dce is currently not supported by any real HL
<br>level driver. The main difference between x75i and x25dte/dce is that
<br>x25d[tc]e uses fixed lap_b addresses. With x75i, the side which
<br>initiates the isdn connection uses the DTE's lap_b address while the
<br>called side used the DCE's lap_b address. Thus, l2_prot x75i might
<br>probably work if you access a public X.25 network as long as the
<br>corresponding isdn connection is set up by you. At least one test
<br>was successful to connect via isdn4linux to an X.25 switch using this
<br>trick. At the switch side, a terminal adapter X.21 was used to connect
<br>it to the isdn.
<br>
<br>
<br>How to set up a test installation?
<br>==================================
<br>
<br>To test X.25 on top of isdn, you need to get
<br>
<br>- a recent version of the "isdnctrl" program that supports setting the new
<br>  X.25 specific parameters.
<br>
<br>- the x25-utils-2.X package from 
<br>  ftp://ftp.hes.iki.fi/pub/ham/linux/ax25/x25utils-*
<br>  (don't confuse the x25-utils with the ax25-utils)
<br>
<br>- an application program that uses linux PF_X25 sockets (some are
<br>  contained in the x25-util package).
<br>
<br>Before compiling the user level utilities make sure that the compiler/
<br>preprocessor will fetch the proper kernel header files of this kernel
<br>source tree. Either make /usr/include/linux a symbolic link pointing to 
<br>this kernel's include/linux directory or set the appropriate compiler flags.
<br>
<br>When all drivers and interfaces are loaded and configured you need to
<br>ifconfig the network interfaces up and add X.25-routes to them. Use
<br>the usual ifconfig tool.
<br>
<br>ifconfig <iface-name> up
<br>
<br>But a special x25route tool (distributed with the x25-util package)
<br>is needed to set up X.25 routes. I.e. 
<br>
<br>x25route add 01 <iface-name>
<br>
<br>will cause all x.25 connections to the destination X.25-address
<br>"01" to be routed to your created isdn network interface.
<br>
<br>There are currently no real X.25 applications available. However, for
<br>tests, the x25-utils package contains a modified version of telnet
<br>and telnetd that uses X.25 sockets instead of tcp/ip sockets. You can
<br>use those for your first tests. Furthermore, you might check
<br>ftp://ftp.hamburg.pop.de/pub/LOCAL/linux/i4l-eft/ which contains some
<br>alpha-test implementation ("eftp4linux") of the EUROfile transfer
<br>protocol.
<br>
<br>The scripts distributed with the eftp4linux test releases might also
<br>provide useful examples for setting up X.25 on top of isdn.
<br>
<br>The x25-utility package also contains an x25trace tool that can be
<br>used to monitor X.25 packets received by the network interfaces.
<br>The /proc/net/x25* files also contain useful information. 
<br>
<br>- Henner
<br><p></p><div class="separator"></div><br><p><h2>isdn</h2></p>HiSax is a Linux hardware-level driver for passive ISDN cards with Siemens
<br>chipset (ISAC_S 2085/2086/2186, HSCX SAB 82525). It is based on the Teles
<br>driver from Jan den Ouden.
<br>It is meant to be used with isdn4linux, an ISDN link-level module for Linux
<br>written by Fritz Elfert.
<br>
<br>    This program is free software; you can redistribute it and/or modify
<br>    it under the terms of the GNU General Public License as published by
<br>    the Free Software Foundation; either version 2 of the License, or
<br>    (at your option) any later version.
<br>
<br>    This program is distributed in the hope that it will be useful,
<br>    but WITHOUT ANY WARRANTY; without even the implied warranty of
<br>    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
<br>    GNU General Public License for more details.
<br>
<br>    You should have received a copy of the GNU General Public License
<br>    along with this program; if not, write to the Free Software
<br>    Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
<br>
<br>
<br>Supported cards
<br>---------------
<br>
<br>Teles 8.0/16.0/16.3 and compatible ones
<br>Teles 16.3c
<br>Teles S0/PCMCIA
<br>Teles PCI
<br>Teles S0Box
<br>Creatix S0Box
<br>Creatix PnP S0
<br>Compaq ISDN S0 ISA card
<br>AVM A1 (Fritz, Teledat 150)
<br>AVM Fritz PCMCIA
<br>AVM Fritz PnP
<br>AVM Fritz PCI
<br>ELSA Microlink PCC-16, PCF, PCF-Pro, PCC-8
<br>ELSA Quickstep 1000
<br>ELSA Quickstep 1000PCI
<br>ELSA Quickstep 3000 (same settings as QS1000)
<br>ELSA Quickstep 3000PCI
<br>ELSA PCMCIA
<br>ITK ix1-micro Rev.2
<br>Eicon Diva 2.0 ISA and PCI (S0 and U interface, no PRO version)
<br>Eicon Diva 2.01 ISA and PCI
<br>Eicon Diva 2.02 PCI
<br>Eicon Diva Piccola
<br>ASUSCOM NETWORK INC. ISDNLink 128K PC adapter (order code I-IN100-ST-D)
<br>Dynalink IS64PH (OEM version of ASUSCOM NETWORK INC. ISDNLink 128K adapter)
<br>PCBIT-DP (OEM version of ASUSCOM NETWORK INC. ISDNLink)
<br>HFC-2BS0 based cards (TeleInt SA1)
<br>Sedlbauer Speed Card (Speed Win, Teledat 100, PCI, Fax+)
<br>Sedlbauer Speed Star/Speed Star2 (PCMCIA)
<br>Sedlbauer ISDN-Controller PC/104
<br>USR Sportster internal TA (compatible Stollmann tina-pp V3)
<br>USR internal TA PCI
<br>ith Kommunikationstechnik GmbH MIC 16 ISA card
<br>Traverse Technologie NETjet PCI S0 card and NETspider U card
<br>Ovislink ISDN sc100-p card (NETjet driver)
<br>Dr. Neuhaus Niccy PnP/PCI
<br>Siemens I-Surf 1.0
<br>Siemens I-Surf 2.0 (with IPAC, try type 12 asuscom) 
<br>ACER P10
<br>HST Saphir
<br>Berkom Telekom A4T
<br>Scitel Quadro
<br>Gazel ISDN cards
<br>HFC-PCI based cards
<br>Winbond W6692 based cards
<br>HFC-S+, HFC-SP/PCMCIA cards
<br>formula-n enternow
<br>Gerdes Power ISDN
<br>
<br>Note: PCF, PCF-Pro: up to now, only the ISDN part is supported
<br>      PCC-8: not tested yet
<br>      Eicon.Diehl Diva U interface not tested
<br>
<br>If you know other passive cards with the Siemens chipset, please let me know.
<br>You can combine any card, if there is no conflict between the resources
<br>(io, mem, irq).
<br>
<br>
<br>Configuring the driver
<br>----------------------
<br>
<br>The HiSax driver can either be built directly into the kernel or as a module.
<br>It can be configured using the command line feature while loading the kernel
<br>with LILO or LOADLIN or, if built as a module, using insmod/modprobe with
<br>parameters.
<br>There is also some config needed before you compile the kernel and/or
<br>modules. It is included in the normal "make [menu]config" target at the
<br>kernel. Don't forget it, especially to select the right D-channel protocol.
<br>
<br>Please note: In older versions of the HiSax driver, all PnP cards
<br>needed to be configured with isapnp and worked only with the HiSax
<br>driver used as a module.
<br>
<br>In the current version, HiSax will automatically use the in-kernel
<br>ISAPnP support, provided you selected it during kernel configuration
<br>(CONFIG_ISAPNP), if you don't give the io=, irq= command line parameters.
<br>
<br>The affected card types are: 4,7,12,14,19,27-30
<br>
<br>a) when built as a module
<br>-------------------------
<br>
<br>insmod/modprobe  hisax.o \
<br>  io=iobase irq=IRQ mem=membase type=card_type \
<br>  protocol=D_channel_protocol id=idstring
<br>
<br>or, if several cards are installed:
<br>
<br>insmod/modprobe hisax.o \
<br>  io=iobase1,iobase2,... irq=IRQ1,IRQ2,... mem=membase1,membase2,... \
<br>  type=card_type1,card_type2,... \
<br>  protocol=D_channel_protocol1,D_channel_protocol2,... \
<br>  id=idstring1%idstring2 ...
<br>
<br>where "iobaseN" represents the I/O base address of the Nth card, "membaseN"
<br>the memory base address of the Nth card, etc.
<br>
<br>The reason for the delimiter "%" being used in the idstrings is that ","
<br>won't work with the current modules package.
<br>
<br>The parameters may be specified in any order. For example, the "io"
<br>parameter may precede the "irq" parameter, or vice versa. If several
<br>cards are installed, the ordering within the comma separated parameter
<br>lists must of course be consistent.
<br>
<br>Only parameters applicable to the card type need to be specified. For
<br>example, the Teles 16.3 card is not memory-mapped, so the "mem"
<br>parameter may be omitted for this card. Sometimes it may be necessary
<br>to specify a dummy parameter, however. This is the case when there is
<br>a card of a different type later in the list that needs a parameter
<br>which the preceding card does not. For instance, if a Teles 16.0 card
<br>is listed after a Teles 16.3 card, a dummy memory base parameter of 0
<br>must be specified for the 16.3. Instead of a dummy value, the parameter
<br>can also be skipped by simply omitting the value. For example:
<br>mem=,0xd0000. See example 6 below.
<br>
<br>The parameter for the D-Channel protocol may be omitted if you selected the
<br>correct one during kernel config. Valid values are "1" for German 1TR6,
<br>"2" for EDSS1 (Euro ISDN), "3" for leased lines (no D-Channel) and "4"
<br>for US NI1.
<br>With US NI1 you have to include your SPID into the MSN setting in the form
<br><MSN>:<SPID> for example (your phonenumber is 1234 your SPID 5678):
<br>AT&E1234:5678                       on ttyI interfaces
<br>isdnctrl eaz ippp0 1234:5678        on network devices
<br>
<br>The Creatix/Teles PnP cards use io1= and io2= instead of io= for specifying
<br>the I/O addresses of the ISAC and HSCX chips, respectively.
<br>
<br>Card types:
<br>
<br>    Type                Required parameters (in addition to type and protocol)
<br>
<br>    1   Teles 16.0               irq, mem, io
<br>    2   Teles  8.0               irq, mem
<br>    3   Teles 16.3 (non PnP)     irq, io
<br>    4   Creatix/Teles PnP        irq, io0 (ISAC), io1 (HSCX)
<br>    5   AVM A1 (Fritz)           irq, io
<br>    6   ELSA PCC/PCF cards       io or nothing for autodetect (the iobase is
<br>                                 required only if you have more than one ELSA
<br>                                 card in your PC)
<br>    7   ELSA Quickstep 1000      irq, io  (from isapnp setup)
<br>    8   Teles 16.3 PCMCIA     	 irq, io
<br>    9   ITK ix1-micro Rev.2      irq, io
<br>   10   ELSA PCMCIA		 irq, io  (set with card manager)
<br>   11   Eicon.Diehl Diva ISA PnP irq, io
<br>   11   Eicon.Diehl Diva PCI     no parameter
<br>   12   ASUS COM ISDNLink        irq, io  (from isapnp setup)
<br>   13   HFC-2BS0 based cards     irq, io
<br>   14   Teles 16.3c PnP          irq, io
<br>   15   Sedlbauer Speed Card     irq, io
<br>   15   Sedlbauer PC/104         irq, io
<br>   15   Sedlbauer Speed PCI	 no parameter
<br>   16   USR Sportster internal   irq, io
<br>   17   MIC card                 irq, io
<br>   18   ELSA Quickstep 1000PCI   no parameter
<br>   19   Compaq ISDN S0 ISA card  irq, io0, io1, io (from isapnp setup io=IO2)
<br>   20   NETjet PCI card          no parameter
<br>   21   Teles PCI                no parameter
<br>   22   Sedlbauer Speed Star (PCMCIA) irq, io (set with card manager)
<br>   24   Dr. Neuhaus Niccy PnP    irq, io0, io1 (from isapnp setup)
<br>   24   Dr. Neuhaus Niccy PCI    no parameter
<br>   25   Teles S0Box              irq, io (of the used lpt port)
<br>   26   AVM A1 PCMCIA (Fritz!)   irq, io (set with card manager)
<br>   27   AVM PnP (Fritz!PnP)      irq, io  (from isapnp setup)
<br>   27   AVM PCI (Fritz!PCI)      no parameter
<br>   28   Sedlbauer Speed Fax+     irq, io (from isapnp setup)
<br>   29	Siemens I-Surf 1.0       irq, io, memory (from isapnp setup)   
<br>   30	ACER P10                 irq, io (from isapnp setup)   
<br>   31	HST Saphir               irq, io
<br>   32	Telekom A4T              none
<br>   33	Scitel Quadro		 subcontroller (4*S0, subctrl 1...4)
<br>   34	Gazel ISDN cards (ISA)   irq,io
<br>   34	Gazel ISDN cards (PCI)   none
<br>   35	HFC 2BDS0 PCI            none
<br>   36	W6692 based PCI cards    none
<br>   37	HFC 2BDS0 S+, SP         irq,io 
<br>   38	NETspider U PCI card     none
<br>   39	HFC 2BDS0 SP/PCMCIA      irq,io (set with cardmgr)
<br>   40   hotplug interface
<br>   41   Formula-n enter:now PCI  none
<br>
<br>At the moment IRQ sharing is only possible with PCI cards. Please make sure
<br>that your IRQ is free and enabled for ISA use.
<br>
<br>
<br>Examples for module loading
<br>
<br>1. Teles 16.3, Euro ISDN, I/O base 280 hex, IRQ 10
<br>   modprobe hisax type=3 protocol=2 io=0x280 irq=10
<br>
<br>2. Teles 16.0, 1TR6 ISDN, I/O base d80 hex, IRQ 5, Memory d0000 hex
<br>   modprobe hisax protocol=1 type=1 io=0xd80 mem=0xd0000 irq=5
<br>
<br>3. Fritzcard, Euro ISDN, I/O base 340 hex, IRQ 10 and ELSA PCF, Euro ISDN
<br>   modprobe hisax type=5,6 protocol=2,2 io=0x340 irq=10 id=Fritz%Elsa
<br>
<br>4. Any ELSA PCC/PCF card, Euro ISDN
<br>   modprobe hisax type=6 protocol=2
<br>
<br>5. Teles 16.3 PnP, Euro ISDN, with isapnp configured
<br>   isapnp config:  (INT 0 (IRQ 10 (MODE +E)))
<br> 		   (IO 0 (BASE 0x0580))
<br>                   (IO 1 (BASE 0x0180))
<br>   modprobe hisax type=4 protocol=2 irq=10 io0=0x580 io1=0x180
<br>
<br>   In the current version of HiSax, you can instead simply use
<br>
<br>   modprobe hisax type=4 protocol=2
<br>
<br>   if you configured your kernel for ISAPnP. Don't run isapnp in
<br>   this case!
<br>
<br>6. Teles 16.3, Euro ISDN, I/O base 280 hex, IRQ 12 and
<br>   Teles 16.0, 1TR6, IRQ 5, Memory d0000 hex
<br>   modprobe hisax type=3,1 protocol=2,1 io=0x280 mem=0,0xd0000
<br>
<br>   Please note the dummy 0 memory address for the Teles 16.3, used as a
<br>   placeholder as described above, in the last example.
<br>
<br>7. Teles PCMCIA, Euro ISDN, I/O base 180 hex, IRQ 15 (default values)
<br>   modprobe hisax type=8 protocol=2 io=0x180 irq=15
<br>
<br>
<br>b) using LILO/LOADLIN, with the driver compiled directly into the kernel
<br>------------------------------------------------------------------------
<br>
<br>hisax=typ1,dp1,pa_1,pb_1,pc_1[,typ2,dp2,pa_2 ... \
<br>      typn,dpn,pa_n,pb_n,pc_n][,idstring1[,idstring2,...,idstringn]]
<br>
<br>where
<br>     typ1 = type of 1st card (default depends on kernel settings)
<br>     dp1  = D-Channel protocol of 1st card. 1=1TR6, 2=EDSS1, 3=leased
<br>     pa_1 = 1st parameter (depending on the type of the card)
<br>     pb_1 = 2nd parameter (    "     "   "   "   "   "   "  )
<br>     pc_1 = 3rd parameter (    "     "   "   "   "   "   "  )
<br>
<br>     typ2,dp2,pa_2,pb_2,pc_2 = Parameters of the second card (defaults: none)
<br>     typn,dpn,pa_n,pb_n,pc_n = Parameters of the n'th card (up to 16 cards are
<br>                                                                     supported)
<br>
<br>     idstring = Driver ID for accessing the particular card with utility
<br>                programs and for identification when using a line monitor
<br>                (default: "HiSax")
<br>
<br>                Note: the ID string must start with an alphabetical character!
<br>
<br>Card types:
<br>
<br>type
<br>    1 	Teles 16.0     	        pa=irq  pb=membase  pc=iobase
<br>    2 	Teles  8.0              pa=irq  pb=membase
<br>    3 	Teles 16.3              pa=irq  pb=iobase
<br>    4 	Creatix/Teles PNP     	ONLY WORKS AS A MODULE !
<br>    5 	AVM A1 (Fritz)          pa=irq  pb=iobase
<br>    6 	ELSA PCC/PCF cards      pa=iobase or nothing for autodetect
<br>    7   ELSA Quickstep 1000     ONLY WORKS AS A MODULE !
<br>    8   Teles S0 PCMCIA         pa=irq  pb=iobase
<br>    9   ITK ix1-micro Rev.2     pa=irq  pb=iobase
<br>   10   ELSA PCMCIA             pa=irq, pb=io  (set with card manager)
<br>   11   Eicon.Diehl Diva ISAPnP ONLY WORKS AS A MODULE !
<br>   11   Eicon.Diehl Diva PCI    no parameter
<br>   12   ASUS COM ISDNLink       ONLY WORKS AS A MODULE !
<br>   13	HFC-2BS0 based cards    pa=irq  pb=io
<br>   14   Teles 16.3c PnP         ONLY WORKS AS A MODULE !
<br>   15	Sedlbauer Speed Card    pa=irq  pb=io (Speed Win only as module !)
<br>   15   Sedlbauer PC/104        pa=irq  pb=io
<br>   15   Sedlbauer Speed PCI	no parameter
<br>   16   USR Sportster internal  pa=irq  pb=io
<br>   17   MIC card                pa=irq  pb=io
<br>   18   ELSA Quickstep 1000PCI  no parameter
<br>   19   Compaq ISDN S0 ISA card ONLY WORKS AS A MODULE !
<br>   20   NETjet PCI card         no parameter
<br>   21   Teles PCI               no parameter
<br>   22   Sedlbauer Speed Star (PCMCIA)  pa=irq, pb=io  (set with card manager)
<br>   24   Dr. Neuhaus Niccy PnP   ONLY WORKS AS A MODULE !
<br>   24   Dr. Neuhaus Niccy PCI   no parameter
<br>   25   Teles S0Box             pa=irq, pb=io (of the used lpt port)
<br>   26   AVM A1 PCMCIA (Fritz!)  pa=irq, pb=io (set with card manager)
<br>   27   AVM PnP (Fritz!PnP)     ONLY WORKS AS A MODULE !
<br>   27   AVM PCI (Fritz!PCI)     no parameter
<br>   28   Sedlbauer Speed Fax+    ONLY WORKS AS A MODULE !
<br>   29	Siemens I-Surf 1.0      ONLY WORKS AS A MODULE !
<br>   30	ACER P10                ONLY WORKS AS A MODULE !
<br>   31	HST Saphir              pa=irq, pb=io
<br>   32	Telekom A4T             no parameter
<br>   33	Scitel Quadro		subcontroller (4*S0, subctrl 1...4)
<br>   34	Gazel ISDN cards (ISA)  pa=irq, pb=io
<br>   34	Gazel ISDN cards (PCI)  no parameter
<br>   35	HFC 2BDS0 PCI           no parameter
<br>   36	W6692 based PCI cards   none
<br>   37	HFC 2BDS0 S+,SP/PCMCIA  ONLY WORKS AS A MODULE !
<br>   38	NETspider U PCI card    none
<br>   39	HFC 2BDS0 SP/PCMCIA     ONLY WORKS AS A MODULE !
<br>   40   hotplug interface	ONLY WORKS AS A MODULE !
<br>   41   Formula-n enter:now PCI none
<br>
<br>Running the driver
<br>------------------
<br>
<br>When you insmod isdn.o and hisax.o (or with the in-kernel version, during
<br>boot time), a few lines should appear in your syslog. Look for something like:
<br>
<br>Apr 13 21:01:59 kke01 kernel: HiSax: Driver for Siemens chip set ISDN cards
<br>Apr 13 21:01:59 kke01 kernel: HiSax: Version 2.9
<br>Apr 13 21:01:59 kke01 kernel: HiSax: Revisions 1.14/1.9/1.10/1.25/1.8
<br>Apr 13 21:01:59 kke01 kernel: HiSax: Total 1 card defined
<br>Apr 13 21:01:59 kke01 kernel: HiSax: Card 1 Protocol EDSS1 Id=HiSax1 (0)
<br>Apr 13 21:01:59 kke01 kernel: HiSax: Elsa driver Rev. 1.13
<br>...
<br>Apr 13 21:01:59 kke01 kernel: Elsa: PCF-Pro found at 0x360 Rev.:C IRQ 10
<br>Apr 13 21:01:59 kke01 kernel: Elsa: timer OK; resetting card
<br>Apr 13 21:01:59 kke01 kernel: Elsa: HSCX version A: V2.1  B: V2.1
<br>Apr 13 21:01:59 kke01 kernel: Elsa: ISAC 2086/2186 V1.1
<br>...
<br>Apr 13 21:01:59 kke01 kernel: HiSax: DSS1 Rev. 1.14
<br>Apr 13 21:01:59 kke01 kernel: HiSax: 2 channels added
<br>
<br>This means that the card is ready for use.
<br>Cabling problems or line-downs are not detected, and only some ELSA cards can
<br>detect the S0 power.
<br>
<br>Remember that, according to the new strategy for accessing low-level drivers
<br>from within isdn4linux, you should also define a driver ID while doing
<br>insmod: Simply append hisax_id=<SomeString> to the insmod command line. This
<br>string MUST NOT start with a digit or a small 'x'!
<br>
<br>At this point you can run a 'cat /dev/isdnctrl0' and view debugging messages.
<br>
<br>At the moment, debugging messages are enabled with the hisaxctrl tool:
<br>
<br>    hisaxctrl <DriverId> DebugCmd <debugging_flags>
<br>
<br><DriverId> default is HiSax, if you didn't specify one.
<br>
<br>DebugCmd is  1  for generic debugging
<br>            11  for layer 1 development debugging
<br>            13  for layer 3 development debugging
<br>
<br>where <debugging_flags> is the integer sum of the following debugging
<br>options you wish enabled:
<br>
<br>With DebugCmd set to 1:
<br>
<br>   0x0001  Link-level <--> hardware-level communication
<br>   0x0002  Top state machine
<br>   0x0004  D-Channel Frames for isdnlog
<br>   0x0008  D-Channel Q.921
<br>   0x0010  B-Channel X.75
<br>   0x0020  D-Channel l2
<br>   0x0040  B-Channel l2
<br>   0x0080  D-Channel link state debugging
<br>   0x0100  B-Channel link state debugging
<br>   0x0200  TEI debug
<br>   0x0400  LOCK debug in callc.c
<br>   0x0800  More paranoid debug in callc.c (not for normal use)
<br>   0x1000  D-Channel l1 state debugging
<br>   0x2000  B-Channel l1 state debugging
<br>
<br>With DebugCmd set to 11:
<br>
<br>   0x0001  Warnings (default: on)
<br>   0x0002  IRQ status
<br>   0x0004  ISAC
<br>   0x0008  ISAC FIFO
<br>   0x0010  HSCX
<br>   0x0020  HSCX FIFO (attention: full B-Channel output!)
<br>   0x0040  D-Channel LAPD frame types
<br>   0x0080  IPAC debug
<br>   0x0100  HFC receive debug
<br>   0x0200  ISAC monitor debug
<br>   0x0400  D-Channel frames for isdnlog (set with 1 0x4 too)
<br>   0x0800  D-Channel message verbose
<br>
<br>With DebugCmd set to 13:
<br>
<br>         1  Warnings (default: on)
<br>         2  l3 protocol descriptor errors
<br>         4  l3 state machine
<br>         8  charge info debugging (1TR6)
<br>
<br>For example, 'hisaxctrl HiSax 1 0x3ff' enables full generic debugging.
<br>
<br>Because of some obscure problems with some switch equipment, the delay
<br>between the CONNECT message and sending the first data on the B-channel is now
<br>configurable with
<br>
<br>hisaxctrl <DriverId> 2 <delay>
<br><delay> in ms Value between 50 and 800 ms is recommended.
<br>
<br>Downloading Firmware
<br>--------------------
<br>At the moment, the Sedlbauer speed fax+ is the only card, which
<br>needs to download firmware.
<br>The firmware is downloaded with the hisaxctrl tool:
<br>
<br>    hisaxctrl <DriverId> 9 <firmware_filename>
<br>
<br><DriverId> default is HiSax, if you didn't specify one,
<br>
<br>where <firmware_filename> is the filename of the firmware file.
<br>
<br>For example, 'hisaxctrl HiSax 9 ISAR.BIN' downloads the firmware for
<br>ISAR based cards (like the Sedlbauer speed fax+).
<br>
<br>Warning
<br>-------
<br>HiSax is a work in progress and may crash your machine.
<br>For certification look at HiSax.cert file.
<br>
<br>Limitations
<br>-----------
<br>At this time, HiSax only works on Euro ISDN lines and German 1TR6 lines.
<br>For leased lines see appendix.
<br>
<br>Bugs
<br>----
<br>If you find any, please let me know.
<br>
<br>
<br>Thanks
<br>------
<br>Special thanks to:
<br>
<br>        Emil Stephan for the name HiSax which is a mix of HSCX and ISAC.
<br>
<br>        Fritz Elfert, Jan den Ouden, Michael Hipp, Michael Wein,
<br>        Andreas Kool, Pekka Sarnila, Sim Yskes, Johan Myrre'en,
<br>	Klaus-Peter Nischke (ITK AG), Christof Petig, Werner Fehn (ELSA GmbH),
<br>	Volker Schmidt
<br>	Edgar Toernig and Marcus Niemann for the Sedlbauer driver
<br>	Stephan von Krawczynski
<br>	Juergen Quade for the Leased Line part
<br>	Klaus Lichtenwalder (Klaus.Lichtenwalder@WebForum.DE), for ELSA PCMCIA support
<br>	Enrik Berkhan (enrik@starfleet.inka.de) for S0BOX specific stuff
<br>	Ton van Rosmalen for Teles PCI
<br>	Petr Novak <petr.novak@i.cz> for Winbond W6692 support
<br>	Werner Cornelius <werner@isdn4linux.de> for HFC-PCI, HFC-S(+/P) and supplementary services support
<br>        and more people who are hunting bugs. (If I forgot somebody, please
<br>	send me a mail).
<br>
<br>        Firma ELSA GmbH
<br>        Firma Eicon.Diehl GmbH
<br>        Firma Dynalink NL
<br>	Firma ASUSCOM NETWORK INC. Taiwan
<br>	Firma S.u.S.E
<br>	Firma ith Kommunikationstechnik GmbH
<br>	Firma Traverse Technologie Australia
<br>	Firma Medusa GmbH  (www.medusa.de).
<br>	Firma Quant-X Austria for sponsoring a DEC Alpha board+CPU
<br>	Firma Cologne Chip Designs GmbH
<br>
<br>        My girl friend and partner in life Ute for her patience with me.
<br>
<br>
<br>Enjoy,
<br>
<br>Karsten Keil
<br>keil@isdn4linux.de
<br>
<br>
<br>Appendix: Teles PCMCIA driver
<br>-----------------------------
<br>
<br>See
<br>   http://www.linux.no/teles_cs.txt 
<br>for instructions.
<br>
<br>Appendix: Linux and ISDN-leased lines
<br>-------------------------------------
<br>
<br>Original from Juergen Quade, new version KKe.
<br>
<br>Attention NEW VERSION, the old leased line syntax won't work !!!
<br>
<br>You can use HiSax to connect your Linux-Box via an ISDN leased line
<br>to e.g. the Internet:
<br>
<br>1. Build a kernel which includes the HiSax driver either as a module
<br>   or as part of the kernel.
<br>     cd /usr/src/linux
<br>     make menuconfig
<br>     <ISDN subsystem - ISDN support -- HiSax>
<br>     make clean; make zImage; make modules; make modules_install
<br>2. Install the new kernel
<br>     cp /usr/src/linux/arch/x86/boot/zImage /etc/kernel/linux.isdn
<br>     vi /etc/lilo.conf
<br>     <add new kernel in the bootable image section>
<br>     lilo
<br>3. in case the hisax driver is a "fixed" part of the kernel, configure
<br>   the driver with lilo:
<br>     vi /etc/lilo.conf
<br>     <add HiSax driver parameter in the global section (see below)>
<br>     lilo
<br>   Your lilo.conf _might_ look like the following:
<br>
<br>	# LILO configuration-file
<br>	# global section
<br>    # teles 16.0 on IRQ=5, MEM=0xd8000, PORT=0xd80
<br>	append="hisax=1,3,5,0xd8000,0xd80,HiSax"
<br>    # teles 16.3 (non pnp) on IRQ=15, PORT=0xd80
<br>	# append="hisax=3,3,5,0xd8000,0xd80,HiSax"
<br>	boot=/dev/sda
<br>	compact        # faster, but won't work on all systems.
<br>	linear
<br>	read-only
<br>	prompt
<br>	timeout=100
<br>	vga = normal    # force sane state
<br>	# Linux bootable partition config begins
<br>	image = /etc/kernel/linux.isdn
<br>	root = /dev/sda1
<br>	label = linux.isdn
<br>	#
<br>	image = /etc/kernel/linux-2.0.30
<br>	root = /dev/sda1
<br>	label = linux.secure
<br>
<br>   In the line starting with "append" you have to adapt the parameters
<br>   according to your card (see above in this file)
<br>
<br>3. boot the new linux.isdn kernel
<br>4. start the ISDN subsystem:
<br>   a) load - if necessary - the modules (depends, whether you compiled
<br>      the ISDN driver as module or not)
<br>      According to the type of card you have to specify the necessary
<br>      driver parameter (irq, io, mem, type, protocol).
<br>      For the leased line the protocol is "3". See the table above for
<br>      the parameters, which you have to specify depending on your card.
<br>   b) configure i4l
<br>      /sbin/isdnctrl addif isdn0
<br>      # EAZ  1 -- B1 channel   2 --B2 channel
<br>      /sbin/isdnctrl eaz isdn0 1
<br>      /sbin/isdnctrl secure isdn0 on
<br>      /sbin/isdnctrl huptimeout isdn0 0
<br>      /sbin/isdnctrl l2_prot isdn0 hdlc
<br>      # Attention you must not set an outgoing number !!! This won't work !!!
<br>      # The incoming number is LEASED0 for the first card, LEASED1 for the
<br>      # second and so on.
<br>      /sbin/isdnctrl addphone isdn0 in LEASED0
<br>      # Here is no need to bind the channel.
<br>   c) in case the remote partner is a CISCO:
<br>      /sbin/isdnctrl encap isdn0 cisco-h
<br>   d) configure the interface
<br>      /sbin/ifconfig isdn0 ${LOCAL_IP} pointopoint ${REMOTE_IP}
<br>   e) set the routes
<br>      /sbin/route add -host ${REMOTE_IP} isdn0
<br>      /sbin/route add default gw ${REMOTE_IP}
<br>   f) switch the card into leased mode for each used B-channel
<br>      /sbin/hisaxctrl HiSax 5 1
<br>
<br>Remarks:
<br>a) Use state of the art isdn4k-utils
<br>
<br>Here an example script:
<br>#!/bin/sh
<br># Start/Stop ISDN leased line connection
<br>
<br>I4L_AS_MODULE=yes
<br>I4L_REMOTE_IS_CISCO=no
<br>I4L_MODULE_PARAMS="type=16 io=0x268 irq=7 "
<br>I4L_DEBUG=no
<br>I4L_LEASED_128K=yes
<br>LOCAL_IP=192.168.1.1
<br>REMOTE_IP=192.168.2.1
<br>
<br>case "$1" in
<br>    start)
<br>	echo "Starting ISDN ..."
<br>        if [ ${I4L_AS_MODULE} = "yes" ]; then
<br>		echo "loading modules..."
<br>		/sbin/modprobe hisax ${I4L_MODULE_PARAMS}
<br>	fi
<br>	# configure interface
<br>	/sbin/isdnctrl addif isdn0
<br>	/sbin/isdnctrl secure isdn0 on
<br>	if [ ${I4L_DEBUG} = "yes" ]; then
<br>		/sbin/isdnctrl verbose 7
<br>		/sbin/hisaxctrl HiSax 1 0xffff
<br>		/sbin/hisaxctrl HiSax 11 0xff
<br>		cat  /dev/isdnctrl >/tmp/lea.log &
<br>	fi
<br>	if [ ${I4L_REMOTE_IS_CISCO} = "yes" ]; then
<br>		/sbin/isdnctrl encap isdn0 cisco-h
<br>	fi
<br>	/sbin/isdnctrl huptimeout isdn0 0
<br>	# B-CHANNEL 1
<br>	/sbin/isdnctrl eaz isdn0 1
<br>	/sbin/isdnctrl l2_prot isdn0 hdlc
<br>	# 1. card
<br>	/sbin/isdnctrl addphone isdn0 in LEASED0
<br>        if [ ${I4L_LEASED_128K} = "yes" ]; then
<br>		/sbin/isdnctrl addslave isdn0 isdn0s
<br>		/sbin/isdnctrl secure isdn0s on
<br>		/sbin/isdnctrl huptimeout isdn0s 0
<br>		# B-CHANNEL 2
<br>		/sbin/isdnctrl eaz isdn0s 2
<br>		/sbin/isdnctrl l2_prot isdn0s hdlc
<br>		# 1. card
<br>		/sbin/isdnctrl addphone isdn0s in LEASED0
<br>		if [ ${I4L_REMOTE_IS_CISCO} = "yes" ]; then
<br>			/sbin/isdnctrl encap isdn0s cisco-h
<br>		fi
<br>	fi
<br>	/sbin/isdnctrl dialmode isdn0 manual
<br>	# configure tcp/ip
<br>	/sbin/ifconfig isdn0 ${LOCAL_IP} pointopoint ${REMOTE_IP}
<br>	/sbin/route add -host ${REMOTE_IP} isdn0
<br>	/sbin/route add default gw ${REMOTE_IP}
<br>	# switch to leased mode
<br>	# B-CHANNEL 1
<br>	/sbin/hisaxctrl HiSax 5 1
<br>        if [ ${I4L_LEASED_128K} = "yes" ]; then
<br>		# B-CHANNEL 2
<br>		sleep 10; /* Wait for master */
<br>		/sbin/hisaxctrl HiSax 5 2
<br>	fi
<br>	;;
<br>    stop)
<br>	/sbin/ifconfig isdn0 down
<br>	/sbin/isdnctrl delif isdn0
<br>	if [ ${I4L_DEBUG} = "yes" ]; then
<br>		killall cat
<br>	fi
<br>	if [ ${I4L_AS_MODULE} = "yes" ]; then
<br>		/sbin/rmmod hisax
<br>		/sbin/rmmod isdn
<br>		/sbin/rmmod ppp
<br>		/sbin/rmmod slhc
<br>	fi
<br>	;;
<br>    *)
<br>	echo "Usage: $0 {start|stop}"
<br>	exit 1
<br>esac
<br>exit 0
<br><p></p><div class="separator"></div><br><p><h2>isdn</h2></p>
<br>The FAQ for isdn4linux
<br>======================
<br>
<br>Please note that there is a big FAQ available in the isdn4k-utils.
<br>You find it in:
<br> isdn4k-utils/FAQ/i4lfaq.sgml
<br>
<br>In case you just want to see the FAQ online, or download the newest version,
<br>you can have a look at my website:
<br>http://www.mhessler.de/i4lfaq/ (view + download)
<br>or:
<br>http://www.isdn4linux.de/faq/ (view)
<br>
<br>As the extension tells, the FAQ is in SGML format, and you can convert it
<br>into text/html/... format by using the sgml2txt/sgml2html/... tools.
<br>Alternatively, you can also do a 'configure; make all' in the FAQ directory.
<br>
<br>
<br>Please have a look at the FAQ before posting anything in the Mailinglist,
<br>or the newsgroup!
<br>
<br>
<br>Matthias Hessler
<br>hessler@isdn4linux.de
<br>
<br><p></p><div class="separator"></div><br><p><h2>isdn</h2></p>$Id: README.hysdn,v 1.3.6.1 2001/02/10 14:41:19 kai Exp $
<br>The hysdn driver has been written by
<br>Werner Cornelius (werner@isdn4linux.de or werner@titro.de)
<br>for Hypercope GmbH Aachen Germany. Hypercope agreed to publish this driver
<br>under the GNU General Public License.
<br>
<br>The CAPI 2.0-support was added by Ulrich Albrecht (ualbrecht@hypercope.de)
<br>for Hypercope GmbH Aachen, Germany.
<br>
<br>
<br>    This program is free software; you can redistribute it and/or modify
<br>    it under the terms of the GNU General Public License as published by
<br>    the Free Software Foundation; either version 2 of the License, or
<br>    (at your option) any later version.
<br>
<br>    This program is distributed in the hope that it will be useful,
<br>    but WITHOUT ANY WARRANTY; without even the implied warranty of
<br>    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
<br>    GNU General Public License for more details.
<br>
<br>    You should have received a copy of the GNU General Public License
<br>    along with this program; if not, write to the Free Software
<br>    Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
<br>
<br>Table of contents
<br>=================
<br>
<br>1. About the driver
<br>
<br>2. Loading/Unloading the driver
<br>
<br>3. Entries in the /proc filesystem
<br>
<br>4. The /proc/net/hysdn/cardconfX file
<br>
<br>5. The /proc/net/hysdn/cardlogX file
<br>
<br>6. Where to get additional info and help
<br>
<br>
<br>1. About the driver
<br>
<br>   The drivers/isdn/hysdn subdir contains a driver for HYPERCOPEs active 
<br>   PCI isdn cards Champ, Ergo and Metro. To enable support for this cards
<br>   enable ISDN support in the kernel config and support for HYSDN cards in
<br>   the active cards submenu. The driver may only be compiled and used if 
<br>   support for loadable modules and the process filesystem have been enabled.
<br>
<br>   These cards provide two different interfaces to the kernel. Without the
<br>   optional CAPI 2.0 support, they register as ethernet card. IP-routing
<br>   to a ISDN-destination is performed on the card itself. All necessary
<br>   handlers for various protocols like ppp and others as well as config info
<br>   and firmware may be fetched from Hypercopes WWW-Site www.hypercope.de.
<br>
<br>   With CAPI 2.0 support enabled, the card can also be used as a CAPI 2.0 
<br>   compliant devices with either CAPI 2.0 applications 
<br>   (check isdn4k-utils) or -using the capidrv module- as a regular
<br>   isdn4linux device. This is done via the same mechanism as with the 
<br>   active AVM cards and in fact uses the same module.
<br>   
<br>
<br>2. Loading/Unloading the driver
<br>
<br>   The module has no command line parameters and auto detects up to 10 cards
<br>   in the id-range 0-9.
<br>   If a loaded driver shall be unloaded all open files in the /proc/net/hysdn
<br>   subdir need to be closed and all ethernet interfaces allocated by this 
<br>   driver must be shut down. Otherwise the module counter will avoid a module
<br>   unload.
<br>   
<br>   If you are using the CAPI 2.0-interface, make sure to load/modprobe the
<br>   kernelcapi-module first.
<br>
<br>   If you plan to use the capidrv-link to isdn4linux, make sure to load
<br>   capidrv.o after all modules using this driver (i.e. after hysdn and
<br>   any avm-specific modules).
<br>
<br>3. Entries in the /proc filesystem
<br>
<br>   When the module has been loaded it adds the directory hysdn in the 
<br>   /proc/net tree. This directory contains exactly 2 file entries for each 
<br>   card. One is called cardconfX and the other cardlogX, where X is the
<br>   card id number from 0 to 9. 
<br>   The cards are numbered in the order found in the PCI config data.
<br>
<br>4. The /proc/net/hysdn/cardconfX file
<br>
<br>   This file may be read to get by everyone to get info about the cards type, 
<br>   actual state, available features and used resources.
<br>   The first 3 entries (id, bus and slot) are PCI info fields, the following
<br>   type field gives the information about the cards type:
<br>
<br>   4 -> Ergo card (server card with 2 b-chans)
<br>   5 -> Metro card (server card with 4 or 8 b-chans)
<br>   6 -> Champ card (client card with 2 b-chans)   
<br>
<br>   The following 3 fields show the hardware assignments for irq, iobase and the
<br>   dual ported memory (dp-mem).
<br>   The fields b-chans and fax-chans announce the available card resources of
<br>   this types for the user.
<br>   The state variable indicates the actual drivers state for this card with the
<br>   following assignments.
<br>
<br>   0 -> card has not been booted since driver load
<br>   1 -> card booting is actually in progess
<br>   2 -> card is in an error state due to a previous boot failure
<br>   3 -> card is booted and active
<br>
<br>   And the last field (device) shows the name of the ethernet device assigned
<br>   to this card. Up to the first successful boot this field only shows a -
<br>   to tell that no net device has been allocated up to now. Once a net device
<br>   has been allocated it remains assigned to this card, even if a card is
<br>   rebooted and an boot error occurs. 
<br>
<br>   Writing to the cardconfX file boots the card or transfers config lines to 
<br>   the cards firmware. The type of data is automatically detected when the 
<br>   first data is written. Only root has write access to this file.
<br>   The firmware boot files are normally called hyclient.pof for client cards
<br>   and hyserver.pof for server cards.
<br>   After successfully writing the boot file, complete config files or single
<br>   config lines may be copied to this file.
<br>   If an error occurs the return value given to the writing process has the 
<br>   following additional codes (decimal):
<br>
<br>   1000 Another process is currently bootng the card
<br>   1001 Invalid firmware header
<br>   1002 Boards dual-port RAM test failed
<br>   1003 Internal firmware handler error
<br>   1004 Boot image size invalid
<br>   1005 First boot stage (bootstrap loader) failed
<br>   1006 Second boot stage failure
<br>   1007 Timeout waiting for card ready during boot
<br>   1008 Operation only allowed in booted state
<br>   1009 Config line too long 
<br>   1010 Invalid channel number 
<br>   1011 Timeout sending config data
<br>
<br>   Additional info about error reasons may be fetched from the log output. 
<br>
<br>5. The /proc/net/hysdn/cardlogX file
<br>   	  
<br>   The cardlogX file entry may be opened multiple for reading by everyone to 
<br>   get the cards and drivers log data. Card messages always start with the
<br>   keyword LOG. All other lines are output from the driver. 
<br>   The driver log data may be redirected to the syslog by selecting the 
<br>   appropriate bitmask. The cards log messages will always be send to this
<br>   interface but never to the syslog.
<br>
<br>   A root user may write a decimal or hex (with 0x) value t this file to select
<br>   desired output options. As mentioned above the cards log dat is always 
<br>   written to the cardlog file independent of the following options only used
<br>   to check and debug the driver itself:
<br>
<br>   For example: 
<br>   echo "0x34560078" > /proc/net/hysdn/cardlog0
<br>   to output the hex log mask 34560078 for card 0.
<br> 
<br>   The written value is regarded as an unsigned 32-Bit value, bit ored for 
<br>   desired output. The following bits are already assigned:
<br>
<br>   0x80000000   All driver log data is alternatively via syslog 
<br>   0x00000001   Log memory allocation errors
<br>   0x00000010   Firmware load start and close are logged
<br>   0x00000020   Log firmware record parser
<br>   0x00000040   Log every firmware write actions
<br>   0x00000080   Log all card related boot messages
<br>   0x00000100   Output all config data sent for debugging purposes
<br>   0x00000200   Only non comment config lines are shown wth channel
<br>   0x00000400   Additional conf log output
<br>   0x00001000   Log the asynchronous scheduler actions (config and log)
<br>   0x00100000   Log all open and close actions to /proc/net/hysdn/card files
<br>   0x00200000   Log all actions from /proc file entries
<br>   0x00010000   Log network interface init and deinit
<br>   
<br>6. Where to get additional info and help
<br>
<br>   If you have any problems concerning the driver or configuration contact 
<br>   the Hypercope support team (support@hypercope.de) and or the authors
<br>   Werner Cornelius (werner@isdn4linux or cornelius@titro.de) or
<br>   Ulrich Albrecht (ualbrecht@hypercope.de).
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br><p></p><div class="separator"></div><br><p><h2>isdn</h2></p>README for the ISDN-subsystem
<br>
<br>1. Preface
<br>
<br>  1.1 Introduction
<br>
<br>  This README describes how to set up and how to use the different parts
<br>  of the ISDN-subsystem.
<br>
<br>  For using the ISDN-subsystem, some additional userlevel programs are
<br>  necessary. Those programs and some contributed utilities are available
<br>  at
<br>
<br>   ftp.isdn4linux.de
<br>
<br>   /pub/isdn4linux/isdn4k-utils-<VersionNumber>.tar.gz
<br>
<br>
<br>  We also have set up a mailing-list:
<br>
<br>   The isdn4linux-project originates in Germany, and therefore by historical
<br>   reasons, the mailing-list's primary language is german. However mails
<br>   written in english have been welcome all the time.
<br>
<br>   to subscribe: write a email to majordomo@listserv.isdn4linux.de,
<br>   Subject irrelevant, in the message body:
<br>   subscribe isdn4linux <your_email_address>
<br>
<br>   To write to the mailing-list, write to isdn4linux@listserv.isdn4linux.de
<br>
<br>   This mailinglist is bidirectionally gated to the newsgroup
<br>
<br>     de.alt.comm.isdn4linux
<br>
<br>  There is also a well maintained FAQ in English available at
<br>     http://www.mhessler.de/i4lfaq/
<br>  It can be viewed online, or downloaded in sgml/text/html format.
<br>  The FAQ can also be viewed online at
<br>     http://www.isdn4linux.de/faq/
<br>  or downloaded from
<br>     ftp://ftp.isdn4linux.de/pub/isdn4linux/FAQ/
<br>
<br>  1.1 Technical details
<br>
<br>  In the following Text, the terms MSN and EAZ are used.
<br>
<br>  MSN is the abbreviation for (M)ultiple(S)ubscriber(N)umber, and applies
<br>  to Euro(EDSS1)-type lines. Usually it is simply the phone number.
<br>
<br>  EAZ is the abbreviation of (E)ndgeraete(A)uswahl(Z)iffer and
<br>  applies to German 1TR6-type lines. This is a one-digit string,
<br>  simply appended to the base phone number
<br>
<br>  The internal handling is nearly identical, so replace the appropriate
<br>  term to that one, which applies to your local ISDN-environment.
<br>
<br>  When the link-level-module isdn.o is loaded, it supports up to 16
<br>  low-level-modules with up to 64 channels. (The number 64 is arbitrarily
<br>  chosen and can be configured at compile-time --ISDN_MAX in isdn.h).
<br>  A low-level-driver can register itself through an interface (which is
<br>  defined in isdnif.h) and gets assigned a slot.
<br>  The following char-devices are made available for each channel:
<br>
<br>  A raw-control-device with the following functions:
<br>     write: raw D-channel-messages (format: depends on driver).
<br>     read:  raw D-channel-messages (format: depends on driver).
<br>     ioctl: depends on driver, i.e. for the ICN-driver, the base-address of
<br>            the ports and the shared memory on the card can be set and read
<br>            also the boot-code and the protocol software can be loaded into
<br>            the card.
<br>
<br>   O N L Y !!!  for debugging (no locking against other devices):
<br>   One raw-data-device with the following functions:
<br>     write: data to B-channel.
<br>     read:  data from B-channel.
<br>
<br>   In addition the following devices are made available:
<br>
<br>   128 tty-devices (64 cuix and 64 ttyIx) with integrated modem-emulator:
<br>   The functionality is almost the same as that of a serial device
<br>   (the line-discs are handled by the kernel), which lets you run
<br>   SLIP, CSLIP and asynchronous PPP through the devices. We have tested
<br>   Seyon, minicom, CSLIP (uri-dip) PPP, mgetty, XCept and Hylafax. 
<br>
<br>   The modem-emulation supports the following:
<br>           1.3.1 Commands:
<br>
<br>               ATA      Answer incoming call.
<br>               ATD<No.> Dial, the number may contain:
<br>                        [0-9] and [,#.*WPT-S]
<br>                        the latter are ignored until 'S'.
<br>                        The 'S' must precede the number, if
<br>                        the line is a SPV (German 1TR6).
<br>               ATE0     Echo off.
<br>               ATE1     Echo on (default).
<br>               ATH      Hang-up.
<br>               ATH1     Off hook (ignored).
<br>               ATH0     Hang-up.
<br>               ATI      Return "ISDN for Linux...".
<br>               ATI0        "
<br>               ATI1        "
<br>               ATI2     Report of last connection.
<br>               ATO      On line (data mode).
<br>               ATQ0     Enable result codes (default).
<br>               ATQ1     Disable result codes (default).
<br>               ATSx=y   Set register x to y.
<br>               ATSx?    Show contents of register x.
<br>               ATV0     Numeric responses.
<br>               ATV1     English responses (default).
<br>               ATZ      Load registers and EAZ/MSN from Profile.
<br>               AT&Bx    Set Send-Packet-size to x (max. 4000)
<br>                        The real packet-size may be limited by the
<br>                        low-level-driver used. e.g. the HiSax-Module-
<br>                        limit is 2000. You will get NO Error-Message,
<br>                        if you set it to higher values, because at the
<br>                        time of giving this command the corresponding
<br>                        driver may not be selected (see "Automatic
<br>                        Assignment") however the size of outgoing packets
<br>                        will be limited correctly.
<br>               AT&D0    Ignore DTR
<br>               AT&D2    DTR-low-edge: Hang up and return to
<br>                        command mode (default).
<br>               AT&D3    Same as AT&D2 but also resets all registers.
<br>               AT&Ex    Set the EAZ/MSN for this channel to x.
<br>               AT&F     Reset all registers and profile to "factory-defaults"
<br>               AT&Lx    Set list of phone numbers to listen on.  x is a
<br>                        list of wildcard patterns separated by semicolon.
<br>                        If this is set, it has precedence over the MSN set
<br>                        by AT&E.
<br>               AT&Rx    Select V.110 bitrate adaption.
<br>                        This command enables V.110 protocol with 9600 baud
<br>                        (x=9600), 19200 baud (x=19200) or 38400 baud
<br>                        (x=38400). A value of x=0 disables V.110 switching
<br>                        back to default X.75. This command sets the following
<br>                        Registers:
<br>                          Reg 14 (Layer-2 protocol):
<br>                            x = 0:     0
<br>                            x = 9600:  7
<br>                            x = 19200: 8
<br>                            x = 38400: 9
<br>                          Reg 18.2 = 1
<br>                          Reg 19 (Additional Service Indicator):
<br>                            x = 0:       0
<br>                            x = 9600:  197
<br>                            x = 19200: 199
<br>                            x = 38400: 198
<br>                          Note on value in Reg 19:
<br>                            There is _NO_ common convention for 38400 baud.
<br>                            The value 198 is chosen arbitrarily. Users
<br>                            _MUST_ negotiate this value before establishing
<br>                            a connection.
<br>               AT&Sx    Set window-size (x = 1..8) (not yet implemented)
<br>               AT&V     Show all settings.
<br>               AT&W0    Write registers and EAZ/MSN to profile. See also
<br>                        iprofd (5.c in this README).
<br>               AT&X0    BTX-mode and T.70-mode off (default)
<br>               AT&X1    BTX-mode on. (S13.1=1, S13.5=0 S14=0, S16=7, S18=7, S19=0)
<br>               AT&X2    T.70-mode on. (S13.1=1, S13.5=1, S14=0, S16=7, S18=7, S19=0)
<br>               AT+Rx    Resume a suspended call with CallID x (x = 1,2,3...)
<br>               AT+Sx    Suspend a call with CallID x (x = 1,2,3...)
<br>
<br>           For voice-mode commands refer to README.audio
<br>
<br>           1.3.2 Escape sequence:
<br>               During a connection, the emulation reacts just like
<br>               a normal modem to the escape sequence <DELAY>+++<DELAY>.
<br>               (The escape character - default '+' - can be set in the
<br>               register 2).
<br>               The DELAY must at least be 1.5 seconds long and delay
<br>               between the escape characters must not exceed 0.5 seconds.
<br>
<br>           1.3.3 Registers:
<br>
<br>              Nr.  Default  Description
<br>              0    0        Answer on ring number.
<br>                            (no auto-answer if S0=0).
<br>              1    0        Count of rings.
<br>              2    43       Escape character.
<br>                            (a value >= 128 disables the escape sequence).
<br>              3    13       Carriage return character (ASCII).
<br>              4    10       Line feed character (ASCII).
<br>              5    8        Backspace character (ASCII).
<br>              6    3        Delay in seconds before dialing.
<br>              7    60       Wait for carrier.
<br>              8    2        Pause time for comma (ignored)
<br>              9    6        Carrier detect time (ignored)
<br>             10    7        Carrier loss to disconnect time (ignored).
<br>             11    70       Touch tone timing (ignored).
<br>             12    69       Bit coded register:
<br>                            Bit 0:    0 = Suppress response messages.
<br>                                      1 = Show response messages.
<br>                            Bit 1:    0 = English response messages.
<br>                                      1 = Numeric response messages.
<br>                            Bit 2:    0 = Echo off.
<br>                                      1 = Echo on.
<br>                            Bit 3     0 = DCD always on.
<br>                                      1 = DCD follows carrier.
<br>                            Bit 4     0 = CTS follows RTS
<br>                                      1 = Ignore RTS, CTS always on.
<br>                            Bit 5     0 = return to command mode on DTR low.
<br>                                      1 = Same as 0 but also resets all
<br>                                          registers.
<br>                                      See also register 13, bit 2
<br>                            Bit 6     0 = DSR always on.
<br>                                      1 = DSR only on if channel is available.
<br>                            Bit 7     0 = Cisco-PPP-flag-hack off (default).
<br>                                      1 = Cisco-PPP-flag-hack on.
<br>             13   0         Bit coded register:
<br>                            Bit 0:    0 = Use delayed tty-send-algorithm
<br>                                      1 = Direct tty-send.
<br>                            Bit 1:    0 = T.70 protocol (Only for BTX!) off
<br>                                      1 = T.70 protocol (Only for BTX!) on
<br>                            Bit 2:    0 = Don't hangup on DTR low.
<br>                                      1 = Hangup on DTR low.
<br>                            Bit 3:    0 = Standard response messages
<br>                                      1 = Extended response messages
<br>                            Bit 4:    0 = CALLER NUMBER before every RING.
<br>                                      1 = CALLER NUMBER after first RING.
<br>                            Bit 5:    0 = T.70 extended protocol off
<br>                                      1 = T.70 extended protocol on
<br>                            Bit 6:    0 = Special RUNG Message off
<br>                                      1 = Special RUNG Message on
<br>                                          "RUNG" is delivered on a ttyI, if
<br>                                          an incoming call happened (RING) and
<br>                                          the remote party hung up before any
<br>                                          local ATA was given.
<br>			    Bit 7:    0 = Don't show display messages from net
<br>                                      1 = Show display messages from net
<br>				          (S12 Bit 1 must be 0 too)      
<br>             14   0         Layer-2 protocol:
<br>                                      0 = X75/LAPB with I-frames
<br>                                      1 = X75/LAPB with UI-frames
<br>                                      2 = X75/LAPB with BUI-frames
<br>                                      3 = HDLC
<br>                                      4 = Transparent (audio)
<br>                                      7 = V.110, 9600 baud
<br>                                      8 = V.110, 19200 baud
<br>                                      9 = V.110, 38400 baud
<br>                                     10 = Analog Modem (only if hardware supports this)
<br>                                     11 = Fax G3 (only if hardware supports this)
<br>             15   0         Layer-3 protocol:
<br>                                      0 = transparent
<br>                                      1 = transparent with audio features (e.g. DSP)
<br>                                      2 = Fax G3 Class 2 commands (S14 has to be set to 11)
<br>                                      3 = Fax G3 Class 1 commands (S14 has to be set to 11)
<br>             16   250       Send-Packet-size/16
<br>             17   8         Window-size (not yet implemented)
<br>             18   4         Bit coded register, Service-Octet-1 to accept,
<br>                            or to be used on dialout:
<br>                            Bit 0:    Service 1 (audio) when set.
<br>                            Bit 1:    Service 5 (BTX) when set.
<br>                            Bit 2:    Service 7 (data) when set.
<br>                            Note: It is possible to set more than one
<br>                                  bit. In this case, on incoming calls
<br>                                  the selected services are accepted,
<br>                                  and if the service is "audio", the
<br>                                  Layer-2-protocol is automatically
<br>                                  changed to 4 regardless of the setting
<br>                                  of register 14. On outgoing calls,
<br>                                  the most significant 1-bit is chosen to
<br>                                  select the outgoing service octet.
<br>             19   0         Service-Octet-2
<br>             20   0         Bit coded register (readonly)
<br>                            Service-Octet-1 of last call.
<br>                            Bit mapping is the same as register 18
<br>             21   0         Bit coded register (readonly)
<br>                            Set on incoming call (during RING) to
<br>                            octet 3 of calling party number IE (Numbering plan)
<br>                            See section 4.5.10 of ITU Q.931
<br>             22   0         Bit coded register (readonly)
<br>                            Set on incoming call (during RING) to
<br>                            octet 3a of calling party number IE (Screening info)
<br>                            See section 4.5.10 of ITU Q.931
<br>             23   0         Bit coded register:
<br>                            Bit 0:    0 = Add CPN to RING message off
<br>                                      1 = Add CPN to RING message on
<br>                            Bit 1:    0 = Add CPN to FCON message off
<br>                                      1 = Add CPN to FCON message on
<br>                            Bit 2:    0 = Add CDN to RING/FCON message off
<br>                                      1 = Add CDN to RING/FCON message on
<br>
<br>  Last but not least a (at the moment fairly primitive) device to request
<br>  the line-status (/dev/isdninfo) is made available.
<br>
<br>  Automatic assignment of devices to lines:
<br>
<br>  All inactive physical lines are listening to all EAZs for incoming
<br>  calls and are NOT assigned to a specific tty or network interface.
<br>  When an incoming call is detected, the driver looks first for a network
<br>  interface and then for an opened tty which:
<br>
<br>  1. is configured for the same EAZ.
<br>  2. has the same protocol settings for the B-channel.
<br>  3. (only for network interfaces if the security flag is set)
<br>     contains the caller number in its access list.
<br>  4. Either the channel is not bound exclusively to another Net-interface, or
<br>     it is bound AND the other checks apply to exactly this interface.
<br>     (For usage of the bind-features, refer to the isdnctrl-man-page)
<br>
<br>  Only when a matching interface or tty is found is the call accepted
<br>  and the "connection" between the low-level-layer and the link-level-layer
<br>  is established and kept until the end of the connection.
<br>  In all other cases no connection is established. Isdn4linux can be
<br>  configured to either do NOTHING in this case (which is useful, if
<br>  other, external devices with the same EAZ/MSN are connected to the bus)
<br>  or to reject the call actively. (isdnctrl busreject ...)
<br>
<br>  For an outgoing call, the inactive physical lines are searched.
<br>  The call is placed on the first physical line, which supports the
<br>  requested protocols for the B-channel. If a net-interface, however
<br>  is pre-bound to a channel, this channel is used directly.
<br>
<br>  This makes it possible to configure several network interfaces and ttys
<br>  for one EAZ, if the network interfaces are set to secure operation.
<br>  If an incoming call matches one network interface, it gets connected to it.
<br>  If another incoming call for the same EAZ arrives, which does not match
<br>  a network interface, the first tty gets a "RING" and so on.
<br>
<br>2 System prerequisites:
<br>
<br>  ATTENTION!
<br>
<br>  Always use the latest module utilities. The current version is
<br>  named in Documentation/Changes. Some old versions of insmod
<br>  are not capable of setting the driver-Ids correctly.
<br>
<br>3. Lowlevel-driver configuration.
<br>
<br>   Configuration depends on how the drivers are built. See the
<br>   README.<yourDriver> for information on driver-specific setup.
<br>
<br>4. Device-inodes
<br>
<br>   The major and minor numbers and their names are described in
<br>   Documentation/devices.txt. The major numbers are:
<br>
<br>     43 for the ISDN-tty's.
<br>     44 for the ISDN-callout-tty's.
<br>     45 for control/info/debug devices.
<br>
<br>5. Application
<br>
<br>   a) For some card-types, firmware has to be loaded into the cards, before
<br>      proceeding with device-independent setup. See README.<yourDriver>
<br>      for how to do that.
<br>
<br>   b) If you only intend to use ttys, you are nearly ready now.
<br>
<br>   c) If you want to have really permanent "Modem"-settings on disk, you
<br>      can start the daemon iprofd. Give it a path to a file at the command-
<br>      line. It will store the profile-settings in this file every time
<br>      an AT&W0 is performed on any ISDN-tty. If the file already exists,
<br>      all profiles are initialized from this file. If you want to unload
<br>      any of the modules, kill iprofd first.
<br>
<br>   d) For networking, continue: Create an interface:
<br>       isdnctrl addif isdn0
<br>
<br>   e) Set the EAZ (or MSN for Euro-ISDN):
<br>       isdnctrl eaz isdn0 2
<br>
<br>     (For 1TR6 a single digit is allowed, for Euro-ISDN the number is your
<br>      real MSN e.g.: Phone-Number)
<br>
<br>   f) Set the number for outgoing calls on the interface:
<br>       isdnctrl addphone isdn0 out 1234567
<br>       ... (this can be executed more than once, all assigned numbers are
<br>            tried in order)
<br>      and the number(s) for incoming calls:
<br>       isdnctrl addphone isdn0 in 1234567
<br>
<br>   g) Set the timeout for hang-up:
<br>       isdnctrl huptimeout isdn0 <timeout_in_seconds>
<br>
<br>   h) additionally you may activate charge-hang-up (= Hang up before
<br>      next charge-info, this only works, if your isdn-provider transmits
<br>      the charge-info during and after the connection):
<br>       isdnctrl chargehup isdn0 on
<br>
<br>   i) Set the dial mode of the interface:
<br>       isdnctrl dialmode isdn0 auto
<br>      "off" means that you (or the system) cannot make any connection
<br>        (neither incoming or outgoing connections are possible). Use
<br>        this if you want to be sure that no connections will be made.
<br>      "auto" means that the interface is in auto-dial mode, and will
<br>        attempt to make a connection whenever a network data packet needs
<br>        the interface's link. Note that this can cause unexpected dialouts,
<br>        and lead to a high phone bill! Some daemons or other pc's that use
<br>        this interface can cause this.
<br>        Incoming connections are also possible.
<br>      "manual" is a dial mode created to prevent the unexpected dialouts.
<br>        In this mode, the interface will never make any connections on its
<br>        own. You must explicitly initiate a connection with "isdnctrl dial
<br>        isdn0". However, after an idle time of no traffic as configured for
<br>	the huptimeout value with isdnctrl, the connection _will_ be ended.
<br>	If you don't want any automatic hangup, set the huptimeout value to 0.
<br>        "manual" is the default.
<br>
<br>   j) Setup the interface with ifconfig as usual, and set a route to it.
<br>
<br>   k) (optional) If you run X11 and have Tcl/Tk-wish version 4.0, you can use
<br>     the script tools/tcltk/isdnmon. You can add actions for line-status
<br>     changes. See the comments at the beginning of the script for how to
<br>     do that. There are other tty-based tools in the tools-subdirectory
<br>     contributed by Michael Knigge (imon), Volker Götz (imontty) and
<br>     Andreas Kool (isdnmon).
<br>
<br>   l) For initial testing, you can set the verbose-level to 2 (default: 0).
<br>      Then all incoming calls are logged, even if they are not addressed
<br>      to one of the configured net-interfaces:
<br>      isdnctrl verbose 2
<br>
<br>  Now you are ready! A ping to the set address should now result in an
<br>  automatic dial-out (look at syslog kernel-messages).
<br>  The phone numbers and EAZs can be assigned at any time with isdnctrl.
<br>  You can add as many interfaces as you like with addif following the
<br>  directions above. Of course, there may be some limitations. But we have
<br>  tested as many as 20 interfaces without any problem. However, if you
<br>  don't give an interface name to addif, the  kernel will assign a name
<br>  which starts with "eth". The number of "eth"-interfaces is limited by
<br>  the kernel.
<br>
<br>5. Additional options for isdnctrl:
<br>
<br>   "isdnctrl secure <InterfaceName> on"
<br>   Only incoming calls, for which the caller-id is listed in the access
<br>   list of the interface are accepted. You can add caller-id's With the
<br>   command "isdnctrl addphone <InterfaceName> in <caller-id>"
<br>   Euro-ISDN does not transmit the leading '0' of the caller-id for an
<br>   incoming call, therefore you should configure it accordingly.
<br>   If the real number for the dialout e.g. is "09311234567" the number
<br>   to configure here is "9311234567". The pattern-match function
<br>   works similar to the shell mechanism.
<br>
<br>     ?     one arbitrary digit
<br>     *     zero or arbitrary many digits
<br>     [123] one of the digits in the list
<br>     [1-5] one digit between '1' and '5'
<br>           a '^' as the first character in a list inverts the list
<br>
<br>
<br>   "isdnctrl secure <InterfaceName> off"
<br>   Switch off secure operation (default).
<br>
<br>   "isdnctrl ihup <InterfaceName> [on|off]"
<br>   Switch the hang-up-timer for incoming calls on or off.
<br>
<br>   "isdnctrl eaz <InterfaceName>"
<br>   Returns the EAZ of an interface.
<br>
<br>   "isdnctrl delphone <InterfaceName> in|out <number>"
<br>   Deletes a number from one of the access-lists of the interface.
<br>
<br>   "isdnctrl delif <InterfaceName>"
<br>   Removes the interface (and possible slaves) from the kernel.
<br>   (You have to unregister it with "ifconfig <InterfaceName> down" before).
<br>
<br>   "isdnctrl callback <InterfaceName> [on|off]"
<br>   Switches an interface to callback-mode. In this mode, an incoming call
<br>   will be rejected and after this the remote-station will be called. If
<br>   you test this feature by using ping, some routers will re-dial very
<br>   quickly, so that the callback from isdn4linux may not be recognized.
<br>   In this case use ping with the option -i <sec> to increase the interval
<br>   between echo-packets.
<br>
<br>   "isdnctrl cbdelay <InterfaceName> [seconds]"
<br>   Sets the delay (default 5 sec) between an incoming call and start of
<br>   dialing when callback is enabled.
<br>
<br>   "isdnctrl cbhup <InterfaceName> [on|off]"
<br>   This enables (default) or disables an active hangup (reject) when getting an
<br>   incoming call for an interface which is configured for callback.
<br>
<br>   "isdnctrl encap <InterfaceName> <EncapType>"
<br>   Selects the type of packet-encapsulation. The encapsulation can be changed
<br>   only while an interface is down.
<br>
<br>   At the moment the following values are supported:
<br>
<br>   rawip    (Default) Selects raw-IP-encapsulation. This means, MAC-headers
<br>            are stripped off.
<br>   ip       IP with type-field. Same as IP but the type-field of the MAC-header
<br>            is preserved.
<br>   x25iface X.25 interface encapsulation (first byte semantics as defined in
<br>            ../networking/x25-iface.txt). Use this for running the linux
<br>            X.25 network protocol stack (AF_X25 sockets) on top of isdn.
<br>   cisco-h  A special-mode for communicating with a Cisco, which is configured
<br>            to do "hdlc"
<br>   ethernet No stripping. Packets are sent with full MAC-header.
<br>            The Ethernet-address of the interface is faked, from its
<br>            IP-address: fc:fc:i1:i2:i3:i4, where i1-4 are the IP-addr.-values.
<br>   syncppp  Synchronous PPP
<br>
<br>   uihdlc   HDLC with UI-frame-header (for use with DOS ISPA, option -h1)
<br>
<br>
<br>   NOTE:    x25iface encapsulation is currently experimental. Please
<br>            read README.x25 for further details
<br>
<br>
<br>   Watching packets, using standard-tcpdump will fail for all encapsulations
<br>   except ethernet because tcpdump does not know how to handle packets
<br>   without MAC-header. A patch for tcpdump is included in the utility-package
<br>   mentioned above.
<br>
<br>   "isdnctrl l2_prot <InterfaceName> <L2-ProtocolName>"
<br>   Selects a layer-2-protocol.
<br>   (With the ICN-driver and the HiSax-driver, "x75i" and "hdlc" is available.
<br>   With other drivers, "x75ui", "x75bui", "x25dte", "x25dce" may be
<br>   possible too. See README.x25 for x25 related l2 protocols.)
<br>
<br>   isdnctrl l3_prot <InterfaceName> <L3-ProtocolName>
<br>   The same for layer-3. (At the moment only "trans" is allowed)
<br>
<br>   "isdnctrl list <InterfaceName>"
<br>   Shows all parameters of an interface and the charge-info.
<br>   Try "all" as the interface name.
<br>
<br>   "isdnctrl hangup <InterfaceName>"
<br>   Forces hangup of an interface.
<br>
<br>   "isdnctrl bind <InterfaceName> <DriverId>,<ChannelNumber> [exclusive]"
<br>   If you are using more than one ISDN card, it is sometimes necessary to
<br>   dial out using a specific card or even preserve a specific channel for
<br>   dialout of a specific net-interface. This can be done with the above
<br>   command. Replace <DriverId> by whatever you assigned while loading the
<br>   module. The <ChannelNumber> is counted from zero. The upper limit
<br>   depends on the card used. At the moment no card supports more than
<br>   2 channels, so the upper limit is one.
<br>
<br>   "isdnctrl unbind <InterfaceName>"
<br>   unbinds a previously bound interface.
<br>
<br>   "isdnctrl busreject <DriverId> on|off"
<br>   If switched on, isdn4linux replies a REJECT to incoming calls, it
<br>   cannot match to any configured interface.
<br>   If switched off, nothing happens in this case.
<br>   You normally should NOT enable this feature, if the ISDN adapter is not
<br>   the only device connected to the S0-bus. Otherwise it could happen that
<br>   isdn4linux rejects an incoming call, which belongs to another device on
<br>   the bus.
<br>
<br>   "isdnctrl addslave <InterfaceName> <SlaveName>
<br>   Creates a slave interface for channel-bundling. Slave interfaces are
<br>   not seen by the kernel, but their ISDN-part can be configured with
<br>   isdnctrl as usual. (Phone numbers, EAZ/MSN, timeouts etc.) If more
<br>   than two channels are to be bundled, feel free to create as many as you
<br>   want. InterfaceName must be a real interface, NOT a slave. Slave interfaces
<br>   start dialing, if the master interface resp. the previous slave interface
<br>   has a load of more than 7000 cps. They hangup if the load goes under 7000
<br>   cps, according to their "huptimeout"-parameter.
<br>
<br>   "isdnctrl sdelay <InterfaceName> secs."
<br>   This sets the minimum time an Interface has to be fully loaded, until
<br>   it sends a dial-request to its slave.
<br>
<br>   "isdnctrl dial <InterfaceName>"
<br>   Forces an interface to start dialing even if no packets are to be
<br>   transferred.
<br>
<br>   "isdnctrl mapping <DriverId> MSN0,MSN1,MSN2,...MSN9"
<br>   This installs a mapping table for EAZ<->MSN-mapping for a single line.
<br>   Missing MSN's have to be given as "-" or can be omitted, if at the end
<br>   of the commandline.
<br>   With this command, it's now possible to have an interface listening to
<br>   mixed 1TR6- and Euro-Type lines. In this case, the interface has to be
<br>   configured to a 1TR6-type EAZ (one digit). The mapping is also valid
<br>   for tty-emulation. Seen from the interface/tty-level the mapping
<br>   CAN be used, however it's possible to use single tty's/interfaces with
<br>   real MSN's (more digits) also, in which case the mapping will be ignored.
<br>   Here is an example:
<br>
<br>   You have a 1TR6-type line with base-nr. 1234567 and a Euro-line with
<br>   MSN's 987654, 987655 and 987656. The DriverId for the Euro-line is "EURO".
<br>
<br>   isdnctrl mapping EURO -,987654,987655,987656,-,987655
<br>   ...
<br>   isdnctrl eaz isdn0 1      # listen on 12345671(1tr6) and 987654(euro)
<br>   ...
<br>   isdnctrl eaz isdn1 4      # listen on 12345674(1tr6) only.
<br>   ...
<br>   isdnctrl eaz isdn2 987654 # listen on 987654(euro) only.
<br>
<br>   Same scheme is used with AT&E...  at the tty's.
<br>
<br>6. If you want to write a new low-level-driver, you are welcome.
<br>   The interface to the link-level-module is described in the file INTERFACE.
<br>   If the interface should be expanded for any reason, don't do it
<br>   on your own, send me a mail containing the proposed changes and
<br>   some reasoning about them.
<br>   If other drivers will not be affected, I will include the changes
<br>   in the next release.
<br>   For developers only, there is a second mailing-list. Write to me
<br>   (fritz@isdn4linux.de), if you want to join that list.
<br>
<br>Have fun!
<br>
<br> -Fritz
<br>
<br><p></p><div class="separator"></div><br><p><h2>isdn</h2></p>The isdn diversion services are a supporting module working together with
<br>the isdn4linux and the HiSax module for passive cards. 
<br>Active cards, TAs and cards using a own or other driver than the HiSax 
<br>module need to be adapted to the HL<->LL interface described in a separate 
<br>document. The diversion services may be used with all cards supported by 
<br>the HiSax driver.
<br>The diversion kernel interface and controlling tool divertctrl were written
<br>by Werner Cornelius (werner@isdn4linux.de or werner@titro.de) under the
<br>GNU General Public License.
<br>
<br>    This program is free software; you can redistribute it and/or modify
<br>    it under the terms of the GNU General Public License as published by
<br>    the Free Software Foundation; either version 2 of the License, or
<br>    (at your option) any later version.
<br>
<br>    This program is distributed in the hope that it will be useful,
<br>    but WITHOUT ANY WARRANTY; without even the implied warranty of
<br>    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
<br>    GNU General Public License for more details.
<br>
<br>    You should have received a copy of the GNU General Public License
<br>    along with this program; if not, write to the Free Software
<br>    Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
<br>
<br>Table of contents
<br>=================
<br>
<br>1. Features of the i4l diversion services 
<br>   (Or what can the i4l diversion services do for me)
<br>
<br>2. Required hard- and software
<br>
<br>3. Compiling, installing and loading/unloading the module  
<br>   Tracing calling and diversion information 
<br>
<br>4. Tracing calling and diversion information
<br> 
<br>5. Format of the divert device ASCII output
<br> 
<br>
<br>1. Features of the i4l diversion services 
<br>   (Or what can the i4l diversion services do for me)
<br>
<br>   The i4l diversion services offers call forwarding and logging normally 
<br>   only supported by isdn phones. Incoming calls may be diverted 
<br>   unconditionally (CFU), when not reachable (CFNR) or on busy condition 
<br>   (CFB). 
<br>   The diversions may be invoked statically in the providers exchange
<br>   as normally done by isdn phones. In this case all incoming calls
<br>   with a special (or all) service identifiers are forwarded if the 
<br>   forwarding reason is met. Activated static services may also be 
<br>   interrogated (queried).
<br>   The i4l diversion services additionally offers a dynamic version of
<br>   call forwarding which is not preprogrammed inside the providers exchange
<br>   but dynamically activated by i4l.
<br>   In this case all incoming calls are checked by rules that may be
<br>   compared to the mechanism of ipfwadm or ipchains. If a given rule matches
<br>   the checking process is finished and the rule matching will be applied
<br>   to the call.
<br>   The rules include primary and secondary service identifiers, called 
<br>   number and subaddress, callers number and subaddress and whether the rule
<br>   matches to all filtered calls or only those when all B-channel resources
<br>   are exhausted.
<br>   Actions that may be invoked by a rule are ignore, proceed, reject, 
<br>   direct divert or delayed divert of a call.
<br>   All incoming calls matching a rule except the ignore rule a reported and
<br>   logged as ASCII via the proc filesystem (/proc/net/isdn/divert). If proceed
<br>   is selected the call will be held in a proceeding state (without ringing)
<br>   for a certain amount of time to let an external program or client decide
<br>   how to handle the call. 
<br>            
<br>
<br>2. Required hard- and software
<br>   
<br>   For using the i4l diversion services the isdn line must be of a EURO/DSS1
<br>   type. Additionally the i4l services only work together with the HiSax 
<br>   driver for passive isdn cards. All HiSax supported cards may be used for
<br>   the diversion purposes.
<br>   The static diversion services require the provider having static services
<br>   CFU, CFNR, CFB activated on an MSN-line. The static services may not be 
<br>   used on a point-to-point connection. Further the static services are only
<br>   available in some countries (for example germany). Countries requiring the 
<br>   keypad protocol for activating static diversions (like the netherlands) are
<br>   not supported but may use the tty devices for this purpose.
<br>   The dynamic diversion services may be used in all countries if the provider
<br>   enables the feature CF (call forwarding). This should work on both MSN- and
<br>   point-to-point lines.
<br>   To add and delete rules the additional divertctrl program is needed. This
<br>   program is part of the isdn4kutils package.   
<br>
<br>3. Compiling, installing and loading/unloading the module  
<br>   Tracing calling and diversion information 
<br>
<br>
<br>   To compile the i4l code with diversion support you need to say yes to the 
<br>   DSS1 diversion services when selecting the i4l options in the kernel 
<br>   config (menuconfig or config).
<br>   After having properly activated a make modules and make modules_install all
<br>   required modules will be correctly installed in the needed modules dirs.
<br>   As the diversion services are currently not included in the scripts of most
<br>   standard distributions you will have to add a "insmod dss1_divert" after
<br>   having loaded the global isdn module.
<br>   The module can be loaded without any command line parameters.
<br>   If the module is actually loaded and active may be checked with a 
<br>   "cat /proc/modules" or "ls /proc/net/isdn/divert". The divert file is 
<br>   dynamically created by the diversion module and removed when the module is
<br>   unloaded.
<br>
<br>
<br>4. Tracing calling and diversion information
<br> 
<br>   You also may put a "cat /proc/net/isdn/divert" in the background with the
<br>   output redirected to a file. Then all actions of the module are logged.
<br>   The divert file in the proc system may be opened more than once, so in 
<br>   conjunction with inetd and a small remote client on other machines inside
<br>   your network incoming calls and reactions by the module may be shown on 
<br>   every listening machine. 
<br>   If a call is reported as proceeding an external program or client may 
<br>   specify during a certain amount of time (normally 4 to 10 seconds) what
<br>   to do with that call.      
<br>   To unload the module all open files to the device in the proc system must
<br>   be closed. Otherwise the module (and isdn.o) may not be unloaded. 
<br>
<br>5. Format of the divert device ASCII output
<br> 
<br>   To be done later
<br>
<br><p></p><div class="separator"></div><br><p><h2>isdn</h2></p>Some additional information for setting up a syncPPP
<br>connection using network interfaces.
<br>---------------------------------------------------------------
<br>
<br>You need one thing beside the isdn4linux package:
<br>
<br>  a patched pppd .. (I called it ipppd to show the difference)
<br>
<br>Compiling isdn4linux with sync PPP:
<br>-----------------------------------
<br>To compile isdn4linux with the sync PPP part, you have
<br>to answer the appropriate question when doing a "make config"
<br>Don't forget to load the slhc.o
<br>module before the isdn.o module, if VJ-compression support
<br>is not compiled into your kernel. (e.g if you have no PPP or
<br>CSLIP in the kernel)
<br>
<br>Using isdn4linux with sync PPP:
<br>-------------------------------
<br>Sync PPP is just another encapsulation for isdn4linux. The
<br>name to enable sync PPP encapsulation is 'syncppp' .. e.g:
<br>
<br>  /sbin/isdnctrl encap ippp0 syncppp
<br>
<br>The name of the interface is here 'ippp0'. You need 
<br>one interface with the name 'ippp0' to saturate the
<br>ipppd, which checks the ppp version via this interface.
<br>Currently, all devices must have the name ipppX where
<br>'X' is a decimal value.
<br>
<br>To set up a PPP connection you need the ipppd .. You must start 
<br>the ipppd once after installing the modules. The ipppd 
<br>communicates with the isdn4linux link-level driver using the
<br>/dev/ippp0 to /dev/ippp15 devices. One ipppd can handle
<br>all devices at once. If you want to use two PPP connections
<br>at the same time, you have to connect the ipppd to two
<br>devices .. and so on. 
<br>I've implemented one additional option for the ipppd:
<br> 'useifip' will get (if set to not 0.0.0.0) the IP address 
<br> for the negotiation from the attached network-interface. 
<br>(also: ipppd will try to negotiate pointopoint IP as remote IP)
<br>You must disable BSD-compression, this implementation can't
<br>handle compressed packets.
<br>
<br>Check the etc/rc.isdn.syncppp in the isdn4kernel-util package
<br>for an example setup script.
<br>
<br>To use the MPPP stuff, you must configure a slave device
<br>with isdn4linux. Now call the ipppd with the '+mp' option.
<br>To increase the number of links, you must use the
<br>'addlink' option of the isdnctrl tool. (rc.isdn.syncppp.MPPP is
<br>an example script)
<br>
<br>enjoy it,
<br>    michael
<br>     
<br>
<br>
<br><p></p><div class="separator"></div><br><p><h2>firmware_class</h2></p>
<br> request_firmware() hotplug interface:
<br> ------------------------------------
<br>	Copyright (C) 2003 Manuel Estrada Sainz
<br>
<br> Why:
<br> ---
<br>
<br> Today, the most extended way to use firmware in the Linux kernel is linking
<br> it statically in a header file. Which has political and technical issues:
<br>
<br>  1) Some firmware is not legal to redistribute.
<br>  2) The firmware occupies memory permanently, even though it often is just
<br>     used once.
<br>  3) Some people, like the Debian crowd, don't consider some firmware free
<br>     enough and remove entire drivers (e.g.: keyspan).
<br>
<br> High level behavior (mixed):
<br> ============================
<br>
<br> 1), kernel(driver):
<br>	- calls request_firmware(&fw_entry, $FIRMWARE, device)
<br>	- kernel searches the firmware image with name $FIRMWARE directly
<br>	in the below search path of root filesystem:
<br>		User customized search path by module parameter 'path'[1]
<br>		"/lib/firmware/updates/" UTS_RELEASE,
<br>		"/lib/firmware/updates",
<br>		"/lib/firmware/" UTS_RELEASE,
<br>		"/lib/firmware"
<br>	- If found, goto 7), else goto 2)
<br>
<br>	[1], the 'path' is a string parameter which length should be less
<br>	than 256, user should pass 'firmware_class.path=$CUSTOMIZED_PATH'
<br>	if firmware_class is built in kernel(the general situation)
<br>
<br> 2), userspace:
<br> 	- /sys/class/firmware/xxx/{loading,data} appear.
<br>	- hotplug gets called with a firmware identifier in $FIRMWARE
<br>	  and the usual hotplug environment.
<br>		- hotplug: echo 1 > /sys/class/firmware/xxx/loading
<br>
<br> 3), kernel: Discard any previous partial load.
<br>
<br> 4), userspace:
<br>		- hotplug: cat appropriate_firmware_image > \
<br>					/sys/class/firmware/xxx/data
<br>
<br> 5), kernel: grows a buffer in PAGE_SIZE increments to hold the image as it
<br>	 comes in.
<br>
<br> 6), userspace:
<br>		- hotplug: echo 0 > /sys/class/firmware/xxx/loading
<br>
<br> 7), kernel: request_firmware() returns and the driver has the firmware
<br>	 image in fw_entry->{data,size}. If something went wrong
<br>	 request_firmware() returns non-zero and fw_entry is set to
<br>	 NULL.
<br>
<br> 8), kernel(driver): Driver code calls release_firmware(fw_entry) releasing
<br>		 the firmware image and any related resource.
<br>
<br> High level behavior (driver code):
<br> ==================================
<br>
<br>	 if(request_firmware(&fw_entry, $FIRMWARE, device) == 0)
<br>	 	copy_fw_to_device(fw_entry->data, fw_entry->size);
<br>	 release_firmware(fw_entry);
<br>
<br> Sample/simple hotplug script:
<br> ============================
<br>
<br>	# Both $DEVPATH and $FIRMWARE are already provided in the environment.
<br>
<br>	HOTPLUG_FW_DIR=/usr/lib/hotplug/firmware/
<br>
<br>	echo 1 > /sys/$DEVPATH/loading
<br>	cat $HOTPLUG_FW_DIR/$FIRMWARE > /sys/$DEVPATH/data
<br>	echo 0 > /sys/$DEVPATH/loading
<br>
<br> Random notes:
<br> ============
<br>
<br> - "echo -1 > /sys/class/firmware/xxx/loading" will cancel the load at
<br>   once and make request_firmware() return with error.
<br>
<br> - firmware_data_read() and firmware_loading_show() are just provided
<br>   for testing and completeness, they are not called in normal use.
<br>
<br> - There is also /sys/class/firmware/timeout which holds a timeout in
<br>   seconds for the whole load operation.
<br>
<br> - request_firmware_nowait() is also provided for convenience in
<br>   user contexts to request firmware asynchronously, but can't be called
<br>   in atomic contexts.
<br>
<br>
<br> about in-kernel persistence:
<br> ---------------------------
<br> Under some circumstances, as explained below, it would be interesting to keep
<br> firmware images in non-swappable kernel memory or even in the kernel image
<br> (probably within initramfs).
<br>
<br> Note that this functionality has not been implemented.
<br>
<br> - Why OPTIONAL in-kernel persistence may be a good idea sometimes:
<br> 
<br>	- If the device that needs the firmware is needed to access the
<br>	  filesystem. When upon some error the device has to be reset and the
<br>	  firmware reloaded, it won't be possible to get it from userspace.
<br>	  e.g.:
<br>		- A diskless client with a network card that needs firmware.
<br>		- The filesystem is stored in a disk behind an scsi device
<br>		  that needs firmware.
<br>	- Replacing buggy DSDT/SSDT ACPI tables on boot.
<br>	  Note: this would require the persistent objects to be included
<br>	  within the kernel image, probably within initramfs.
<br>	  
<br>   And the same device can be needed to access the filesystem or not depending
<br>   on the setup, so I think that the choice on what firmware to make
<br>   persistent should be left to userspace.
<br>
<br> about firmware cache:
<br> --------------------
<br> After firmware cache mechanism is introduced during system sleep,
<br> request_firmware can be called safely inside device's suspend and
<br> resume callback, and callers needn't cache the firmware by
<br> themselves any more for dealing with firmware loss during system
<br> resume.
<br><p></p><div class="separator"></div><br><p><h2>nios2</h2></p>Linux on the Nios II architecture
<br>=================================
<br>
<br>This is a port of Linux to Nios II (nios2) processor.
<br>
<br>In order to compile for Nios II, you need a version of GCC with support for the generic
<br>system call ABI. Please see this link for more information on how compiling and booting
<br>software for the Nios II platform:
<br>http://www.rocketboards.org/foswiki/Documentation/NiosIILinuxUserManual
<br>
<br>For reference, please see the following link:
<br>http://www.altera.com/literature/lit-nio2.jsp
<br>
<br>What is Nios II?
<br>================
<br>Nios II is a 32-bit embedded-processor architecture designed specifically for the
<br>Altera family of FPGAs. In order to support Linux, Nios II needs to be configured
<br>with MMU and hardware multiplier enabled.
<br>
<br>Nios II ABI
<br>===========
<br>Please refer to chapter "Application Binary Interface" in Nios II Processor Reference
<br>Handbook.
<br><p></p><div class="separator"></div><br><p><h2>ia64</h2></p>        Linux kernel release 2.4.xx for the IA-64 Platform
<br>
<br>   These are the release notes for Linux version 2.4 for IA-64
<br>   platform.  This document provides information specific to IA-64
<br>   ONLY, to get additional information about the Linux kernel also
<br>   read the original Linux README provided with the kernel.
<br>
<br>INSTALLING the kernel:
<br>
<br> - IA-64 kernel installation is the same as the other platforms, see
<br>   original README for details.
<br>
<br>
<br>SOFTWARE REQUIREMENTS
<br>
<br>   Compiling and running this kernel requires an IA-64 compliant GCC
<br>   compiler.  And various software packages also compiled with an
<br>   IA-64 compliant GCC compiler.
<br>
<br>
<br>CONFIGURING the kernel:
<br>
<br>   Configuration is the same, see original README for details.
<br>
<br>
<br>COMPILING the kernel:
<br>
<br> - Compiling this kernel doesn't differ from other platform so read
<br>   the original README for details BUT make sure you have an IA-64
<br>   compliant GCC compiler.
<br>
<br>IA-64 SPECIFICS
<br>
<br> - General issues:
<br>
<br>    o Hardly any performance tuning has been done. Obvious targets
<br>      include the library routines (IP checksum, etc.). Less
<br>      obvious targets include making sure we don't flush the TLB
<br>      needlessly, etc.
<br>
<br>    o SMP locks cleanup/optimization
<br>
<br>    o IA32 support.  Currently experimental.  It mostly works.
<br><p></p><div class="separator"></div><br><p><h2>serial</h2></p>
<br>The Cyclades-Z must have firmware loaded onto the card before it will
<br>operate.  This operation should be performed during system startup,
<br>
<br>The firmware, loader program and the latest device driver code are
<br>available from Cyclades at
<br>    ftp://ftp.cyclades.com/pub/cyclades/cyclades-z/linux/
<br>
<br><p></p><div class="separator"></div><br><p><h2>frv</h2></p>		       ================================
<br>		       Fujitsu FR-V LINUX DOCUMENTATION
<br>		       ================================
<br>
<br>This directory contains documentation for the Fujitsu FR-V CPU architecture
<br>port of Linux.
<br>
<br>The following documents are available:
<br>
<br> (*) features.txt
<br>
<br>     A description of the basic features inherent in this architecture port.
<br>
<br>
<br> (*) configuring.txt
<br>
<br>     A summary of the configuration options particular to this architecture.
<br>
<br>
<br> (*) booting.txt
<br>
<br>     A description of how to boot the kernel image and a summary of the kernel
<br>     command line options.
<br>
<br>
<br> (*) gdbstub.txt
<br>
<br>     A description of how to debug the kernel using GDB attached by serial
<br>     port, and a summary of the services available.
<br>
<br>
<br> (*) mmu-layout.txt
<br>
<br>     A description of the virtual and physical memory layout used in the
<br>     MMU linux kernel, and the registers used to support it.
<br>
<br>
<br> (*) gdbinit
<br>
<br>     An example .gdbinit file for use with GDB. It includes macros for viewing
<br>     MMU state on the FR451. See mmu-layout.txt for more information.
<br>
<br>
<br> (*) clock.txt
<br>
<br>     A description of the CPU clock scaling interface.
<br>
<br>
<br> (*) atomic-ops.txt
<br>
<br>     A description of how the FR-V kernel's atomic operations work.
<br><p></p><div class="separator"></div><br><p><h2>ABI</h2></p>This directory attempts to document the ABI between the Linux kernel and
<br>userspace, and the relative stability of these interfaces.  Due to the
<br>everchanging nature of Linux, and the differing maturity levels, these
<br>interfaces should be used by userspace programs in different ways.
<br>
<br>We have four different levels of ABI stability, as shown by the four
<br>different subdirectories in this location.  Interfaces may change levels
<br>of stability according to the rules described below.
<br>
<br>The different levels of stability are:
<br>
<br>  stable/
<br>	This directory documents the interfaces that the developer has
<br>	defined to be stable.  Userspace programs are free to use these
<br>	interfaces with no restrictions, and backward compatibility for
<br>	them will be guaranteed for at least 2 years.  Most interfaces
<br>	(like syscalls) are expected to never change and always be
<br>	available.
<br>
<br>  testing/
<br>	This directory documents interfaces that are felt to be stable,
<br>	as the main development of this interface has been completed.
<br>	The interface can be changed to add new features, but the
<br>	current interface will not break by doing this, unless grave
<br>	errors or security problems are found in them.  Userspace
<br>	programs can start to rely on these interfaces, but they must be
<br>	aware of changes that can occur before these interfaces move to
<br>	be marked stable.  Programs that use these interfaces are
<br>	strongly encouraged to add their name to the description of
<br>	these interfaces, so that the kernel developers can easily
<br>	notify them if any changes occur (see the description of the
<br>	layout of the files below for details on how to do this.)
<br>
<br>  obsolete/
<br>  	This directory documents interfaces that are still remaining in
<br>	the kernel, but are marked to be removed at some later point in
<br>	time.  The description of the interface will document the reason
<br>	why it is obsolete and when it can be expected to be removed.
<br>
<br>  removed/
<br>	This directory contains a list of the old interfaces that have
<br>	been removed from the kernel.
<br>
<br>Every file in these directories will contain the following information:
<br>
<br>What:		Short description of the interface
<br>Date:		Date created
<br>KernelVersion:	Kernel version this feature first showed up in.
<br>Contact:	Primary contact for this interface (may be a mailing list)
<br>Description:	Long description of the interface and how to use it.
<br>Users:		All users of this interface who wish to be notified when
<br>		it changes.  This is very important for interfaces in
<br>		the "testing" stage, so that kernel developers can work
<br>		with userspace developers to ensure that things do not
<br>		break in ways that are unacceptable.  It is also
<br>		important to get feedback for these interfaces to make
<br>		sure they are working in a proper way and do not need to
<br>		be changed further.
<br>
<br>
<br>How things move between levels:
<br>
<br>Interfaces in stable may move to obsolete, as long as the proper
<br>notification is given.
<br>
<br>Interfaces may be removed from obsolete and the kernel as long as the
<br>documented amount of time has gone by.
<br>
<br>Interfaces in the testing state can move to the stable state when the
<br>developers feel they are finished.  They cannot be removed from the
<br>kernel tree without going through the obsolete state first.
<br>
<br>It's up to the developer to place their interfaces in the category they
<br>wish for it to start out in.
<br>
<br>
<br>Notable bits of non-ABI, which should not under any circumstances be considered
<br>stable:
<br>
<br>- Kconfig.  Userspace should not rely on the presence or absence of any
<br>  particular Kconfig symbol, in /proc/config.gz, in the copy of .config
<br>  commonly installed to /boot, or in any invocation of the kernel build
<br>  process.
<br>
<br>- Kernel-internal symbols.  Do not rely on the presence, absence, location, or
<br>  type of any kernel symbol, either in System.map files or the kernel binary
<br>  itself.  See Documentation/stable_api_nonsense.txt.
<br><p></p><div class="separator"></div><br><p><h2>fpsp040</h2></p>
<br>MOTOROLA MICROPROCESSOR & MEMORY TECHNOLOGY GROUP
<br>M68000 Hi-Performance Microprocessor Division
<br>M68040 Software Package
<br>
<br>M68040 Software Package Copyright (c) 1993, 1994 Motorola Inc.
<br>All rights reserved.
<br>
<br>THE SOFTWARE is provided on an "AS IS" basis and without warranty.
<br>To the maximum extent permitted by applicable law,
<br>MOTOROLA DISCLAIMS ALL WARRANTIES WHETHER EXPRESS OR IMPLIED,
<br>INCLUDING IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A
<br>PARTICULAR PURPOSE and any warranty against infringement with
<br>regard to the SOFTWARE (INCLUDING ANY MODIFIED VERSIONS THEREOF)
<br>and any accompanying written materials.
<br>
<br>To the maximum extent permitted by applicable law,
<br>IN NO EVENT SHALL MOTOROLA BE LIABLE FOR ANY DAMAGES WHATSOEVER
<br>(INCLUDING WITHOUT LIMITATION, DAMAGES FOR LOSS OF BUSINESS
<br>PROFITS, BUSINESS INTERRUPTION, LOSS OF BUSINESS INFORMATION, OR
<br>OTHER PECUNIARY LOSS) ARISING OF THE USE OR INABILITY TO USE THE
<br>SOFTWARE.  Motorola assumes no responsibility for the maintenance
<br>and support of the SOFTWARE.
<br>
<br>You are hereby granted a copyright license to use, modify, and
<br>distribute the SOFTWARE so long as this entire notice is retained
<br>without alteration in any modified and/or redistributed versions,
<br>and that such modified versions are clearly identified as such.
<br>No licenses are granted by implication, estoppel or otherwise
<br>under any patents or trademarks of Motorola, Inc.
<br><p></p><div class="separator"></div><br><p><h2>ifpsp060</h2></p>~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
<br>MOTOROLA MICROPROCESSOR & MEMORY TECHNOLOGY GROUP
<br>M68000 Hi-Performance Microprocessor Division
<br>M68060 Software Package
<br>Production Release P1.00 -- October 10, 1994
<br>
<br>M68060 Software Package Copyright © 1993, 1994 Motorola Inc.  All rights reserved.
<br>
<br>THE SOFTWARE is provided on an "AS IS" basis and without warranty.
<br>To the maximum extent permitted by applicable law,
<br>MOTOROLA DISCLAIMS ALL WARRANTIES WHETHER EXPRESS OR IMPLIED,
<br>INCLUDING IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE
<br>and any warranty against infringement with regard to the SOFTWARE
<br>(INCLUDING ANY MODIFIED VERSIONS THEREOF) and any accompanying written materials.
<br>
<br>To the maximum extent permitted by applicable law,
<br>IN NO EVENT SHALL MOTOROLA BE LIABLE FOR ANY DAMAGES WHATSOEVER
<br>(INCLUDING WITHOUT LIMITATION, DAMAGES FOR LOSS OF BUSINESS PROFITS,
<br>BUSINESS INTERRUPTION, LOSS OF BUSINESS INFORMATION, OR OTHER PECUNIARY LOSS)
<br>ARISING OF THE USE OR INABILITY TO USE THE SOFTWARE.
<br>Motorola assumes no responsibility for the maintenance and support of the SOFTWARE.
<br>
<br>You are hereby granted a copyright license to use, modify, and distribute the SOFTWARE
<br>so long as this entire notice is retained without alteration in any modified and/or
<br>redistributed versions, and that such modified versions are clearly identified as such.
<br>No licenses are granted by implication, estoppel or otherwise under any patents
<br>or trademarks of Motorola, Inc.
<br>~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
<br>Files in this directory:
<br>-------------------------
<br>
<br>fpsp.sa		Full FP Kernel Module - hex image
<br>fpsp.s		Full FP Kernel Module - source code
<br>fpsp.doc	Full FP Kernel Module - on-line documentation
<br>
<br>pfpsp.sa	Partial FP Kernel Module - hex image
<br>pfpsp.s		Partial FP Kernel Module - source code
<br>
<br>fplsp.sa	FP Library Module - hex image
<br>fplsp.s		FP Library Module - source code
<br>fplsp.doc	FP Library Module - on-line documentation
<br>
<br>isp.sa		Integer Unimplemented Kernel Module - hex image
<br>isp.s		Integer Unimplemented Kernel Module - source code
<br>isp.doc		Integer Unimplemented Kernel Module - on-line doc
<br>
<br>ilsp.sa		Integer Unimplemented Library Module - hex image
<br>ilsp.s		Integer Unimplemented Library Module - source code
<br>ilsp.doc	Integer Unimplemented Library Module - on-line doc
<br>
<br>fskeleton.s	Sample Call-outs needed by fpsp.sa and pfpsp.sa
<br>
<br>iskeleton.s	Sample Call-outs needed by isp.sa
<br>
<br>os.s		Sample Call-outs needed by fpsp.sa, pfpsp.sa, and isp.sa
<br>
<br>ftest.sa	Simple test program to test that {p}fpsp.sa
<br>		was connected properly; hex image
<br>ftest.s		above test; source code
<br>
<br>itest.sa	Simple test program to test that isp.sa was
<br>		connected properly; hex image
<br>itest.s		above test; source code
<br>
<br>test.doc	on-line documentation for {i,f}test.sa
<br>
<br>README		This file
<br>
<br>ERRATA		Known errata for this release
<br>
<br>MISC		Release file version numbers
<br><p></p><div class="separator"></div><br><p><h2>src</h2></p>This is the original source code from Motorola for the 68060 processor
<br>support code, providing emulation for rarely used m68k instructions
<br>not implemented in the 68060 silicon.
<br>
<br>The code provided here will not assemble out of the box using the GNU
<br>assembler, however it is being included in order to comply with the
<br>GNU General Public License.
<br>
<br>You don't need to actually assemble these files in order to compile a
<br>workin m68k kernel, the precompiled .sa files in arch/m68k/ifpsp060
<br>are sufficient and were generated from these source files by
<br>Motorola.
<br><p></p><div class="separator"></div><br><p><h2>q40</h2></p>Linux for the Q40
<br>=================
<br>
<br>You may try http://www.geocities.com/SiliconValley/Bay/2602/ for
<br>some up to date information. Booter and other tools will be also
<br>available from this place or http://ftp.uni-erlangen.de/pub/unix/Linux/680x0/q40/
<br>and mirrors.
<br>
<br>Hints to documentation usually refer to the linux source tree in
<br>/usr/src/linux/Documentation unless URL given.
<br>
<br>It seems IRQ unmasking can't be safely done on a Q40. IRQ probing
<br>is not implemented - do not try it! (See below)
<br>
<br>For a list of kernel command-line options read the documentation for the
<br>particular device drivers.
<br>
<br>The floppy imposes a very high interrupt load on the CPU, approx 30K/s.
<br>When something blocks interrupts (HD) it will lose some of them, so far
<br>this is not known to have caused any data loss. On highly loaded systems
<br>it can make the floppy very slow or practically stop. Other Q40 OS' simply
<br>poll the floppy for this reason - something that can't be done in Linux.
<br>Only possible cure is getting a 82072 controller with fifo instead of
<br>the 8272A.
<br>
<br>drivers used by the Q40, apart from the very obvious (console etc.):
<br>	drivers/char/q40_keyb.c		# use PC keymaps for national keyboards
<br>		     serial.c		# normal PC driver - any speed
<br>	             lp.c		# printer driver
<br>		     genrtc.c		# RTC
<br>		char/joystick/*		# most of this should work, not
<br>				        # in default config.in
<br>	        block/q40ide.c		# startup for ide
<br>		      ide*		# see Documentation/ide/ide.txt
<br>		      floppy.c		# normal PC driver, DMA emu in asm/floppy.h
<br>					# and arch/m68k/kernel/entry.S
<br>					# see drivers/block/README.fd
<br>		net/ne.c
<br>		video/q40fb.c
<br>		parport/*
<br>		sound/dmasound_core.c
<br>		      dmasound_q40.c
<br>
<br>Various other PC drivers can be enabled simply by adding them to
<br>arch/m68k/config.in, especially 8 bit devices should be without any
<br>problems. For cards using 16bit io/mem more care is required, like
<br>checking byte order issues, hacking memcpy_*_io etc.
<br>
<br>
<br>Debugging
<br>=========
<br>
<br>Upon startup the kernel will usually output "ABCQGHIJ" into the SRAM,
<br>preceded by the booter signature. This is a trace just in case something
<br>went wrong during earliest setup stages of head.S.
<br>**Changed** to preserve SRAM contents by default, this is only done when
<br>requested - SRAM must start with '%LX$' signature to do this. '-d' option
<br>to 'lxx' loader enables this.
<br>
<br>SRAM can also be used as additional console device, use debug=mem.
<br>This will save kernel startup msgs into SRAM, the screen will display
<br>only the penguin - and shell prompt if it gets that far..
<br>Unfortunately only 2000 bytes are available.
<br>
<br>Serial console works and can also be used for debugging, see loader_txt
<br>
<br>Most problems seem to be caused by fawlty or badly configured io-cards or
<br>hard drives anyway.
<br>Make sure to configure the parallel port as SPP and remove IRQ/DMA jumpers
<br>for first testing. The Q40 does not support DMA and may have trouble with
<br>parallel ports version of interrupts.
<br>
<br>
<br>Q40 Hardware Description
<br>========================
<br>
<br>This is just an overview, see asm-m68k/* for details ask if you have any
<br>questions.
<br>
<br>The Q40 consists of a 68040@40 MHz, 1MB video RAM, up to 32MB RAM, AT-style
<br>keyboard interface, 1 Programmable LED, 2x8bit DACs and up to 1MB ROM, 1MB
<br>shadow ROM.
<br>The Q60 has any of 68060 or 68LC060 and up to 128 MB RAM.
<br>
<br>Most interfacing like floppy, IDE, serial and parallel ports is done via ISA
<br>slots. The ISA io and mem range is mapped (sparse&byteswapped!) into separate
<br>regions of the memory.
<br>The main interrupt register IIRQ_REG will indicate whether an IRQ was internal
<br>or from some ISA devices, EIRQ_REG can distinguish up to 8 ISA IRQs.
<br>
<br>The Q40 custom chip is programmable to provide 2 periodic timers:
<br>	- 50 or 200 Hz - level 2, !!THIS CAN'T BE DISABLED!!
<br>	- 10 or 20 KHz - level 4, used for dma-sound
<br>
<br>Linux uses the 200 Hz interrupt for timer and beep by default.
<br>
<br>
<br>Interrupts
<br>==========
<br>
<br>q40 master chip handles only a subset of level triggered interrupts.
<br>
<br>Linux has some requirements wrt interrupt architecture, these are
<br>to my knowledge:
<br>	(a) interrupt handler must not be reentered even when sti() is called
<br>	    from within handler
<br>	(b) working enable/disable_irq
<br>
<br>Luckily these requirements are only important for drivers shared
<br>with other architectures - ide,serial,parallel, ethernet.
<br>q40ints.c now contains a trivial hack for (a), (b) is more difficult
<br>because only irq's 4-15 can be disabled - and only all of them at once.
<br>Thus disable_irq() can effectively block the machine if the driver goes
<br>asleep.
<br>One thing to keep in mind when hacking around the interrupt code is
<br>that there is no way to find out which IRQ caused a request, [EI]IRQ_REG
<br>displays current state of the various IRQ lines.
<br>
<br>Keyboard
<br>========
<br>
<br>q40 receives AT make/break codes from the keyboard, these are translated to
<br>the PC scancodes x86 Linux uses. So by theory every national keyboard should
<br>work just by loading the appropriate x86 keytable - see any national-HOWTO.
<br>
<br>Unfortunately the AT->PC translation isn't quite trivial and even worse, my
<br>documentation of it is absolutely minimal - thus some exotic keys may not
<br>behave exactly as expected.
<br>
<br>There is still hope that it can be fixed completely though. If you encounter
<br>problems, email me ideally this:
<br>	- exact keypress/release sequence
<br>	- 'showkey -s' run on q40, non-X session
<br>	- 'showkey -s' run on a PC, non-X session
<br>	- AT codes as displayed by the q40 debugging ROM
<br>btw if the showkey output from PC and Q40 doesn't differ then you have some
<br>classic configuration problem - don't send me anything in this case
<br>
<br><p></p><div class="separator"></div><br><p><h2>hp300</h2></p>HP300 notes
<br>-----------
<br>
<br>The Linux/HP web page is at <http://www.tazenda.demon.co.uk/phil/linux-hp/>
<br>
<br>Currently only 9000/340 machines have been tested.  Any amount of RAM should
<br>work now but I've only tried 16MB and 12MB.
<br>
<br>The serial console is probably broken at the moment but the Topcat/HIL keyboard
<br>combination seems to work for me.  Your mileage may vary.
<br>
<br>The LANCE driver works after a fashion but only if you reset the chip before
<br>every packet.  This doesn't make for very speedy operation.
<br>
<br><p></p><div class="separator"></div><br><p><h2>math-emu</h2></p> +---------------------------------------------------------------------------+
<br> |  wm-FPU-emu   an FPU emulator for 80386 and 80486SX microprocessors.      |
<br> |                                                                           |
<br> | Copyright (C) 1992,1993,1994,1995,1996,1997,1999                          |
<br> |                       W. Metzenthen, 22 Parker St, Ormond, Vic 3163,      |
<br> |                       Australia.  E-mail billm@melbpc.org.au              |
<br> |                                                                           |
<br> |    This program is free software; you can redistribute it and/or modify   |
<br> |    it under the terms of the GNU General Public License version 2 as      |
<br> |    published by the Free Software Foundation.                             |
<br> |                                                                           |
<br> |    This program is distributed in the hope that it will be useful,        |
<br> |    but WITHOUT ANY WARRANTY; without even the implied warranty of         |
<br> |    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the          |
<br> |    GNU General Public License for more details.                           |
<br> |                                                                           |
<br> |    You should have received a copy of the GNU General Public License      |
<br> |    along with this program; if not, write to the Free Software            |
<br> |    Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.              |
<br> |                                                                           |
<br> +---------------------------------------------------------------------------+
<br>
<br>
<br>
<br>wm-FPU-emu is an FPU emulator for Linux. It is derived from wm-emu387
<br>which was my 80387 emulator for early versions of djgpp (gcc under
<br>msdos); wm-emu387 was in turn based upon emu387 which was written by
<br>DJ Delorie for djgpp.  The interface to the Linux kernel is based upon
<br>the original Linux math emulator by Linus Torvalds.
<br>
<br>My target FPU for wm-FPU-emu is that described in the Intel486
<br>Programmer's Reference Manual (1992 edition). Unfortunately, numerous
<br>facets of the functioning of the FPU are not well covered in the
<br>Reference Manual. The information in the manual has been supplemented
<br>with measurements on real 80486's. Unfortunately, it is simply not
<br>possible to be sure that all of the peculiarities of the 80486 have
<br>been discovered, so there is always likely to be obscure differences
<br>in the detailed behaviour of the emulator and a real 80486.
<br>
<br>wm-FPU-emu does not implement all of the behaviour of the 80486 FPU,
<br>but is very close.  See "Limitations" later in this file for a list of
<br>some differences.
<br>
<br>Please report bugs, etc to me at:
<br>       billm@melbpc.org.au
<br>or     b.metzenthen@medoto.unimelb.edu.au
<br>
<br>For more information on the emulator and on floating point topics, see
<br>my web pages, currently at  http://www.suburbia.net/~billm/
<br>
<br>
<br>--Bill Metzenthen
<br>  December 1999
<br>
<br>
<br>----------------------- Internals of wm-FPU-emu -----------------------
<br>
<br>Numeric algorithms:
<br>(1) Add, subtract, and multiply. Nothing remarkable in these.
<br>(2) Divide has been tuned to get reasonable performance. The algorithm
<br>    is not the obvious one which most people seem to use, but is designed
<br>    to take advantage of the characteristics of the 80386. I expect that
<br>    it has been invented many times before I discovered it, but I have not
<br>    seen it. It is based upon one of those ideas which one carries around
<br>    for years without ever bothering to check it out.
<br>(3) The sqrt function has been tuned to get good performance. It is based
<br>    upon Newton's classic method. Performance was improved by capitalizing
<br>    upon the properties of Newton's method, and the code is once again
<br>    structured taking account of the 80386 characteristics.
<br>(4) The trig, log, and exp functions are based in each case upon quasi-
<br>    "optimal" polynomial approximations. My definition of "optimal" was
<br>    based upon getting good accuracy with reasonable speed.
<br>(5) The argument reducing code for the trig function effectively uses
<br>    a value of pi which is accurate to more than 128 bits. As a consequence,
<br>    the reduced argument is accurate to more than 64 bits for arguments up
<br>    to a few pi, and accurate to more than 64 bits for most arguments,
<br>    even for arguments approaching 2^63. This is far superior to an
<br>    80486, which uses a value of pi which is accurate to 66 bits.
<br>
<br>The code of the emulator is complicated slightly by the need to
<br>account for a limited form of re-entrancy. Normally, the emulator will
<br>emulate each FPU instruction to completion without interruption.
<br>However, it may happen that when the emulator is accessing the user
<br>memory space, swapping may be needed. In this case the emulator may be
<br>temporarily suspended while disk i/o takes place. During this time
<br>another process may use the emulator, thereby perhaps changing static
<br>variables. The code which accesses user memory is confined to five
<br>files:
<br>    fpu_entry.c
<br>    reg_ld_str.c
<br>    load_store.c
<br>    get_address.c
<br>    errors.c
<br>As from version 1.12 of the emulator, no static variables are used
<br>(apart from those in the kernel's per-process tables). The emulator is
<br>therefore now fully re-entrant, rather than having just the restricted
<br>form of re-entrancy which is required by the Linux kernel.
<br>
<br>----------------------- Limitations of wm-FPU-emu -----------------------
<br>
<br>There are a number of differences between the current wm-FPU-emu
<br>(version 2.01) and the 80486 FPU (apart from bugs).  The differences
<br>are fewer than those which applied to the 1.xx series of the emulator.
<br>Some of the more important differences are listed below:
<br>
<br>The Roundup flag does not have much meaning for the transcendental
<br>functions and its 80486 value with these functions is likely to differ
<br>from its emulator value.
<br>
<br>In a few rare cases the Underflow flag obtained with the emulator will
<br>be different from that obtained with an 80486. This occurs when the
<br>following conditions apply simultaneously:
<br>(a) the operands have a higher precision than the current setting of the
<br>    precision control (PC) flags.
<br>(b) the underflow exception is masked.
<br>(c) the magnitude of the exact result (before rounding) is less than 2^-16382.
<br>(d) the magnitude of the final result (after rounding) is exactly 2^-16382.
<br>(e) the magnitude of the exact result would be exactly 2^-16382 if the
<br>    operands were rounded to the current precision before the arithmetic
<br>    operation was performed.
<br>If all of these apply, the emulator will set the Underflow flag but a real
<br>80486 will not.
<br>
<br>NOTE: Certain formats of Extended Real are UNSUPPORTED. They are
<br>unsupported by the 80486. They are the Pseudo-NaNs, Pseudoinfinities,
<br>and Unnormals. None of these will be generated by an 80486 or by the
<br>emulator. Do not use them. The emulator treats them differently in
<br>detail from the way an 80486 does.
<br>
<br>Self modifying code can cause the emulator to fail. An example of such
<br>code is:
<br>          movl %esp,[%ebx]
<br>	  fld1
<br>The FPU instruction may be (usually will be) loaded into the pre-fetch
<br>queue of the CPU before the mov instruction is executed. If the
<br>destination of the 'movl' overlaps the FPU instruction then the bytes
<br>in the prefetch queue and memory will be inconsistent when the FPU
<br>instruction is executed. The emulator will be invoked but will not be
<br>able to find the instruction which caused the device-not-present
<br>exception. For this case, the emulator cannot emulate the behaviour of
<br>an 80486DX.
<br>
<br>Handling of the address size override prefix byte (0x67) has not been
<br>extensively tested yet. A major problem exists because using it in
<br>vm86 mode can cause a general protection fault. Address offsets
<br>greater than 0xffff appear to be illegal in vm86 mode but are quite
<br>acceptable (and work) in real mode. A small test program developed to
<br>check the addressing, and which runs successfully in real mode,
<br>crashes dosemu under Linux and also brings Windows down with a general
<br>protection fault message when run under the MS-DOS prompt of Windows
<br>3.1. (The program simply reads data from a valid address).
<br>
<br>The emulator supports 16-bit protected mode, with one difference from
<br>an 80486DX.  A 80486DX will allow some floating point instructions to
<br>write a few bytes below the lowest address of the stack.  The emulator
<br>will not allow this in 16-bit protected mode: no instructions are
<br>allowed to write outside the bounds set by the protection.
<br>
<br>----------------------- Performance of wm-FPU-emu -----------------------
<br>
<br>Speed.
<br>-----
<br>
<br>The speed of floating point computation with the emulator will depend
<br>upon instruction mix. Relative performance is best for the instructions
<br>which require most computation. The simple instructions are adversely
<br>affected by the FPU instruction trap overhead.
<br>
<br>
<br>Timing: Some simple timing tests have been made on the emulator functions.
<br>The times include load/store instructions. All times are in microseconds
<br>measured on a 33MHz 386 with 64k cache. The Turbo C tests were under
<br>ms-dos, the next two columns are for emulators running with the djgpp
<br>ms-dos extender. The final column is for wm-FPU-emu in Linux 0.97,
<br>using libm4.0 (hard).
<br>
<br>function      Turbo C        djgpp 1.06        WM-emu387     wm-FPU-emu
<br>
<br>   +          60.5           154.8              76.5          139.4
<br>   -          61.1-65.5      157.3-160.8        76.2-79.5     142.9-144.7
<br>   *          71.0           190.8              79.6          146.6
<br>   /          61.2-75.0      261.4-266.9        75.3-91.6     142.2-158.1
<br>
<br> sin()        310.8          4692.0            319.0          398.5
<br> cos()        284.4          4855.2            308.0          388.7
<br> tan()        495.0          8807.1            394.9          504.7
<br> atan()       328.9          4866.4            601.1          419.5-491.9
<br>
<br> sqrt()       128.7          crashed           145.2          227.0
<br> log()        413.1-419.1    5103.4-5354.21    254.7-282.2    409.4-437.1
<br> exp()        479.1          6619.2            469.1          850.8
<br>
<br>
<br>The performance under Linux is improved by the use of look-ahead code.
<br>The following results show the improvement which is obtained under
<br>Linux due to the look-ahead code. Also given are the times for the
<br>original Linux emulator with the 4.1 'soft' lib.
<br>
<br> [ Linus' note: I changed look-ahead to be the default under linux, as
<br>   there was no reason not to use it after I had edited it to be
<br>   disabled during tracing ]
<br>
<br>            wm-FPU-emu w     original w
<br>            look-ahead       'soft' lib
<br>   +         106.4             190.2
<br>   -         108.6-111.6      192.4-216.2
<br>   *         113.4             193.1
<br>   /         108.8-124.4      700.1-706.2
<br>
<br> sin()       390.5            2642.0
<br> cos()       381.5            2767.4
<br> tan()       496.5            3153.3
<br> atan()      367.2-435.5     2439.4-3396.8
<br>
<br> sqrt()      195.1            4732.5
<br> log()       358.0-387.5     3359.2-3390.3
<br> exp()       619.3            4046.4
<br>
<br>
<br>These figures are now somewhat out-of-date. The emulator has become
<br>progressively slower for most functions as more of the 80486 features
<br>have been implemented.
<br>
<br>
<br>----------------------- Accuracy of wm-FPU-emu -----------------------
<br>
<br>
<br>The accuracy of the emulator is in almost all cases equal to or better
<br>than that of an Intel 80486 FPU.
<br>
<br>The results of the basic arithmetic functions (+,-,*,/), and fsqrt
<br>match those of an 80486 FPU. They are the best possible; the error for
<br>these never exceeds 1/2 an lsb. The fprem and fprem1 instructions
<br>return exact results; they have no error.
<br>
<br>
<br>The following table compares the emulator accuracy for the sqrt(),
<br>trig and log functions against the Turbo C "emulator". For this table,
<br>each function was tested at about 400 points. Ideal worst-case results
<br>would be 64 bits. The reduced Turbo C accuracy of cos() and tan() for
<br>arguments greater than pi/4 can be thought of as being related to the
<br>precision of the argument x; e.g. an argument of pi/2-(1e-10) which is
<br>accurate to 64 bits can result in a relative accuracy in cos() of
<br>about 64 + log2(cos(x)) = 31 bits.
<br>
<br>
<br>Function      Tested x range            Worst result                Turbo C
<br>                                        (relative bits)
<br>
<br>sqrt(x)       1 .. 2                    64.1                         63.2
<br>atan(x)       1e-10 .. 200              64.2                         62.8
<br>cos(x)        0 .. pi/2-(1e-10)         64.4 (x <= pi/4)             62.4
<br>                                        64.1 (x = pi/2-(1e-10))      31.9
<br>sin(x)        1e-10 .. pi/2             64.0                         62.8
<br>tan(x)        1e-10 .. pi/2-(1e-10)     64.0 (x <= pi/4)             62.1
<br>                                        64.1 (x = pi/2-(1e-10))      31.9
<br>exp(x)        0 .. 1                    63.1 **                      62.9
<br>log(x)        1+1e-6 .. 2               63.8 **                      62.1
<br>
<br>** The accuracy for exp() and log() is low because the FPU (emulator)
<br>does not compute them directly; two operations are required.
<br>
<br>
<br>The emulator passes the "paranoia" tests (compiled with gcc 2.3.3 or
<br>later) for 'float' variables (24 bit precision numbers) when precision
<br>control is set to 24, 53 or 64 bits, and for 'double' variables (53
<br>bit precision numbers) when precision control is set to 53 bits (a
<br>properly performing FPU cannot pass the 'paranoia' tests for 'double'
<br>variables when precision control is set to 64 bits).
<br>
<br>The code for reducing the argument for the trig functions (fsin, fcos,
<br>fptan and fsincos) has been improved and now effectively uses a value
<br>for pi which is accurate to more than 128 bits precision. As a
<br>consequence, the accuracy of these functions for large arguments has
<br>been dramatically improved (and is now very much better than an 80486
<br>FPU). There is also now no degradation of accuracy for fcos and fptan
<br>for operands close to pi/2. Measured results are (note that the
<br>definition of accuracy has changed slightly from that used for the
<br>above table):
<br>
<br>Function      Tested x range          Worst result
<br>                                     (absolute bits)
<br>
<br>cos(x)        0 .. 9.22e+18              62.0
<br>sin(x)        1e-16 .. 9.22e+18          62.1
<br>tan(x)        1e-16 .. 9.22e+18          61.8
<br>
<br>It is possible with some effort to find very large arguments which
<br>give much degraded precision. For example, the integer number
<br>           8227740058411162616.0
<br>is within about 10e-7 of a multiple of pi. To find the tan (for
<br>example) of this number to 64 bits precision it would be necessary to
<br>have a value of pi which had about 150 bits precision. The FPU
<br>emulator computes the result to about 42.6 bits precision (the correct
<br>result is about -9.739715e-8). On the other hand, an 80486 FPU returns
<br>0.01059, which in relative terms is hopelessly inaccurate.
<br>
<br>For arguments close to critical angles (which occur at multiples of
<br>pi/2) the emulator is more accurate than an 80486 FPU. For very large
<br>arguments, the emulator is far more accurate.
<br>
<br>
<br>Prior to version 1.20 of the emulator, the accuracy of the results for
<br>the transcendental functions (in their principal range) was not as
<br>good as the results from an 80486 FPU. From version 1.20, the accuracy
<br>has been considerably improved and these functions now give measured
<br>worst-case results which are better than the worst-case results given
<br>by an 80486 FPU.
<br>
<br>The following table gives the measured results for the emulator. The
<br>number of randomly selected arguments in each case is about half a
<br>million.  The group of three columns gives the frequency of the given
<br>accuracy in number of times per million, thus the second of these
<br>columns shows that an accuracy of between 63.80 and 63.89 bits was
<br>found at a rate of 133 times per one million measurements for fsin.
<br>The results show that the fsin, fcos and fptan instructions return
<br>results which are in error (i.e. less accurate than the best possible
<br>result (which is 64 bits)) for about one per cent of all arguments
<br>between -pi/2 and +pi/2.  The other instructions have a lower
<br>frequency of results which are in error.  The last two columns give
<br>the worst accuracy which was found (in bits) and the approximate value
<br>of the argument which produced it.
<br>
<br>                                frequency (per M)
<br>                               -------------------   ---------------
<br>instr   arg range    # tests   63.7   63.8    63.9   worst   at arg
<br>                               bits   bits    bits    bits
<br>-----  ------------  -------   ----   ----   -----   -----  --------
<br>fsin     (0,pi/2)     547756      0    133   10673   63.89  0.451317
<br>fcos     (0,pi/2)     547563      0    126   10532   63.85  0.700801
<br>fptan    (0,pi/2)     536274     11    267   10059   63.74  0.784876
<br>fpatan  4 quadrants   517087      0      8    1855   63.88  0.435121 (4q)
<br>fyl2x     (0,20)      541861      0      0    1323   63.94  1.40923  (x)
<br>fyl2xp1 (-.293,.414)  520256      0      0    5678   63.93  0.408542 (x)
<br>f2xm1     (-1,1)      538847      4    481    6488   63.79  0.167709
<br>
<br>
<br>Tests performed on an 80486 FPU showed results of lower accuracy. The
<br>following table gives the results which were obtained with an AMD
<br>486DX2/66 (other tests indicate that an Intel 486DX produces
<br>identical results).  The tests were basically the same as those used
<br>to measure the emulator (the values, being random, were in general not
<br>the same).  The total number of tests for each instruction are given
<br>at the end of the table, in case each about 100k tests were performed.
<br>Another line of figures at the end of the table shows that most of the
<br>instructions return results which are in error for more than 10
<br>percent of the arguments tested.
<br>
<br>The numbers in the body of the table give the approx number of times a
<br>result of the given accuracy in bits (given in the left-most column)
<br>was obtained per one million arguments. For three of the instructions,
<br>two columns of results are given: * The second column for f2xm1 gives
<br>the number cases where the results of the first column were for a
<br>positive argument, this shows that this instruction gives better
<br>results for positive arguments than it does for negative.  * In the
<br>cases of fcos and fptan, the first column gives the results when all
<br>cases where arguments greater than 1.5 were removed from the results
<br>given in the second column. Unlike the emulator, an 80486 FPU returns
<br>results of relatively poor accuracy for these instructions when the
<br>argument approaches pi/2. The table does not show those cases when the
<br>accuracy of the results were less than 62 bits, which occurs quite
<br>often for fsin and fptan when the argument approaches pi/2. This poor
<br>accuracy is discussed above in relation to the Turbo C "emulator", and
<br>the accuracy of the value of pi.
<br>
<br>
<br>bits   f2xm1  f2xm1 fpatan   fcos   fcos  fyl2x fyl2xp1  fsin  fptan  fptan
<br>62.0       0      0      0      0    437      0      0      0      0    925
<br>62.1       0      0     10      0    894      0      0      0      0   1023
<br>62.2      14      0      0      0   1033      0      0      0      0    945
<br>62.3      57      0      0      0   1202      0      0      0      0   1023
<br>62.4     385      0      0     10   1292      0     23      0      0   1178
<br>62.5    1140      0      0    119   1649      0     39      0      0   1149
<br>62.6    2037      0      0    189   1620      0     16      0      0   1169
<br>62.7    5086     14      0    646   2315     10    101     35     39   1402
<br>62.8    8818     86      0    984   3050     59    287    131    224   2036
<br>62.9   11340   1355      0   2126   4153     79    605    357    321   1948
<br>63.0   15557   4750      0   3319   5376    246   1281    862    808   2688
<br>63.1   20016   8288      0   4620   6628    511   2569   1723   1510   3302
<br>63.2   24945  11127     10   6588   8098   1120   4470   2968   2990   4724
<br>63.3   25686  12382     69   8774  10682   1906   6775   4482   5474   7236
<br>63.4   29219  14722     79  11109  12311   3094   9414   7259   8912  10587
<br>63.5   30458  14936    393  13802  15014   5874  12666   9609  13762  15262
<br>63.6   32439  16448   1277  17945  19028  10226  15537  14657  19158  20346
<br>63.7   35031  16805   4067  23003  23947  18910  20116  21333  25001  26209
<br>63.8   33251  15820   7673  24781  25675  24617  25354  24440  29433  30329
<br>63.9   33293  16833  18529  28318  29233  31267  31470  27748  29676  30601
<br>
<br>Per cent with error:
<br>        30.9           3.2          18.5    9.8   13.1   11.6          17.4
<br>Total arguments tested:
<br>       70194  70099 101784 100641 100641 101799 128853 114893 102675 102675
<br>
<br>
<br>------------------------- Contributors -------------------------------
<br>
<br>A number of people have contributed to the development of the
<br>emulator, often by just reporting bugs, sometimes with suggested
<br>fixes, and a few kind people have provided me with access in one way
<br>or another to an 80486 machine. Contributors include (to those people
<br>who I may have forgotten, please forgive me):
<br>
<br>Linus Torvalds
<br>Tommy.Thorn@daimi.aau.dk
<br>Andrew.Tridgell@anu.edu.au
<br>Nick Holloway, alfie@dcs.warwick.ac.uk
<br>Hermano Moura, moura@dcs.gla.ac.uk
<br>Jon Jagger, J.Jagger@scp.ac.uk
<br>Lennart Benschop
<br>Brian Gallew, geek+@CMU.EDU
<br>Thomas Staniszewski, ts3v+@andrew.cmu.edu
<br>Martin Howell, mph@plasma.apana.org.au
<br>M Saggaf, alsaggaf@athena.mit.edu
<br>Peter Barker, PETER@socpsy.sci.fau.edu
<br>tom@vlsivie.tuwien.ac.at
<br>Dan Russel, russed@rpi.edu
<br>Daniel Carosone, danielce@ee.mu.oz.au
<br>cae@jpmorgan.com
<br>Hamish Coleman, t933093@minyos.xx.rmit.oz.au
<br>Bruce Evans, bde@kralizec.zeta.org.au
<br>Timo Korvola, Timo.Korvola@hut.fi
<br>Rick Lyons, rick@razorback.brisnet.org.au
<br>Rick, jrs@world.std.com
<br> 
<br>...and numerous others who responded to my request for help with
<br>a real 80486.
<br>
<br><p></p><div class="separator"></div><br><p><h2>math-emu</h2></p>All files except driver.c are snapshots from the HP-UX kernel.  They've
<br>been modified as little as possible.  Even though they don't fit the
<br>Linux coding style, please leave them in their funny format just in case
<br>someone in the future, with access to HP-UX source code, is generous
<br>enough to update our copies with later changes from HP-UX -- it'll
<br>make their 'diff' job easier if our code is relatively unmodified.
<br>
<br>Required Disclaimer: Hewlett-Packard makes no implied or expressed
<br>warranties about this code nor any promises to maintain or test it
<br>in any way.  This copy of this snapshot is no longer the property
<br>of Hewlett-Packard.
<br><p></p><div class="separator"></div><br><p><h2>boot</h2></p>
<br>To extract the kernel vmlinux, System.map, .config or initrd from the zImage binary:
<br>
<br>objcopy -j .kernel:vmlinux -O binary zImage vmlinux.gz
<br>objcopy -j .kernel:System.map -O binary zImage System.map.gz
<br>objcopy -j .kernel:.config -O binary zImage config.gz
<br>objcopy -j .kernel:initrd -O binary zImage.initrd initrd.gz
<br>
<br>
<br>	Peter
<br>
<br><p></p><div class="separator"></div><br><p><h2>overlays</h2></p>Introduction
<br>============
<br>
<br>This directory contains Device Tree overlays. Device Tree makes it possible
<br>to support many hardware configurations with a single kernel and without the
<br>need to explicitly load or blacklist kernel modules. Note that this isn't a
<br>"pure" Device Tree configuration (c.f. MACH_BCM2835) - some on-board devices
<br>are still configured by the board support code, but the intention is to
<br>eventually reach that goal.
<br>
<br>On Raspberry Pi, Device Tree usage is controlled from /boot/config.txt. By
<br>default, the Raspberry Pi kernel boots with device tree enabled. You can
<br>completely disable DT usage (for now) by adding:
<br>
<br>    device_tree=
<br>
<br>to your config.txt, which should cause your Pi to revert to the old way of
<br>doing things after a reboot.
<br>
<br>In /boot you will find a .dtb for each base platform. This describes the
<br>hardware that is part of the Raspberry Pi board. The loader (start.elf and its
<br>siblings) selects the .dtb file appropriate for the platform by name, and reads
<br>it into memory. At this point, all of the optional interfaces (i2c, i2s, spi)
<br>are disabled, but they can be enabled using Device Tree parameters:
<br>
<br>    dtparam=i2c=on,i2s=on,spi=on
<br>
<br>However, this shouldn't be necessary in many use cases because loading an
<br>overlay that requires one of those interfaces will cause it to be enabled
<br>automatically, and it is advisable to only enable interfaces if they are
<br>needed.
<br>
<br>Configuring additional, optional hardware is done using Device Tree overlays
<br>(see below).
<br>
<br>raspi-config
<br>============
<br>
<br>The Advanced Options section of the raspi-config utility can enable and disable
<br>Device Tree use, as well as toggling the I2C and SPI interfaces. Note that it
<br>is possible to both enable an interface and blacklist the driver, if for some
<br>reason you should want to defer the loading.
<br>
<br>Modules
<br>=======
<br>
<br>As well as describing the hardware, Device Tree also gives enough information
<br>to allow suitable driver modules to be located and loaded, with the corollary
<br>that unneeded modules are not loaded. As a result it should be possible to
<br>remove lines from /etc/modules, and /etc/modprobe.d/raspi-blacklist.conf can
<br>have its contents deleted (or commented out).
<br>
<br>Using Overlays
<br>==============
<br>
<br>Overlays are loaded using the "dtoverlay" directive. As an example, consider
<br>the popular lirc-rpi module, the Linux Infrared Remote Control driver. In the
<br>pre-DT world this would be loaded from /etc/modules, with an explicit
<br>"modprobe lirc-rpi" command, or programmatically by lircd. With DT enabled,
<br>this becomes a line in config.txt:
<br>
<br>    dtoverlay=lirc-rpi
<br>
<br>This causes the file /boot/overlays/lirc-rpi.dtbo to be loaded. By
<br>default it will use GPIOs 17 (out) and 18 (in), but this can be modified using
<br>DT parameters:
<br>
<br>    dtoverlay=lirc-rpi,gpio_out_pin=17,gpio_in_pin=13
<br>
<br>Parameters always have default values, although in some cases (e.g. "w1-gpio")
<br>it is necessary to provided multiple overlays in order to get the desired
<br>behaviour. See the list of overlays below for a description of the parameters
<br>and their defaults.
<br>
<br>The Overlay and Parameter Reference
<br>===================================
<br>
<br>N.B. When editing this file, please preserve the indentation levels to make it
<br>simple to parse programmatically. NO HARD TABS.
<br>
<br>
<br>Name:   <The base DTB>
<br>Info:   Configures the base Raspberry Pi hardware
<br>Load:   <loaded automatically>
<br>Params:
<br>        audio                   Set to "on" to enable the onboard ALSA audio
<br>                                interface (default "off")
<br>
<br>        i2c_arm                 Set to "on" to enable the ARM's i2c interface
<br>                                (default "off")
<br>
<br>        i2c_vc                  Set to "on" to enable the i2c interface
<br>                                usually reserved for the VideoCore processor
<br>                                (default "off")
<br>
<br>        i2c                     An alias for i2c_arm
<br>
<br>        i2c_arm_baudrate        Set the baudrate of the ARM's i2c interface
<br>                                (default "100000")
<br>
<br>        i2c_vc_baudrate         Set the baudrate of the VideoCore i2c interface
<br>                                (default "100000")
<br>
<br>        i2c_baudrate            An alias for i2c_arm_baudrate
<br>
<br>        i2s                     Set to "on" to enable the i2s interface
<br>                                (default "off")
<br>
<br>        spi                     Set to "on" to enable the spi interfaces
<br>                                (default "off")
<br>
<br>        random                  Set to "on" to enable the hardware random
<br>                                number generator (default "on")
<br>
<br>        sd_overclock            Clock (in MHz) to use when the MMC framework
<br>                                requests 50MHz
<br>
<br>        sd_force_pio            Disable DMA support for SD driver (default off)
<br>
<br>        sd_pio_limit            Number of blocks above which to use DMA for
<br>                                SD card (default 1)
<br>
<br>        sd_debug                Enable debug output from SD driver (default off)
<br>
<br>        uart0                   Set to "off" to disable uart0 (default "on")
<br>
<br>        uart1                   Set to "on" or "off" to enable or disable uart1
<br>                                (default varies)
<br>
<br>        watchdog                Set to "on" to enable the hardware watchdog
<br>                                (default "off")
<br>
<br>        act_led_trigger         Choose which activity the LED tracks.
<br>                                Use "heartbeat" for a nice load indicator.
<br>                                (default "mmc")
<br>
<br>        act_led_activelow       Set to "on" to invert the sense of the LED
<br>                                (default "off")
<br>                                N.B. For Pi3 see pi3-act-led overlay.
<br>
<br>        act_led_gpio            Set which GPIO to use for the activity LED
<br>                                (in case you want to connect it to an external
<br>                                device)
<br>                                (default "16" on a non-Plus board, "47" on a
<br>                                Plus or Pi 2)
<br>                                N.B. For Pi3 see pi3-act-led overlay.
<br>
<br>        pwr_led_trigger
<br>        pwr_led_activelow
<br>        pwr_led_gpio
<br>                                As for act_led_*, but using the PWR LED.
<br>                                Not available on Model A/B boards.
<br>
<br>        N.B. It is recommended to only enable those interfaces that are needed.
<br>        Leaving all interfaces enabled can lead to unwanted behaviour (i2c_vc
<br>        interfering with Pi Camera, I2S and SPI hogging GPIO pins, etc.)
<br>        Note also that i2c, i2c_arm and i2c_vc are aliases for the physical
<br>        interfaces i2c0 and i2c1. Use of the numeric variants is still possible
<br>        but deprecated because the ARM/VC assignments differ between board
<br>        revisions. The same board-specific mapping applies to i2c_baudrate,
<br>        and the other i2c baudrate parameters.
<br>
<br>
<br>Name:   adau1977-adc
<br>Info:   Overlay for activation of ADAU1977 ADC codec over I2C for control
<br>        and I2S for data.
<br>Load:   dtoverlay=adau1977-adc
<br>Params: <None>
<br>
<br>
<br>Name:   adau7002-simple
<br>Info:   Overlay for the activation of ADAU7002 stereo PDM to I2S converter.
<br>Load:   dtoverlay=adau7002-simple,<param>=<val>
<br>Params: card-name               Override the default, "adau7002", card name.
<br>
<br>
<br>Name:   ads1015
<br>Info:   Overlay for activation of Texas Instruments ADS1015 ADC over I2C
<br>Load:   dtoverlay=ads1015,<param>=<val>
<br>Params: addr                    I2C bus address of device. Set based on how the
<br>                                addr pin is wired. (default=0x48 assumes addr
<br>                                is pulled to GND)
<br>        cha_enable              Enable virtual channel a. (default=true)
<br>        cha_cfg                 Set the configuration for virtual channel a.
<br>                                (default=4 configures this channel for the
<br>                                voltage at A0 with respect to GND)
<br>        cha_datarate            Set the datarate (samples/sec) for this channel.
<br>                                (default=4 sets 1600 sps)
<br>        cha_gain                Set the gain of the Programmable Gain
<br>                                Amplifier for this channel. (default=2 sets the
<br>                                full scale of the channel to 2.048 Volts)
<br>
<br>        Channel (ch) parameters can be set for each enabled channel.
<br>        A maximum of 4 channels can be enabled (letters a thru d).
<br>        For more information refer to the device datasheet at:
<br>        http://www.ti.com/lit/ds/symlink/ads1015.pdf
<br>
<br>
<br>Name:   ads1115
<br>Info:   Texas Instruments ADS1115 ADC
<br>Load:   dtoverlay=ads1115,<param>[=<val>]
<br>Params: addr                    I2C bus address of device. Set based on how the
<br>                                addr pin is wired. (default=0x48 assumes addr
<br>                                is pulled to GND)
<br>        cha_enable              Enable virtual channel a.
<br>        cha_cfg                 Set the configuration for virtual channel a.
<br>                                (default=4 configures this channel for the
<br>                                voltage at A0 with respect to GND)
<br>        cha_datarate            Set the datarate (samples/sec) for this channel.
<br>                                (default=7 sets 860 sps)
<br>        cha_gain                Set the gain of the Programmable Gain
<br>                                Amplifier for this channel. (Default 1 sets the
<br>                                full scale of the channel to 4.096 Volts)
<br>
<br>        Channel parameters can be set for each enabled channel.
<br>        A maximum of 4 channels can be enabled (letters a thru d).
<br>        For more information refer to the device datasheet at:
<br>        http://www.ti.com/lit/ds/symlink/ads1115.pdf
<br>
<br>
<br>Name:   ads7846
<br>Info:   ADS7846 Touch controller
<br>Load:   dtoverlay=ads7846,<param>=<val>
<br>Params: cs                      SPI bus Chip Select (default 1)
<br>        speed                   SPI bus speed (default 2MHz, max 3.25MHz)
<br>        penirq                  GPIO used for PENIRQ. REQUIRED
<br>        penirq_pull             Set GPIO pull (default 0=none, 2=pullup)
<br>        swapxy                  Swap x and y axis
<br>        xmin                    Minimum value on the X axis (default 0)
<br>        ymin                    Minimum value on the Y axis (default 0)
<br>        xmax                    Maximum value on the X axis (default 4095)
<br>        ymax                    Maximum value on the Y axis (default 4095)
<br>        pmin                    Minimum reported pressure value (default 0)
<br>        pmax                    Maximum reported pressure value (default 65535)
<br>        xohms                   Touchpanel sensitivity (X-plate resistance)
<br>                                (default 400)
<br>
<br>        penirq is required and usually xohms (60-100) has to be set as well.
<br>        Apart from that, pmax (255) and swapxy are also common.
<br>        The rest of the calibration can be done with xinput-calibrator.
<br>        See: github.com/notro/fbtft/wiki/FBTFT-on-Raspian
<br>        Device Tree binding document:
<br>        www.kernel.org/doc/Documentation/devicetree/bindings/input/ads7846.txt
<br>
<br>
<br>Name:   akkordion-iqdacplus
<br>Info:   Configures the Digital Dreamtime Akkordion Music Player (based on the
<br>        OEM IQAudIO DAC+ or DAC Zero module).
<br>Load:   dtoverlay=akkordion-iqdacplus,<param>=<val>
<br>Params: 24db_digital_gain       Allow gain to be applied via the PCM512x codec
<br>                                Digital volume control. Enable with
<br>                                dtoverlay=akkordion-iqdacplus,24db_digital_gain
<br>                                (The default behaviour is that the Digital
<br>                                volume control is limited to a maximum of
<br>                                0dB. ie. it can attenuate but not provide
<br>                                gain. For most users, this will be desired
<br>                                as it will prevent clipping. By appending
<br>                                the 24db_digital_gain parameter, the Digital
<br>                                volume control will allow up to 24dB of
<br>                                gain. If this parameter is enabled, it is the
<br>                                responsibility of the user to ensure that
<br>                                the Digital volume control is set to a value
<br>                                that does not result in clipping/distortion!)
<br>
<br>
<br>Name:   allo-piano-dac-pcm512x-audio
<br>Info:   Configures the Allo Piano DAC (2.0/2.1) audio cards.
<br>        (NB. This initial support is for 2.0 channel audio ONLY! ie. stereo.
<br>        The subwoofer outputs on the Piano 2.1 are not currently supported!)
<br>Load:   dtoverlay=allo-piano-dac-pcm512x-audio,<param>
<br>Params: 24db_digital_gain       Allow gain to be applied via the PCM512x codec
<br>                                Digital volume control.
<br>                                (The default behaviour is that the Digital
<br>                                volume control is limited to a maximum of
<br>                                0dB. ie. it can attenuate but not provide
<br>                                gain. For most users, this will be desired
<br>                                as it will prevent clipping. By appending
<br>                                the 24db_digital_gain parameter, the Digital
<br>                                volume control will allow up to 24dB of
<br>                                gain. If this parameter is enabled, it is the
<br>                                responsibility of the user to ensure that
<br>                                the Digital volume control is set to a value
<br>                                that does not result in clipping/distortion!)
<br>
<br>
<br>Name:   at86rf233
<br>Info:   Configures the Atmel AT86RF233 802.15.4 low-power WPAN transceiver,
<br>        connected to spi0.0
<br>Load:   dtoverlay=at86rf233,<param>=<val>
<br>Params: interrupt               GPIO used for INT (default 23)
<br>        reset                   GPIO used for Reset (default 24)
<br>        sleep                   GPIO used for Sleep (default 25)
<br>        speed                   SPI bus speed in Hz (default 3000000)
<br>        trim                    Fine tuning of the internal capacitance
<br>                                arrays (0=+0pF, 15=+4.5pF, default 15)
<br>
<br>
<br>Name:   audioinjector-addons
<br>Info:   Configures the audioinjector.net audio add on soundcards
<br>Load:   dtoverlay=audioinjector-addons
<br>Params: <None>
<br>
<br>
<br>Name:   audioinjector-wm8731-audio
<br>Info:   Configures the audioinjector.net audio add on soundcard
<br>Load:   dtoverlay=audioinjector-wm8731-audio
<br>Params: <None>
<br>
<br>
<br>Name:   audremap
<br>Info:   Switches PWM sound output to pins 12 (Right) & 13 (Left)
<br>Load:   dtoverlay=audremap,<param>=<val>
<br>Params: swap_lr                 Reverse the channel allocation, which will also
<br>                                swap the audio jack outputs (default off)
<br>        enable_jack             Don't switch off the audio jack output
<br>                                (default off)
<br>
<br>
<br>Name:   bmp085_i2c-sensor
<br>Info:   This overlay is now deprecated - see i2c-sensor
<br>Load:   dtoverlay=bmp085_i2c-sensor
<br>Params: <None>
<br>
<br>
<br>Name:   dht11
<br>Info:   Overlay for the DHT11/DHT21/DHT22 humidity/temperature sensors
<br>        Also sometimes found with the part number(s) AM230x.
<br>Load:   dtoverlay=dht11,<param>=<val>
<br>Params: gpiopin                 GPIO connected to the sensor's DATA output.
<br>                                (default 4)
<br>
<br>
<br>Name:   dionaudio-loco
<br>Info:   Configures the Dion Audio LOCO DAC-AMP
<br>Load:   dtoverlay=dionaudio-loco
<br>Params: <None>
<br>
<br>
<br>Name:   dionaudio-loco-v2
<br>Info:   Configures the Dion Audio LOCO-V2 DAC-AMP
<br>Load:   dtoverlay=dionaudio-loco-v2,<param>=<val>
<br>Params: 24db_digital_gain       Allow gain to be applied via the PCM512x codec
<br>                                Digital volume control. Enable with
<br>                                "dtoverlay=hifiberry-dacplus,24db_digital_gain"
<br>                                (The default behaviour is that the Digital
<br>                                volume control is limited to a maximum of
<br>                                0dB. ie. it can attenuate but not provide
<br>                                gain. For most users, this will be desired
<br>                                as it will prevent clipping. By appending
<br>                                the 24dB_digital_gain parameter, the Digital
<br>                                volume control will allow up to 24dB of
<br>                                gain. If this parameter is enabled, it is the
<br>                                responsibility of the user to ensure that
<br>                                the Digital volume control is set to a value
<br>                                that does not result in clipping/distortion!)
<br>
<br>
<br>Name:   dpi18
<br>Info:   Overlay for a generic 18-bit DPI display
<br>        This uses GPIOs 0-21 (so no I2C, uart etc.), and activates the output
<br>        2-3 seconds after the kernel has started.
<br>Load:   dtoverlay=dpi18
<br>Params: <None>
<br>
<br>
<br>Name:   dpi24
<br>Info:   Overlay for a generic 24-bit DPI display
<br>        This uses GPIOs 0-27 (so no I2C, uart etc.), and activates the output
<br>        2-3 seconds after the kernel has started.
<br>Load:   dtoverlay=dpi24
<br>Params: <None>
<br>
<br>
<br>Name:   dwc-otg
<br>Info:   Selects the dwc_otg USB controller driver which has fiq support. This
<br>        is the default on all except the Pi Zero which defaults to dwc2.
<br>Load:   dtoverlay=dwc-otg
<br>Params: <None>
<br>
<br>
<br>Name:   dwc2
<br>Info:   Selects the dwc2 USB controller driver
<br>Load:   dtoverlay=dwc2,<param>=<val>
<br>Params: dr_mode                 Dual role mode: "host", "peripheral" or "otg"
<br>
<br>        g-rx-fifo-size          Size of rx fifo size in gadget mode
<br>
<br>        g-np-tx-fifo-size       Size of non-periodic tx fifo size in gadget
<br>                                mode
<br>
<br>
<br>[ The ds1307-rtc overlay has been deleted. See i2c-rtc. ]
<br>
<br>
<br>Name:   enc28j60
<br>Info:   Overlay for the Microchip ENC28J60 Ethernet Controller on SPI0
<br>Load:   dtoverlay=enc28j60,<param>=<val>
<br>Params: int_pin                 GPIO used for INT (default 25)
<br>
<br>        speed                   SPI bus speed (default 12000000)
<br>
<br>
<br>Name:   enc28j60-spi2
<br>Info:   Overlay for the Microchip ENC28J60 Ethernet Controller on SPI2
<br>Load:   dtoverlay=enc28j60-spi2,<param>=<val>
<br>Params: int_pin                 GPIO used for INT (default 39)
<br>
<br>        speed                   SPI bus speed (default 12000000)
<br>
<br>
<br>Name:   fe-pi-audio
<br>Info:   Configures the Fe-Pi Audio Sound Card
<br>Load:   dtoverlay=fe-pi-audio
<br>Params: <None>
<br>
<br>
<br>Name:   gpio-ir
<br>Info:   Use GPIO pin as rc-core style infrared receiver input. The rc-core-
<br>        based gpio_ir_recv driver maps received keys directly to a
<br>        /dev/input/event* device, all decoding is done by the kernel - LIRC is
<br>        not required! The key mapping and other decoding parameters can be
<br>        configured by "ir-keytable" tool.
<br>Load:   dtoverlay=gpio-ir,<param>=<val>
<br>Params: gpio_pin                Input pin number. Default is 18.
<br>
<br>        gpio_pull               Desired pull-up/down state (off, down, up)
<br>                                Default is "down".
<br>
<br>        rc-map-name             Default rc keymap (can also be changed by
<br>                                ir-keytable), defaults to "rc-rc6-mce"
<br>
<br>
<br>Name:   gpio-poweroff
<br>Info:   Drives a GPIO high or low on poweroff (including halt)
<br>Load:   dtoverlay=gpio-poweroff,<param>=<val>
<br>Params: gpiopin                 GPIO for signalling (default 26)
<br>
<br>        active_low              Set if the power control device requires a
<br>                                high->low transition to trigger a power-down.
<br>                                Note that this will require the support of a
<br>                                custom dt-blob.bin to prevent a power-down
<br>                                during the boot process, and that a reboot
<br>                                will also cause the pin to go low.
<br>
<br>
<br>Name:   hifiberry-amp
<br>Info:   Configures the HifiBerry Amp and Amp+ audio cards
<br>Load:   dtoverlay=hifiberry-amp
<br>Params: <None>
<br>
<br>
<br>Name:   hifiberry-dac
<br>Info:   Configures the HifiBerry DAC audio card
<br>Load:   dtoverlay=hifiberry-dac
<br>Params: <None>
<br>
<br>
<br>Name:   hifiberry-dacplus
<br>Info:   Configures the HifiBerry DAC+ audio card
<br>Load:   dtoverlay=hifiberry-dacplus,<param>=<val>
<br>Params: 24db_digital_gain       Allow gain to be applied via the PCM512x codec
<br>                                Digital volume control. Enable with
<br>                                "dtoverlay=hifiberry-dacplus,24db_digital_gain"
<br>                                (The default behaviour is that the Digital
<br>                                volume control is limited to a maximum of
<br>                                0dB. ie. it can attenuate but not provide
<br>                                gain. For most users, this will be desired
<br>                                as it will prevent clipping. By appending
<br>                                the 24dB_digital_gain parameter, the Digital
<br>                                volume control will allow up to 24dB of
<br>                                gain. If this parameter is enabled, it is the
<br>                                responsibility of the user to ensure that
<br>                                the Digital volume control is set to a value
<br>                                that does not result in clipping/distortion!)
<br>        slave                   Force DAC+ Pro into slave mode, using Pi as
<br>                                master for bit clock and frame clock.
<br>
<br>
<br>Name:   hifiberry-digi
<br>Info:   Configures the HifiBerry Digi and Digi+ audio card
<br>Load:   dtoverlay=hifiberry-digi
<br>Params: <None>
<br>
<br>
<br>Name:   hifiberry-digi-pro
<br>Info:   Configures the HifiBerry Digi+ Pro audio card
<br>Load:   dtoverlay=hifiberry-digi-pro
<br>Params: <None>
<br>
<br>
<br>Name:   hy28a
<br>Info:   HY28A - 2.8" TFT LCD Display Module by HAOYU Electronics
<br>        Default values match Texy's display shield
<br>Load:   dtoverlay=hy28a,<param>=<val>
<br>Params: speed                   Display SPI bus speed
<br>
<br>        rotate                  Display rotation {0,90,180,270}
<br>
<br>        fps                     Delay between frame updates
<br>
<br>        debug                   Debug output level {0-7}
<br>
<br>        xohms                   Touchpanel sensitivity (X-plate resistance)
<br>
<br>        resetgpio               GPIO used to reset controller
<br>
<br>        ledgpio                 GPIO used to control backlight
<br>
<br>
<br>Name:   hy28b
<br>Info:   HY28B - 2.8" TFT LCD Display Module by HAOYU Electronics
<br>        Default values match Texy's display shield
<br>Load:   dtoverlay=hy28b,<param>=<val>
<br>Params: speed                   Display SPI bus speed
<br>
<br>        rotate                  Display rotation {0,90,180,270}
<br>
<br>        fps                     Delay between frame updates
<br>
<br>        debug                   Debug output level {0-7}
<br>
<br>        xohms                   Touchpanel sensitivity (X-plate resistance)
<br>
<br>        resetgpio               GPIO used to reset controller
<br>
<br>        ledgpio                 GPIO used to control backlight
<br>
<br>
<br>Name:   i2c-bcm2708
<br>Info:   Fall back to the i2c_bcm2708 driver for the i2c_arm bus.
<br>Load:   dtoverlay=i2c-bcm2708
<br>Params: <None>
<br>
<br>
<br>Name:   i2c-gpio
<br>Info:   Adds support for software i2c controller on gpio pins
<br>Load:   dtoverlay=i2c-gpio,<param>=<val>
<br>Params: i2c_gpio_sda            GPIO used for I2C data (default "23")
<br>
<br>        i2c_gpio_scl            GPIO used for I2C clock (default "24")
<br>
<br>        i2c_gpio_delay_us       Clock delay in microseconds
<br>                                (default "2" = ~100kHz)
<br>
<br>
<br>Name:   i2c-mux
<br>Info:   Adds support for a number of I2C bus multiplexers on i2c_arm
<br>Load:   dtoverlay=i2c-mux,<param>=<val>
<br>Params: pca9542                 Select the NXP PCA9542 device
<br>
<br>        pca9545                 Select the NXP PCA9545 device
<br>
<br>        pca9548                 Select the NXP PCA9548 device
<br>
<br>        addr                    Change I2C address of the device (default 0x70)
<br>
<br>
<br>[ The i2c-mux-pca9548a overlay has been deleted. See i2c-mux. ]
<br>
<br>
<br>Name:   i2c-pwm-pca9685a
<br>Info:   Adds support for an NXP PCA9685A I2C PWM controller on i2c_arm
<br>Load:   dtoverlay=i2c-pwm-pca9685a,<param>=<val>
<br>Params: addr                    I2C address of PCA9685A (default 0x40)
<br>
<br>
<br>Name:   i2c-rtc
<br>Info:   Adds support for a number of I2C Real Time Clock devices
<br>Load:   dtoverlay=i2c-rtc,<param>=<val>
<br>Params: abx80x                  Select one of the ABx80x family:
<br>                                  AB0801, AB0803, AB0804, AB0805,
<br>                                  AB1801, AB1803, AB1804, AB1805
<br>
<br>        ds1307                  Select the DS1307 device
<br>
<br>        ds1339                  Select the DS1339 device
<br>
<br>        ds3231                  Select the DS3231 device
<br>
<br>        mcp7940x                Select the MCP7940x device
<br>
<br>        mcp7941x                Select the MCP7941x device
<br>
<br>        pcf2127                 Select the PCF2127 device
<br>
<br>        pcf8523                 Select the PCF8523 device
<br>
<br>        pcf8563                 Select the PCF8563 device
<br>
<br>        trickle-diode-type      Diode type for trickle charge - "standard" or
<br>                                "schottky" (ABx80x only)
<br>
<br>        trickle-resistor-ohms   Resistor value for trickle charge (DS1339,
<br>                                ABx80x)
<br>
<br>        wakeup-source           Specify that the RTC can be used as a wakeup
<br>                                source
<br>
<br>
<br>Name:   i2c-sensor
<br>Info:   Adds support for a number of I2C barometric pressure and temperature
<br>        sensors on i2c_arm
<br>Load:   dtoverlay=i2c-sensor,<param>=<val>
<br>Params: bmp085                  Select the Bosch sensortronic BMP085
<br>
<br>        bmp280                  Select the Bosch sensortronic BMP280
<br>
<br>        lm75                    Select the Maxim LM75 temperature sensor
<br>
<br>        lm75addr                Choose the address for the LM75 (0x48-0x4f -
<br>                                default 0x4f)
<br>
<br>        si7020                  Select the Silicon Labs Si7013/20/21 humidity/
<br>                                temperature sensor
<br>
<br>
<br>Name:   i2c0-bcm2708
<br>Info:   Enable the i2c_bcm2708 driver for the i2c0 bus. Not all pin combinations
<br>        are usable on all platforms.
<br>Load:   dtoverlay=i2c0-bcm2708,<param>=<val>
<br>Params: sda0_pin                GPIO pin for SDA0 (deprecated - use pins_*)
<br>        scl0_pin                GPIO pin for SCL0 (deprecated - use pins_*)
<br>        pins_0_1                Use pins 0 and 1 (default)
<br>        pins_28_29              Use pins 28 and 29
<br>        pins_44_45              Use pins 44 and 45
<br>        pins_46_47              Use pins 46 and 47
<br>
<br>
<br>Name:   i2c1-bcm2708
<br>Info:   Enable the i2c_bcm2708 driver for the i2c1 bus
<br>Load:   dtoverlay=i2c1-bcm2708,<param>=<val>
<br>Params: sda1_pin                GPIO pin for SDA1 (2 or 44 - default 2)
<br>        scl1_pin                GPIO pin for SCL1 (3 or 45 - default 3)
<br>        pin_func                Alternative pin function (4 (alt0), 6 (alt2) -
<br>                                default 4)
<br>
<br>
<br>Name:   i2s-gpio28-31
<br>Info:   move I2S function block to GPIO 28 to 31
<br>Load:   dtoverlay=i2s-gpio28-31
<br>Params: <None>
<br>
<br>
<br>Name:   iqaudio-dac
<br>Info:   Configures the IQaudio DAC audio card
<br>Load:   dtoverlay=iqaudio-dac,<param>
<br>Params: 24db_digital_gain       Allow gain to be applied via the PCM512x codec
<br>                                Digital volume control. Enable with
<br>                                "dtoverlay=iqaudio-dac,24db_digital_gain"
<br>                                (The default behaviour is that the Digital
<br>                                volume control is limited to a maximum of
<br>                                0dB. ie. it can attenuate but not provide
<br>                                gain. For most users, this will be desired
<br>                                as it will prevent clipping. By appending
<br>                                the 24db_digital_gain parameter, the Digital
<br>                                volume control will allow up to 24dB of
<br>                                gain. If this parameter is enabled, it is the
<br>                                responsibility of the user to ensure that
<br>                                the Digital volume control is set to a value
<br>                                that does not result in clipping/distortion!)
<br>
<br>
<br>Name:   iqaudio-dacplus
<br>Info:   Configures the IQaudio DAC+ audio card
<br>Load:   dtoverlay=iqaudio-dacplus,<param>=<val>
<br>Params: 24db_digital_gain       Allow gain to be applied via the PCM512x codec
<br>                                Digital volume control. Enable with
<br>                                "dtoverlay=iqaudio-dacplus,24db_digital_gain"
<br>                                (The default behaviour is that the Digital
<br>                                volume control is limited to a maximum of
<br>                                0dB. ie. it can attenuate but not provide
<br>                                gain. For most users, this will be desired
<br>                                as it will prevent clipping. By appending
<br>                                the 24db_digital_gain parameter, the Digital
<br>                                volume control will allow up to 24dB of
<br>                                gain. If this parameter is enabled, it is the
<br>                                responsibility of the user to ensure that
<br>                                the Digital volume control is set to a value
<br>                                that does not result in clipping/distortion!)
<br>        auto_mute_amp           If specified, unmute/mute the IQaudIO amp when
<br>                                starting/stopping audio playback.
<br>        unmute_amp              If specified, unmute the IQaudIO amp once when
<br>                                the DAC driver module loads.
<br>
<br>
<br>Name:   iqaudio-digi-wm8804-audio
<br>Info:   Configures the IQAudIO Digi WM8804 audio card
<br>Load:   dtoverlay=iqaudio-digi-wm8804-audio,<param>=<val>
<br>Params: card_name               Override the default, "IQAudIODigi", card name.
<br>        dai_name                Override the default, "IQAudIO Digi", dai name.
<br>        dai_stream_name         Override the default, "IQAudIO Digi HiFi",
<br>                                dai stream name.
<br>
<br>
<br>Name:   justboom-dac
<br>Info:   Configures the JustBoom DAC HAT, Amp HAT, DAC Zero and Amp Zero audio
<br>        cards
<br>Load:   dtoverlay=justboom-dac,<param>=<val>
<br>Params: 24db_digital_gain       Allow gain to be applied via the PCM512x codec
<br>                                Digital volume control. Enable with
<br>                                "dtoverlay=justboom-dac,24db_digital_gain"
<br>                                (The default behaviour is that the Digital
<br>                                volume control is limited to a maximum of
<br>                                0dB. ie. it can attenuate but not provide
<br>                                gain. For most users, this will be desired
<br>                                as it will prevent clipping. By appending
<br>                                the 24dB_digital_gain parameter, the Digital
<br>                                volume control will allow up to 24dB of
<br>                                gain. If this parameter is enabled, it is the
<br>                                responsibility of the user to ensure that
<br>                                the Digital volume control is set to a value
<br>                                that does not result in clipping/distortion!)
<br>
<br>
<br>Name:   justboom-digi
<br>Info:   Configures the JustBoom Digi HAT and Digi Zero audio cards
<br>Load:   dtoverlay=justboom-digi
<br>Params: <None>
<br>
<br>
<br>Name:   lirc-rpi
<br>Info:   Configures lirc-rpi (Linux Infrared Remote Control for Raspberry Pi)
<br>        Consult the module documentation for more details.
<br>Load:   dtoverlay=lirc-rpi,<param>=<val>
<br>Params: gpio_out_pin            GPIO for output (default "17")
<br>
<br>        gpio_in_pin             GPIO for input (default "18")
<br>
<br>        gpio_in_pull            Pull up/down/off on the input pin
<br>                                (default "down")
<br>
<br>        sense                   Override the IR receive auto-detection logic:
<br>                                 "0" = force active-high
<br>                                 "1" = force active-low
<br>                                 "-1" = use auto-detection
<br>                                (default "-1")
<br>
<br>        softcarrier             Turn the software carrier "on" or "off"
<br>                                (default "on")
<br>
<br>        invert                  "on" = invert the output pin (default "off")
<br>
<br>        debug                   "on" = enable additional debug messages
<br>                                (default "off")
<br>
<br>
<br>Name:   mcp23017
<br>Info:   Configures the MCP23017 I2C GPIO expander
<br>Load:   dtoverlay=mcp23017,<param>=<val>
<br>Params: gpiopin                 Gpio pin connected to the INTA output of the
<br>                                MCP23017 (default: 4)
<br>
<br>        addr                    I2C address of the MCP23017 (default: 0x20)
<br>
<br>
<br>Name:   mcp23s17
<br>Info:   Configures the MCP23S08/17 SPI GPIO expanders.
<br>        If devices are present on SPI1 or SPI2, those interfaces must be enabled
<br>        with one of the spi1-1/2/3cs and/or spi2-1/2/3cs overlays.
<br>        If interrupts are enabled for a device on a given CS# on a SPI bus, that
<br>        device must be the only one present on that SPI bus/CS#.
<br>Load:   dtoverlay=mcp23s17,<param>=<val>
<br>Params: s08-spi<n>-<m>-present  4-bit integer, bitmap indicating MCP23S08
<br>                                devices present on SPI<n>, CS#<m>
<br>
<br>        s17-spi<n>-<m>-present  8-bit integer, bitmap indicating MCP23S17
<br>                                devices present on SPI<n>, CS#<m>
<br>
<br>        s08-spi<n>-<m>-int-gpio integer, enables interrupts on a single
<br>                                MCP23S08 device on SPI<n>, CS#<m>, specifies
<br>                                the GPIO pin to which INT output of MCP23S08
<br>                                is connected.
<br>
<br>        s17-spi<n>-<m>-int-gpio integer, enables mirrored interrupts on a
<br>                                single MCP23S17 device on SPI<n>, CS#<m>,
<br>                                specifies the GPIO pin to which either INTA
<br>                                or INTB output of MCP23S17 is connected.
<br>
<br>
<br>Name:   mcp2515-can0
<br>Info:   Configures the MCP2515 CAN controller on spi0.0
<br>Load:   dtoverlay=mcp2515-can0,<param>=<val>
<br>Params: oscillator              Clock frequency for the CAN controller (Hz)
<br>
<br>        spimaxfrequency         Maximum SPI frequence (Hz)
<br>
<br>        interrupt               GPIO for interrupt signal
<br>
<br>
<br>Name:   mcp2515-can1
<br>Info:   Configures the MCP2515 CAN controller on spi0.1
<br>Load:   dtoverlay=mcp2515-can1,<param>=<val>
<br>Params: oscillator              Clock frequency for the CAN controller (Hz)
<br>
<br>        spimaxfrequency         Maximum SPI frequence (Hz)
<br>
<br>        interrupt               GPIO for interrupt signal
<br>
<br>
<br>Name:   mcp3008
<br>Info:   Configures MCP3008 A/D converters
<br>        For devices on spi1 or spi2, the interfaces should be enabled
<br>        with one of the spi1-1/2/3cs and/or spi2-1/2/3cs overlays.
<br>Load:   dtoverlay=mcp3008,<param>[=<val>]
<br>Params: spi<n>-<m>-present      boolean, configure device at spi<n>, cs<m>
<br>        spi<n>-<m>-speed        integer, set the spi bus speed for this device
<br>
<br>
<br>Name:   midi-uart0
<br>Info:   Configures UART0 (ttyAMA0) so that a requested 38.4kbaud actually gets
<br>        31.25kbaud, the frequency required for MIDI
<br>Load:   dtoverlay=midi-uart0
<br>Params: <None>
<br>
<br>
<br>Name:   mmc
<br>Info:   Selects the bcm2835-mmc SD/MMC driver, optionally with overclock
<br>Load:   dtoverlay=mmc,<param>=<val>
<br>Params: overclock_50            Clock (in MHz) to use when the MMC framework
<br>                                requests 50MHz
<br>
<br>
<br>Name:   mz61581
<br>Info:   MZ61581 display by Tontec
<br>Load:   dtoverlay=mz61581,<param>=<val>
<br>Params: speed                   Display SPI bus speed
<br>
<br>        rotate                  Display rotation {0,90,180,270}
<br>
<br>        fps                     Delay between frame updates
<br>
<br>        txbuflen                Transmit buffer length (default 32768)
<br>
<br>        debug                   Debug output level {0-7}
<br>
<br>        xohms                   Touchpanel sensitivity (X-plate resistance)
<br>
<br>
<br>[ The pcf2127-rtc overlay has been deleted. See i2c-rtc. ]
<br>
<br>
<br>[ The pcf8523-rtc overlay has been deleted. See i2c-rtc. ]
<br>
<br>
<br>[ The pcf8563-rtc overlay has been deleted. See i2c-rtc. ]
<br>
<br>
<br>Name:   pi3-act-led
<br>Info:   Pi3 uses a GPIO expander to drive the LEDs which can only be accessed
<br>        from the VPU. There is a special driver for this with a separate DT
<br>        node, which has the unfortunate consequence of breaking the
<br>        act_led_gpio and act_led_activelow dtparams.
<br>        This overlay changes the GPIO controller back to the standard one and
<br>        restores the dtparams.
<br>Load:   dtoverlay=pi3-act-led,<param>=<val>
<br>Params: activelow               Set to "on" to invert the sense of the LED
<br>                                (default "off")
<br>
<br>        gpio                    Set which GPIO to use for the activity LED
<br>                                (in case you want to connect it to an external
<br>                                device)
<br>                                REQUIRED
<br>
<br>
<br>Name:   pi3-disable-bt
<br>Info:   Disable Pi3 Bluetooth and restore UART0/ttyAMA0 over GPIOs 14 & 15
<br>        N.B. To disable the systemd service that initialises the modem so it
<br>        doesn't use the UART, use 'sudo systemctl disable hciuart'.
<br>Load:   dtoverlay=pi3-disable-bt
<br>Params: <None>
<br>
<br>
<br>Name:   pi3-disable-wifi
<br>Info:   Disable Pi3 onboard WiFi
<br>Load:   dtoverlay=pi3-disable-wifi
<br>Params: <None>
<br>
<br>
<br>Name:   pi3-miniuart-bt
<br>Info:   Switch Pi3 Bluetooth function to use the mini-UART (ttyS0) and restore
<br>        UART0/ttyAMA0 over GPIOs 14 & 15. Note that this may reduce the maximum
<br>        usable baudrate.
<br>        N.B. It is also necessary to edit /lib/systemd/system/hciuart.service
<br>        and replace ttyAMA0 with ttyS0, unless you have a system with udev rules
<br>        that create /dev/serial0 and /dev/serial1, in which case use
<br>        /dev/serial1 instead because it will always be correct. Furthermore,
<br>        you must also set core_freq=250 in config.txt or the miniuart will not
<br>        work.
<br>Load:   dtoverlay=pi3-miniuart-bt
<br>Params: <None>
<br>
<br>
<br>Name:   piscreen
<br>Info:   PiScreen display by OzzMaker.com
<br>Load:   dtoverlay=piscreen,<param>=<val>
<br>Params: speed                   Display SPI bus speed
<br>
<br>        rotate                  Display rotation {0,90,180,270}
<br>
<br>        fps                     Delay between frame updates
<br>
<br>        debug                   Debug output level {0-7}
<br>
<br>        xohms                   Touchpanel sensitivity (X-plate resistance)
<br>
<br>
<br>Name:   piscreen2r
<br>Info:   PiScreen 2 with resistive TP display by OzzMaker.com
<br>Load:   dtoverlay=piscreen2r,<param>=<val>
<br>Params: speed                   Display SPI bus speed
<br>
<br>        rotate                  Display rotation {0,90,180,270}
<br>
<br>        fps                     Delay between frame updates
<br>
<br>        debug                   Debug output level {0-7}
<br>
<br>        xohms                   Touchpanel sensitivity (X-plate resistance)
<br>
<br>
<br>Name:   pisound
<br>Info:   Configures the Blokas Labs pisound card
<br>Load:   dtoverlay=pisound
<br>Params: <None>
<br>
<br>
<br>Name:   pitft22
<br>Info:   Adafruit PiTFT 2.2" screen
<br>Load:   dtoverlay=pitft22,<param>=<val>
<br>Params: speed                   Display SPI bus speed
<br>
<br>        rotate                  Display rotation {0,90,180,270}
<br>
<br>        fps                     Delay between frame updates
<br>
<br>        debug                   Debug output level {0-7}
<br>
<br>
<br>Name:   pitft28-capacitive
<br>Info:   Adafruit PiTFT 2.8" capacitive touch screen
<br>Load:   dtoverlay=pitft28-capacitive,<param>=<val>
<br>Params: speed                   Display SPI bus speed
<br>
<br>        rotate                  Display rotation {0,90,180,270}
<br>
<br>        fps                     Delay between frame updates
<br>
<br>        debug                   Debug output level {0-7}
<br>
<br>        touch-sizex             Touchscreen size x (default 240)
<br>
<br>        touch-sizey             Touchscreen size y (default 320)
<br>
<br>        touch-invx              Touchscreen inverted x axis
<br>
<br>        touch-invy              Touchscreen inverted y axis
<br>
<br>        touch-swapxy            Touchscreen swapped x y axis
<br>
<br>
<br>Name:   pitft28-resistive
<br>Info:   Adafruit PiTFT 2.8" resistive touch screen
<br>Load:   dtoverlay=pitft28-resistive,<param>=<val>
<br>Params: speed                   Display SPI bus speed
<br>
<br>        rotate                  Display rotation {0,90,180,270}
<br>
<br>        fps                     Delay between frame updates
<br>
<br>        debug                   Debug output level {0-7}
<br>
<br>
<br>Name:   pitft35-resistive
<br>Info:   Adafruit PiTFT 3.5" resistive touch screen
<br>Load:   dtoverlay=pitft35-resistive,<param>=<val>
<br>Params: speed                   Display SPI bus speed
<br>
<br>        rotate                  Display rotation {0,90,180,270}
<br>
<br>        fps                     Delay between frame updates
<br>
<br>        debug                   Debug output level {0-7}
<br>
<br>
<br>Name:   pps-gpio
<br>Info:   Configures the pps-gpio (pulse-per-second time signal via GPIO).
<br>Load:   dtoverlay=pps-gpio,<param>=<val>
<br>Params: gpiopin                 Input GPIO (default "18")
<br>        assert_falling_edge     When present, assert is indicated by a falling
<br>                                edge, rather than by a rising edge
<br>
<br>
<br>Name:   pwm
<br>Info:   Configures a single PWM channel
<br>        Legal pin,function combinations for each channel:
<br>          PWM0: 12,4(Alt0) 18,2(Alt5) 40,4(Alt0)            52,5(Alt1)
<br>          PWM1: 13,4(Alt0) 19,2(Alt5) 41,4(Alt0) 45,4(Alt0) 53,5(Alt1)
<br>        N.B.:
<br>          1) Pin 18 is the only one available on all platforms, and
<br>             it is the one used by the I2S audio interface.
<br>             Pins 12 and 13 might be better choices on an A+, B+ or Pi2.
<br>          2) The onboard analogue audio output uses both PWM channels.
<br>          3) So be careful mixing audio and PWM.
<br>          4) Currently the clock must have been enabled and configured
<br>             by other means.
<br>Load:   dtoverlay=pwm,<param>=<val>
<br>Params: pin                     Output pin (default 18) - see table
<br>        func                    Pin function (default 2 = Alt5) - see above
<br>        clock                   PWM clock frequency (informational)
<br>
<br>
<br>Name:   pwm-2chan
<br>Info:   Configures both PWM channels
<br>        Legal pin,function combinations for each channel:
<br>          PWM0: 12,4(Alt0) 18,2(Alt5) 40,4(Alt0)            52,5(Alt1)
<br>          PWM1: 13,4(Alt0) 19,2(Alt5) 41,4(Alt0) 45,4(Alt0) 53,5(Alt1)
<br>        N.B.:
<br>          1) Pin 18 is the only one available on all platforms, and
<br>             it is the one used by the I2S audio interface.
<br>             Pins 12 and 13 might be better choices on an A+, B+ or Pi2.
<br>          2) The onboard analogue audio output uses both PWM channels.
<br>          3) So be careful mixing audio and PWM.
<br>          4) Currently the clock must have been enabled and configured
<br>             by other means.
<br>Load:   dtoverlay=pwm-2chan,<param>=<val>
<br>Params: pin                     Output pin (default 18) - see table
<br>        pin2                    Output pin for other channel (default 19)
<br>        func                    Pin function (default 2 = Alt5) - see above
<br>        func2                   Function for pin2 (default 2 = Alt5)
<br>        clock                   PWM clock frequency (informational)
<br>
<br>
<br>Name:   qca7000
<br>Info:   I2SE's Evaluation Board for PLC Stamp micro
<br>Load:   dtoverlay=qca7000,<param>=<val>
<br>Params: int_pin                 GPIO pin for interrupt signal (default 23)
<br>
<br>        speed                   SPI bus speed (default 12 MHz)
<br>
<br>
<br>Name:   raspidac3
<br>Info:   Configures the RaspiDAV Rev.3x audio card
<br>Load:   dtoverlay=raspidac3
<br>Params: <None>
<br>
<br>
<br>Name:   rpi-backlight
<br>Info:   Raspberry Pi official display backlight driver
<br>Load:   dtoverlay=rpi-backlight
<br>Params: <None>
<br>
<br>
<br>Name:   rpi-cirrus-wm5102
<br>Info:   Configures the Cirrus Logic Audio Card
<br>Load:   dtoverlay=rpi-cirrus-wm5102
<br>Params: <None>
<br>
<br>
<br>Name:   rpi-dac
<br>Info:   Configures the RPi DAC audio card
<br>Load:   dtoverlay=rpi-dac
<br>Params: <None>
<br>
<br>
<br>Name:   rpi-display
<br>Info:   RPi-Display - 2.8" Touch Display by Watterott
<br>Load:   dtoverlay=rpi-display,<param>=<val>
<br>Params: speed                   Display SPI bus speed
<br>        rotate                  Display rotation {0,90,180,270}
<br>        fps                     Delay between frame updates
<br>        debug                   Debug output level {0-7}
<br>        xohms                   Touchpanel sensitivity (X-plate resistance)
<br>        swapxy                  Swap x and y axis
<br>
<br>
<br>Name:   rpi-ft5406
<br>Info:   Official Raspberry Pi display touchscreen
<br>Load:   dtoverlay=rpi-ft5406
<br>Params: <None>
<br>
<br>
<br>Name:   rpi-proto
<br>Info:   Configures the RPi Proto audio card
<br>Load:   dtoverlay=rpi-proto
<br>Params: <None>
<br>
<br>
<br>Name:   rpi-sense
<br>Info:   Raspberry Pi Sense HAT
<br>Load:   dtoverlay=rpi-sense
<br>Params: <None>
<br>
<br>
<br>Name:   rra-digidac1-wm8741-audio
<br>Info:   Configures the Red Rocks Audio DigiDAC1 soundcard
<br>Load:   dtoverlay=rra-digidac1-wm8741-audio
<br>Params: <None>
<br>
<br>
<br>Name:   sc16is750-i2c
<br>Info:   Overlay for the NXP SC16IS750 UART with I2C Interface
<br>        Enables the chip on I2C1 at 0x48. To select another address,
<br>        please refer to table 10 in reference manual.
<br>
<br>Load:   dtoverlay=sc16is750-i2c,<param>=<val>
<br>Params: int_pin                 GPIO used for IRQ (default 24)
<br>        addr                    Address (default 0x48)
<br>
<br>
<br>Name:   sc16is752-spi1
<br>Info:   Overlay for the NXP SC16IS752 Dual UART with SPI Interface
<br>        Enables the chip on SPI1.
<br>        N.B.: spi1 is only accessible on devices with a 40pin header, eg:
<br>              A+, B+, Zero and PI2 B; as well as the Compute Module.
<br>
<br>Load:   dtoverlay=sc16is752-spi1,<param>=<val>
<br>Params: int_pin                 GPIO used for IRQ (default 24)
<br>
<br>
<br>Name:   sdhost
<br>Info:   Selects the bcm2835-sdhost SD/MMC driver, optionally with overclock.
<br>        N.B. This overlay is designed for situations where the mmc driver is
<br>        the default, so it disables the other (mmc) interface - this will kill
<br>        WiFi on a Pi3. If this isn't what you want, either use the sdtweak
<br>        overlay or the new sd_* dtparams of the base DTBs.
<br>Load:   dtoverlay=sdhost,<param>=<val>
<br>Params: overclock_50            Clock (in MHz) to use when the MMC framework
<br>                                requests 50MHz
<br>
<br>        force_pio               Disable DMA support (default off)
<br>
<br>        pio_limit               Number of blocks above which to use DMA
<br>                                (default 1)
<br>
<br>        debug                   Enable debug output (default off)
<br>
<br>
<br>Name:   sdio
<br>Info:   Selects the bcm2835-sdhost SD/MMC driver, optionally with overclock,
<br>        and enables SDIO via GPIOs 22-27.
<br>Load:   dtoverlay=sdio,<param>=<val>
<br>Params: overclock_50            SD Clock (in MHz) to use when the MMC framework
<br>                                requests 50MHz
<br>
<br>        sdio_overclock          SDIO Clock (in MHz) to use when the MMC
<br>                                framework requests 50MHz
<br>
<br>        force_pio               Disable DMA support (default off)
<br>
<br>        pio_limit               Number of blocks above which to use DMA
<br>                                (default 1)
<br>
<br>        debug                   Enable debug output (default off)
<br>
<br>        poll_once               Disable SDIO-device polling every second
<br>                                (default on: polling once at boot-time)
<br>
<br>        bus_width               Set the SDIO host bus width (default 4 bits)
<br>
<br>
<br>Name:   sdio-1bit
<br>Info:   Selects the bcm2835-sdhost SD/MMC driver, optionally with overclock,
<br>        and enables 1-bit SDIO via GPIOs 22-25.
<br>Load:   dtoverlay=sdio-1bit,<param>=<val>
<br>Params: overclock_50            SD Clock (in MHz) to use when the MMC framework
<br>                                requests 50MHz
<br>
<br>        sdio_overclock          SDIO Clock (in MHz) to use when the MMC
<br>                                framework requests 50MHz
<br>
<br>        force_pio               Disable DMA support (default off)
<br>
<br>        pio_limit               Number of blocks above which to use DMA
<br>                                (default 1)
<br>
<br>        debug                   Enable debug output (default off)
<br>
<br>        poll_once               Disable SDIO-device polling every second
<br>                                (default on: polling once at boot-time)
<br>
<br>
<br>Name:   sdtweak
<br>Info:   Tunes the bcm2835-sdhost SD/MMC driver
<br>        N.B. This functionality is now available via the sd_* dtparams in the
<br>        base DTB.
<br>Load:   dtoverlay=sdtweak,<param>=<val>
<br>Params: overclock_50            Clock (in MHz) to use when the MMC framework
<br>                                requests 50MHz
<br>
<br>        force_pio               Disable DMA support (default off)
<br>
<br>        pio_limit               Number of blocks above which to use DMA
<br>                                (default 1)
<br>
<br>        debug                   Enable debug output (default off)
<br>
<br>
<br>Name:   smi
<br>Info:   Enables the Secondary Memory Interface peripheral. Uses GPIOs 2-25!
<br>Load:   dtoverlay=smi
<br>Params: <None>
<br>
<br>
<br>Name:   smi-dev
<br>Info:   Enables the userspace interface for the SMI driver
<br>Load:   dtoverlay=smi-dev
<br>Params: <None>
<br>
<br>
<br>Name:   smi-nand
<br>Info:   Enables access to NAND flash via the SMI interface
<br>Load:   dtoverlay=smi-nand
<br>Params: <None>
<br>
<br>
<br>Name:   spi-gpio35-39
<br>Info:   Move SPI function block to GPIO 35 to 39
<br>Load:   dtoverlay=spi-gpio35-39
<br>Params: <None>
<br>
<br>
<br>Name:   spi-rtc
<br>Info:   Adds support for a number of SPI Real Time Clock devices
<br>Load:   dtoverlay=spi-rtc,<param>=<val>
<br>Params: pcf2123                 Select the PCF2123 device
<br>
<br>
<br>Name:   spi0-cs
<br>Info:   Allows the (software) CS pins for SPI0 to be changed
<br>Load:   dtoverlay=spi0-cs,<param>=<val>
<br>Params: cs0_pin                 GPIO pin for CS0 (default 8)
<br>        cs1_pin                 GPIO pin for CS1 (default 7)
<br>
<br>
<br>Name:   spi0-hw-cs
<br>Info:   Re-enables hardware CS/CE (chip selects) for SPI0
<br>Load:   dtoverlay=spi0-hw-cs
<br>Params: <None>
<br>
<br>
<br>Name:   spi1-1cs
<br>Info:   Enables spi1 with a single chip select (CS) line and associated spidev
<br>        dev node. The gpio pin number for the CS line and spidev device node
<br>        creation are configurable.
<br>        N.B.: spi1 is only accessible on devices with a 40pin header, eg:
<br>              A+, B+, Zero and PI2 B; as well as the Compute Module.
<br>Load:   dtoverlay=spi1-1cs,<param>=<val>
<br>Params: cs0_pin                 GPIO pin for CS0 (default 18 - BCM SPI1_CE0).
<br>        cs0_spidev              Set to 'disabled' to stop the creation of a
<br>                                userspace device node /dev/spidev1.0 (default
<br>                                is 'okay' or enabled).
<br>
<br>
<br>Name:   spi1-2cs
<br>Info:   Enables spi1 with two chip select (CS) lines and associated spidev
<br>        dev nodes. The gpio pin numbers for the CS lines and spidev device node
<br>        creation are configurable.
<br>        N.B.: spi1 is only accessible on devices with a 40pin header, eg:
<br>              A+, B+, Zero and PI2 B; as well as the Compute Module.
<br>Load:   dtoverlay=spi1-2cs,<param>=<val>
<br>Params: cs0_pin                 GPIO pin for CS0 (default 18 - BCM SPI1_CE0).
<br>        cs1_pin                 GPIO pin for CS1 (default 17 - BCM SPI1_CE1).
<br>        cs0_spidev              Set to 'disabled' to stop the creation of a
<br>                                userspace device node /dev/spidev1.0 (default
<br>                                is 'okay' or enabled).
<br>        cs1_spidev              Set to 'disabled' to stop the creation of a
<br>                                userspace device node /dev/spidev1.1 (default
<br>                                is 'okay' or enabled).
<br>
<br>
<br>Name:   spi1-3cs
<br>Info:   Enables spi1 with three chip select (CS) lines and associated spidev
<br>        dev nodes. The gpio pin numbers for the CS lines and spidev device node
<br>        creation are configurable.
<br>        N.B.: spi1 is only accessible on devices with a 40pin header, eg:
<br>              A+, B+, Zero and PI2 B; as well as the Compute Module.
<br>Load:   dtoverlay=spi1-3cs,<param>=<val>
<br>Params: cs0_pin                 GPIO pin for CS0 (default 18 - BCM SPI1_CE0).
<br>        cs1_pin                 GPIO pin for CS1 (default 17 - BCM SPI1_CE1).
<br>        cs2_pin                 GPIO pin for CS2 (default 16 - BCM SPI1_CE2).
<br>        cs0_spidev              Set to 'disabled' to stop the creation of a
<br>                                userspace device node /dev/spidev1.0 (default
<br>                                is 'okay' or enabled).
<br>        cs1_spidev              Set to 'disabled' to stop the creation of a
<br>                                userspace device node /dev/spidev1.1 (default
<br>                                is 'okay' or enabled).
<br>        cs2_spidev              Set to 'disabled' to stop the creation of a
<br>                                userspace device node /dev/spidev1.2 (default
<br>                                is 'okay' or enabled).
<br>
<br>
<br>Name:   spi2-1cs
<br>Info:   Enables spi2 with a single chip select (CS) line and associated spidev
<br>        dev node. The gpio pin number for the CS line and spidev device node
<br>        creation are configurable.
<br>        N.B.: spi2 is only accessible with the Compute Module.
<br>Load:   dtoverlay=spi2-1cs,<param>=<val>
<br>Params: cs0_pin                 GPIO pin for CS0 (default 43 - BCM SPI2_CE0).
<br>        cs0_spidev              Set to 'disabled' to stop the creation of a
<br>                                userspace device node /dev/spidev2.0 (default
<br>                                is 'okay' or enabled).
<br>
<br>
<br>Name:   spi2-2cs
<br>Info:   Enables spi2 with two chip select (CS) lines and associated spidev
<br>        dev nodes. The gpio pin numbers for the CS lines and spidev device node
<br>        creation are configurable.
<br>        N.B.: spi2 is only accessible with the Compute Module.
<br>Load:   dtoverlay=spi2-2cs,<param>=<val>
<br>Params: cs0_pin                 GPIO pin for CS0 (default 43 - BCM SPI2_CE0).
<br>        cs1_pin                 GPIO pin for CS1 (default 44 - BCM SPI2_CE1).
<br>        cs0_spidev              Set to 'disabled' to stop the creation of a
<br>                                userspace device node /dev/spidev2.0 (default
<br>                                is 'okay' or enabled).
<br>        cs1_spidev              Set to 'disabled' to stop the creation of a
<br>                                userspace device node /dev/spidev2.1 (default
<br>                                is 'okay' or enabled).
<br>
<br>
<br>Name:   spi2-3cs
<br>Info:   Enables spi2 with three chip select (CS) lines and associated spidev
<br>        dev nodes. The gpio pin numbers for the CS lines and spidev device node
<br>        creation are configurable.
<br>        N.B.: spi2 is only accessible with the Compute Module.
<br>Load:   dtoverlay=spi2-3cs,<param>=<val>
<br>Params: cs0_pin                 GPIO pin for CS0 (default 43 - BCM SPI2_CE0).
<br>        cs1_pin                 GPIO pin for CS1 (default 44 - BCM SPI2_CE1).
<br>        cs2_pin                 GPIO pin for CS2 (default 45 - BCM SPI2_CE2).
<br>        cs0_spidev              Set to 'disabled' to stop the creation of a
<br>                                userspace device node /dev/spidev2.0 (default
<br>                                is 'okay' or enabled).
<br>        cs1_spidev              Set to 'disabled' to stop the creation of a
<br>                                userspace device node /dev/spidev2.1 (default
<br>                                is 'okay' or enabled).
<br>        cs2_spidev              Set to 'disabled' to stop the creation of a
<br>                                userspace device node /dev/spidev2.2 (default
<br>                                is 'okay' or enabled).
<br>
<br>
<br>Name:   tinylcd35
<br>Info:   3.5" Color TFT Display by www.tinylcd.com
<br>        Options: Touch, RTC, keypad
<br>Load:   dtoverlay=tinylcd35,<param>=<val>
<br>Params: speed                   Display SPI bus speed
<br>
<br>        rotate                  Display rotation {0,90,180,270}
<br>
<br>        fps                     Delay between frame updates
<br>
<br>        debug                   Debug output level {0-7}
<br>
<br>        touch                   Enable touch panel
<br>
<br>        touchgpio               Touch controller IRQ GPIO
<br>
<br>        xohms                   Touchpanel: Resistance of X-plate in ohms
<br>
<br>        rtc-pcf                 PCF8563 Real Time Clock
<br>
<br>        rtc-ds                  DS1307 Real Time Clock
<br>
<br>        keypad                  Enable keypad
<br>
<br>        Examples:
<br>            Display with touchpanel, PCF8563 RTC and keypad:
<br>                dtoverlay=tinylcd35,touch,rtc-pcf,keypad
<br>            Old touch display:
<br>                dtoverlay=tinylcd35,touch,touchgpio=3
<br>
<br>
<br>Name:   uart1
<br>Info:   Enable uart1 in place of uart0
<br>Load:   dtoverlay=uart1,<param>=<val>
<br>Params: txd1_pin                GPIO pin for TXD1 (14, 32 or 40 - default 14)
<br>
<br>        rxd1_pin                GPIO pin for RXD1 (15, 33 or 41 - default 15)
<br>
<br>
<br>Name:   vc4-fkms-v3d
<br>Info:   Enable Eric Anholt's DRM VC4 V3D driver on top of the dispmanx
<br>        display stack.
<br>Load:   dtoverlay=vc4-fkms-v3d,<param>
<br>Params: cma-256                 CMA is 256MB, 256MB-aligned (needs 1GB)
<br>        cma-192                 CMA is 192MB, 256MB-aligned (needs 1GB)
<br>        cma-128                 CMA is 128MB, 128MB-aligned
<br>        cma-96                  CMA is 96MB, 128MB-aligned
<br>        cma-64                  CMA is 64MB, 64MB-aligned
<br>
<br>
<br>Name:   vc4-kms-v3d
<br>Info:   Enable Eric Anholt's DRM VC4 HDMI/HVS/V3D driver. Running startx or
<br>        booting to GUI while this overlay is in use will cause interesting
<br>        lockups.
<br>Load:   dtoverlay=vc4-kms-v3d,<param>
<br>Params: cma-256                 CMA is 256MB, 256MB-aligned (needs 1GB)
<br>        cma-192                 CMA is 192MB, 256MB-aligned (needs 1GB)
<br>        cma-128                 CMA is 128MB, 128MB-aligned
<br>        cma-96                  CMA is 96MB, 128MB-aligned
<br>        cma-64                  CMA is 64MB, 64MB-aligned
<br>
<br>
<br>Name:   vga666
<br>Info:   Overlay for the Fen Logic VGA666 board
<br>        This uses GPIOs 2-21 (so no I2C), and activates the output 2-3 seconds
<br>        after the kernel has started.
<br>Load:   dtoverlay=vga666
<br>Params: <None>
<br>
<br>
<br>Name:   w1-gpio
<br>Info:   Configures the w1-gpio Onewire interface module.
<br>        Use this overlay if you *don't* need a GPIO to drive an external pullup.
<br>Load:   dtoverlay=w1-gpio,<param>=<val>
<br>Params: gpiopin                 GPIO for I/O (default "4")
<br>
<br>        pullup                  Non-zero, "on", or "y" to enable the parasitic
<br>                                power (2-wire, power-on-data) feature
<br>
<br>
<br>Name:   w1-gpio-pullup
<br>Info:   Configures the w1-gpio Onewire interface module.
<br>        Use this overlay if you *do* need a GPIO to drive an external pullup.
<br>Load:   dtoverlay=w1-gpio-pullup,<param>=<val>
<br>Params: gpiopin                 GPIO for I/O (default "4")
<br>
<br>        pullup                  Non-zero, "on", or "y" to enable the parasitic
<br>                                power (2-wire, power-on-data) feature
<br>
<br>        extpullup               GPIO for external pullup (default "5")
<br>
<br>
<br>Name:   wittypi
<br>Info:   Configures the wittypi RTC module.
<br>Load:   dtoverlay=wittypi,<param>=<val>
<br>Params: led_gpio                GPIO for LED (default "17")
<br>        led_trigger             Choose which activity the LED tracks (default
<br>                                "default-on")
<br>
<br>
<br>Troubleshooting
<br>===============
<br>
<br>If you are experiencing problems that you think are DT-related, enable DT
<br>diagnostic output by adding this to /boot/config.txt:
<br>
<br>    dtdebug=on
<br>
<br>and rebooting. Then run:
<br>
<br>    sudo vcdbg log msg
<br>
<br>and look for relevant messages.
<br>
<br>Further reading
<br>===============
<br>
<br>This is only meant to be a quick introduction to the subject of Device Tree on
<br>Raspberry Pi. There is a more complete explanation here:
<br>
<br>http://www.raspberrypi.org/documentation/configuration/device-tree.md
<br><p></p><div class="separator"></div><br><p><h2>kvm</h2></p>KVM/MIPS Trap & Emulate Release Notes
<br>=====================================
<br>
<br>(1) KVM/MIPS should support MIPS32R2 and beyond. It has been tested on the following platforms:
<br>    Malta Board with FPGA based 34K
<br>    Sigma Designs TangoX board with a 24K based 8654 SoC.
<br>    Malta Board with 74K @ 1GHz
<br>
<br>(2) Both Guest kernel and Guest Userspace execute in UM.
<br>    Guest User address space:   0x00000000 -> 0x40000000
<br>    Guest Kernel Unmapped:      0x40000000 -> 0x60000000
<br>    Guest Kernel Mapped:        0x60000000 -> 0x80000000
<br>
<br>    Guest Usermode virtual memory is limited to 1GB.
<br>
<br>(2) 16K Page Sizes: Both Host Kernel and Guest Kernel should have the same page size, currently at least 16K.
<br>    Note that due to cache aliasing issues, 4K page sizes are NOT supported.
<br>
<br>(3) No HugeTLB Support
<br>    Both the host kernel and Guest kernel should have the page size set to 16K.
<br>    This will be implemented in a future release.
<br>
<br>(4) KVM/MIPS does not have support for SMP Guests
<br>    Linux-3.7-rc2 based SMP guest hangs due to the following code sequence in the generated TLB handlers:
<br>	LL/TLBP/SC.  Since the TLBP instruction causes a trap the reservation gets cleared
<br>	when we ERET back to the guest. This causes the guest to hang in an infinite loop.
<br>	This will be fixed in a future release.
<br>
<br>(5) Use Host FPU
<br>    Currently KVM/MIPS emulates a 24K CPU without a FPU.
<br>    This will be fixed in a future release
<br><p></p><div class="separator"></div><br><p><h2>compressed</h2></p>Creation of the self-extracting compressed kernel image (vmlinuz)
<br>-----------------------------------------------------------------
<br>
<br>This can be slightly confusing because it's a process with many steps.
<br>
<br>The kernel object built by the arch/etrax100/Makefile, vmlinux, is split
<br>by that makefile into text and data binary files, vmlinux.text and
<br>vmlinux.data.
<br>
<br>Those files together with a ROM filesystem can be catted together and
<br>burned into a flash or executed directly at the DRAM origin.
<br>
<br>They can also be catted together and compressed with gzip, which is what
<br>happens in this makefile. Together they make up piggy.img.
<br>
<br>The decompressor is built into the file decompress.o. It is turned into
<br>the binary file decompress.bin, which is catted together with piggy.img
<br>into the file vmlinuz. It can be executed in an arbitrary place in flash.
<br>
<br>Be careful - it assumes some things about free locations in DRAM. It
<br>assumes the DRAM starts at 0x40000000 and that it is at least 8 MB,
<br>so it puts its code at 0x40700000, and initial stack at 0x40800000.
<br>
<br>-Bjorn
<br><p></p><div class="separator"></div><br><p><h2>arch-v10</h2></p>Memory management for CRIS/MMU
<br>------------------------------
<br>HISTORY:
<br>
<br>$Log: README.mm,v $
<br>Revision 1.1  2001/12/17 13:59:27  bjornw
<br>Initial revision
<br>
<br>Revision 1.1  2000/07/10 16:25:21  bjornw
<br>Initial revision
<br>
<br>Revision 1.4  2000/01/17 02:31:59  bjornw
<br>Added discussion of paging and VM.
<br>
<br>Revision 1.3  1999/12/03 16:43:23  hp
<br>Blurb about that the 3.5G-limitation is not a MMU limitation
<br>
<br>Revision 1.2  1999/12/03 16:04:21  hp
<br>Picky comment about not mapping the first page
<br>
<br>Revision 1.1  1999/12/03 15:41:30  bjornw
<br>First version of CRIS/MMU memory layout specification.
<br>
<br>
<br>
<br>
<br>
<br>------------------------------
<br>
<br>See the ETRAX-NG HSDD for reference.
<br>
<br>We use the page-size of 8 kbytes, as opposed to the i386 page-size of 4 kbytes.
<br>
<br>The MMU can, apart from the normal mapping of pages, also do a top-level
<br>segmentation of the kernel memory space. We use this feature to avoid having
<br>to use page-tables to map the physical memory into the kernel's address
<br>space. We also use it to keep the user-mode virtual mapping in the same
<br>map during kernel-mode, so that the kernel easily can access the corresponding
<br>user-mode process' data.
<br>
<br>As a comparison, the Linux/i386 2.0 puts the kernel and physical RAM at
<br>address 0, overlapping with the user-mode virtual space, so that descriptor
<br>registers are needed for each memory access to specify which MMU space to
<br>map through. That changed in 2.2, putting the kernel/physical RAM at 
<br>0xc0000000, to co-exist with the user-mode mapping. We will do something
<br>quite similar, but with the additional complexity of having to map the
<br>internal chip I/O registers and the flash memory area (including SRAM
<br>and peripherial chip-selets).
<br>
<br>The kernel-mode segmentation map:
<br>
<br>        ------------------------                ------------------------
<br>FFFFFFFF|                      | => cached      |                      | 
<br>        |    kernel seg_f      |    flash       |                      |
<br>F0000000|______________________|                |                      |
<br>EFFFFFFF|                      | => uncached    |                      | 
<br>        |    kernel seg_e      |    flash       |                      |
<br>E0000000|______________________|                |        DRAM          |
<br>DFFFFFFF|                      |  paged to any  |      Un-cached       | 
<br>        |    kernel seg_d      |    =======>    |                      |
<br>D0000000|______________________|                |                      |
<br>CFFFFFFF|                      |                |                      | 
<br>        |    kernel seg_c      |==\             |                      |
<br>C0000000|______________________|   \            |______________________|
<br>BFFFFFFF|                      |  uncached      |                      |
<br>        |    kernel seg_b      |=====\=========>|       Registers      |
<br>B0000000|______________________|      \c        |______________________|
<br>AFFFFFFF|                      |       \a       |                      |
<br>        |                      |        \c      | FLASH/SRAM/Peripheral|
<br>        |                      |         \h     |______________________|
<br>        |                      |          \e    |                      |
<br>        |                      |           \d   |                      |
<br>        | kernel seg_0 - seg_a |            \==>|         DRAM         | 
<br>        |                      |                |        Cached        |
<br>        |                      |  paged to any  |                      |
<br>        |                      |    =======>    |______________________| 
<br>        |                      |                |                      |
<br>        |                      |                |        Illegal       |
<br>        |                      |                |______________________|
<br>        |                      |                |                      |      
<br>        |                      |                | FLASH/SRAM/Peripheral|
<br>00000000|______________________|                |______________________|
<br>
<br>In user-mode it looks the same except that only the space 0-AFFFFFFF is
<br>available. Therefore, in this model, the virtual address space per process
<br>is limited to 0xb0000000 bytes (minus 8192 bytes, since the first page,
<br>0..8191, is never mapped, in order to trap NULL references).
<br>
<br>It also means that the total physical RAM that can be mapped is 256 MB
<br>(kseg_c above). More RAM can be mapped by choosing a different segmentation
<br>and shrinking the user-mode memory space.
<br>
<br>The MMU can map all 4 GB in user mode, but doing that would mean that a
<br>few extra instructions would be needed for each access to user mode
<br>memory.
<br>
<br>The kernel needs access to both cached and uncached flash. Uncached is
<br>necessary because of the special write/erase sequences. Also, the 
<br>peripherial chip-selects are decoded from that region.
<br>
<br>The kernel also needs its own virtual memory space. That is kseg_d. It
<br>is used by the vmalloc() kernel function to allocate virtual contiguous
<br>chunks of memory not possible using the normal kmalloc physical RAM 
<br>allocator.
<br>
<br>The setting of the actual MMU control registers to use this layout would
<br>be something like this:
<br>
<br>R_MMU_KSEG = ( ( seg_f, seg     ) |   // Flash cached
<br>               ( seg_e, seg     ) |   // Flash uncached
<br>               ( seg_d, page    ) |   // kernel vmalloc area    
<br>               ( seg_c, seg     ) |   // kernel linear segment
<br>               ( seg_b, seg     ) |   // kernel linear segment
<br>               ( seg_a, page    ) |
<br>               ( seg_9, page    ) |
<br>               ( seg_8, page    ) |
<br>               ( seg_7, page    ) |
<br>               ( seg_6, page    ) |
<br>               ( seg_5, page    ) |
<br>               ( seg_4, page    ) |
<br>               ( seg_3, page    ) |
<br>               ( seg_2, page    ) |
<br>               ( seg_1, page    ) |
<br>               ( seg_0, page    ) );
<br>
<br>R_MMU_KBASE_HI = ( ( base_f, 0x0 ) |   // flash/sram/periph cached
<br>                   ( base_e, 0x8 ) |   // flash/sram/periph uncached
<br>                   ( base_d, 0x0 ) |   // don't care
<br>                   ( base_c, 0x4 ) |   // physical RAM cached area
<br>                   ( base_b, 0xb ) |   // uncached on-chip registers
<br>                   ( base_a, 0x0 ) |   // don't care
<br>                   ( base_9, 0x0 ) |   // don't care
<br>                   ( base_8, 0x0 ) );  // don't care
<br>
<br>R_MMU_KBASE_LO = ( ( base_7, 0x0 ) |   // don't care
<br>                   ( base_6, 0x0 ) |   // don't care
<br>                   ( base_5, 0x0 ) |   // don't care
<br>                   ( base_4, 0x0 ) |   // don't care
<br>                   ( base_3, 0x0 ) |   // don't care
<br>                   ( base_2, 0x0 ) |   // don't care
<br>                   ( base_1, 0x0 ) |   // don't care
<br>                   ( base_0, 0x0 ) );  // don't care
<br>
<br>NOTE: while setting up the MMU, we run in a non-mapped mode in the DRAM (0x40
<br>segment) and need to setup the seg_4 to a unity mapping, so that we don't get
<br>a fault before we have had time to jump into the real kernel segment (0xc0). This
<br>is done in head.S temporarily, but fixed by the kernel later in paging_init.
<br>
<br>
<br>Paging - PTE's, PMD's and PGD's
<br>-------------------------------
<br>
<br>[ References: asm/pgtable.h, asm/page.h, asm/mmu.h ]
<br>
<br>The paging mechanism uses virtual addresses to split a process memory-space into
<br>pages, a page being the smallest unit that can be freely remapped in memory. On
<br>Linux/CRIS, a page is 8192 bytes (for technical reasons not equal to 4096 as in 
<br>most other 32-bit architectures). It would be inefficient to let a virtual memory
<br>mapping be controlled by a long table of page mappings, so it is broken down into
<br>a 2-level structure with a Page Directory containing pointers to Page Tables which
<br>each have maps of up to 2048 pages (8192 / sizeof(void *)). Linux can actually
<br>handle 3-level structures as well, with a Page Middle Directory in between, but
<br>in many cases, this is folded into a two-level structure by excluding the Middle
<br>Directory.
<br>
<br>We'll take a look at how an address is translated while we discuss how it's handled
<br>in the Linux kernel.
<br>
<br>The example address is 0xd004000c; in binary this is:
<br>
<br>31       23       15       7      0
<br>11010000 00000100 00000000 00001100
<br>
<br>|______| |__________||____________|
<br>  PGD        PTE       page offset
<br>
<br>Given the top-level Page Directory, the offset in that directory is calculated
<br>using the upper 8 bits:
<br>
<br>static inline pgd_t * pgd_offset(struct mm_struct * mm, unsigned long address)
<br>{
<br>	return mm->pgd + (address >> PGDIR_SHIFT);
<br>}
<br>
<br>PGDIR_SHIFT is the log2 of the amount of memory an entry in the PGD can map; in our
<br>case it is 24, corresponding to 16 MB. This means that each entry in the PGD 
<br>corresponds to 16 MB of virtual memory.
<br>
<br>The pgd_t from our example will therefore be the 208'th (0xd0) entry in mm->pgd.
<br>
<br>Since the Middle Directory does not exist, it is a unity mapping:
<br>
<br>static inline pmd_t * pmd_offset(pgd_t * dir, unsigned long address)
<br>{
<br>	return (pmd_t *) dir;
<br>}
<br>
<br>The Page Table provides the final lookup by using bits 13 to 23 as index:
<br>
<br>static inline pte_t * pte_offset(pmd_t * dir, unsigned long address)
<br>{
<br>	return (pte_t *) pmd_page(*dir) + ((address >> PAGE_SHIFT) &
<br>					   (PTRS_PER_PTE - 1));
<br>}
<br>
<br>PAGE_SHIFT is the log2 of the size of a page; 13 in our case. PTRS_PER_PTE is
<br>the number of pointers that fit in a Page Table and is used to mask off the 
<br>PGD-part of the address.
<br>
<br>The so-far unused bits 0 to 12 are used to index inside a page linearily.
<br>
<br>The VM system
<br>-------------
<br>
<br>The kernels own page-directory is the swapper_pg_dir, cleared in paging_init, 
<br>and contains the kernels virtual mappings (the kernel itself is not paged - it
<br>is mapped linearily using kseg_c as described above). Architectures without
<br>kernel segments like the i386, need to setup swapper_pg_dir directly in head.S
<br>to map the kernel itself. swapper_pg_dir is pointed to by init_mm.pgd as the
<br>init-task's PGD.
<br>
<br>To see what support functions are used to setup a page-table, let's look at the
<br>kernel's internal paged memory system, vmalloc/vfree.
<br>
<br>void * vmalloc(unsigned long size)
<br>
<br>The vmalloc-system keeps a paged segment in kernel-space at 0xd0000000. What
<br>happens first is that a virtual address chunk is allocated to the request using
<br>get_vm_area(size). After that, physical RAM pages are allocated and put into
<br>the kernel's page-table using alloc_area_pages(addr, size). 
<br>
<br>static int alloc_area_pages(unsigned long address, unsigned long size)
<br>
<br>First the PGD entry is found using init_mm.pgd. This is passed to
<br>alloc_area_pmd (remember the 3->2 folding). It uses pte_alloc_kernel to
<br>check if the PGD entry points anywhere - if not, a page table page is
<br>allocated and the PGD entry updated. Then the alloc_area_pte function is
<br>used just like alloc_area_pmd to check which page table entry is desired, 
<br>and a physical page is allocated and the table entry updated. All of this
<br>is repeated at the top-level until the entire address range specified has 
<br>been mapped.
<br>
<br>
<br>
<br><p></p><div class="separator"></div><br><p><h2>openrisc</h2></p>OpenRISC Linux
<br>==============
<br>
<br>This is a port of Linux to the OpenRISC class of microprocessors; the initial
<br>target architecture, specifically, is the 32-bit OpenRISC 1000 family (or1k).
<br>
<br>For information about OpenRISC processors and ongoing development:
<br>
<br>	website		http://openrisc.net
<br>
<br>For more information about Linux on OpenRISC, please contact South Pole AB.
<br>
<br>	email:		info@southpole.se
<br>
<br>	website:	http://southpole.se
<br>			http://southpoleconsulting.com
<br>
<br>---------------------------------------------------------------------
<br>
<br>Build instructions for OpenRISC toolchain and Linux
<br>===================================================
<br>
<br>In order to build and run Linux for OpenRISC, you'll need at least a basic
<br>toolchain and, perhaps, the architectural simulator.  Steps to get these bits
<br>in place are outlined here.
<br>
<br>1)  The toolchain can be obtained from openrisc.net.  Instructions for building
<br>a toolchain can be found at:
<br>
<br>http://openrisc.net/toolchain-build.html
<br>
<br>2) or1ksim (optional)
<br>
<br>or1ksim is the architectural simulator which will allow you to actually run
<br>your OpenRISC Linux kernel if you don't have an OpenRISC processor at hand.
<br>
<br>	git clone git://openrisc.net/jonas/or1ksim-svn
<br>
<br>	cd or1ksim
<br>	./configure --prefix=$OPENRISC_PREFIX
<br>	make
<br>	make install
<br>
<br>3)  Linux kernel
<br>
<br>Build the kernel as usual
<br>
<br>	make ARCH=openrisc defconfig
<br>	make ARCH=openrisc
<br>
<br>4)  Run in architectural simulator
<br>
<br>Grab the or1ksim platform configuration file (from the or1ksim source) and
<br>together with your freshly built vmlinux, run your kernel with the following
<br>incantation:
<br>
<br>	sim -f arch/openrisc/or1ksim.cfg vmlinux
<br>
<br>---------------------------------------------------------------------
<br>
<br>Terminology
<br>===========
<br>
<br>In the code, the following particles are used on symbols to limit the scope
<br>to more or less specific processor implementations:
<br>
<br>openrisc: the OpenRISC class of processors
<br>or1k:     the OpenRISC 1000 family of processors
<br>or1200:   the OpenRISC 1200 processor
<br>
<br>---------------------------------------------------------------------
<br>
<br>History
<br>========
<br>
<br>18. 11. 2003	Matjaz Breskvar (phoenix@bsemi.com)
<br>	initial port of linux to OpenRISC/or32 architecture.
<br>        all the core stuff is implemented and seams usable.
<br>
<br>08. 12. 2003	Matjaz Breskvar (phoenix@bsemi.com)
<br>	complete change of TLB miss handling.
<br>	rewrite of exceptions handling.
<br>	fully functional sash-3.6 in default initrd.
<br>	a much improved version with changes all around.
<br>
<br>10. 04. 2004	Matjaz Breskvar (phoenix@bsemi.com)
<br>	alot of bugfixes all over.
<br>	ethernet support, functional http and telnet servers.
<br>	running many standard linux apps.
<br>
<br>26. 06. 2004	Matjaz Breskvar (phoenix@bsemi.com)
<br>	port to 2.6.x
<br>
<br>30. 11. 2004	Matjaz Breskvar (phoenix@bsemi.com)
<br>	lots of bugfixes and enhancments.
<br>	added opencores framebuffer driver.
<br>
<br>09. 10. 2010    Jonas Bonn (jonas@southpole.se)
<br>	major rewrite to bring up to par with upstream Linux 2.6.36
<br><p></p><div class="separator"></div><br><p><h2>mwave</h2></p>Module options
<br>--------------
<br>
<br>The mwave module takes the following options.  Note that these options
<br>are not saved by the BIOS and so do not persist after unload and reload.
<br>
<br>  mwave_debug=value, where value is bitwise OR of trace flags:
<br>	0x0001 mwavedd api tracing
<br>	0x0002 smapi api tracing
<br>	0x0004 3780i tracing
<br>	0x0008 tp3780i tracing
<br>
<br>        Tracing only occurs if the driver has been compiled with the
<br>        MW_TRACE macro #defined  (i.e. let ccflags-y := -DMW_TRACE
<br>        in the Makefile).
<br>
<br>  mwave_3780i_irq=5/7/10/11/15
<br>	If the dsp irq has not been setup and stored in bios by the 
<br>	thinkpad configuration utility then this parameter allows the
<br>	irq used by the dsp to be configured.
<br>
<br>  mwave_3780i_io=0x130/0x350/0x0070/0xDB0
<br>	If the dsp io range has not been setup and stored in bios by the 
<br>	thinkpad configuration utility then this parameter allows the
<br>	io range used by the dsp to be configured.
<br>
<br>  mwave_uart_irq=3/4
<br>	If the mwave's uart irq has not been setup and stored in bios by the 
<br>	thinkpad configuration utility then this parameter allows the
<br>	irq used by the mwave uart to be configured.
<br>
<br>  mwave_uart_io=0x3f8/0x2f8/0x3E8/0x2E8
<br>	If the uart io range has not been setup and stored in bios by the 
<br>	thinkpad configuration utility then this parameter allows the
<br>	io range used by the mwave uart to be configured.
<br>
<br>Example to enable the 3780i DSP using ttyS1 resources:
<br>	
<br>  insmod mwave mwave_3780i_irq=10 mwave_3780i_io=0x0130 mwave_uart_irq=3 mwave_uart_io=0x2f8
<br>
<br>Accessing the driver
<br>--------------------
<br>
<br>You must also create a node for the driver:
<br>  mkdir -p /dev/modems
<br>  mknod --mode=660 /dev/modems/mwave c 10 219
<br>
<br><p></p><div class="separator"></div><br><p><h2>parisc</h2></p>/*
<br>** HP VISUALIZE Workstation PCI Bus Defect
<br>**
<br>** "HP has discovered a potential system defect that can affect
<br>** the behavior of five models of HP VISUALIZE workstations when
<br>** equipped with third-party or customer-installed PCI I/O expansion
<br>** cards. The defect is limited to the HP C180, C160, C160L, B160L,
<br>** and B132L VISUALIZE workstations, and will only be encountered
<br>** when data is transmitted through PCI I/O expansion cards on the
<br>** PCI bus. HP-supplied graphics cards that utilize the PCI bus are
<br>** not affected."
<br>**
<br>** http://h20000.www2.hp.com/bizsupport/TechSupport/Home.jsp?locale=en_US&prodTypeId=12454&prodSeriesId=44443
<br>**
<br>**	Product		First Good Serial Number
<br>**  C200/C240 (US)	US67350000
<br>**B132L+/B180 (US)	US67390000
<br>**   C200 (Europe)	3713G01000
<br>**  B180L (Europe)	3720G01000
<br>**
<br>** Note that many boards were fixed/replaced under a free replacement
<br>** program. Assume a machine is only "suspect" until proven otherwise.
<br>**
<br>** "The pci_check program will also be available as application
<br>**  patch PHSS_12295"
<br>*/
<br>
<br><p></p><div class="separator"></div><br><p><h2>usb</h2></p>To understand all the Linux-USB framework, you'll use these resources:
<br>
<br>    * This source code.  This is necessarily an evolving work, and
<br>      includes kerneldoc that should help you get a current overview.
<br>      ("make pdfdocs", and then look at "usb.pdf" for host side and
<br>      "gadget.pdf" for peripheral side.)  Also, Documentation/usb has
<br>      more information.
<br>
<br>    * The USB 2.0 specification (from www.usb.org), with supplements
<br>      such as those for USB OTG and the various device classes.
<br>      The USB specification has a good overview chapter, and USB
<br>      peripherals conform to the widely known "Chapter 9".
<br>
<br>    * Chip specifications for USB controllers.  Examples include
<br>      host controllers (on PCs, servers, and more); peripheral
<br>      controllers (in devices with Linux firmware, like printers or
<br>      cell phones); and hard-wired peripherals like Ethernet adapters.
<br>
<br>    * Specifications for other protocols implemented by USB peripheral
<br>      functions.  Some are vendor-specific; others are vendor-neutral
<br>      but just standardized outside of the www.usb.org team.
<br>
<br>Here is a list of what each subdirectory here is, and what is contained in
<br>them.
<br>
<br>core/		- This is for the core USB host code, including the
<br>		  usbfs files and the hub class driver ("hub_wq").
<br>
<br>host/		- This is for USB host controller drivers.  This
<br>		  includes UHCI, OHCI, EHCI, and others that might
<br>		  be used with more specialized "embedded" systems.
<br>
<br>gadget/		- This is for USB peripheral controller drivers and
<br>		  the various gadget drivers which talk to them.
<br>
<br>
<br>Individual USB driver directories.  A new driver should be added to the
<br>first subdirectory in the list below that it fits into.
<br>
<br>image/		- This is for still image drivers, like scanners or
<br>		  digital cameras.
<br>../input/	- This is for any driver that uses the input subsystem,
<br>		  like keyboard, mice, touchscreens, tablets, etc.
<br>../media/	- This is for multimedia drivers, like video cameras,
<br>		  radios, and any other drivers that talk to the v4l
<br>		  subsystem.
<br>../net/		- This is for network drivers.
<br>serial/		- This is for USB to serial drivers.
<br>storage/	- This is for USB mass-storage drivers.
<br>class/		- This is for all USB device drivers that do not fit
<br>		  into any of the above categories, and work for a range
<br>		  of USB Class specified devices. 
<br>misc/		- This is for all USB device drivers that do not fit
<br>		  into any of the above categories.
<br><p></p><div class="separator"></div><br><p><h2>usbip</h2></p>TODO:
<br>	- more discussion about the protocol
<br>	- testing
<br>	- review of the userspace interface
<br>	- document the protocol
<br>
<br>Please send patches for this code to Greg Kroah-Hartman <greg@kroah.com>
<br><p></p><div class="separator"></div><br><p><h2>lustre</h2></p>Lustre Parallel Filesystem Client
<br>=================================
<br>
<br>The Lustre file system is an open-source, parallel file system
<br>that supports many requirements of leadership class HPC simulation
<br>environments.
<br>Born from from a research project at Carnegie Mellon University,
<br>the Lustre file system is a widely-used option in HPC.
<br>The Lustre file system provides a POSIX compliant file system interface,
<br>can scale to thousands of clients, petabytes of storage and
<br>hundreds of gigabytes per second of I/O bandwidth.
<br>
<br>Unlike shared disk storage cluster filesystems (e.g. OCFS2, GFS, GPFS),
<br>Lustre has independent Metadata and Data servers that clients can access
<br>in parallel to maximize performance.
<br>
<br>In order to use Lustre client you will need to download the "lustre-client"
<br>package that contains the userspace tools from http://lustre.org/download/
<br>
<br>You will need to install and configure your Lustre servers separately.
<br>
<br>Mount Syntax
<br>============
<br>After you installed the lustre-client tools including mount.lustre binary
<br>you can mount your Lustre filesystem with:
<br>
<br>mount -t lustre mgs:/fsname mnt
<br>
<br>where mgs is the host name or ip address of your Lustre MGS(management service)
<br>fsname is the name of the filesystem you would like to mount.
<br>
<br>
<br>Mount Options
<br>=============
<br>
<br>  noflock
<br>	Disable posix file locking (Applications trying to use
<br>	the functionality will get ENOSYS)
<br>
<br>  localflock
<br>	Enable local flock support, using only client-local flock
<br>	(faster, for applications that require flock but do not run
<br>	 on multiple nodes).
<br>
<br>  flock
<br>	Enable cluster-global posix file locking coherent across all
<br>	client nodes.
<br>
<br>  user_xattr, nouser_xattr
<br>	Support "user." extended attributes (or not)
<br>
<br>  user_fid2path, nouser_fid2path
<br>	Enable FID to path translation by regular users (or not)
<br>
<br>  checksum, nochecksum
<br>	Verify data consistency on the wire and in memory as it passes
<br>	between the layers (or not).
<br>
<br>  lruresize, nolruresize
<br>	Allow lock LRU to be controlled by memory pressure on the server
<br>	(or only 100 (default, controlled by lru_size proc parameter) locks
<br>	 per CPU per server on this client).
<br>
<br>  lazystatfs, nolazystatfs
<br>	Do not block in statfs() if some of the servers are down.
<br>
<br>  32bitapi
<br>	Shrink inode numbers to fit into 32 bits. This is necessary
<br>	if you plan to reexport Lustre filesystem from this client via
<br>	NFSv4.
<br>
<br>  verbose, noverbose
<br>	Enable mount/umount console messages (or not)
<br>
<br>More Information
<br>================
<br>You can get more information at the Lustre website: http://wiki.lustre.org/
<br>
<br>Source for the userspace tools and out-of-tree client and server code
<br>is available at: http://git.hpdd.intel.com/fs/lustre-release.git
<br>
<br>Latest binary packages:
<br>http://lustre.org/download/
<br><p></p><div class="separator"></div><br><p><h2>nvec</h2></p>NVEC: An NVidia compliant Embedded Controller Protocol Implementation
<br>
<br>This is an implementation of the NVEC protocol used to communicate with an
<br>embedded controller (EC) via I2C bus. The EC is an I2C master while the host
<br>processor is the I2C slave. Requests from the host processor to the EC are
<br>started by triggering a gpio line.
<br>
<br>There is no written documentation of the protocol available to the public,
<br>but the source code[1] of the published nvec reference drivers can be a guide.
<br>This driver is currently only used by the AC100 project[2], but it is likely,
<br>that other Tegra boards (not yet mainlined, if ever) also use it.
<br>
<br>[1] e.g. http://nv-tegra.nvidia.com/gitweb/?p=linux-2.6.git;a=tree;f=arch/arm/mach-tegra/nvec;hb=android-tegra-2.6.32
<br>[2] http://gitorious.org/ac100, http://launchpad.net/ac100
<br><p></p><div class="separator"></div><br><p><h2>slicoss</h2></p>This driver is supposed to support:
<br>
<br>	Mojave cards (single port PCI Gigabit) both copper and fiber
<br>	Oasis cards (single and dual port PCI-x Gigabit) copper and fiber
<br>	Kalahari cards (dual and quad port PCI-e Gigabit) copper and fiber
<br>
<br>The driver was actually tested on Oasis and Kalahari cards.
<br><p></p><div class="separator"></div><br><p><h2>wlan-ng</h2></p>TODO:
<br>	- checkpatch.pl cleanups
<br>	- sparse warnings
<br>	- move to use the in-kernel wireless stack
<br>
<br>Please send any patches or complaints about this driver to Greg
<br>Kroah-Hartman <greg@kroah.com> and don't bother the upstream wireless
<br>kernel developers about it, they want nothing to do with it.
<br><p></p><div class="separator"></div><br><p><h2>fbtft</h2></p>  FBTFT
<br>=========
<br>
<br>Linux Framebuffer drivers for small TFT LCD display modules.
<br>The module 'fbtft' makes writing drivers for some of these displays very easy.
<br>
<br>Development is done on a Raspberry Pi running the Raspbian "wheezy" distribution.
<br>
<br>INSTALLATION
<br>  Download kernel sources
<br>
<br>  From Linux 3.15
<br>    cd drivers/video/fbdev/fbtft
<br>    git clone https://github.com/notro/fbtft.git
<br>
<br>    Add to drivers/video/fbdev/Kconfig:   source "drivers/video/fbdev/fbtft/Kconfig"
<br>    Add to drivers/video/fbdev/Makefile:  obj-y += fbtft/
<br>
<br>  Before Linux 3.15
<br>    cd drivers/video
<br>    git clone https://github.com/notro/fbtft.git
<br>
<br>    Add to drivers/video/Kconfig:   source "drivers/video/fbtft/Kconfig"
<br>    Add to drivers/video/Makefile:  obj-y += fbtft/
<br>
<br>  Enable driver(s) in menuconfig and build the kernel
<br>
<br>
<br>See wiki for more information: https://github.com/notro/fbtft/wiki
<br>
<br>
<br>Source: https://github.com/notro/fbtft/
<br><p></p><div class="separator"></div><br><p><h2>tools</h2></p>
<br>
<br>        1 - LOOPBACK DRIVER
<br>
<br>The driver implements the main logic of the loopback test and provides
<br>sysfs files to configure the test and retrieve the results.
<br>A user could run a test without the need of the test application given
<br>that he understands the sysfs interface of the loopback driver.
<br>
<br>The loopback kernel driver needs to be loaded and at least one module
<br>with the loopback feature enabled must be present for the sysfs files to be
<br>created and for the loopback test application to be able to run.
<br>
<br>To load the module:
<br># modprobe gb-loopback
<br>
<br>
<br>When the module is probed,  New files are available on the sysfs
<br>directory of the detected loopback device.
<br>(typically under "/sys/bus/graybus/devices").
<br>
<br>Here is a short summary of the sysfs interface files that should be visible:
<br>
<br>* Loopback Configuration Files:
<br>    async - Use asynchronous operations.
<br>    iteration_max - Number of tests iterations to perform.
<br>    size - payload size of the transfer.
<br>    timeout - The number of microseconds to give an individual
<br>              asynchronous request before timing out.
<br>    us_wait - Time to wait between 2 messages
<br>    type - By writing the test type to this file, the test starts.
<br>           Valid tests are:
<br>             0 stop the test
<br>             2 - ping
<br>             3 - transfer
<br>             4 - sink
<br>
<br>* Loopback feedback files:
<br>    error - number of errors that have occurred.
<br>    iteration_count - Number of iterations performed.
<br>    requests_completed - Number of requests successfully completed.
<br>    requests_timedout - Number of requests that have timed out.
<br>    timeout_max - Max allowed timeout
<br>    timeout_min - Min allowed timeout.
<br>
<br>* Loopback result files:
<br>    apbridge_unipro_latency_avg
<br>    apbridge_unipro_latency_max
<br>    apbridge_unipro_latency_min
<br>    gpbridge_firmware_latency_avg
<br>    gpbridge_firmware_latency_max
<br>    gpbridge_firmware_latency_min
<br>    requests_per_second_avg
<br>    requests_per_second_max
<br>    requests_per_second_min
<br>    latency_avg
<br>    latency_max
<br>    latency_min
<br>    throughput_avg
<br>    throughput_max
<br>    throughput_min
<br>
<br>
<br>
<br>            2 - LOOPBACK TEST APPLICATION
<br>
<br>The loopback test application manages and formats the results provided by
<br>the loopback kernel module. The purpose of this application
<br>is to:
<br>    - Start and manage multiple loopback device tests concurrently.
<br>    - Calculate the aggregate results for multiple devices.
<br>    - Gather and format test results (csv or human readable).
<br>
<br>The best way to get up to date usage information for the application is
<br>usually to pass the "-h" parameter.
<br>Here is the summary of the available options:
<br>
<br> Mandatory arguments
<br>   -t     must be one of the test names - sink, transfer or ping
<br>   -i     iteration count - the number of iterations to run the test over
<br> Optional arguments
<br>   -S     sysfs location - location for greybus 'endo' entires default /sys/bus/greybus/devices/
<br>   -D     debugfs location - location for loopback debugfs entries default /sys/kernel/debug/gb_loopback/
<br>   -s     size of data packet to send during test - defaults to zero
<br>   -m     mask - a bit mask of connections to include example: -m 8 = 4th connection -m 9 = 1st and 4th connection etc
<br>                 default is zero which means broadcast to all connections
<br>   -v     verbose output
<br>   -d     debug output
<br>   -r     raw data output - when specified the full list of latency values are included in the output CSV
<br>   -p     porcelain - when specified printout is in a user-friendly non-CSV format. This option suppresses writing to CSV file
<br>   -a     aggregate - show aggregation of all enabled devies
<br>   -l     list found loopback devices and exit.
<br>   -x     Async - Enable async transfers.
<br>   -o     Timeout - Timeout in microseconds for async operations.
<br>
<br>
<br>
<br>             3 - REAL WORLD EXAMPLE USAGES
<br>
<br> 3.1 - Using the driver sysfs files to run a test on a single device:
<br>
<br>* Run a 1000 transfers of a 100 byte packet. Each transfer is started only
<br>after the previous one finished successfully:
<br>    echo 0 > /sys/bus/greybus/devices/1-2.17/type
<br>    echo 0 > /sys/bus/greybus/devices/1-2.17/async
<br>    echo 2000 > /sys/bus/greybus/devices/1-2.17/us_wait
<br>    echo 100 > /sys/bus/greybus/devices/1-2.17/size
<br>    echo 1000 > /sys/bus/greybus/devices/1-2.17/iteration_max
<br>    echo 0 > /sys/bus/greybus/devices/1-2.17/mask
<br>    echo 200000 > /sys/bus/greybus/devices/1-2.17/timeout
<br>    echo 3 > /sys/bus/greybus/devices/1-2.17/type
<br>
<br>* Run a 1000 transfers of a 100 byte packet. Transfers are started without
<br>waiting for the previous one to finish:
<br>    echo 0 > /sys/bus/greybus/devices/1-2.17/type
<br>    echo 3 > /sys/bus/greybus/devices/1-2.17/async
<br>    echo 0 > /sys/bus/greybus/devices/1-2.17/us_wait
<br>    echo 100 > /sys/bus/greybus/devices/1-2.17/size
<br>    echo 1000 > /sys/bus/greybus/devices/1-2.17/iteration_max
<br>    echo 0 > /sys/bus/greybus/devices/1-2.17/mask
<br>    echo 200000 > /sys/bus/greybus/devices/1-2.17/timeout
<br>    echo 3 > /sys/bus/greybus/devices/1-2.17/type
<br>
<br>* Read the results from sysfs:
<br>    cat /sys/bus/greybus/devices/1-2.17/requests_per_second_min
<br>    cat /sys/bus/greybus/devices/1-2.17/requests_per_second_max
<br>    cat /sys/bus/greybus/devices/1-2.17/requests_per_second_avg
<br>
<br>    cat /sys/bus/greybus/devices/1-2.17/latency_min
<br>    cat /sys/bus/greybus/devices/1-2.17/latency_max
<br>    cat /sys/bus/greybus/devices/1-2.17/latency_avg
<br>
<br>    cat /sys/bus/greybus/devices/1-2.17/apbridge_unipro_latency_min
<br>    cat /sys/bus/greybus/devices/1-2.17/apbridge_unipro_latency_max
<br>    cat /sys/bus/greybus/devices/1-2.17/apbridge_unipro_latency_avg
<br>
<br>    cat /sys/bus/greybus/devices/1-2.17/gpbridge_firmware_latency_min
<br>    cat /sys/bus/greybus/devices/1-2.17/gpbridge_firmware_latency_max
<br>    cat /sys/bus/greybus/devices/1-2.17/gpbridge_firmware_latency_avg
<br>
<br>    cat /sys/bus/greybus/devices/1-2.17/error
<br>    cat /sys/bus/greybus/devices/1-2.17/requests_completed
<br>    cat /sys/bus/greybus/devices/1-2.17/requests_timedout
<br>
<br>
<br>3.2 - using the test application:
<br>
<br>* Run a transfer test 10 iterations of size 100 bytes on all available devices
<br>    #/loopback_test -t transfer -i 10 -s 100
<br>    1970-1-1 0:10:7,transfer,1-4.17,100,10,0,443,509,471.700012,66,1963,2256,2124.600098,293,102776,118088,109318.898438,15312,1620,1998,1894.099976,378,56,57,56.799999,1
<br>    1970-1-1 0:10:7,transfer,1-5.17,100,10,0,399,542,463.399994,143,1845,2505,2175.800049,660,92568,125744,107393.296875,33176,1469,2305,1806.500000,836,56,57,56.799999,1
<br>
<br>
<br>* Show the aggregate results of both devices. ("-a")
<br>    #/loopback_test -t transfer -i 10 -s 100  -a
<br>    1970-1-1 0:10:35,transfer,1-4.17,100,10,0,448,580,494.100006,132,1722,2230,2039.400024,508,103936,134560,114515.703125,30624,1513,1980,1806.900024,467,56,57,57.299999,1
<br>    1970-1-1 0:10:35,transfer,1-5.17,100,10,0,383,558,478.600006,175,1791,2606,2115.199951,815,88856,129456,110919.703125,40600,1457,2246,1773.599976,789,56,57,57.099998,1
<br>    1970-1-1 0:10:35,transfer,aggregate,100,10,0,383,580,486.000000,197,1722,2606,2077.000000,884,88856,134560,112717.000000,45704,1457,2246,1789.000000,789,56,57,57.000000,1
<br>
<br>* Example usage of the mask option to select which devices will
<br>  run the test (1st, 2nd, or both devices):
<br>    # /loopback_test -t transfer -i 10 -s 100 -m 1
<br>    1970-1-1 0:11:56,transfer,1-4.17,100,10,0,514,558,544.900024,44,1791,1943,1836.599976,152,119248,129456,126301.296875,10208,1600,1001609,101613.601562,1000009,56,57,56.900002,1
<br>    # /loopback_test -t transfer -i 10 -s 100 -m 2
<br>    1970-1-1 0:12:0,transfer,1-5.17,100,10,0,468,554,539.000000,86,1804,2134,1859.500000,330,108576,128528,124932.500000,19952,1606,1626,1619.300049,20,56,57,57.400002,1
<br>    # /loopback_test -t transfer -i 10 -s 100 -m 3
<br>    1970-1-1 0:12:3,transfer,1-4.17,100,10,0,432,510,469.399994,78,1959,2313,2135.800049,354,100224,118320,108785.296875,18096,1610,2024,1893.500000,414,56,57,57.200001,1
<br>    1970-1-1 0:12:3,transfer,1-5.17,100,10,0,404,542,468.799988,138,1843,2472,2152.500000,629,93728,125744,108646.101562,32016,1504,2247,1853.099976,743,56,57,57.099998,1
<br>
<br>* Show output in human readable format ("-p")
<br>    # /loopback_test -t transfer -i 10 -s 100 -m 3 -p
<br>
<br>    1970-1-1 0:12:37
<br>    test:                       transfer
<br>    path:                       1-4.17
<br>    size:                       100
<br>    iterations:                 10
<br>    errors:                     0
<br>    async:                      Disabled
<br>    requests per-sec:           min=390, max=547, average=469.299988, jitter=157
<br>    ap-throughput B/s:          min=90480 max=126904 average=108762.101562 jitter=36424
<br>    ap-latency usec:            min=1826 max=2560 average=2146.000000 jitter=734
<br>    apbridge-latency usec:      min=1620 max=1982 average=1882.099976 jitter=362
<br>    gpbridge-latency usec:      min=56 max=57 average=57.099998 jitter=1
<br>
<br>
<br>    1970-1-1 0:12:37
<br>    test:                       transfer
<br>    path:                       1-5.17
<br>    size:                       100
<br>    iterations:                 10
<br>    errors:                     0
<br>    async:                      Disabled
<br>    requests per-sec:           min=397, max=538, average=461.700012, jitter=141
<br>    ap-throughput B/s:          min=92104 max=124816 average=106998.898438 jitter=32712
<br>    ap-latency usec:            min=1856 max=2514 average=2185.699951 jitter=658
<br>    apbridge-latency usec:      min=1460 max=2296 average=1828.599976 jitter=836
<br>    gpbridge-latency usec:      min=56 max=57 average=57.099998 jitter=1
<br><p></p><div class="separator"></div><br><p><h2>goldfish</h2></p>Audio
<br>-----
<br>- Move to using the ALSA framework not faking it
<br>- Fix the wrong user page DMA (moving to ALSA may fix that too)
<br>
<br>NAND
<br>----
<br>- Remove excess checking of parameters in calls
<br>- Use dma coherent memory not kmalloc/__pa for the memory (this is just
<br>  a cleanliness issue not a correctness one)
<br>
<br><p></p><div class="separator"></div><br><p><h2>Documentation</h2></p>$Id: README.act2000,v 1.3 2000/08/06 09:22:51 armin Exp $
<br>
<br>This document describes the ACT2000 driver for the
<br>IBM Active 2000 ISDN card.
<br>
<br>There are 3 Types of this card available. A ISA-, MCA-, and PCMCIA-Bus
<br>Version. Currently, only the ISA-Bus version of the card is supported.
<br>However MCA and PCMCIA will follow soon.
<br>
<br>The ISA-Bus Version uses 8 IO-ports. The base port address has to be set
<br>manually using the DIP switches.
<br>
<br>Setting up the DIP switches for the IBM Active 2000 ISDN card:
<br>
<br>	 Note: S5 and S6 always set off!
<br>
<br>     S1  S2  S3  S4  Base-port
<br>     on  on  on  on  0x0200 (Factory default)
<br>     off on  on  on  0x0240 
<br>     on  off on  on  0x0280 
<br>     off off on  on  0x02c0 
<br>     on  on  off on  0x0300 
<br>     off on  off on  0x0340 
<br>     on  off off on  0x0380 
<br>     on  on  on  off 0xcfe0
<br>     off on  on  off 0xcfa0 
<br>     on  off on  off 0xcf60 
<br>     off off on  off 0xcf20 
<br>     on  on  off off 0xcee0 
<br>     off on  off off 0xcea0 
<br>     on  off off off 0xce60 
<br>     off off off off Card disabled 
<br>
<br>IRQ is configured by software. Possible values are:
<br>
<br>  3, 5, 7, 10, 11, 12, 15 and none (polled mode)
<br>
<br>
<br>The ACT2000 driver may either be built into the kernel or as a module.
<br>Initialization depends on how the driver is built:
<br>
<br>Driver built into the kernel:
<br>
<br>  The ACT2000 driver can be configured using the commandline-feature while
<br>  loading the kernel with LILO or LOADLIN. It accepts the following syntax:
<br>
<br>  act2000=b,p,i[,idstring]
<br>
<br>  where
<br>
<br>    b = Bus-Type      (1=ISA, 2=MCA, 3=PCMCIA)
<br>    p = portbase      (-1 means autoprobe)
<br>    i = Interrupt     (-1 means use next free IRQ, 0 means polled mode)
<br>
<br>  The idstring is an arbitrary string used for referencing the card
<br>  by the actctrl tool later.
<br>
<br>  Defaults used, when no parameters given at all:
<br>
<br>    1,-1,-1,""
<br>
<br>  which means: Autoprobe for an ISA card, use next free IRQ, let the
<br>  ISDN linklevel fill the IdString (usually "line0" for the first card).
<br> 
<br>  If you like to use more than one card, you can use the program
<br>  "actctrl" from the utility-package to configure additional cards.
<br>
<br>  Using the "actctrl"-utility, portbase and irq can also be changed
<br>  during runtime. The D-channel protocol is configured by the "dproto"
<br>  option of the "actctrl"-utility after loading the firmware into the
<br>  card's memory using the "actctrl"-utility.
<br>
<br>Driver built as module:
<br>
<br>  The module act2000.o can be configured during modprobe (insmod) by
<br>  appending its parameters to the modprobe resp. insmod commandline.
<br>  The following syntax is accepted:
<br>
<br>    act_bus=b act_port=p act_irq=i act_id=idstring
<br>
<br>  where b, p, i and idstring have the same meanings as the parameters
<br>  described for the builtin version above.
<br>
<br>  Using the "actctrl"-utility, the same features apply to the modularized
<br>  version as to the kernel-builtin one. (i.e. loading of firmware and
<br>  configuring the D-channel protocol)
<br>
<br>Loading the firmware into the card:
<br>
<br>  The firmware is supplied together with the isdn4k-utils package. It
<br>  can be found in the subdirectory act2000/firmware/
<br>
<br>  Assuming you have installed the utility-package correctly, the firmware
<br>  will be downloaded into the card using the following command:
<br>
<br>    actctrl -d idstring load /etc/isdn/bip11.btl
<br>
<br>  where idstring is the Name of the card, given during insmod-time or
<br>  (for kernel-builtin driver) on the kernel commandline. If only one
<br>  ISDN card is used, the -d isdstrin may be omitted.
<br>
<br>  For further documentation (adding more IBM Active 2000 cards), refer to
<br>  the manpage actctrl.8 which is included in the isdn4k-utils package.
<br>
<br><p></p><div class="separator"></div><br><p><h2>Documentation</h2></p>------------------------------------------------------------------------------
<br> README file for the PCBIT-D Device Driver.
<br>------------------------------------------------------------------------------
<br>
<br>The PCBIT is a Euro ISDN adapter manufactured in Portugal by Octal and
<br>developed in cooperation with Portugal Telecom and Inesc.
<br>The driver interfaces with the standard kernel isdn facilities
<br>originally developed by Fritz Elfert in the isdn4linux project.
<br>
<br>The common versions of the pcbit board require a firmware that is 
<br>distributed (and copyrighted) by the manufacturer. To load this
<br>firmware you need "pcbitctl" available on the standard isdn4k-utils
<br>package or in the pcbit package available in:
<br>
<br>ftp://ftp.di.fc.ul.pt/pub/systems/Linux/isdn
<br>
<br>Known Limitations:
<br>
<br>- The board reset procedure is at the moment incorrect and will only
<br>allow you to load the firmware after a hard reset.
<br>
<br>- Only HDLC in B-channels is supported at the moment. There is no
<br>current support for X.25 in B or D channels nor LAPD in B
<br>channels. The main reason is that these two other protocol modes have,
<br>to my knowledge, very little use. If you want to see them implemented
<br>*do* send me a mail.
<br>
<br>- The driver often triggers errors in the board that I and the
<br>manufacturer believe to be caused by bugs in the firmware. The current
<br>version includes several procedures for error recovery that should
<br>allow normal operation. Plans for the future include cooperation with
<br>the manufacturer in order to solve this problem.
<br>
<br>Information/hints/help can be obtained in the linux isdn
<br>mailing list (isdn4linux@listserv.isdn4linux.de) or directly from me.
<br>
<br>regards,
<br>  Pedro.
<br>		
<br><roque@di.fc.ul.pt>
<br><p></p><div class="separator"></div><br><p><h2>Documentation</h2></p>Welcome to Beta Release 2 of the combination ISDN driver for SpellCaster's
<br>ISA ISDN adapters. Please note this release 2 includes support for the
<br>DataCommute/BRI and TeleCommute/BRI adapters only and any other use is 
<br>guaranteed to fail. If you have a DataCommute/PRI installed in the test
<br>computer, we recommend removing it as it will be detected but will not
<br>be usable.  To see what we have done to Beta Release 2, see section 3.
<br>
<br>Speaking of guarantees, THIS IS BETA SOFTWARE and as such contains
<br>bugs and defects either known or unknown. Use this software at your own
<br>risk. There is NO SUPPORT for this software. Some help may be available
<br>through the web site or the mailing list but such support is totally at
<br>our own option and without warranty. If you choose to assume all and
<br>total risk by using this driver, we encourage you to join the beta
<br>mailing list.
<br>
<br>To join the Linux beta mailing list, send a message to:
<br>majordomo@spellcast.com with the words "subscribe linux-beta" as the only
<br>contents of the message. Do not include a signature. If you choose to
<br>remove yourself from this list at a later date, send another message to
<br>the same address with the words "unsubscribe linux-beta" as its only
<br>contents.
<br>
<br>TABLE OF CONTENTS
<br>-----------------
<br>	1. Introduction
<br>	 1.1 What is ISDN4Linux?
<br>	 1.2 What is different between this driver and previous drivers?
<br>	 1.3 How do I setup my system with the correct software to use
<br>	     this driver release?
<br>	
<br>	2. Basic Operations
<br>	 2.1 Unpacking and installing the driver
<br>	 2.2 Read the man pages!!!
<br>	 2.3 Installing the driver
<br>	 2.4 Removing the driver
<br>	 2.5 What to do if it doesn't load
<br>	 2.6 How to setup ISDN4Linux with the driver
<br>
<br>	3. Beta Change Summaries and Miscellaneous Notes
<br>
<br>1. Introduction
<br>---------------
<br>
<br>The revision 2 Linux driver for SpellCaster ISA ISDN adapters is built
<br>upon ISDN4Linux available separately or as included in Linux 2.0 and later.
<br>The driver will support a maximum of 4 adapters in any one system of any
<br>type including DataCommute/BRI, DataCommute/PRI and TeleCommute/BRI for a
<br>maximum of 92 channels for host. The driver is supplied as a module in
<br>source form and needs to be complied before it can be used. It has been
<br>tested on Linux 2.0.20.
<br>
<br>1.1 What Is ISDN4Linux
<br>
<br>ISDN4Linux is a driver and set of tools used to access and use ISDN devices
<br>on a Linux platform in a common and standard way. It supports HDLC and PPP
<br>protocols and offers channel bundling and MLPPP support. To use ISDN4Linux
<br>you need to configure your kernel for ISDN support and get the ISDN4Linux
<br>tool kit from our web site.
<br>
<br>ISDN4Linux creates a channel pool from all of the available ISDN channels
<br>and therefore can function across adapters. When an ISDN4Linux compliant
<br>driver (such as ours) is loaded, all of the channels go into a pool and
<br>are used on a first-come first-served basis. In addition, individual
<br>channels can be specifically bound to particular interfaces.
<br>
<br>1.2 What is different between this driver and previous drivers?
<br>
<br>The revision 2 driver besides adopting the ISDN4Linux architecture has many
<br>subtle and not so subtle functional differences from previous releases. These
<br>include:
<br>	- More efficient shared memory management combined with a simpler
<br>	  configuration. All adapters now use only 16Kbytes of shared RAM
<br>	  versus between 16K and 64K. New methods for using the shared RAM
<br>	  allow us to utilize all of the available RAM on the adapter through
<br>	  only one 16K page.
<br>	- Better detection of available upper memory. The probing routines
<br>	  have been improved to better detect available shared RAM pages and
<br>	  used pages are now locked.
<br>	- Decreased loading time and a wider range of I/O ports probed.
<br>	  We have significantly reduced the amount of time it takes to load
<br>	  the driver and at the same time doubled the number of I/O ports
<br>	  probed increasing the likelihood of finding an adapter.
<br>	- We now support all ISA adapter models with a single driver instead
<br>	  of separate drivers for each model. The revision 2 driver supports
<br>	  the DataCommute/BRI, DataCommute/PRI and TeleCommute/BRI in any
<br>	  combination up to a maximum of four adapters per system.
<br>	- On board PPP protocol support has been removed in favour of the
<br>	  sync-PPP support used in ISDN4Linux. This means more control of
<br>	  the protocol parameters, faster negotiation time and a more
<br>	  familiar interface.
<br>
<br>1.3 How do I setup my system with the correct software to use
<br>    this driver release?
<br>
<br>Before you can compile, install and use the SpellCaster ISA ISDN driver, you
<br>must ensure that the following software is installed, configured and running:
<br>
<br>	- Linux kernel 2.0.20 or later with the required init and ps
<br>	  versions. Please see your distribution vendor for the correct
<br>	  utility packages. The latest kernel is available from
<br>	  ftp://sunsite.unc.edu/pub/Linux/kernel/v2.0/
<br>
<br>	- The latest modules package (modules-2.0.0.tar.gz) from
<br>	  ftp://sunsite.unc.edu/pub/Linux/kernel/modules-2.0.0.tar.gz
<br>
<br>	- The ISDN4Linux tools available from 
<br>	  ftp://ftp.franken.de/pub/isdn4linux/v2.0/isdn4k-utils-2.0.tar.gz
<br>	  This package may fail to compile for you so you can alternatively
<br>	  get a pre-compiled version from
<br>	  ftp://ftp.spellcast.com/pub/drivers/isdn4linux/isdn4k-bin-2.0.tar.gz
<br>
<br>
<br>2. Basic Operations
<br>-------------------
<br>
<br>2.1 Unpacking and installing the driver
<br>
<br>	1. As root, create a directory in a convenient place. We suggest
<br>	   /usr/src/spellcaster.
<br>	
<br>	2. Unpack the archive with :
<br>		tar xzf sc-n.nn.tar.gz -C /usr/src/spellcaster
<br>	
<br>	3. Change directory to /usr/src/spellcaster
<br>
<br>	4. Read the README and RELNOTES files.
<br>
<br>	5. Run 'make' and if all goes well, run 'make install'.
<br>
<br>2.2 Read the man pages!!!
<br>
<br>Make sure you read the scctrl(8) and sc(4) manual pages before continuing
<br>any further. Type 'man 8 scctrl' and 'man 4 sc'.
<br>
<br>2.3 Installing the driver
<br>
<br>To install the driver, type '/sbin/insmod sc' as root. sc(4) details options
<br>you can specify but you shouldn't need to use any unless this doesn't work.
<br>
<br>Make sure the driver loaded and detected all of the adapters by typing
<br>'dmesg'.
<br>
<br>The driver can be configured so that it is loaded upon startup.  To do this, 
<br>edit the file "/etc/modules/'uname -f'/'uname -v'" and insert the driver name
<br>"sc" into this file.
<br>
<br>2.4 Removing the driver
<br>
<br>To remove the driver, delete any interfaces that may exist (see isdnctrl(8)
<br>for more on this) and then type '/sbin/rmmod sc'.
<br>
<br>2.5 What to do if it doesn't load
<br>
<br>If, when you try to install the driver, you get a message mentioning
<br>'register_isdn' then you do not have the ISDN4Linux system installed. Please
<br>make sure that ISDN support is configured in the kernel.
<br>
<br>If you get a message that says 'initialization of sc failed', then the
<br>driver failed to detect an adapter or failed to find resources needed such
<br>as a free IRQ line or shared memory segment. If you are sure there are free
<br>resources available, use the insmod options detailed in sc(4) to override
<br>the probing function.  
<br>
<br>Upon testing, the following problem was noted, the driver would load without
<br>problems, but the board would not respond beyond that point.  When a check was 
<br>done with 'cat /proc/interrupts' the interrupt count for sc was 0.  In the event 
<br>of this problem, change the BIOS settings so that the interrupts in question are
<br>reserved for ISA use only.   
<br>
<br>
<br>2.6 How to setup ISDN4Linux with the driver
<br>
<br>There are three main configurations which you can use with the driver:
<br>
<br>A)	Basic HDLC connection
<br>B)	PPP connection
<br>C)	MLPPP connection
<br>
<br>It should be mentioned here that you may also use a tty connection if you
<br>desire. The Documentation directory of the isdn4linux subsystem offers good
<br>documentation on this feature.
<br>
<br>A) 10 steps to the establishment of a basic HDLC connection
<br>-----------------------------------------------------------
<br>
<br>- please open the isdn-hdlc file in the examples directory and follow along...
<br>	
<br>	This file is a script used to configure a BRI ISDN TA to establish a 
<br>	basic HDLC connection between its two channels.  Two network 
<br>	interfaces are created and two routes added between the channels.
<br>
<br>	i)   using the isdnctrl utility, add an interface with "addif" and 
<br>	     name it "isdn0"
<br>	ii)  add the outgoing and inbound telephone numbers
<br>	iii) set the Layer 2 protocol to hdlc
<br>	iv)  set the eaz of the interface to be the phone number of that 
<br>	     specific channel
<br>	v)   to turn the callback features off, set the callback to "off" and
<br>	     the callback delay (cbdelay) to 0.
<br>	vi)  the hangup timeout can be set to a specified number of seconds
<br>	vii) the hangup upon incoming call can be set on or off 
<br>	viii) use the ifconfig command to bring up the network interface with 
<br>	      a specific IP address and point to point address
<br>	ix)  add a route to the IP address through the isdn0 interface
<br>	x)   a ping should result in the establishment of the connection
<br>
<br>	
<br>B) Establishment of a PPP connection
<br>------------------------------------
<br>
<br>- please open the isdn-ppp file in the examples directory and follow along...
<br>	
<br>	This file is a script used to configure a BRI ISDN TA to establish a 
<br>	PPP connection 	between the two channels.  The file is almost 
<br>	identical to the HDLC connection example except that the packet 
<br>	encapsulation type has to be set.
<br>	
<br>	use the same procedure as in the HDLC connection from steps i) to 
<br>	iii) then, after the Layer 2 protocol is set, set the encapsulation 
<br>	"encap" to syncppp. With this done, the rest of the steps, iv) to x) 
<br>	can be followed from above.
<br>
<br>	Then, the ipppd (ippp daemon) must be setup:
<br>	
<br>	xi)   use the ipppd function found in /sbin/ipppd to set the following:
<br>	xii)  take out (minus) VJ compression and bsd compression
<br>	xiii) set the mru size to 2000
<br>	xiv)  link the two /dev interfaces to the daemon
<br>
<br>NOTE:  A "*" in the inbound telephone number specifies that a call can be 
<br>accepted on any number.
<br>
<br>C) Establishment of a MLPPP connection
<br>--------------------------------------
<br>
<br>- please open the isdn-mppp file in the examples directory and follow along...
<br>	
<br>	This file is a script used to configure a BRI ISDN TA to accept a 
<br>	Multi Link PPP connection. 
<br>	
<br>	i)   using the isdnctrl utility, add an interface with "addif" and 
<br>	     name it "ippp0"
<br>	ii)  add the inbound telephone number
<br>	iii) set the Layer 2 protocol to hdlc and the Layer 3 protocol to 
<br>	     trans (transparent)
<br>	iv)  set the packet encapsulation to syncppp
<br>	v)   set the eaz of the interface to be the phone number of that 
<br>	     specific channel
<br>	vi)  to turn the callback features off, set the callback to "off" and
<br>	     the callback delay (cbdelay) to 0.
<br>	vi)  the hangup timeout can be set to a specified number of seconds
<br>	vii) the hangup upon incoming call can be set on or off 
<br>	viii) add a slave interface and name it "ippp32" for example
<br>	ix)  set the similar parameters for the ippp32 interface
<br>	x)   use the ifconfig command to bring-up the ippp0 interface with a 
<br>	     specific IP address and point to point address
<br>	xi)  add a route to the IP address through the ippp0 interface
<br>	xii) use the ipppd function found in /sbin/ipppd to set the following:
<br>	xiii) take out (minus) bsd compression
<br>	xiv) set the mru size to 2000
<br>	xv)  add (+) the multi-link function "+mp"
<br>	xvi)  link the two /dev interfaces to the daemon
<br>
<br>NOTE:  To use the MLPPP connection to dial OUT to a MLPPP connection, change 
<br>the inbound telephone numbers to the outgoing telephone numbers of the MLPPP 
<br>host.
<br>
<br>	
<br>3. Beta Change Summaries and Miscellaneous Notes
<br>------------------------------------------------
<br>When using the "scctrl" utility to upload firmware revisions on the board,
<br>please note that the byte count displayed at the end of the operation may be
<br>different from the total number of bytes in the "dcbfwn.nn.sr" file. Please
<br>disregard the displayed byte count.
<br>
<br>It was noted that in Beta Release 1, the module would fail to load and result
<br>in a segmentation fault when 'insmod'ed. This problem was created when one of
<br>the isdn4linux parameters, (isdn_ctrl, data field) was filled in. In some
<br>cases, this data field was NULL, and was left unchecked, so when it was
<br>referenced... segv. The bug has been fixed around line 63-68 of event.c.
<br>
<br><p></p><div class="separator"></div><br><p><h2>Documentation</h2></p>$Id: README.icn,v 1.7 2000/08/06 09:22:51 armin Exp $
<br>
<br>You can get the ICN-ISDN-card from:
<br>
<br>Thinking Objects Software GmbH
<br>Versbacher Röthe 159
<br>97078 Würzburg
<br>Tel: +49 931 2877950
<br>Fax: +49 931 2877951
<br>
<br>email info@think.de
<br>WWW   http:/www.think.de
<br>
<br>
<br>The card communicates with the PC by two interfaces:
<br>  1. A range of 4 successive port-addresses, whose base address can be 
<br>     configured with the switches.
<br>  2. A memory window with 16KB-256KB size, which can be setup in 16k steps
<br>     over the whole range of 16MB. Isdn4linux only uses a 16k window.
<br>     The base address of the window can be configured when loading
<br>     the lowlevel-module (see README). If using more than one card,
<br>     all cards are mapped to the same window and activated as needed.
<br>
<br>Setting up the IO-address dipswitches for the ICN-ISDN-card:
<br>
<br>  Two types of cards exist, one with dip-switches and one with
<br>  hook-switches.
<br>
<br>  1. Setting for the card with hook-switches:
<br>
<br>     (0 = switch closed, 1 = switch open)
<br>
<br>     S3 S2 S1  Base-address
<br>      0  0  0  0x300
<br>      0  0  1  0x310
<br>      0  1  0  0x320 (Default for isdn4linux)
<br>      0  1  1  0x330
<br>      1  0  0  0x340
<br>      1  0  1  0x350
<br>      1  1  0  0x360
<br>      1  1  1  NOT ALLOWED!
<br>    
<br>  2. Setting for the card with dip-switches:
<br>
<br>     (0 = switch closed, 1 = switch open)
<br>
<br>     S1 S2 S3 S4  Base-Address
<br>      0  0  0  0  0x300
<br>      0  0  0  1  0x310
<br>      0  0  1  0  0x320 (Default for isdn4linux)
<br>      0  0  1  1  0x330
<br>      0  1  0  0  0x340
<br>      0  1  0  1  0x350
<br>      0  1  1  0  0x360
<br>      0  1  1  1  NOT ALLOWED!
<br>      1  0  0  0  0x308
<br>      1  0  0  1  0x318
<br>      1  0  1  0  0x328
<br>      1  0  1  1  0x338
<br>      1  1  0  0  0x348
<br>      1  1  0  1  0x358
<br>      1  1  1  0  0x368
<br>      1  1  1  1  NOT ALLOWED!
<br>
<br>The ICN driver may be built into the kernel or as a module. Initialization
<br>depends on how the driver is built:
<br>
<br>Driver built into the kernel:
<br>
<br>  The ICN driver can be configured using the commandline-feature while
<br>  loading the kernel with LILO or LOADLIN. It accepts the following syntax:
<br>
<br>  icn=p,m[,idstring1[,idstring2]]
<br>
<br>  where
<br>
<br>    p = portbase      (default: 0x320)
<br>    m = shared memory (default: 0xd0000)
<br>
<br>  When using the ICN double card (4B), you MUST define TWO idstrings.
<br>  idstring must start with a character! There is no way for the driver
<br>  to distinguish between a 2B and 4B type card. Therefore, by supplying
<br>  TWO idstrings, you tell the driver that you have a 4B installed.
<br>  
<br>  If you like to use more than one card, you can use the program
<br>  "icnctrl" from the utility-package to configure additional cards.
<br>  You need to configure shared memory only once, since the icn-driver
<br>  maps all cards into the same address-space.
<br>
<br>  Using the "icnctrl"-utility, portbase and shared memory can also be
<br>  changed during runtime.
<br>
<br>  The D-channel protocol is configured by loading different firmware
<br>  into the card's memory using the "icnctrl"-utility.
<br>
<br>
<br>Driver built as module:
<br>
<br>  The module icn.o can be configured during "insmod'ing" it by
<br>  appending its parameters to the insmod-commandline. The following
<br>  syntax is accepted:
<br>
<br>    portbase=p membase=m icn_id=idstring [icn_id2=idstring2]
<br>
<br>  where p, m, idstring1 and idstring2 have the same meanings as the
<br>  parameters described for the kernel-version above.
<br>      
<br>  When using the ICN double card (4B), you MUST define TWO idstrings.
<br>  idstring must start with a character! There is no way for the driver
<br>  to distinguish between a 2B and 4B type card. Therefore, by supplying
<br>  TWO idstrings, you tell the driver that you have a 4B installed.
<br>  
<br>  Using the "icnctrl"-utility, the same features apply to the modularized
<br>  version like to the kernel-builtin one.
<br>
<br>  The D-channel protocol is configured by loading different firmware
<br>  into the card's memory using the "icnctrl"-utility.
<br>
<br>Loading the firmware into the card:
<br>
<br>  The firmware is supplied together with the isdn4k-utils package. It
<br>  can be found in the subdirectory icnctrl/firmware/
<br>
<br>  There are 3 files:
<br>
<br>    loadpg.bin   - Image of the bootstrap loader.
<br>    pc_1t_ca.bin - Image of firmware for german 1TR6 protocol.
<br>    pc_eu_ca.bin - Image if firmware for EDSS1 (Euro-ISDN) protocol.
<br>
<br>  Assuming you have installed the utility-package correctly, the firmware
<br>  will be downloaded into the 2B-card using the following command:
<br>
<br>    icnctrl -d Idstring load /etc/isdn/loadpg.bin /etc/isdn/pc_XX_ca.bin
<br>
<br>  where XX is either "1t" or "eu", depending on the D-Channel protocol
<br>  used on your S0-bus and Idstring is the Name of the card, given during
<br>  insmod-time or (for kernel-builtin driver) on the kernel commandline.
<br>
<br>  To load a 4B-card, the same command is used, except a second firmware
<br>  file is appended to the commandline of icnctrl.
<br>
<br>  -> After downloading firmware, the two LEDs at the back cover of the card
<br>     (ICN-4B: 4 LEDs) must be blinking intermittently now. If a connection
<br>     is up, the corresponding led is lit continuously.
<br>
<br>  For further documentation (adding more ICN-cards), refer to the manpage
<br>  icnctrl.8 which is included in the isdn4k-utils package.
<br>
<br><p></p><div class="separator"></div><br><p><h2>fsl-mc</h2></p>Copyright (C) 2015 Freescale Semiconductor Inc.
<br>
<br>DPAA2 (Data Path Acceleration Architecture Gen2)
<br>------------------------------------------------
<br>
<br>This document provides an overview of the Freescale DPAA2 architecture
<br>and how it is integrated into the Linux kernel.
<br>
<br>Contents summary
<br>   -DPAA2 overview
<br>   -Overview of DPAA2 objects
<br>   -DPAA2 Linux driver architecture overview
<br>        -bus driver
<br>        -DPRC driver
<br>        -allocator
<br>        -DPIO driver
<br>        -Ethernet
<br>        -MAC
<br>
<br>DPAA2 Overview
<br>--------------
<br>
<br>DPAA2 is a hardware architecture designed for high-speeed network
<br>packet processing.  DPAA2 consists of sophisticated mechanisms for
<br>processing Ethernet packets, queue management, buffer management,
<br>autonomous L2 switching, virtual Ethernet bridging, and accelerator
<br>(e.g. crypto) sharing.
<br>
<br>A DPAA2 hardware component called the Management Complex (or MC) manages the
<br>DPAA2 hardware resources.  The MC provides an object-based abstraction for
<br>software drivers to use the DPAA2 hardware.
<br>
<br>The MC uses DPAA2 hardware resources such as queues, buffer pools, and
<br>network ports to create functional objects/devices such as network
<br>interfaces, an L2 switch, or accelerator instances.
<br>
<br>The MC provides memory-mapped I/O command interfaces (MC portals)
<br>which DPAA2 software drivers use to operate on DPAA2 objects:
<br>
<br>The diagram below shows an overview of the DPAA2 resource management
<br>architecture:
<br>
<br>         +--------------------------------------+
<br>         |                  OS                  |
<br>         |                        DPAA2 drivers |
<br>         |                             |        |
<br>         +-----------------------------|--------+
<br>                                       |
<br>                                       | (create,discover,connect
<br>                                       |  config,use,destroy)
<br>                                       |
<br>                         DPAA2         |
<br>         +------------------------| mc portal |-+
<br>         |                             |        |
<br>         |   +- - - - - - - - - - - - -V- - -+  |
<br>         |   |                               |  |
<br>         |   |   Management Complex (MC)     |  |
<br>         |   |                               |  |
<br>         |   +- - - - - - - - - - - - - - - -+  |
<br>         |                                      |
<br>         | Hardware                  Hardware   |
<br>         | Resources                 Objects    |
<br>         | ---------                 -------    |
<br>         | -queues                   -DPRC      |
<br>         | -buffer pools             -DPMCP     |
<br>         | -Eth MACs/ports           -DPIO      |
<br>         | -network interface        -DPNI      |
<br>         |  profiles                 -DPMAC     |
<br>         | -queue portals            -DPBP      |
<br>         | -MC portals                ...       |
<br>         |  ...                                 |
<br>         |                                      |
<br>         +--------------------------------------+
<br>
<br>The MC mediates operations such as create, discover,
<br>connect, configuration, and destroy.  Fast-path operations
<br>on data, such as packet transmit/receive, are not mediated by
<br>the MC and are done directly using memory mapped regions in
<br>DPIO objects.
<br>
<br>Overview of DPAA2 Objects
<br>-------------------------
<br>The section provides a brief overview of some key DPAA2 objects.
<br>A simple scenario is described illustrating the objects involved
<br>in creating a network interfaces.
<br>
<br>-DPRC (Datapath Resource Container)
<br>
<br>    A DPRC is a container object that holds all the other
<br>    types of DPAA2 objects.  In the example diagram below there
<br>    are 8 objects of 5 types (DPMCP, DPIO, DPBP, DPNI, and DPMAC)
<br>    in the container.
<br>
<br>    +---------------------------------------------------------+
<br>    | DPRC                                                    |
<br>    |                                                         |
<br>    |  +-------+  +-------+  +-------+  +-------+  +-------+  |
<br>    |  | DPMCP |  | DPIO  |  | DPBP  |  | DPNI  |  | DPMAC |  |
<br>    |  +-------+  +-------+  +-------+  +---+---+  +---+---+  |
<br>    |  | DPMCP |  | DPIO  |                                   |
<br>    |  +-------+  +-------+                                   |
<br>    |  | DPMCP |                                              |
<br>    |  +-------+                                              |
<br>    |                                                         |
<br>    +---------------------------------------------------------+
<br>
<br>    From the point of view of an OS, a DPRC behaves similar to a plug and
<br>    play bus, like PCI.  DPRC commands can be used to enumerate the contents
<br>    of the DPRC, discover the hardware objects present (including mappable
<br>    regions and interrupts).
<br>
<br>     DPRC.1 (bus)
<br>       |
<br>       +--+--------+-------+-------+-------+
<br>          |        |       |       |       |
<br>        DPMCP.1  DPIO.1  DPBP.1  DPNI.1  DPMAC.1
<br>        DPMCP.2  DPIO.2
<br>        DPMCP.3
<br>
<br>    Hardware objects can be created and destroyed dynamically, providing
<br>    the ability to hot plug/unplug objects in and out of the DPRC.
<br>
<br>    A DPRC has a mappable MMIO region (an MC portal) that can be used
<br>    to send MC commands.  It has an interrupt for status events (like
<br>    hotplug).
<br>
<br>    All objects in a container share the same hardware "isolation context".
<br>    This means that with respect to an IOMMU the isolation granularity
<br>    is at the DPRC (container) level, not at the individual object
<br>    level.
<br>
<br>    DPRCs can be defined statically and populated with objects
<br>    via a config file passed to the MC when firmware starts
<br>    it.  There is also a Linux user space tool called "restool"
<br>    that can be used to create/destroy containers and objects
<br>    dynamically.
<br>
<br>-DPAA2 Objects for an Ethernet Network Interface
<br>
<br>    A typical Ethernet NIC is monolithic-- the NIC device contains TX/RX
<br>    queuing mechanisms, configuration mechanisms, buffer management,
<br>    physical ports, and interrupts.  DPAA2 uses a more granular approach
<br>    utilizing multiple hardware objects.  Each object provides specialized
<br>    functions. Groups of these objects are used by software to provide
<br>    Ethernet network interface functionality.  This approach provides
<br>    efficient use of finite hardware resources, flexibility, and
<br>    performance advantages.
<br>
<br>    The diagram below shows the objects needed for a simple
<br>    network interface configuration on a system with 2 CPUs.
<br>
<br>              +---+---+ +---+---+
<br>                 CPU0     CPU1
<br>              +---+---+ +---+---+
<br>                  |         |
<br>              +---+---+ +---+---+
<br>                 DPIO     DPIO
<br>              +---+---+ +---+---+
<br>                    \     /
<br>                     \   /
<br>                      \ /
<br>                   +---+---+
<br>                      DPNI  --- DPBP,DPMCP
<br>                   +---+---+
<br>                       |
<br>                       |
<br>                   +---+---+
<br>                     DPMAC
<br>                   +---+---+
<br>                       |
<br>                    port/PHY
<br>
<br>    Below the objects are described.  For each object a brief description
<br>    is provided along with a summary of the kinds of operations the object
<br>    supports and a summary of key resources of the object (MMIO regions
<br>    and IRQs).
<br>
<br>       -DPMAC (Datapath Ethernet MAC): represents an Ethernet MAC, a
<br>        hardware device that connects to an Ethernet PHY and allows
<br>        physical transmission and reception of Ethernet frames.
<br>           -MMIO regions: none
<br>           -IRQs: DPNI link change
<br>           -commands: set link up/down, link config, get stats,
<br>            IRQ config, enable, reset
<br>
<br>       -DPNI (Datapath Network Interface): contains TX/RX queues,
<br>        network interface configuration, and RX buffer pool configuration
<br>        mechanisms.  The TX/RX queues are in memory and are identified by
<br>        queue number.
<br>           -MMIO regions: none
<br>           -IRQs: link state
<br>           -commands: port config, offload config, queue config,
<br>            parse/classify config, IRQ config, enable, reset
<br>
<br>       -DPIO (Datapath I/O): provides interfaces to enqueue and dequeue
<br>        packets and do hardware buffer pool management operations.  The DPAA2
<br>        architecture separates the mechanism to access queues (the DPIO object)
<br>        from the queues themselves.  The DPIO provides an MMIO interface to
<br>        enqueue/dequeue packets.  To enqueue something a descriptor is written
<br>        to the DPIO MMIO region, which includes the target queue number.
<br>        There will typically be one DPIO assigned to each CPU.  This allows all
<br>        CPUs to simultaneously perform enqueue/dequeued operations.  DPIOs are
<br>        expected to be shared by different DPAA2 drivers.
<br>           -MMIO regions: queue operations, buffer management
<br>           -IRQs: data availability, congestion notification, buffer
<br>                  pool depletion
<br>           -commands: IRQ config, enable, reset
<br>
<br>       -DPBP (Datapath Buffer Pool): represents a hardware buffer
<br>        pool.
<br>           -MMIO regions: none
<br>           -IRQs: none
<br>           -commands: enable, reset
<br>
<br>       -DPMCP (Datapath MC Portal): provides an MC command portal.
<br>        Used by drivers to send commands to the MC to manage
<br>        objects.
<br>           -MMIO regions: MC command portal
<br>           -IRQs: command completion
<br>           -commands: IRQ config, enable, reset
<br>
<br>    Object Connections
<br>    ------------------
<br>    Some objects have explicit relationships that must
<br>    be configured:
<br>
<br>       -DPNI <--> DPMAC
<br>       -DPNI <--> DPNI
<br>       -DPNI <--> L2-switch-port
<br>          A DPNI must be connected to something such as a DPMAC,
<br>          another DPNI, or L2 switch port.  The DPNI connection
<br>          is made via a DPRC command.
<br>
<br>              +-------+  +-------+
<br>              | DPNI  |  | DPMAC |
<br>              +---+---+  +---+---+
<br>                  |          |
<br>                  +==========+
<br>
<br>       -DPNI <--> DPBP
<br>          A network interface requires a 'buffer pool' (DPBP
<br>          object) which provides a list of pointers to memory
<br>          where received Ethernet data is to be copied.  The
<br>          Ethernet driver configures the DPBPs associated with
<br>          the network interface.
<br>
<br>    Interrupts
<br>    ----------
<br>    All interrupts generated by DPAA2 objects are message
<br>    interrupts.  At the hardware level message interrupts
<br>    generated by devices will normally have 3 components--
<br>    1) a non-spoofable 'device-id' expressed on the hardware
<br>    bus, 2) an address, 3) a data value.
<br>
<br>    In the case of DPAA2 devices/objects, all objects in the
<br>    same container/DPRC share the same 'device-id'.
<br>    For ARM-based SoC this is the same as the stream ID.
<br>
<br>
<br>DPAA2 Linux Driver Overview
<br>---------------------------
<br>
<br>This section provides an overview of the Linux kernel drivers for
<br>DPAA2-- 1) the bus driver and associated "DPAA2 infrastructure"
<br>drivers and 2) functional object drivers (such as Ethernet).
<br>
<br>As described previously, a DPRC is a container that holds the other
<br>types of DPAA2 objects.  It is functionally similar to a plug-and-play
<br>bus controller.
<br>
<br>Each object in the DPRC is a Linux "device" and is bound to a driver.
<br>The diagram below shows the Linux drivers involved in a networking
<br>scenario and the objects bound to each driver.  A brief description
<br>of each driver follows.
<br>
<br>                                             +------------+
<br>                                             | OS Network |
<br>                                             |   Stack    |
<br>                 +------------+              +------------+
<br>                 | Allocator  |. . . . . . . |  Ethernet  |
<br>                 |(DPMCP,DPBP)|              |   (DPNI)   |
<br>                 +-.----------+              +---+---+----+
<br>                  .          .                   ^   |
<br>                 .            .     <data avail, |   |<enqueue,
<br>                .              .     tx confirm> |   | dequeue>
<br>    +-------------+             .                |   |
<br>    | DPRC driver |              .           +---+---V----+     +---------+
<br>    |   (DPRC)    |               . . . . . .| DPIO driver|     |   MAC   |
<br>    +----------+--+                          |  (DPIO)    |     | (DPMAC) |
<br>               |                             +------+-----+     +-----+---+
<br>               |<dev add/remove>                    |                 |
<br>               |                                    |                 |
<br>          +----+--------------+                     |              +--+---+
<br>          |   MC-bus driver   |                     |              | PHY  |
<br>          |                   |                     |              |driver|
<br>          | /soc/fsl-mc       |                     |              +--+---+
<br>          +-------------------+                     |                 |
<br>                                                    |                 |
<br> ================================ HARDWARE =========|=================|======
<br>                                                  DPIO                |
<br>                                                    |                 |
<br>                                                  DPNI---DPBP         |
<br>                                                    |                 |
<br>                                                  DPMAC               |
<br>                                                    |                 |
<br>                                                   PHY ---------------+
<br> ===================================================|========================
<br>
<br>A brief description of each driver is provided below.
<br>
<br>    MC-bus driver
<br>    -------------
<br>    The MC-bus driver is a platform driver and is probed from a
<br>    node in the device tree (compatible "fsl,qoriq-mc") passed in by boot
<br>    firmware.  It is responsible for bootstrapping the DPAA2 kernel
<br>    infrastructure.
<br>    Key functions include:
<br>       -registering a new bus type named "fsl-mc" with the kernel,
<br>        and implementing bus call-backs (e.g. match/uevent/dev_groups)
<br>       -implementing APIs for DPAA2 driver registration and for device
<br>        add/remove
<br>       -creates an MSI IRQ domain
<br>       -doing a 'device add' to expose the 'root' DPRC, in turn triggering
<br>        a bind of the root DPRC to the DPRC driver
<br>
<br>    DPRC driver
<br>    -----------
<br>    The DPRC driver is bound to DPRC objects and does runtime management
<br>    of a bus instance.  It performs the initial bus scan of the DPRC
<br>    and handles interrupts for container events such as hot plug by
<br>    re-scanning the DPRC.
<br>
<br>    Allocator
<br>    ----------
<br>    Certain objects such as DPMCP and DPBP are generic and fungible,
<br>    and are intended to be used by other drivers.  For example,
<br>    the DPAA2 Ethernet driver needs:
<br>       -DPMCPs to send MC commands, to configure network interfaces
<br>       -DPBPs for network buffer pools
<br>
<br>    The allocator driver registers for these allocatable object types
<br>    and those objects are bound to the allocator when the bus is probed.
<br>    The allocator maintains a pool of objects that are available for
<br>    allocation by other DPAA2 drivers.
<br>
<br>    DPIO driver
<br>    -----------
<br>    The DPIO driver is bound to DPIO objects and provides services that allow
<br>    other drivers such as the Ethernet driver to enqueue and dequeue data for
<br>    their respective objects.
<br>    Key services include:
<br>        -data availability notifications
<br>        -hardware queuing operations (enqueue and dequeue of data)
<br>        -hardware buffer pool management
<br>
<br>    To transmit a packet the Ethernet driver puts data on a queue and
<br>    invokes a DPIO API.  For receive, the Ethernet driver registers
<br>    a data availability notification callback.  To dequeue a packet
<br>    a DPIO API is used.
<br>
<br>    There is typically one DPIO object per physical CPU for optimum
<br>    performance, allowing different CPUs to simultaneously enqueue
<br>    and dequeue data.
<br>
<br>    The DPIO driver operates on behalf of all DPAA2 drivers
<br>    active in the kernel--  Ethernet, crypto, compression,
<br>    etc.
<br>
<br>    Ethernet
<br>    --------
<br>    The Ethernet driver is bound to a DPNI and implements the kernel
<br>    interfaces needed to connect the DPAA2 network interface to
<br>    the network stack.
<br>
<br>    Each DPNI corresponds to a Linux network interface.
<br>
<br>    MAC driver
<br>    ----------
<br>    An Ethernet PHY is an off-chip, board specific component and is managed
<br>    by the appropriate PHY driver via an mdio bus.  The MAC driver
<br>    plays a role of being a proxy between the PHY driver and the
<br>    MC.  It does this proxy via the MC commands to a DPMAC object.
<br>    If the PHY driver signals a link change, the MAC driver notifies
<br>    the MC via a DPMAC command.  If a network interface is brought
<br>    up or down, the MC notifies the DPMAC driver via an interrupt and
<br>    the driver can take appropriate action.
<br><p></p><div class="separator"></div><br><p><h2>gs_fpgaboot</h2></p>==============================================================================
<br>Linux Driver Source for Xilinx FPGA firmware download
<br>==============================================================================
<br>
<br>
<br>TABLE OF CONTENTS.
<br>
<br>1.  SUMMARY
<br>2.  BACKGROUND
<br>3.  DESIGN
<br>4.  HOW TO USE
<br>5.  REFERENCE
<br>
<br>1. SUMMARY
<br>
<br>	- Download Xilinx FPGA firmware
<br>	- This module downloads Xilinx FPGA firmware using gpio pins.
<br>
<br>2. BACKGROUND
<br>
<br>	An FPGA (Field Programmable Gate Array) is a programmable hardware that is
<br>	used in various applications. Hardware design needs to programmed through
<br>	a dedicated device or CPU assisted way (serial or parallel).
<br>	This driver provides a way to download FPGA firmware.
<br>
<br>3. DESIGN
<br>
<br>	- load Xilinx FPGA bitstream format[1] firmware image file using
<br>	  kernel firmware framework, request_firmware()
<br>	- program the Xilinx FPGA using SelectMAP (parallel) mode [2]
<br>	- FPGA prgram is done by gpio based bit-banging, as an example
<br>	- platform independent file: gs_fpgaboot.c
<br>	- platform dependent file: io.c
<br>
<br>4. HOW TO USE
<br>
<br>	$ insmod gs_fpga.ko file="xlinx_fpga_top_bitstream.bit"
<br>	$ rmmod gs_fpga
<br>
<br>5. USE CASE (from a mailing list discussion with Greg)
<br>
<br>	a. As a FPGA development support tool,
<br>	During FPGA firmware development, you need to download a new FPGA
<br>	image frequently.
<br>	You would do that with a dedicated JTAG, which usually a limited
<br>	resource in the lab.
<br>	However, if you use my driver, you don't have to have a dedicated JTAG.
<br>	This is a real gain :)
<br>
<br>	b. For the FPGA that runs without config after the download, which
<br>	doesn't talk to any of Linux interfaces (such as PCIE).
<br>
<br>	We download FPGA firmware from user triggered or some other way, and that's it.
<br>	Since that FPGA runs on its own, it doesn't require a linux driver
<br>	after the download.
<br>
<br>	c. For the FPGA that requires config after the download, which talk to
<br>	any of linux interfaces (such as PCIE)
<br>
<br>	Then, this type of FPGA config can be put into device tree and have a
<br>	separate driver (pcie or others), then THAT driver calls my driver to
<br>	download FPGA firmware during the Linux boot, the take over the device
<br>	through the interface.
<br>
<br>6. REFERENCE
<br>
<br>	1. Xilinx APP NOTE XAPP583:
<br>	  http://www.xilinx.com/support/documentation/application_notes/xapp583-fpga-configuration.pdf
<br>	2. bitstream file info:
<br>	  http://home.earthlink.net/~davesullins/software/bitinfo.html
<br><p></p><div class="separator"></div><br><p><h2>bcma</h2></p>Broadcom introduced new bus as replacement for older SSB. It is based on AMBA,
<br>however from programming point of view there is nothing AMBA specific we use.
<br>
<br>Standard AMBA drivers are platform specific, have hardcoded addresses and use
<br>AMBA standard fields like CID and PID.
<br>
<br>In case of Broadcom's cards every device consists of:
<br>1) Broadcom specific AMBA device. It is put on AMBA bus, but can not be treated
<br>   as standard AMBA device. Reading it's CID or PID can cause machine lockup.
<br>2) AMBA standard devices called ports or wrappers. They have CIDs (AMBA_CID)
<br>   and PIDs (0x103BB369), but we do not use that info for anything. One of that
<br>   devices is used for managing Broadcom specific core.
<br>
<br>Addresses of AMBA devices are not hardcoded in driver and have to be read from
<br>EPROM.
<br>
<br>In this situation we decided to introduce separated bus. It can contain up to
<br>16 devices identified by Broadcom specific fields: manufacturer, id, revision
<br>and class.
<br><p></p><div class="separator"></div><br><p><h2>lguest</h2></p>Welcome, friend reader, to lguest.
<br>
<br>Lguest is an adventure, with you, the reader, as Hero.  I can't think of many
<br>5000-line projects which offer both such capability and glimpses of future
<br>potential; it is an exciting time to be delving into the source!
<br>
<br>But be warned; this is an arduous journey of several hours or more!  And as we
<br>know, all true Heroes are driven by a Noble Goal.  Thus I offer a Beer (or
<br>equivalent) to anyone I meet who has completed this documentation.
<br>
<br>So get comfortable and keep your wits about you (both quick and humorous).
<br>Along your way to the Noble Goal, you will also gain masterly insight into
<br>lguest, and hypervisors and x86 virtualization in general.
<br>
<br>Our Quest is in seven parts: (best read with C highlighting turned on)
<br>
<br>I) Preparation
<br>	- In which our potential hero is flown quickly over the landscape for a
<br>	  taste of its scope.  Suitable for the armchair coders and other such
<br>	  persons of faint constitution.
<br>
<br>II) Guest
<br>	- Where we encounter the first tantalising wisps of code, and come to
<br>	  understand the details of the life of a Guest kernel.
<br>
<br>III) Drivers
<br>	- Whereby the Guest finds its voice and become useful, and our
<br>	  understanding of the Guest is completed.
<br>
<br>IV) Launcher
<br>	- Where we trace back to the creation of the Guest, and thus begin our
<br>	  understanding of the Host.
<br>
<br>V) Host
<br>	- Where we master the Host code, through a long and tortuous journey.
<br>	  Indeed, it is here that our hero is tested in the Bit of Despair.
<br>
<br>VI) Switcher
<br>	- Where our understanding of the intertwined nature of Guests and Hosts
<br>	  is completed.
<br>
<br>VII) Mastery
<br>	- Where our fully fledged hero grapples with the Great Question:
<br>	  "What next?"
<br>
<br>make Preparation!
<br>Rusty Russell.
<br><p></p><div class="separator"></div><br><p><h2>mwifiex</h2></p># Copyright (C) 2011-2014, Marvell International Ltd.
<br>#
<br># This software file (the "File") is distributed by Marvell International
<br># Ltd. under the terms of the GNU General Public License Version 2, June 1991
<br># (the "License").  You may use, redistribute and/or modify this File in
<br># accordance with the terms and conditions of the License, a copy of which
<br># is available by writing to the Free Software Foundation, Inc.,
<br># 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA or on the
<br># worldwide web at http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt.
<br>#
<br># THE FILE IS DISTRIBUTED AS-IS, WITHOUT WARRANTY OF ANY KIND, AND THE
<br># IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE
<br># ARE EXPRESSLY DISCLAIMED.  The License provides additional details about
<br># this warranty disclaimer.
<br>
<br>
<br>===============================================================================
<br>			U S E R  M A N U A L
<br>
<br>1) FOR DRIVER INSTALL
<br>
<br>	a) Copy sd8787.bin to /lib/firmware/mrvl/ directory,
<br>	   create the directory if it doesn't exist.
<br>	b) Install WLAN driver,
<br>		insmod mwifiex.ko
<br>	c) Uninstall WLAN driver,
<br>		ifconfig mlanX down
<br>		rmmod mwifiex
<br>
<br>
<br>2) FOR DRIVER CONFIGURATION AND INFO
<br>	The configurations can be done either using the 'iw' user space
<br>	utility or debugfs.
<br>
<br>	a) 'iw' utility commands
<br>
<br>	Following are some useful iw commands:-
<br>
<br>iw dev mlan0 scan
<br>
<br>	This command will trigger a scan.
<br>	The command will then display the scan table entries
<br>
<br>iw dev mlan0 connect -w <SSID> [<freq in MHz>] [<bssid>] [key 0:abcde d:1123456789a]
<br>	The above command can be used to connect to an AP with a particular SSID.
<br>	Ap's operating frequency can be specified or even the bssid. If the AP is using
<br>	WEP encryption, wep keys can be specified in the command.
<br>	Note: Every time before connecting to an AP scan command (iw dev mlan0 scan) should be used by user.
<br>
<br>iw dev mlan0 disconnect
<br>	This command will be used to disconnect from an AP.
<br>
<br>
<br>iw dev mlan0 ibss join <SSID> <freq in MHz> [fixed-freq] [fixed-bssid] [key 0:abcde]
<br>	The command will be used to join or create an ibss. Optionally, operating frequency,
<br>	bssid and the security related parameters can be specified while joining/creating
<br>	and ibss.
<br>
<br>iw dev mlan0 ibss leave
<br>	The command will be used to leave an ibss network.
<br>
<br>iw dev mlan0 link
<br>	The command will be used to get the connection status. The command will return parameters
<br>	such as SSID, operating frequency, rx/tx packets, signal strength, tx bitrate.
<br>
<br>	Apart from the iw utility all standard configurations using the 'iwconfig' utility are also supported.
<br>
<br>	b) Debugfs interface
<br>
<br>	The debugfs interface can be used for configurations and for getting
<br>	some useful information from the driver.
<br>	The section below explains the configurations that can be
<br>	done.
<br>
<br>	Mount debugfs to /debugfs mount point:
<br>
<br>		mkdir /debugfs
<br>		mount -t debugfs debugfs /debugfs
<br>
<br>	The information is provided in /debugfs/mwifiex/mlanX/:
<br>
<br>iw reg set <country code>
<br>	The command will be used to change the regulatory domain.
<br>
<br>iw reg get
<br>	The command will be used to get current regulatory domain.
<br>
<br>info
<br>	This command is used to get driver info.
<br>
<br>	Usage:
<br>		cat info
<br>
<br>	driver_name = "mwifiex"
<br>	driver_version = <driver_name, driver_version, (firmware_version)>
<br>	interface_name = "mlanX"
<br>	bss_mode = "Ad-hoc" | "Managed" | "Auto" | "Unknown"
<br>	media_state = "Disconnected" | "Connected"
<br>	mac_address = <6-byte adapter MAC address>
<br>	multicase_count = <multicast address count>
<br>	essid = <current SSID>
<br>	bssid = <current BSSID>
<br>	channel = <current channel>
<br>	region_code = <current region code>
<br>	multicasr_address[n] = <multicast address>
<br>	num_tx_bytes = <number of bytes sent to device>
<br>	num_rx_bytes = <number of bytes received from device and sent to kernel>
<br>	num_tx_pkts = <number of packets sent to device>
<br>	num_rx_pkts = <number of packets received from device and sent to kernel>
<br>	num_tx_pkts_dropped = <number of Tx packets dropped by driver>
<br>	num_rx_pkts_dropped = <number of Rx packets dropped by driver>
<br>	num_tx_pkts_err = <number of Tx packets failed to send to device>
<br>	num_rx_pkts_err = <number of Rx packets failed to receive from device>
<br>	carrier "on" | "off"
<br>	tx queue "stopped" | "started"
<br>
<br>	The following debug info are provided in /debugfs/mwifiex/mlanX/debug:
<br>
<br>	int_counter = <interrupt count, cleared when interrupt handled>
<br>	wmm_ac_vo = <number of packets sent to device from WMM AcVo queue>
<br>	wmm_ac_vi = <number of packets sent to device from WMM AcVi queue>
<br>	wmm_ac_be = <number of packets sent to device from WMM AcBE queue>
<br>	wmm_ac_bk = <number of packets sent to device from WMM AcBK queue>
<br>	tx_buf_size = <current Tx buffer size>
<br>	curr_tx_buf_size = <current Tx buffer size>
<br>	ps_mode = <0/1, CAM mode/PS mode>
<br>	ps_state = <0/1/2/3, full power state/awake state/pre-sleep state/sleep state>
<br>	is_deep_sleep = <0/1, not deep sleep state/deep sleep state>
<br>	wakeup_dev_req = <0/1, wakeup device not required/required>
<br>	wakeup_tries = <wakeup device count, cleared when device awake>
<br>	hs_configured = <0/1, host sleep not configured/configured>
<br>	hs_activated = <0/1, extended host sleep not activated/activated>
<br>	num_tx_timeout = <number of Tx timeout>
<br>	is_cmd_timedout = <0/1 command timeout not occurred/occurred>
<br>	timeout_cmd_id = <command id of the last timeout command>
<br>	timeout_cmd_act = <command action of the last timeout command>
<br>	last_cmd_id = <command id of the last several commands sent to device>
<br>	last_cmd_act = <command action of the last several commands sent to device>
<br>	last_cmd_index = <0 based last command index>
<br>	last_cmd_resp_id = <command id of the last several command responses received from device>
<br>	last_cmd_resp_index = <0 based last command response index>
<br>	last_event = <event id of the last several events received from device>
<br>	last_event_index = <0 based last event index>
<br>	num_cmd_h2c_fail = <number of commands failed to send to device>
<br>	num_cmd_sleep_cfm_fail = <number of sleep confirm failed to send to device>
<br>	num_tx_h2c_fail = <number of data packets failed to send to device>
<br>	num_evt_deauth = <number of deauthenticated events received from device>
<br>	num_evt_disassoc = <number of disassociated events received from device>
<br>	num_evt_link_lost = <number of link lost events received from device>
<br>	num_cmd_deauth = <number of deauthenticate commands sent to device>
<br>	num_cmd_assoc_ok = <number of associate commands with success return>
<br>	num_cmd_assoc_fail = <number of associate commands with failure return>
<br>	cmd_sent = <0/1, send command resources available/sending command to device>
<br>	data_sent = <0/1, send data resources available/sending data to device>
<br>	mp_rd_bitmap = <SDIO multi-port read bitmap>
<br>	mp_wr_bitmap = <SDIO multi-port write bitmap>
<br>	cmd_resp_received = <0/1, no cmd response to process/response received and yet to process>
<br>	event_received = <0/1, no event to process/event received and yet to process>
<br>	cmd_pending = <number of cmd pending>
<br>	tx_pending = <number of Tx packet pending>
<br>	rx_pending = <number of Rx packet pending>
<br>
<br>
<br>3) FOR DRIVER CONFIGURATION
<br>
<br>regrdwr
<br>	This command is used to read/write the adapter register.
<br>
<br>	Usage:
<br>		echo " <type> <offset> [value]" > regrdwr
<br>		cat regrdwr
<br>
<br>	where the parameters are,
<br>		<type>:     1:MAC/SOC, 2:BBP, 3:RF, 4:PMIC, 5:CAU
<br>		<offset>:   offset of register
<br>		[value]:    value to be written
<br>
<br>	Examples:
<br>		echo "1 0xa060" > regrdwr           : Read the MAC register
<br>		echo "1 0xa060 0x12" > regrdwr      : Write the MAC register
<br>		echo "1 0xa794 0x80000000" > regrdwr
<br>		                                    : Write 0x80000000 to MAC register
<br>rdeeprom
<br>	This command is used to read the EEPROM contents of the card.
<br>
<br>	Usage:
<br>		echo "<offset> <length>" > rdeeprom
<br>		cat rdeeprom
<br>
<br>	where the parameters are,
<br>		<offset>:   multiples of 4
<br>		<length>:   4-20, multiples of 4
<br>
<br>	Example:
<br>		echo "0 20" > rdeeprom      : Read 20 bytes of EEPROM data from offset 0
<br>
<br>hscfg
<br>	This command is used to debug/simulate host sleep feature using
<br>	different configuration parameters.
<br>
<br>	Usage:
<br>		echo "<condition> [GPIO# [gap]]]" > hscfg
<br>		cat hscfg
<br>
<br>	where the parameters are,
<br>		<condition>: bit 0 = 1   -- broadcast data
<br>			     bit 1 = 1   -- unicast data
<br>			     bit 2 = 1   -- mac event
<br>			     bit 3 = 1   -- multicast data
<br>		[GPIO#]: pin number of GPIO used to wakeup the host.
<br>			 GPIO pin# (e.g. 0-7) or 0xff (interface, e.g. SDIO
<br>			 will be used instead).
<br>		[gap]:   the gap in milliseconds between wakeup signal and
<br>			 wakeup event or 0xff for special setting (host
<br>			 acknowledge required) when GPIO is used to wakeup host.
<br>
<br>	Examples:
<br>		echo "-1" > hscfg        : Cancel host sleep mode
<br>		echo "3" > hscfg         : Broadcast and unicast data;
<br>					   Use GPIO and gap set previously
<br>		echo "2 3" > hscfg       : Unicast data and GPIO 3;
<br>					   Use gap set previously
<br>		echo "2 1 160" > hscfg   : Unicast data, GPIO 1 and gap 160 ms
<br>		echo "2 1 0xff" > hscfg  : Unicast data, GPIO 1; Wait for host
<br>					   to ack before sending wakeup event
<br>
<br>getlog
<br>        This command is used to get the statistics available in the station.
<br>	Usage:
<br>
<br>	cat getlog
<br>
<br>device_dump
<br>	This command is used to dump driver information and firmware memory
<br>	segments.
<br>	Usage:
<br>
<br>	cat fw_dump
<br>
<br>verext
<br>	This command is used to get extended firmware version string using
<br>	different configuration parameters.
<br>
<br>	Usage:
<br>		echo "[version_str_sel]" > verext
<br>		cat verext
<br>
<br>		[version_str_sel]: firmware support several extend version
<br>				   string cases, include 0/1/10/20/21/99
<br>===============================================================================
<br><p></p><div class="separator"></div><br><p><h2>libertas</h2></p>================================================================================
<br>			README for Libertas
<br>
<br> (c) Copyright © 2003-2006, Marvell International Ltd.
<br> All Rights Reserved
<br>
<br> This software file (the "File") is distributed by Marvell International
<br> Ltd. under the terms of the GNU General Public License Version 2, June 1991
<br> (the "License").  You may use, redistribute and/or modify this File in
<br> accordance with the terms and conditions of the License, a copy of which
<br> is available along with the File in the license.txt file or on the worldwide
<br> web at http://www.gnu.org/licenses/gpl.txt.
<br>
<br> THE FILE IS DISTRIBUTED AS-IS, WITHOUT WARRANTY OF ANY KIND, AND THE
<br> IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE
<br> ARE EXPRESSLY DISCLAIMED.  The License provides additional details about
<br> this warranty disclaimer.
<br>================================================================================
<br>
<br>=====================
<br>DRIVER LOADING
<br>=====================
<br>
<br>	o. Copy the firmware image (e.g. usb8388.bin) to /lib/firmware/
<br>
<br>	o. Load driver by using the following command:
<br>
<br>		insmod usb8388.ko [fw_name=usb8388.bin]
<br>
<br>=========================
<br>ETHTOOL
<br>=========================
<br>
<br>
<br>Use the -i option to retrieve version information from the driver.
<br>
<br># ethtool -i eth0
<br>driver: libertas
<br>version: COMM-USB8388-318.p4
<br>firmware-version: 5.110.7
<br>bus-info:
<br>
<br>Use the -e option to read the EEPROM contents of the card.
<br>
<br>	Usage:
<br>	ethtool -e ethX [raw on|off] [offset N] [length N]
<br>
<br>       -e     retrieves and prints an EEPROM dump for the  specified  ethernet
<br>              device.   When raw is enabled, then it dumps the raw EEPROM data
<br>              to stdout. The length and offset parameters allow  dumping  cer-
<br>              tain portions of the EEPROM.  Default is to dump the entire EEP-
<br>              ROM.
<br>
<br># ethtool -e eth0 offset 0 length 16
<br>Offset          Values
<br>------          ------
<br>0x0000          38 33 30 58 00 00 34 f4 00 00 10 00 00 c4 17 00
<br>
<br>========================
<br>DEBUGFS COMMANDS
<br>========================
<br>
<br>those commands are used via debugfs interface
<br>
<br>===========
<br>rdmac
<br>rdbbp
<br>rdrf
<br>	These commands are used to read the MAC, BBP and RF registers from the
<br>	card.  These commands take one parameter that specifies the offset
<br>	location that is to be read.  This parameter must be specified in
<br>	hexadecimal (its possible to precede preceding the number with a "0x").
<br>
<br>	Path: /sys/kernel/debug/libertas_wireless/ethX/registers/
<br>
<br>	Usage:
<br>		echo "0xa123" > rdmac ; cat rdmac
<br>		echo "0xa123" > rdbbp ; cat rdbbp
<br>		echo "0xa123" > rdrf ; cat rdrf
<br>wrmac
<br>wrbbp
<br>wrrf
<br>	These commands are used to write the MAC, BBP and RF registers in the
<br>	card.  These commands take two parameters that specify the offset
<br>	location and the value that is to be written. This parameters must
<br>	be specified in hexadecimal (its possible to precede the number
<br>	with a "0x").
<br>
<br>	Usage:
<br>		echo "0xa123 0xaa" > wrmac
<br>		echo "0xa123 0xaa" > wrbbp
<br>		echo "0xa123 0xaa" > wrrf
<br>
<br>sleepparams
<br>	This command is used to set the sleepclock configurations
<br>
<br>	Path: /sys/kernel/debug/libertas_wireless/ethX/
<br>
<br>	Usage:
<br>		cat sleepparams: reads the current sleepclock configuration
<br>
<br>		echo "p1 p2 p3 p4 p5 p6" > sleepparams: writes the sleepclock configuration.
<br>
<br>		where:
<br>			p1 is Sleep clock error in ppm (0-65535)
<br>			p2 is Wakeup offset in usec (0-65535)
<br>			p3 is Clock stabilization time in usec (0-65535)
<br>			p4 is Control periodic calibration (0-2)
<br>			p5 is Control the use of external sleep clock (0-2)
<br>			p6 is reserved for debug (0-65535)
<br>
<br>subscribed_events
<br>
<br>	The subscribed_events directory contains the interface for the
<br>	subscribed events API.
<br>
<br>	Path: /sys/kernel/debug/libertas_wireless/ethX/subscribed_events/
<br>
<br>	Each event is represented by a filename. Each filename consists of the
<br>	following three fields:
<br>	Value Frequency Subscribed
<br>
<br>	To read the current values for a given event, do:
<br>		cat event
<br>	To set the current values, do:
<br>		echo "60 2 1" > event
<br>
<br>	Frequency field specifies the reporting frequency for this event.
<br>	If it is set to 0, then the event is reported only once, and then
<br>	automatically unsubscribed. If it is set to 1, then the event is
<br>	reported every time it occurs. If it is set to N, then the event is
<br>	reported every Nth time it occurs.
<br>
<br>	beacon_missed
<br>	Value field specifies the number of consecutive missing beacons which
<br>	triggers the LINK_LOSS event. This event is generated only once after
<br>	which the firmware resets its state. At initialization, the LINK_LOSS
<br>	event is subscribed by default. The default value of MissedBeacons is
<br>	60.
<br>
<br>	failure_count
<br>	Value field specifies the consecutive failure count threshold which
<br>	triggers the generation of the MAX_FAIL event. Once this event is
<br>	generated, the consecutive failure count is reset to 0.
<br>	At initialization, the MAX_FAIL event is NOT subscribed by
<br>	default.
<br>
<br>	high_rssi
<br>	This event is generated when the average received RSSI in beacons goes
<br>	above a threshold, specified by Value.
<br>
<br>	low_rssi
<br>	This event is generated when the average received RSSI in beacons goes
<br>	below a threshold, specified by Value.
<br>
<br>	high_snr
<br>	This event is generated when the average received SNR in beacons goes
<br>	above a threshold, specified by Value.
<br>
<br>	low_snr
<br>	This event is generated when the average received SNR in beacons goes
<br>	below a threshold, specified by Value.
<br>
<br>extscan
<br>	This command is used to do a specific scan.
<br>
<br>	Path: /sys/kernel/debug/libertas_wireless/ethX/
<br>
<br>	Usage: echo "SSID" > extscan
<br>
<br>	Example:
<br>		echo "LINKSYS-AP" > extscan
<br>
<br>	To see the results of use getscantable command.
<br>
<br>getscantable
<br>
<br>	Display the current contents of the driver scan table (ie. get the
<br>	scan results).
<br>
<br>	Path: /sys/kernel/debug/libertas_wireless/ethX/
<br>
<br>	Usage:
<br>		cat getscantable
<br>
<br>setuserscan
<br>	Initiate a customized scan and retrieve the results
<br>
<br>
<br>	Path: /sys/kernel/debug/libertas_wireless/ethX/
<br>
<br>    Usage:
<br>       echo "[ARGS]" > setuserscan
<br>
<br>         where [ARGS]:
<br>
<br>      bssid=xx:xx:xx:xx:xx:xx  specify a BSSID filter for the scan
<br>      ssid="[SSID]"            specify a SSID filter for the scan
<br>      keep=[0 or 1]            keep the previous scan results (1), discard (0)
<br>      dur=[scan time]          time to scan for each channel in milliseconds
<br>      type=[1,2,3]             BSS type: 1 (Infra), 2(Adhoc), 3(Any)
<br>
<br>    Any combination of the above arguments can be supplied on the command
<br>    line. If dur tokens are absent, the driver default setting will be used.
<br>    The bssid and ssid fields, if blank, will produce an unfiltered scan.
<br>    The type field will default to 3 (Any) and the keep field will default
<br>    to 0 (Discard).
<br>
<br>    Examples:
<br>    1) Perform a passive scan on all channels for 20 ms per channel:
<br>            echo "dur=20" > setuserscan
<br>
<br>    2) Perform an active scan for a specific SSID:
<br>            echo "ssid="TestAP"" > setuserscan
<br>
<br>    3) Scan all available channels (B/G, A bands) for a specific BSSID, keep
<br>       the current scan table intact, update existing or append new scan data:
<br>            echo "bssid=00:50:43:20:12:82 keep=1" > setuserscan
<br>
<br>    4) Scan for all infrastructure networks.
<br>       Keep the previous scan table intact. Update any duplicate BSSID/SSID
<br>       matches with the new scan data:
<br>            echo "type=1 keep=1" > setuserscan
<br>
<br>    All entries in the scan table (not just the new scan data when keep=1)
<br>    will be displayed upon completion by use of the getscantable ioctl.
<br>
<br>hostsleep
<br>	This command is used to enable/disable host sleep.
<br>	Note: Host sleep parameters should be configured using
<br>	"ethtool -s ethX wol X" command before enabling host sleep.
<br>
<br>	Path: /sys/kernel/debug/libertas_wireless/ethX/
<br>
<br>	Usage:
<br>		cat hostsleep: reads the current hostsleep state
<br>		echo "1" > hostsleep : enable host sleep.
<br>		echo "0" > hostsleep : disable host sleep
<br>
<br><p></p><div class="separator"></div><br><p><h2>decnet</h2></p>                       Linux DECnet Project
<br>                      ======================
<br>
<br>The documentation for this kernel subsystem is available in the
<br>Documentation/networking subdirectory of this distribution and also
<br>on line at http://www.chygwyn.com/DECnet/
<br>
<br>Steve Whitehouse <SteveW@ACM.org>
<br><p></p><div class="separator"></div><br><p><h2>Caffeine</h2></p>Copyright (C) 2017 by ATPC
<br>
<br>	This program is free software: you can redistribute it and/or modify
<br>	it under the terms of the GNU Lesser General Public License as
<br>	published by the Free Software Foundation, either version 3 of the
<br>	License, or (at your option) any later version.
<br>
<br>	This program is distributed in the hope that it will be useful,
<br>	but WITHOUT ANY WARRANTY; without even the implied warranty of
<br>	MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
<br>	GNU Lesser General Public License for more details.
<br>
<br>	You should have received a copy of the GNU Lesser General Public License
<br>	along with this program.  If not, see <http://www.gnu.org/licenses/>.
<br><p></p><div class="separator"></div><br><p><h2>libc</h2></p>Copyright (C) 2017 by ATPC
<br>
<br>	This program is free software: you can redistribute it and/or modify
<br>	it under the terms of the GNU Lesser General Public License as
<br>	published by the Free Software Foundation, either version 3 of the
<br>	License, or (at your option) any later version.
<br>
<br>	This program is distributed in the hope that it will be useful,
<br>	but WITHOUT ANY WARRANTY; without even the implied warranty of
<br>	MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
<br>	GNU Lesser General Public License for more details.
<br>
<br>	You should have received a copy of the GNU Lesser General Public License
<br>	along with this program.  If not, see <http://www.gnu.org/licenses/>.
<br></div></body></html>
